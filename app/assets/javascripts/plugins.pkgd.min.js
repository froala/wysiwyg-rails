/*!
 * froala_editor v3.1.0 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2020 Froala Labs
 */

!function (e, t) { "object" == typeof exports && "undefined" != typeof module ? t(require("froala-editor")) : "function" == typeof define && define.amd ? define(["froala-editor"], t) : t(e.FroalaEditor) }(this, function (mt) { "use strict"; function vt(e) { return (vt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e })(e) } if ((mt = mt && mt.hasOwnProperty("default") ? mt["default"] : mt).PLUGINS.align = function (i) { var r = i.$; return { apply: function o(e) { var t = i.selection.element(); if (r(t).parents(".fr-img-caption").length) r(t).css("text-align", e); else { i.selection.save(), i.html.wrap(!0, !0, !0, !0), i.selection.restore(); for (var a = i.selection.blocks(), n = 0; n < a.length; n++)r(a[n]).css("text-align", e).removeClass("fr-temp-div"), "" === r(a[n]).attr("class") && r(a[n]).removeAttr("class"), "" === r(a[n]).attr("style") && r(a[n]).removeAttr("style"); i.selection.save(), i.html.unwrap(), i.selection.restore() } }, refresh: function n(e) { var t = i.selection.blocks(); if (t.length) { var a = i.helpers.getAlignment(r(t[0])); e.find("> *").first().replaceWith(i.icon.create("align-".concat(a))) } }, refreshOnShow: function s(e, t) { var a = i.selection.blocks(); if (a.length) { var n = i.helpers.getAlignment(r(a[0])); t.find('a.fr-command[data-param1="'.concat(n, '"]')).addClass("fr-active").attr("aria-selected", !0) } }, refreshForToolbar: function l(e) { var t = i.selection.blocks(); if (t.length) { var a = i.helpers.getAlignment(r(t[0])); a = a.charAt(0).toUpperCase() + a.slice(1), "align".concat(a) === e.attr("data-cmd") && e.addClass("fr-active") } } } }, mt.DefineIcon("align", { NAME: "align-left", SVG_KEY: "alignLeft" }), mt.DefineIcon("align-left", { NAME: "align-left", SVG_KEY: "alignLeft" }), mt.DefineIcon("align-right", { NAME: "align-right", SVG_KEY: "alignRight" }), mt.DefineIcon("align-center", { NAME: "align-center", SVG_KEY: "alignCenter" }), mt.DefineIcon("align-justify", { NAME: "align-justify", SVG_KEY: "alignJustify" }), mt.RegisterCommand("align", { type: "dropdown", title: "Align", options: { left: "Align Left", center: "Align Center", right: "Align Right", justify: "Align Justify" }, html: function () { var e = '<ul class="fr-dropdown-list" role="presentation">', t = mt.COMMANDS.align.options; for (var a in t) t.hasOwnProperty(a) && (e += '<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="align"data-param1="\n        '.concat(a, '" title="').concat(this.language.translate(t[a]), '">').concat(this.icon.create("align-".concat(a)), '<span class="fr-sr-only">\n        ').concat(this.language.translate(t[a]), "</span></a></li>")); return e += "</ul>" }, callback: function (e, t) { this.align.apply(t) }, refresh: function (e) { this.align.refresh(e) }, refreshOnShow: function (e, t) { this.align.refreshOnShow(e, t) }, plugin: "align" }), mt.RegisterCommand("alignLeft", { type: "button", icon: "align-left", title: "Align Left", callback: function () { this.align.apply("left") }, refresh: function (e) { this.align.refreshForToolbar(e) }, plugin: "align" }), mt.RegisterCommand("alignRight", { type: "button", icon: "align-right", title: "Align Right", callback: function () { this.align.apply("right") }, refresh: function (e) { this.align.refreshForToolbar(e) }, plugin: "align" }), mt.RegisterCommand("alignCenter", { type: "button", icon: "align-center", title: "Align Center", callback: function () { this.align.apply("center") }, refresh: function (e) { this.align.refreshForToolbar(e) }, plugin: "align" }), mt.RegisterCommand("alignJustify", { type: "button", icon: "align-justify", title: "Align Justify", callback: function () { this.align.apply("justify") }, refresh: function (e) { this.align.refreshForToolbar(e) }, plugin: "align" }), Object.assign(mt.DEFAULTS, { charCounterMax: -1, charCounterCount: !0 }), mt.PLUGINS.charCounter = function (a) { var n, t = a.$, i = function i() { return (a.el.textContent || "").replace(/\u200B/g, "").length }; function e(e) { if (a.opts.charCounterMax < 0) return !0; if (i() < a.opts.charCounterMax) return !0; var t = e.which; return !(!a.keys.ctrlKey(e) && a.keys.isCharacter(t) || t === mt.KEYCODE.IME) || (e.preventDefault(), e.stopPropagation(), a.events.trigger("charCounter.exceeded"), !1) } function r(e) { return a.opts.charCounterMax < 0 ? e : t("<div>").html(e).text().length + i() <= a.opts.charCounterMax ? e : (a.events.trigger("charCounter.exceeded"), "") } function o() { if (a.opts.charCounterCount) { var e = i() + (0 < a.opts.charCounterMax ? "/" + a.opts.charCounterMax : ""); n.text("".concat(a.language.translate("Characters"), " : ").concat(e)), a.opts.toolbarBottom && n.css("margin-bottom", a.$tb.outerHeight(!0)); var t = a.$wp.get(0).offsetWidth - a.$wp.get(0).clientWidth; 0 <= t && ("rtl" == a.opts.direction ? n.css("margin-left", t) : n.css("margin-right", t)) } } return { _init: function s() { return !!a.$wp && !!a.opts.charCounterCount && ((n = t(document.createElement("span")).attr("class", "fr-counter")).css("bottom", a.$wp.css("border-bottom-width")), a.$second_tb && a.$second_tb.append(n), a.events.on("keydown", e, !0), a.events.on("paste.afterCleanup", r), a.events.on("keyup contentChanged input", function () { a.events.trigger("charCounter.update") }), a.events.on("charCounter.update", o), a.events.trigger("charCounter.update"), void a.events.on("destroy", function () { t(a.o_win).off("resize.char".concat(a.id)), n.removeData().remove(), n = null })) }, count: i } }, mt.PLUGINS.codeBeautifier = function () { var e, t, a, n, j = {}; function I(n, e) { var t = { "@page": !0, "@font-face": !0, "@keyframes": !0, "@media": !0, "@supports": !0, "@document": !0 }, a = { "@media": !0, "@supports": !0, "@document": !0 }; e = e || {}, n = (n = n || "").replace(/\r\n|[\r\u2028\u2029]/g, "\n"); var i = e.indent_size || 4, r = e.indent_char || " ", o = e.selector_separator_newline === undefined || e.selector_separator_newline, s = e.end_with_newline !== undefined && e.end_with_newline, l = e.newline_between_rules === undefined || e.newline_between_rules, c = e.eol ? e.eol : "\n"; "string" == typeof i && (i = parseInt(i, 10)), e.indent_with_tabs && (r = "\t", i = 1), c = c.replace(/\\r/, "\r").replace(/\\n/, "\n"); var d, f = /^\s+$/, p = -1, u = 0; function g() { return (d = n.charAt(++p)) || "" } function h(e) { var t, a = p; return e && v(), t = n.charAt(p + 1) || "", p = a - 1, g(), t } function m(e) { for (var t = p; g();)if ("\\" === d) g(); else { if (-1 !== e.indexOf(d)) break; if ("\n" === d) break } return n.substring(t, p + 1) } function v() { for (var e = ""; f.test(h());)g(), e += d; return e } function b() { var e = ""; for (d && f.test(d) && (e = d); f.test(g());)e += d; return e } function E(e) { var t = p; for (e = "/" === h(), g(); g();) { if (!e && "*" === d && "/" === h()) { g(); break } if (e && "\n" === d) return n.substring(t, p) } return n.substring(t, p) + d } function A(e) { return n.substring(p - e.length, p).toLowerCase() === e } function C() { for (var e = 0, t = p + 1; t < n.length; t++) { var a = n.charAt(t); if ("{" === a) return !0; if ("(" === a) e += 1; else if (")" === a) { if (0 === e) return !1; e -= 1 } else if (" " === a || "}" === a) return !1 } return !1 } var T = n.match(/^[\t ]*/)[0], R = new Array(i + 1).join(r), y = 0, w = 0; for (var S, L, _, I = { "{": function (e) { I.singleSpace(), x.push(e), I.newLine() }, "}": function (e) { I.newLine(), x.push(e), I.newLine() }, _lastCharWhitespace: function () { return f.test(x[x.length - 1]) }, newLine: function (e) { x.length && (e || "\n" === x[x.length - 1] || I.trim(), x.push("\n"), T && x.push(T)) }, singleSpace: function () { x.length && !I._lastCharWhitespace() && x.push(" ") }, preserveSingleSpace: function () { S && I.singleSpace() }, trim: function () { for (; I._lastCharWhitespace();)x.pop() } }, x = [], O = !1, k = !1, F = !1, D = "", M = ""; ;) { var N = b(); S = "" !== N; var B = -1 !== N.indexOf("\n"); if (M = D, !(D = d)) break; if ("/" === d && "*" === h()) { var P = 0 === y; (B || P) && I.newLine(), x.push(E()), I.newLine(), P && I.newLine(!0) } else if ("/" === d && "/" === h()) B || "{" === M || I.trim(), I.singleSpace(), x.push(E()), I.newLine(); else if ("@" === d) { I.preserveSingleSpace(), x.push(d); var U = (void 0, L = p, _ = m(": , {}()[]/='\""), p = L - 1, g(), _); U.match(/[ :]$/) && (g(), U = m(": ").replace(/\s$/, ""), x.push(U), I.singleSpace()), (U = U.replace(/\s$/, "")) in t && (w += 1, U in a && (F = !0)) } else "#" === d && "{" === h() ? (I.preserveSingleSpace(), x.push(m("}"))) : "{" === d ? "}" === h(!0) ? (v(), g(), I.singleSpace(), x.push("{}"), I.newLine(), l && 0 === y && I.newLine(!0)) : (y++, T += R, I["{"](d), O = F ? (F = !1, w < y) : w <= y) : "}" === d ? (y--, T = T.slice(0, -i), I["}"](d), k = O = !1, w && w--, l && 0 === y && I.newLine(!0)) : ":" === d ? (v(), !O && !F || A("&") || C() ? ":" === h() ? (g(), x.push("::")) : x.push(":") : (k = !0, x.push(":"), I.singleSpace())) : '"' === d || "'" === d ? (I.preserveSingleSpace(), x.push(m(d))) : " " === d ? (k = !1, x.push(d), I.newLine()) : "(" === d ? A("url") ? (x.push(d), v(), g() && (")" !== d && '"' !== d && "'" !== d ? x.push(m(")")) : p--)) : (u++, I.preserveSingleSpace(), x.push(d), v()) : ")" === d ? (x.push(d), u--) : "," === d ? (x.push(d), v(), o && !k && u < 1 ? I.newLine() : I.singleSpace()) : ("]" === d || ("[" === d ? I.preserveSingleSpace() : "=" === d ? (v(), d = "=") : I.preserveSingleSpace()), x.push(d)) } var $ = ""; return T && ($ += T), $ += x.join("").replace(/[\r\n\t ]+$/, ""), s && ($ += "\n"), "\n" != c && ($ = $.replace(/[\n]/g, c)), $ } function q(e, t) { for (var a = 0; a < t.length; a += 1)if (t[a] === e) return !0; return !1 } function X(e) { return e.replace(/^\s+|\s+$/g, "") } function x(e, t) { return new i(e, t).beautify() } e = j, t = "\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc", a = new RegExp("[".concat(t, "]")), n = new RegExp("[".concat(t, " ").concat("\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f", "]")), e.newline = /[\n\r\u2028\u2029]/, e.lineBreak = new RegExp("\r\n|".concat(e.newline.source)), e.allLineBreaks = new RegExp(e.lineBreak.source, "g"), e.isIdentifierStart = function (e) { return e < 65 ? 36 === e || 64 === e : e < 91 || (e < 97 ? 95 === e : e < 123 || 170 <= e && a.test(String.fromCharCode(e))) }, e.isIdentifierChar = function (e) { return e < 48 ? 36 === e : e < 58 || !(e < 65) && (e < 91 || (e < 97 ? 95 === e : e < 123 || 170 <= e && n.test(String.fromCharCode(e)))) }; var Q = { BlockStatement: "BlockStatement", Statement: "Statement", ObjectLiteral: "ObjectLiteral", ArrayLiteral: "ArrayLiteral", ForInitializer: "ForInitializer", Conditional: "Conditional", Expression: "Expression" }; function i(n, e) { var c, i, r, d, o, s, l, f, p, t, a, u, g, h = [], m = ""; function v(e, t) { var a = 0; return e && (a = e.indentation_level, !c.just_added_newline() && e.line_indent_level > a && (a = e.line_indent_level)), { mode: t, parent: e, last_text: e ? e.last_text : "", last_word: e ? e.last_word : "", declaration_statement: !1, declaration_assignment: !1, multiline_frame: !1, if_block: !1, else_block: !1, do_block: !1, do_while: !1, in_case_statement: !1, in_case: !1, case_body: !1, indentation_level: a, line_indent_level: e ? e.line_indent_level : a, start_line_index: c.get_line_number(), ternary_depth: 0 } } for (u = { TK_START_EXPR: function D() { x(); var e = Q.Expression; if ("[" === d.text) { if ("TK_WORD" === o || ")" === f.last_text) return "TK_RESERVED" === o && q(f.last_text, r.line_starters) && (c.space_before_token = !0), w(e), R(), y(), void (g.space_in_paren && (c.space_before_token = !0)); e = Q.ArrayLiteral, S(f.mode) && ("[" !== f.last_text && ("," !== f.last_text || "]" !== s && "}" !== s) || g.keep_array_indentation || C()) } else "TK_RESERVED" === o && "for" === f.last_text ? e = Q.ForInitializer : "TK_RESERVED" === o && q(f.last_text, ["if", "while"]) && (e = Q.Conditional); " " === f.last_text || "TK_START_BLOCK" === o ? C() : "TK_END_EXPR" === o || "TK_START_EXPR" === o || "TK_END_BLOCK" === o || "." === f.last_text ? A(d.wanted_newline) : "TK_RESERVED" === o && "(" === d.text || "TK_WORD" === o || "TK_OPERATOR" === o ? "TK_RESERVED" === o && ("function" === f.last_word || "typeof" === f.last_word) || "*" === f.last_text && "function" === s ? g.space_after_anon_function && (c.space_before_token = !0) : "TK_RESERVED" !== o || !q(f.last_text, r.line_starters) && "catch" !== f.last_text || g.space_before_conditional && (c.space_before_token = !0) : c.space_before_token = !0; "(" === d.text && "TK_RESERVED" === o && "await" === f.last_word && (c.space_before_token = !0); "(" === d.text && ("TK_EQUALS" !== o && "TK_OPERATOR" !== o || I() || A()); w(e), R(), g.space_in_paren && (c.space_before_token = !0); y() }, TK_END_EXPR: function M() { for (; f.mode === Q.Statement;)_(); f.multiline_frame && A("]" === d.text && S(f.mode) && !g.keep_array_indentation); g.space_in_paren && ("TK_START_EXPR" !== o || g.space_in_empty_paren ? c.space_before_token = !0 : (c.trim(), c.space_before_token = !1)); "]" === d.text && g.keep_array_indentation ? (R(), _()) : (_(), R()); c.remove_redundant_indentation(p), f.do_while && p.mode === Q.Conditional && (p.mode = Q.Expression, f.do_block = !1, f.do_while = !1) }, TK_START_BLOCK: function N() { var e = k(1), t = k(2); t && (":" === t.text && q(e.type, ["TK_STRING", "TK_WORD", "TK_RESERVED"]) || q(e.text, ["get", "set"]) && q(t.type, ["TK_WORD", "TK_RESERVED"])) ? q(s, ["class", "interface"]) ? w(Q.BlockStatement) : w(Q.ObjectLiteral) : w(Q.BlockStatement); var a = !e.comments_before.length && "}" === e.text && "function" === f.last_word && "TK_END_EXPR" === o; "expand" === g.brace_style || "none" === g.brace_style && d.wanted_newline ? "TK_OPERATOR" !== o && (a || "TK_EQUALS" === o || "TK_RESERVED" === o && O(f.last_text) && "else" !== f.last_text) ? c.space_before_token = !0 : C(!1, !0) : "TK_OPERATOR" !== o && "TK_START_EXPR" !== o ? "TK_START_BLOCK" === o ? C() : c.space_before_token = !0 : S(p.mode) && "," === f.last_text && ("}" === s ? c.space_before_token = !0 : C()); R(), y() }, TK_END_BLOCK: function B() { for (; f.mode === Q.Statement;)_(); var e = "TK_START_BLOCK" === o; "expand" === g.brace_style ? e || C() : e || (S(f.mode) && g.keep_array_indentation ? (g.keep_array_indentation = !1, C(), g.keep_array_indentation = !0) : C()); _(), R() }, TK_WORD: F, TK_RESERVED: F, TK_SEMICOLON: function P() { x() && (c.space_before_token = !1); for (; f.mode === Q.Statement && !f.if_block && !f.do_block;)_(); R() }, TK_STRING: function U() { x() ? c.space_before_token = !0 : "TK_RESERVED" === o || "TK_WORD" === o ? c.space_before_token = !0 : "TK_COMMA" === o || "TK_START_EXPR" === o || "TK_EQUALS" === o || "TK_OPERATOR" === o ? I() || A() : C(); R() }, TK_EQUALS: function $() { x(); f.declaration_statement && (f.declaration_assignment = !0); c.space_before_token = !0, R(), c.space_before_token = !0 }, TK_OPERATOR: function W() { x(); if ("TK_RESERVED" === o && O(f.last_text)) return c.space_before_token = !0, void R(); if ("*" === d.text && "TK_DOT" === o) return void R(); if (":" === d.text && f.in_case) return f.case_body = !0, y(), R(), C(), void (f.in_case = !1); if ("::" === d.text) return void R(); "TK_OPERATOR" === o && A(); var e = !0, t = !0; q(d.text, ["--", "++", "!", "~"]) || q(d.text, ["-", "+"]) && (q(o, ["TK_START_BLOCK", "TK_START_EXPR", "TK_EQUALS", "TK_OPERATOR"]) || q(f.last_text, r.line_starters) || "," === f.last_text) ? (t = e = !1, !d.wanted_newline || "--" !== d.text && "++" !== d.text || C(!1, !0), " " === f.last_text && L(f.mode) && (e = !0), "TK_RESERVED" === o ? e = !0 : "TK_END_EXPR" === o ? e = !("]" === f.last_text && ("--" === d.text || "++" === d.text)) : "TK_OPERATOR" === o && (e = q(d.text, ["--", "-", "++", "+"]) && q(f.last_text, ["--", "-", "++", "+"]), q(d.text, ["+", "-"]) && q(f.last_text, ["--", "++"]) && (t = !0)), f.mode !== Q.BlockStatement && f.mode !== Q.Statement || "{" !== f.last_text && " " !== f.last_text || C()) : ":" === d.text ? 0 === f.ternary_depth ? e = !1 : f.ternary_depth -= 1 : "?" === d.text ? f.ternary_depth += 1 : "*" === d.text && "TK_RESERVED" === o && "function" === f.last_text && (t = e = !1); c.space_before_token = c.space_before_token || e, R(), c.space_before_token = t }, TK_COMMA: function K() { if (f.declaration_statement) return L(f.parent.mode) && (f.declaration_assignment = !1), R(), void (f.declaration_assignment ? C(f.declaration_assignment = !1, !0) : (c.space_before_token = !0, g.comma_first && A())); R(), f.mode === Q.ObjectLiteral || f.mode === Q.Statement && f.parent.mode === Q.ObjectLiteral ? (f.mode === Q.Statement && _(), C()) : (c.space_before_token = !0, g.comma_first && A()) }, TK_BLOCK_COMMENT: function H() { if (c.raw) return c.add_raw_token(d), void (d.directives && "end" === d.directives.preserve && (g.test_output_raw || (c.raw = !1))); if (d.directives) return C(!1, !0), R(), "start" === d.directives.preserve && (c.raw = !0), void C(!1, !0); if (!j.newline.test(d.text) && !d.wanted_newline) return c.space_before_token = !0, R(), void (c.space_before_token = !0); var e, t = function o(e) { var t; e = e.replace(/\x0d/g, ""); var a = []; t = e.indexOf("\n"); for (; -1 !== t;)a.push(e.substring(0, t)), e = e.substring(t + 1), t = e.indexOf("\n"); e.length && a.push(e); return a }(d.text), a = !1, n = !1, i = d.whitespace_before, r = i.length; C(!1, !0), 1 < t.length && (!function s(e, t) { for (var a = 0; a < e.length; a++) { var n = X(e[a]); if (n.charAt(0) !== t) return !1 } return !0 }(t.slice(1), "*") ? function l(e, t) { for (var a, n = 0, i = e.length; n < i; n++)if ((a = e[n]) && 0 !== a.indexOf(t)) return !1; return !0 }(t.slice(1), i) && (n = !0) : a = !0); for (R(t[0]), e = 1; e < t.length; e++)C(!1, !0), a ? R(" ".concat(t[e].replace(/^\s+/g, ""))) : n && t[e].length > r ? R(t[e].substring(r)) : c.add_token(t[e]); C(!1, !0) }, TK_COMMENT: function G() { d.wanted_newline ? C(!1, !0) : c.trim(!0); c.space_before_token = !0, R(), C(!1, !0) }, TK_DOT: function Y() { x(); "TK_RESERVED" === o && O(f.last_text) ? c.space_before_token = !0 : A(")" === f.last_text && g.break_chained_methods); R() }, TK_UNKNOWN: function z() { R(), "\n" === d.text[d.text.length - 1] && C() }, TK_EOF: function V() { for (; f.mode === Q.Statement;)_() } }, g = {}, (e = e || {}).braces_on_own_line !== undefined && (g.brace_style = e.braces_on_own_line ? "expand" : "collapse"), g.brace_style = e.brace_style ? e.brace_style : g.brace_style ? g.brace_style : "collapse", "expand-strict" === g.brace_style && (g.brace_style = "expand"), g.indent_size = e.indent_size ? parseInt(e.indent_size, 10) : 4, g.indent_char = e.indent_char ? e.indent_char : " ", g.eol = e.eol ? e.eol : "\n", g.preserve_newlines = e.preserve_newlines === undefined || e.preserve_newlines, g.break_chained_methods = e.break_chained_methods !== undefined && e.break_chained_methods, g.max_preserve_newlines = e.max_preserve_newlines === undefined ? 0 : parseInt(e.max_preserve_newlines, 10), g.space_in_paren = e.space_in_paren !== undefined && e.space_in_paren, g.space_in_empty_paren = e.space_in_empty_paren !== undefined && e.space_in_empty_paren, g.jslint_happy = e.jslint_happy !== undefined && e.jslint_happy, g.space_after_anon_function = e.space_after_anon_function !== undefined && e.space_after_anon_function, g.keep_array_indentation = e.keep_array_indentation !== undefined && e.keep_array_indentation, g.space_before_conditional = e.space_before_conditional === undefined || e.space_before_conditional, g.unescape_strings = e.unescape_strings !== undefined && e.unescape_strings, g.wrap_line_length = e.wrap_line_length === undefined ? 0 : parseInt(e.wrap_line_length, 10), g.e4x = e.e4x !== undefined && e.e4x, g.end_with_newline = e.end_with_newline !== undefined && e.end_with_newline, g.comma_first = e.comma_first !== undefined && e.comma_first, g.test_output_raw = e.test_output_raw !== undefined && e.test_output_raw, g.jslint_happy && (g.space_after_anon_function = !0), e.indent_with_tabs && (g.indent_char = "\t", g.indent_size = 1), g.eol = g.eol.replace(/\\r/, "\r").replace(/\\n/, "\n"), l = ""; 0 < g.indent_size;)l += g.indent_char, g.indent_size -= 1; var b = 0; if (n && n.length) { for (; " " === n.charAt(b) || "\t" === n.charAt(b);)m += n.charAt(b), b += 1; n = n.substring(b) } function E(e) { var t = e.newlines; if (g.keep_array_indentation && S(f.mode)) for (var a = 0; a < t; a += 1)C(0 < a); else if (g.max_preserve_newlines && t > g.max_preserve_newlines && (t = g.max_preserve_newlines), g.preserve_newlines && 1 < e.newlines) { C(); for (var n = 1; n < t; n += 1)C(!0) } u[(d = e).type]() } function A(e) { if (e = e !== undefined && e, !c.just_added_newline()) if (g.preserve_newlines && d.wanted_newline || e) C(!1, !0); else if (g.wrap_line_length) { c.current_line.get_character_count() + d.text.length + (c.space_before_token ? 1 : 0) >= g.wrap_line_length && C(!1, !0) } } function C(e, t) { if (!t && " " !== f.last_text && "," !== f.last_text && "=" !== f.last_text && "TK_OPERATOR" !== o) for (; f.mode === Q.Statement && !f.if_block && !f.do_block;)_(); c.add_new_line(e) && (f.multiline_frame = !0) } function T() { c.just_added_newline() && (g.keep_array_indentation && S(f.mode) && d.wanted_newline ? (c.current_line.push(d.whitespace_before), c.space_before_token = !1) : c.set_indent(f.indentation_level) && (f.line_indent_level = f.indentation_level)) } function R(e) { c.raw ? c.add_raw_token(d) : (g.comma_first && "TK_COMMA" === o && c.just_added_newline() && "," === c.previous_line.last() && (c.previous_line.pop(), T(), c.add_token(","), c.space_before_token = !0), e = e || d.text, T(), c.add_token(e)) } function y() { f.indentation_level += 1 } function w(e) { p = f ? (t.push(f), f) : v(null, e), f = v(p, e) } function S(e) { return e === Q.ArrayLiteral } function L(e) { return q(e, [Q.Expression, Q.ForInitializer, Q.Conditional]) } function _() { 0 < t.length && (p = f, f = t.pop(), p.mode === Q.Statement && c.remove_redundant_indentation(p)) } function I() { return f.parent.mode === Q.ObjectLiteral && f.mode === Q.Statement && (":" === f.last_text && 0 === f.ternary_depth || "TK_RESERVED" === o && q(f.last_text, ["get", "set"])) } function x() { return !!("TK_RESERVED" === o && q(f.last_text, ["const", "let", "const"]) && "TK_WORD" === d.type || "TK_RESERVED" === o && "do" === f.last_text || "TK_RESERVED" === o && "return" === f.last_text && !d.wanted_newline || "TK_RESERVED" === o && "else" === f.last_text && ("TK_RESERVED" !== d.type || "if" !== d.text) || "TK_END_EXPR" === o && (p.mode === Q.ForInitializer || p.mode === Q.Conditional) || "TK_WORD" === o && f.mode === Q.BlockStatement && !f.in_case && "--" !== d.text && "++" !== d.text && "function" !== s && "TK_WORD" !== d.type && "TK_RESERVED" !== d.type || f.mode === Q.ObjectLiteral && (":" === f.last_text && 0 === f.ternary_depth || "TK_RESERVED" === o && q(f.last_text, ["get", "set"]))) && (w(Q.Statement), y(), "TK_RESERVED" === o && q(f.last_text, ["const", "let", "const"]) && "TK_WORD" === d.type && (f.declaration_statement = !0), I() || A("TK_RESERVED" === d.type && q(d.text, ["do", "for", "if", "while"])), !0) } function O(e) { return q(e, ["case", "return", "do", "if", "throw", "else"]) } function k(e) { var t = i + (e || 0); return t < 0 || t >= h.length ? null : h[t] } function F() { ("TK_RESERVED" === d.type && f.mode !== Q.ObjectLiteral && q(d.text, ["set", "get"]) && (d.type = "TK_WORD"), "TK_RESERVED" === d.type && f.mode === Q.ObjectLiteral) && (":" === k(1).text && (d.type = "TK_WORD")); if (x() || !d.wanted_newline || L(f.mode) || "TK_OPERATOR" === o && "--" !== f.last_text && "++" !== f.last_text || "TK_EQUALS" === o || !g.preserve_newlines && "TK_RESERVED" === o && q(f.last_text, ["const", "let", "const", "set", "get"]) || C(), f.do_block && !f.do_while) { if ("TK_RESERVED" === d.type && "while" === d.text) return c.space_before_token = !0, R(), c.space_before_token = !0, void (f.do_while = !0); C(), f.do_block = !1 } if (f.if_block) if (f.else_block || "TK_RESERVED" !== d.type || "else" !== d.text) { for (; f.mode === Q.Statement;)_(); f.if_block = !1, f.else_block = !1 } else f.else_block = !0; if ("TK_RESERVED" === d.type && ("case" === d.text || "default" === d.text && f.in_case_statement)) return C(), (f.case_body || g.jslint_happy) && (!function e() { 0 < f.indentation_level && (!f.parent || f.indentation_level > f.parent.indentation_level) && (f.indentation_level -= 1) }(), f.case_body = !1), R(), f.in_case = !0, void (f.in_case_statement = !0); if ("TK_RESERVED" === d.type && "function" === d.text && ((q(f.last_text, ["}", " "]) || c.just_added_newline() && !q(f.last_text, ["[", "{", ":", "=", ","])) && (c.just_added_blankline() || d.comments_before.length || (C(), C(!0))), "TK_RESERVED" === o || "TK_WORD" === o ? "TK_RESERVED" === o && q(f.last_text, ["get", "set", "new", "return", "export", "async"]) ? c.space_before_token = !0 : "TK_RESERVED" === o && "default" === f.last_text && "export" === s ? c.space_before_token = !0 : C() : "TK_OPERATOR" === o || "=" === f.last_text ? c.space_before_token = !0 : (f.multiline_frame || !L(f.mode) && !S(f.mode)) && C()), "TK_COMMA" !== o && "TK_START_EXPR" !== o && "TK_EQUALS" !== o && "TK_OPERATOR" !== o || I() || A(), "TK_RESERVED" === d.type && q(d.text, ["function", "get", "set"])) return R(), void (f.last_word = d.text); (a = "NONE", "TK_END_BLOCK" === o ? "TK_RESERVED" === d.type && q(d.text, ["else", "catch", "finally"]) ? "expand" === g.brace_style || "end-expand" === g.brace_style || "none" === g.brace_style && d.wanted_newline ? a = "NEWLINE" : (a = "SPACE", c.space_before_token = !0) : a = "NEWLINE" : "TK_SEMICOLON" === o && f.mode === Q.BlockStatement ? a = "NEWLINE" : "TK_SEMICOLON" === o && L(f.mode) ? a = "SPACE" : "TK_STRING" === o ? a = "NEWLINE" : "TK_RESERVED" === o || "TK_WORD" === o || "*" === f.last_text && "function" === s ? a = "SPACE" : "TK_START_BLOCK" === o ? a = "NEWLINE" : "TK_END_EXPR" === o && (c.space_before_token = !0, a = "NEWLINE"), "TK_RESERVED" === d.type && q(d.text, r.line_starters) && ")" !== f.last_text && (a = "else" === f.last_text || "export" === f.last_text ? "SPACE" : "NEWLINE"), "TK_RESERVED" === d.type && q(d.text, ["else", "catch", "finally"])) ? "TK_END_BLOCK" !== o || "expand" === g.brace_style || "end-expand" === g.brace_style || "none" === g.brace_style && d.wanted_newline ? C() : (c.trim(!0), "}" !== c.current_line.last() && C(), c.space_before_token = !0) : "NEWLINE" === a ? "TK_RESERVED" === o && O(f.last_text) ? c.space_before_token = !0 : "TK_END_EXPR" !== o ? "TK_START_EXPR" === o && "TK_RESERVED" === d.type && q(d.text, ["const", "let", "const"]) || ":" === f.last_text || ("TK_RESERVED" === d.type && "if" === d.text && "else" === f.last_text ? c.space_before_token = !0 : C()) : "TK_RESERVED" === d.type && q(d.text, r.line_starters) && ")" !== f.last_text && C() : f.multiline_frame && S(f.mode) && "," === f.last_text && "}" === s ? C() : "SPACE" === a && (c.space_before_token = !0); R(), f.last_word = d.text, "TK_RESERVED" === d.type && "do" === d.text && (f.do_block = !0), "TK_RESERVED" === d.type && "if" === d.text && (f.if_block = !0) } o = "TK_START_BLOCK", s = "", (c = new Z(l, m)).raw = g.test_output_raw, t = [], w(Q.BlockStatement), this.beautify = function () { var e, t; for (r = new ee(n, g, l), h = r.tokenize(), i = 0; e = k();) { for (var a = 0; a < e.comments_before.length; a++)E(e.comments_before[a]); E(e), s = f.last_text, o = e.type, f.last_text = e.text, i += 1 } return t = c.get_code(), g.end_with_newline && (t += "\n"), "\n" != g.eol && (t = t.replace(/[\n]/g, g.eol)), t } } function r(t) { var a = 0, n = -1, i = [], r = !0; this.set_indent = function (e) { a = t.baseIndentLength + e * t.indent_length, n = e }, this.get_character_count = function () { return a }, this.is_empty = function () { return r }, this.last = function () { return this._empty ? null : i[i.length - 1] }, this.push = function (e) { i.push(e), a += e.length, r = !1 }, this.pop = function () { var e = null; return r || (e = i.pop(), a -= e.length, r = 0 === i.length), e }, this.remove_indent = function () { 0 < n && (n -= 1, a -= t.indent_length) }, this.trim = function () { for (; " " === this.last();)i.pop(), a -= 1; r = 0 === i.length }, this.toString = function () { var e = ""; return this._empty || (0 <= n && (e = t.indent_cache[n]), e += i.join("")), e } } function Z(t, a) { a = a || "", this.indent_cache = [a], this.baseIndentLength = a.length, this.indent_length = t.length, this.raw = !1; var n = []; this.baseIndentString = a, this.indent_string = t, this.previous_line = null, this.current_line = null, this.space_before_token = !1, this.add_outputline = function () { this.previous_line = this.current_line, this.current_line = new r(this), n.push(this.current_line) }, this.add_outputline(), this.get_line_number = function () { return n.length }, this.add_new_line = function (e) { return (1 !== this.get_line_number() || !this.just_added_newline()) && (!(!e && this.just_added_newline()) && (this.raw || this.add_outputline(), !0)) }, this.get_code = function () { return n.join("\n").replace(/[\r\n\t ]+$/, "") }, this.set_indent = function (e) { if (1 < n.length) { for (; e >= this.indent_cache.length;)this.indent_cache.push(this.indent_cache[this.indent_cache.length - 1] + this.indent_string); return this.current_line.set_indent(e), !0 } return this.current_line.set_indent(0), !1 }, this.add_raw_token = function (e) { for (var t = 0; t < e.newlines; t++)this.add_outputline(); this.current_line.push(e.whitespace_before), this.current_line.push(e.text), this.space_before_token = !1 }, this.add_token = function (e) { this.add_space_before_token(), this.current_line.push(e) }, this.add_space_before_token = function () { this.space_before_token && !this.just_added_newline() && this.current_line.push(" "), this.space_before_token = !1 }, this.remove_redundant_indentation = function (e) { if (!e.multiline_frame && e.mode !== Q.ForInitializer && e.mode !== Q.Conditional) for (var t = e.start_line_index, a = n.length; t < a;)n[t].remove_indent(), t++ }, this.trim = function (e) { for (e = e !== undefined && e, this.current_line.trim(t, a); e && 1 < n.length && this.current_line.is_empty();)n.pop(), this.current_line = n[n.length - 1], this.current_line.trim(); this.previous_line = 1 < n.length ? n[n.length - 2] : null }, this.just_added_newline = function () { return this.current_line.is_empty() }, this.just_added_blankline = function () { return !!this.just_added_newline() && (1 === n.length || n[n.length - 2].is_empty()) } } var J = function J(e, t, a, n, i, r) { this.type = e, this.text = t, this.comments_before = [], this.newlines = a || 0, this.wanted_newline = 0 < a, this.whitespace_before = n || "", this.parent = null, this.directives = null }; function ee(_, I, e) { var x = "\n\r\t ".split(""), O = /[0-9]/, k = /[01234567]/, F = /[0123456789abcdefABCDEF]/, D = "+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! ~ , : ? ^ ^= |= :: =>".split(" "); this.line_starters = "continue,try,throw,return,const,let,const,if,switch,case,default,for,while,break,function,import,export".split(","); var M, N, B, P, U, $, W = this.line_starters.concat(["do", "in", "else", "get", "set", "new", "catch", "finally", "typeof", "yield", "async", "await"]), K = /([\s\S]*?)((?:\*\/)|$)/g, H = /([^\n\r\u2028\u2029]*)/g, G = /\/\* beautify( \w+[:]\w+)+ \*\//g, Y = / (\w+)[:](\w+)/g, z = /([\s\S]*?)((?:\/\*\sbeautify\signore:end\s\*\/)|$)/g, V = /((<\?php|<\?=)[\s\S]*?\?>)|(<%[\s\S]*?%>)/g; function o() { var e, t, a = []; if (M = 0, N = "", $ <= U) return ["", "TK_EOF"]; t = P.length ? P[P.length - 1] : new J("TK_START_BLOCK", "{"); var n = _.charAt(U); for (U += 1; q(n, x);) { if (j.newline.test(n) ? "\n" === n && "\r" === _.charAt(U - 2) || (M += 1, a = []) : a.push(n), $ <= U) return ["", "TK_EOF"]; n = _.charAt(U), U += 1 } if (a.length && (N = a.join("")), O.test(n)) { var i = !0, r = !0, o = O; for ("0" === n && U < $ && /[Xxo]/.test(_.charAt(U)) ? (r = i = !1, n += _.charAt(U), U += 1, o = /[o]/.test(_.charAt(U)) ? k : F) : (n = "", U -= 1); U < $ && o.test(_.charAt(U));)n += _.charAt(U), U += 1, i && U < $ && "." === _.charAt(U) && (n += _.charAt(U), U += 1, i = !1), r && U < $ && /[Ee]/.test(_.charAt(U)) && (n += _.charAt(U), (U += 1) < $ && /[+-]/.test(_.charAt(U)) && (n += _.charAt(U), U += 1), i = r = !1); return [n, "TK_WORD"] } if (j.isIdentifierStart(_.charCodeAt(U - 1))) { if (U < $) for (; j.isIdentifierChar(_.charCodeAt(U)) && (n += _.charAt(U), (U += 1) !== $);); return "TK_DOT" === t.type || "TK_RESERVED" === t.type && q(t.text, ["set", "get"]) || !q(n, W) ? [n, "TK_WORD"] : "in" === n ? [n, "TK_OPERATOR"] : [n, "TK_RESERVED"] } if ("(" === n || "[" === n) return [n, "TK_START_EXPR"]; if (")" === n || "]" === n) return [n, "TK_END_EXPR"]; if ("{" === n) return [n, "TK_START_BLOCK"]; if ("}" === n) return [n, "TK_END_BLOCK"]; if (" " === n) return [n, "TK_SEMICOLON"]; if ("/" === n) { var s = ""; if ("*" === _.charAt(U)) { U += 1, K.lastIndex = U; var l = K.exec(_); s = "/*".concat(l[0]), U += l[0].length; var c = function S(e) { if (!e.match(G)) return null; var t = {}; Y.lastIndex = 0; for (var a = Y.exec(e); a;)t[a[1]] = a[2], a = Y.exec(e); return t }(s); return c && "start" === c.ignore && (z.lastIndex = U, s += (l = z.exec(_))[0], U += l[0].length), [s = s.replace(j.lineBreak, "\n"), "TK_BLOCK_COMMENT", c] } if ("/" === _.charAt(U)) { U += 1, H.lastIndex = U; var d = H.exec(_); return s = "//".concat(d[0]), U += d[0].length, [s, "TK_COMMENT"] } } if ("`" === n || "'" === n || '"' === n || ("/" === n || I.e4x && "<" === n && _.slice(U - 1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/)) && ("TK_RESERVED" === t.type && q(t.text, ["return", "case", "throw", "else", "do", "typeof", "yield"]) || "TK_END_EXPR" === t.type && ")" === t.text && t.parent && "TK_RESERVED" === t.parent.type && q(t.parent.text, ["if", "while", "for"]) || q(t.type, ["TK_COMMENT", "TK_START_EXPR", "TK_START_BLOCK", "TK_END_BLOCK", "TK_OPERATOR", "TK_EQUALS", "TK_EOF", "TK_SEMICOLON", "TK_COMMA"]))) { var f = n, p = !1, u = !1; if (e = n, "/" === f) for (var g = !1; U < $ && (p || g || _.charAt(U) !== f) && !j.newline.test(_.charAt(U));)e += _.charAt(U), p ? p = !1 : (p = "\\" === _.charAt(U), "[" === _.charAt(U) ? g = !0 : "]" === _.charAt(U) && (g = !1)), U += 1; else if (I.e4x && "<" === f) { var h = /<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/g, m = _.slice(U - 1), v = h.exec(m); if (v && 0 === v.index) { for (var b = v[2], E = 0; v;) { var A = !!v[1], C = v[2], T = !!v[v.length - 1] || "![CDATA[" === C.slice(0, 8); if (C !== b || T || (A ? --E : ++E), E <= 0) break; v = h.exec(m) } var R = v ? v.index + v[0].length : m.length; return m = m.slice(0, R), U += R - 1, [m = m.replace(j.lineBreak, "\n"), "TK_STRING"] } } else for (; U < $ && (p || _.charAt(U) !== f && ("`" === f || !j.newline.test(_.charAt(U))));)(p || "`" === f) && j.newline.test(_.charAt(U)) ? ("\r" === _.charAt(U) && "\n" === _.charAt(U + 1) && (U += 1), e += "\n") : e += _.charAt(U), p = p ? ("x" !== _.charAt(U) && "u" !== _.charAt(U) || (u = !0), !1) : "\\" === _.charAt(U), U += 1; if (u && I.unescape_strings && (e = function L(e) { var t, a = !1, n = "", i = 0, r = "", o = 0; for (; a || i < e.length;)if (t = e.charAt(i), i++, a) { if (a = !1, "x" === t) r = e.substr(i, 2), i += 2; else { if ("u" !== t) { n += "\\".concat(t); continue } r = e.substr(i, 4), i += 4 } if (!r.match(/^[0123456789abcdefABCDEF]+$/)) return e; if (0 <= (o = parseInt(r, 16)) && o < 32) { n += "x" === t ? "\\x".concat(r) : "\\u".concat(r); continue } if (34 === o || 39 === o || 92 === o) n += "\\".concat(String.fromCharCode(o)); else { if ("x" === t && 126 < o && o <= 255) return e; n += String.fromCharCode(o) } } else "\\" === t ? a = !0 : n += t; return n }(e)), U < $ && _.charAt(U) === f && (e += f, U += 1, "/" === f)) for (; U < $ && j.isIdentifierStart(_.charCodeAt(U));)e += _.charAt(U), U += 1; return [e, "TK_STRING"] } if ("#" === n) { if (0 === P.length && "!" === _.charAt(U)) { for (e = n; U < $ && "\n" !== n;)e += n = _.charAt(U), U += 1; return ["".concat(X(e), "\n"), "TK_UNKNOWN"] } var y = "#"; if (U < $ && O.test(_.charAt(U))) { for (; y += n = _.charAt(U), (U += 1) < $ && "#" !== n && "=" !== n;); return "#" === n || ("[" === _.charAt(U) && "]" === _.charAt(U + 1) ? (y += "[]", U += 2) : "{" === _.charAt(U) && "}" === _.charAt(U + 1) && (y += "{}", U += 2)), [y, "TK_WORD"] } } if ("<" === n && ("?" === _.charAt(U) || "%" === _.charAt(U))) { V.lastIndex = U - 1; var w = V.exec(_); if (w) return n = w[0], U += n.length - 1, [n = n.replace(j.lineBreak, "\n"), "TK_STRING"] } if ("<" === n && "\x3c!--" === _.substring(U - 1, U + 3)) { for (U += 3, n = "\x3c!--"; !j.newline.test(_.charAt(U)) && U < $;)n += _.charAt(U), U++; return B = !0, [n, "TK_COMMENT"] } if ("-" === n && B && "--\x3e" === _.substring(U - 1, U + 2)) return B = !1, U += 2, ["--\x3e", "TK_COMMENT"]; if ("." === n) return [n, "TK_DOT"]; if (q(n, D)) { for (; U < $ && q(n + _.charAt(U), D) && (n += _.charAt(U), !($ <= (U += 1)));); return "," === n ? [n, "TK_COMMA"] : "=" === n ? [n, "TK_EQUALS"] : [n, "TK_OPERATOR"] } return [n, "TK_UNKNOWN"] } this.tokenize = function () { var e, t, a; $ = _.length, U = 0, B = !1, P = []; for (var n = null, i = [], r = []; !t || "TK_EOF" !== t.type;) { for (a = o(), e = new J(a[1], a[0], M, N); "TK_COMMENT" === e.type || "TK_BLOCK_COMMENT" === e.type || "TK_UNKNOWN" === e.type;)"TK_BLOCK_COMMENT" === e.type && (e.directives = a[2]), r.push(e), a = o(), e = new J(a[1], a[0], M, N); r.length && (e.comments_before = r, r = []), "TK_START_BLOCK" === e.type || "TK_START_EXPR" === e.type ? (e.parent = t, i.push(n), n = e) : ("TK_END_BLOCK" === e.type || "TK_END_EXPR" === e.type) && n && ("]" === e.text && "[" === n.text || ")" === e.text && "(" === n.text || "}" === e.text && "{" === n.text) && (e.parent = n.parent, n = i.pop()), P.push(e), t = e } return P } } return { run: function O(e, t) { function o(e) { return e.replace(/\s+$/g, "") } var a, n, i, m, r, s, v, l, c, b, E, A, d, f; for ((t = t || {}).wrap_line_length !== undefined && 0 !== parseInt(t.wrap_line_length, 10) || t.max_char === undefined || 0 === parseInt(t.max_char, 10) || (t.wrap_line_length = t.max_char), n = t.indent_inner_html !== undefined && t.indent_inner_html, i = t.indent_size === undefined ? 4 : parseInt(t.indent_size, 10), m = t.indent_char === undefined ? " " : t.indent_char, s = t.brace_style === undefined ? "collapse" : t.brace_style, r = 0 === parseInt(t.wrap_line_length, 10) ? 32786 : parseInt(t.wrap_line_length || 250, 10), v = t.unformatted || ["a", "span", "img", "bdo", "em", "strong", "dfn", "code", "samp", "kbd", "const", "cite", "abbr", "acronym", "q", "sub", "sup", "tt", "i", "b", "big", "small", "u", "s", "strike", "font", "ins", "del", "address", "pre"], l = t.preserve_newlines === undefined || t.preserve_newlines, c = l ? isNaN(parseInt(t.max_preserve_newlines, 10)) ? 32786 : parseInt(t.max_preserve_newlines, 10) : 0, b = t.indent_handlebars !== undefined && t.indent_handlebars, E = t.wrap_attributes === undefined ? "auto" : t.wrap_attributes, A = t.wrap_attributes_indent_size === undefined ? i : parseInt(t.wrap_attributes_indent_size, 10) || i, d = t.end_with_newline !== undefined && t.end_with_newline, f = Array.isArray(t.extra_liners) ? t.extra_liners.concat() : "string" == typeof t.extra_liners ? t.extra_liners.split(",") : "head,body,/html".split(","), t.indent_with_tabs && (m = "\t", i = 1), (a = new function _() { return this.pos = 0, this.token = "", this.current_mode = "CONTENT", this.tags = { parent: "parent1", parentcount: 1, parent1: "" }, this.tag_type = "", this.token_text = this.last_token = this.last_text = this.token_type = "", this.newlines = 0, this.indent_content = n, this.Utils = { whitespace: "\n\r\t ".split(""), single_token: "br,input,link,meta,source,!doctype,basefont,base,area,hr,wbr,param,img,isindex,embed".split(","), extra_liners: f, in_array: function (e, t) { for (var a = 0; a < t.length; a++)if (e === t[a]) return !0; return !1 } }, this.is_whitespace = function (e) { for (; 0 < e.length; e++)if (!this.Utils.in_array(e.charAt(0), this.Utils.whitespace)) return !1; return !0 }, this.traverse_whitespace = function () { var e = ""; if (e = this.input.charAt(this.pos), this.Utils.in_array(e, this.Utils.whitespace)) { for (this.newlines = 0; this.Utils.in_array(e, this.Utils.whitespace);)l && "\n" === e && this.newlines <= c && (this.newlines += 1), this.pos++, e = this.input.charAt(this.pos); return !0 } return !1 }, this.space_or_wrap = function (e) { this.line_char_count >= this.wrap_line_length ? (this.print_newline(!1, e), this.print_indentation(e)) : (this.line_char_count++, e.push(" ")) }, this.get_content = function () { for (var e = "", t = []; "<" != this.input.charAt(this.pos);) { if (this.pos >= this.input.length) return t.length ? t.join("") : ["", "TK_EOF"]; if (this.traverse_whitespace()) this.space_or_wrap(t); else { if (b) { var a = this.input.substr(this.pos, 3); if ("{{#" === a || "{{/" === a) break; if ("{{!" === a) return [this.get_tag(), "TK_TAG_HANDLEBARS_COMMENT"]; if ("{{" === this.input.substr(this.pos, 2) && "{{else}}" === this.get_tag(!0)) break } e = this.input.charAt(this.pos), this.pos++, this.line_char_count++, t.push(e) } } return t.length ? t.join("") : "" }, this.get_contents_to = function (e) { if (this.pos === this.input.length) return ["", "TK_EOF"]; var t = "", a = new RegExp("</".concat(e, "\\s*>"), "igm"); a.lastIndex = this.pos; var n = a.exec(this.input), i = n ? n.index : this.input.length; return this.pos < i && (t = this.input.substring(this.pos, i), this.pos = i), t }, this.record_tag = function (e) { this.tags["".concat(e, "count")] ? this.tags["".concat(e, "count")]++ : this.tags["".concat(e, "count")] = 1, this.tags[e + this.tags["".concat(e, "count")]] = this.indent_level, this.tags[e + this.tags["".concat(e, "count")] + "parent"] = this.tags.parent, this.tags.parent = e + this.tags["".concat(e, "count")] }, this.retrieve_tag = function (e) { if (this.tags["".concat(e, "count")]) { for (var t = this.tags.parent; t && e + this.tags["".concat(e, "count")] !== t;)t = this.tags["".concat(t, "parent")]; t && (this.indent_level = this.tags[e + this.tags["".concat(e, "count")]], this.tags.parent = this.tags[t + "parent"]), delete this.tags[e + this.tags["".concat(e, "count")] + "parent"], delete this.tags[e + this.tags["".concat(e, "count")]], 1 === this.tags["".concat(e, "count")] ? delete this.tags["".concat(e, "count")] : this.tags["".concat(e, "count")]-- } }, this.indent_to_tag = function (e) { if (this.tags["".concat(e, "count")]) { for (var t = this.tags.parent; t && e + this.tags["".concat(e, "count")] !== t;)t = this.tags["".concat(t, "parent")]; t && (this.indent_level = this.tags[e + this.tags["".concat(e, "count")]]) } }, this.get_tag = function (e) { var t, a, n = "", i = [], r = "", o = !1, s = !0, l = this.pos, c = this.line_char_count; e = e !== undefined && e; do { if (this.pos >= this.input.length) return e && (this.pos = l, this.line_char_count = c), i.length ? i.join("") : ["", "TK_EOF"]; if (n = this.input.charAt(this.pos), this.pos++, this.Utils.in_array(n, this.Utils.whitespace)) o = !0; else { if ("'" !== n && '"' !== n || (n += this.get_unformatted(n), o = !0), "=" === n && (o = !1), i.length && "=" != i[i.length - 1] && ">" != n && o) { if (this.space_or_wrap(i), o = !1, !s && "force" === E && "/" != n) { this.print_newline(!0, i), this.print_indentation(i); for (var d = 0; d < A; d++)i.push(m) } for (var f = 0; f < i.length; f++)if (" " === i[f]) { s = !1; break } } if (b && "<" === a && n + this.input.charAt(this.pos) === "{{" && (n += this.get_unformatted("}}"), i.length && " " != i[i.length - 1] && "<" != i[i.length - 1] && (n = " ".concat(n)), o = !0), "<" !== n || a || (t = this.pos - 1, a = "<"), b && !a && 2 <= i.length && "{" === i[i.length - 1] && "{" === i[i.length - 2] && (t = "#" === n || "/" === n || "!" === n ? this.pos - 3 : this.pos - 2, a = "{"), this.line_char_count++, i.push(n), i[1] && ("!" === i[1] || "?" === i[1] || "%" === i[1])) { i = [this.get_comment(t)]; break } if (b && i[1] && "{" === i[1] && i[2] && "!" === i[2]) { i = [this.get_comment(t)]; break } if (b && "{" === a && 2 < i.length && "}" === i[i.length - 2] && "}" === i[i.length - 1]) break } } while (">" != n); var p, u, g = i.join(""); p = -1 != g.indexOf(" ") ? g.indexOf(" ") : "{" === g[0] ? g.indexOf("}") : g.indexOf(">"), u = "<" !== g[0] && b ? "#" === g[2] ? 3 : 2 : 1; var h = g.substring(u, p).toLowerCase(); return "/" === g.charAt(g.length - 2) || this.Utils.in_array(h, this.Utils.single_token) ? e || (this.tag_type = "SINGLE") : b && "{" === g[0] && "else" === h ? e || (this.indent_to_tag("if"), this.tag_type = "HANDLEBARS_ELSE", this.indent_content = !0, this.traverse_whitespace()) : this.is_unformatted(h, v) ? (r = this.get_unformatted("</".concat(h, ">"), g), i.push(r), this.pos, this.tag_type = "SINGLE") : "script" === h && (-1 === g.search("type") || -1 < g.search("type") && -1 < g.search(/\b(text|application)\/(x-)?(javascript|ecmascript|jscript|livescript)/)) ? e || (this.record_tag(h), this.tag_type = "SCRIPT") : "style" === h && (-1 === g.search("type") || -1 < g.search("type") && -1 < g.search("text/css")) ? e || (this.record_tag(h), this.tag_type = "STYLE") : "!" === h.charAt(0) ? e || (this.tag_type = "SINGLE", this.traverse_whitespace()) : e || ("/" === h.charAt(0) ? (this.retrieve_tag(h.substring(1)), this.tag_type = "END") : (this.record_tag(h), "html" != h.toLowerCase() && (this.indent_content = !0), this.tag_type = "START"), this.traverse_whitespace() && this.space_or_wrap(i), this.Utils.in_array(h, this.Utils.extra_liners) && (this.print_newline(!1, this.output), this.output.length && "\n" != this.output[this.output.length - 2] && this.print_newline(!0, this.output))), e && (this.pos = l, this.line_char_count = c), i.join("") }, this.get_comment = function (e) { var t = "", a = ">", n = !1; this.pos = e; var i = this.input.charAt(this.pos); for (this.pos++; this.pos <= this.input.length && ((t += i)[t.length - 1] !== a[a.length - 1] || -1 == t.indexOf(a));)!n && t.length < 10 && (0 === t.indexOf("<![if") ? (a = "<![endif]>", n = !0) : 0 === t.indexOf("<![cdata[") ? (a = "]]>", n = !0) : 0 === t.indexOf("<![") ? (a = "]>", n = !0) : 0 === t.indexOf("\x3c!--") ? (a = "--\x3e", n = !0) : 0 === t.indexOf("{{!") ? (a = "}}", n = !0) : 0 === t.indexOf("<?") ? (a = "?>", n = !0) : 0 === t.indexOf("<%") && (a = "%>", n = !0)), i = this.input.charAt(this.pos), this.pos++; return t }, this.get_unformatted = function (e, t) { if (t && -1 != t.toLowerCase().indexOf(e)) return ""; var a = "", n = "", i = 0, r = !0; do { if (this.pos >= this.input.length) return n; if (a = this.input.charAt(this.pos), this.pos++, this.Utils.in_array(a, this.Utils.whitespace)) { if (!r) { this.line_char_count--; continue } if ("\n" === a || "\r" === a) { n += "\n", this.line_char_count = 0; continue } } n += a, this.line_char_count++, r = !0, b && "{" === a && n.length && "{" === n[n.length - 2] && (i = (n += this.get_unformatted("}}")).length) } while (-1 === n.toLowerCase().indexOf(e, i)); return n }, this.get_token = function () { var e; if ("TK_TAG_SCRIPT" !== this.last_token && "TK_TAG_STYLE" !== this.last_token) return "CONTENT" === this.current_mode ? "string" != typeof (e = this.get_content()) ? e : [e, "TK_CONTENT"] : "TAG" === this.current_mode ? "string" != typeof (e = this.get_tag()) ? e : [e, "TK_TAG_".concat(this.tag_type)] : void 0; var t = this.last_token.substr(7); return "string" != typeof (e = this.get_contents_to(t)) ? e : [e, "TK_".concat(t)] }, this.get_full_indent = function (e) { return (e = this.indent_level + e || 0) < 1 ? "" : new Array(e + 1).join(this.indent_string) }, this.is_unformatted = function (e, t) { if (!this.Utils.in_array(e, t)) return !1; if ("a" != e.toLowerCase() || !this.Utils.in_array("a", t)) return !0; var a = (this.get_tag(!0) || "").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/); return !(a && !this.Utils.in_array(a, t)) }, this.printer = function (e, t, a, n, i) { this.input = e || "", this.output = [], this.indent_character = t, this.indent_string = "", this.indent_size = a, this.brace_style = i, this.indent_level = 0, this.wrap_line_length = n; for (var r = this.line_char_count = 0; r < this.indent_size; r++)this.indent_string += this.indent_character; this.print_newline = function (e, t) { this.line_char_count = 0, t && t.length && (e || "\n" != t[t.length - 1]) && ("\n" != t[t.length - 1] && (t[t.length - 1] = o(t[t.length - 1])), t.push("\n")) }, this.print_indentation = function (e) { for (var t = 0; t < this.indent_level; t++)e.push(this.indent_string), this.line_char_count += this.indent_string.length }, this.print_token = function (e) { this.is_whitespace(e) && !this.output.length || ((e || "" !== e) && this.output.length && "\n" === this.output[this.output.length - 1] && (this.print_indentation(this.output), e = function t(e) { return e.replace(/^\s+/g, "") }(e)), this.print_token_raw(e)) }, this.print_token_raw = function (e) { 0 < this.newlines && (e = o(e)), e && "" !== e && (1 < e.length && "\n" === e[e.length - 1] ? (this.output.push(e.slice(0, -1)), this.print_newline(!1, this.output)) : this.output.push(e)); for (var t = 0; t < this.newlines; t++)this.print_newline(0 < t, this.output); this.newlines = 0 }, this.indent = function () { this.indent_level++ }, this.unindent = function () { 0 < this.indent_level && this.indent_level-- } }, this }).printer(e, m, i, r, s); ;) { var p = a.get_token(); if (a.token_text = p[0], a.token_type = p[1], "TK_EOF" === a.token_type) break; switch (a.token_type) { case "TK_TAG_START": a.print_newline(!1, a.output), a.print_token(a.token_text), a.indent_content && (a.indent(), a.indent_content = !1), a.current_mode = "CONTENT"; break; case "TK_TAG_STYLE": case "TK_TAG_SCRIPT": a.print_newline(!1, a.output), a.print_token(a.token_text), a.current_mode = "CONTENT"; break; case "TK_TAG_END": if ("TK_CONTENT" === a.last_token && "" === a.last_text) { var u = a.token_text.match(/\w+/)[0], g = null; a.output.length && (g = a.output[a.output.length - 1].match(/(?:<|{{#)\/?\s*(\w+)/)), (null === g || g[1] != u && !a.Utils.in_array(g[1], v)) && a.print_newline(!1, a.output) } a.print_token(a.token_text), a.current_mode = "CONTENT"; break; case "TK_TAG_SINGLE": var h = a.token_text.match(/^\s*<([a-z-]+)/i); h && a.Utils.in_array(h[1], v) || a.print_newline(!1, a.output), a.print_token(a.token_text), a.current_mode = "CONTENT"; break; case "TK_TAG_HANDLEBARS_ELSE": a.print_token(a.token_text), a.indent_content && (a.indent(), a.indent_content = !1), a.current_mode = "CONTENT"; break; case "TK_TAG_HANDLEBARS_COMMENT": case "TK_CONTENT": a.print_token(a.token_text), a.current_mode = "TAG"; break; case "TK_STYLE": case "TK_SCRIPT": if ("" !== a.token_text) { a.print_newline(!1, a.output); var C = a.token_text, T = void 0, R = 1; "TK_SCRIPT" === a.token_type ? T = x : "TK_STYLE" === a.token_type && (T = I), "keep" === t.indent_scripts ? R = 0 : "separate" === t.indent_scripts && (R = -a.indent_level); var y = a.get_full_indent(R); if (T) C = T(C.replace(/^\s*/, y), t); else { var w = C.match(/^\s*/)[0].match(/[^\n\r]*$/)[0].split(a.indent_string).length - 1, S = a.get_full_indent(R - w); C = C.replace(/^\s*/, y).replace(/\r\n|\r|\n/g, "\n" + S).replace(/\s+$/, "") } C && (a.print_token_raw(C), a.print_newline(!0, a.output)) } a.current_mode = "TAG"; break; default: "" !== a.token_text && a.print_token(a.token_text) }a.last_token = a.token_type, a.last_text = a.token_text } var L = a.output.join("").replace(/[\r\n\t ]+$/, ""); return d && (L += "\n"), L } } }, Object.assign(mt.DEFAULTS, { codeMirror: window.CodeMirror, codeMirrorOptions: { lineNumbers: !0, tabMode: "indent", indentWithTabs: !0, lineWrapping: !0, mode: "text/html", tabSize: 2 }, codeBeautifierOptions: { end_with_newline: !0, indent_inner_html: !0, extra_liners: ["p", "h1", "h2", "h3", "h4", "h5", "h6", "blockquote", "pre", "ul", "ol", "table", "dl"], brace_style: "expand", indent_char: "\t", indent_size: 1, wrap_line_length: 0 }, codeViewKeepActiveButtons: ["fullscreen"] }), mt.PLUGINS.codeView = function (c) { var d, f, p = c.$, u = function u() { return c.$box.hasClass("fr-code-view") }; function g() { return f ? f.getValue() : d.val() } function h() { u() && (f && f.setSize(null, c.opts.height ? c.opts.height : "auto"), c.opts.heightMin || c.opts.height ? (c.$box.find(".CodeMirror-scroll, .CodeMirror-gutters").css("min-height", c.opts.heightMin || c.opts.height), d.css("height", c.opts.height)) : c.$box.find(".CodeMirror-scroll, .CodeMirror-gutters").css("min-height", "")) } var m, v = !1; function b() { u() && c.events.trigger("blur") } function E() { u() && v && c.events.trigger("focus") } function n(e) { d || (!function l() { d = p('<textarea class="fr-code" tabIndex="-1">'), c.$wp.append(d), d.attr("dir", c.opts.direction), c.$box.hasClass("fr-basic") || (m = p('<a data-cmd="html" title="Code View" class="fr-command fr-btn html-switch'.concat(c.helpers.isMobile() ? "" : " fr-desktop", '" role="button" tabIndex="-1"><i class="fa fa-code"></i></button>')), c.$box.append(m), c.events.bindClick(c.$box, "a.html-switch", function () { c.events.trigger("commands.before", ["html"]), A(!1), c.events.trigger("commands.after", ["html"]) })); var e = function e() { return !u() }; c.events.on("buttons.refresh", e), c.events.on("copy", e, !0), c.events.on("cut", e, !0), c.events.on("paste", e, !0), c.events.on("destroy", C, !0), c.events.on("html.set", function () { u() && A(!0) }), c.events.on("codeView.update", h), c.events.on("codeView.toggle", function () { c.$box.hasClass("fr-code-view") && A() }), c.events.on("form.submit", function () { u() && (c.html.set(g()), c.events.trigger("contentChanged", [], !0)) }, !0) }(), !f && c.opts.codeMirror ? ((f = c.opts.codeMirror.fromTextArea(d.get(0), c.opts.codeMirrorOptions)).on("blur", b), f.on("focus", E)) : (c.events.$on(d, "keydown keyup change input", function () { c.opts.height ? this.removeAttribute("rows") : (this.rows = 1, 0 === this.value.length ? this.style.height = "auto" : this.style.height = "".concat(this.scrollHeight, "px")) }), c.events.$on(d, "blur", b), c.events.$on(d, "focus", E))), c.undo.saveStep(), c.html.cleanEmptyTags(), c.html.cleanWhiteTags(!0), c.core.hasFocus() && (c.core.isEmpty() || (c.selection.save(), c.$el.find('.fr-marker[data-type="true"]').first().replaceWith('<span class="fr-tmp fr-sm">F</span>'), c.$el.find('.fr-marker[data-type="false"]').last().replaceWith('<span class="fr-tmp fr-em">F</span>'))); var t = c.html.get(!1, !0); c.$el.find("span.fr-tmp").remove(), c.$box.toggleClass("fr-code-view", !0); var a, n, i = !1; if (c.core.hasFocus() && (i = !0, c.events.disableBlur(), c.$el.blur()), t = (t = t.replace(/<span class="fr-tmp fr-sm">F<\/span>/, "FROALA-SM")).replace(/<span class="fr-tmp fr-em">F<\/span>/, "FROALA-EM"), c.codeBeautifier && !t.includes("fr-embedly") && (t = c.codeBeautifier.run(t, c.opts.codeBeautifierOptions)), f) { a = t.indexOf("FROALA-SM"), (n = t.indexOf("FROALA-EM")) < a ? a = n : n -= 9; var r = (t = t.replace(/FROALA-SM/g, "").replace(/FROALA-EM/g, "")).substring(0, a).length - t.substring(0, a).replace(/\n/g, "").length, o = t.substring(0, n).length - t.substring(0, n).replace(/\n/g, "").length; a = t.substring(0, a).length - t.substring(0, t.substring(0, a).lastIndexOf("\n") + 1).length, n = t.substring(0, n).length - t.substring(0, t.substring(0, n).lastIndexOf("\n") + 1).length, f.setSize(null, c.opts.height ? c.opts.height : "auto"), c.opts.heightMin && c.$box.find(".CodeMirror-scroll").css("min-height", c.opts.heightMin), f.setValue(t), v = !i, f.focus(), v = !0, f.setSelection({ line: r, ch: a }, { line: o, ch: n }), f.refresh(), f.clearHistory() } else { a = t.indexOf("FROALA-SM"), n = t.indexOf("FROALA-EM") - 9, c.opts.heightMin && d.css("min-height", c.opts.heightMin), c.opts.height && d.css("height", c.opts.height), c.opts.heightMax && d.css("max-height", c.opts.height || c.opts.heightMax), d.val(t.replace(/FROALA-SM/g, "").replace(/FROALA-EM/g, "")).trigger("change"); var s = p(c.o_doc).scrollTop(); v = !i, d.focus(), v = !0, d.get(0).setSelectionRange(a, n), p(c.o_doc).scrollTop(s) } c.$tb.find(".fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command, .fr-btn-grp > .fr-btn-wrap > .fr-command, .fr-more-toolbar > .fr-btn-wrap > .fr-command").not(e).filter(function () { return c.opts.codeViewKeepActiveButtons.indexOf(p(this).data("cmd")) < 0 }).addClass("fr-disabled").attr("aria-disabled", !0), e.addClass("fr-active").attr("aria-pressed", !0), !c.helpers.isMobile() && c.opts.toolbarInline && c.toolbar.hide() } function A(e) { void 0 === e && (e = !u()); var t = c.$tb.find('.fr-command[data-cmd="html"]'); e ? (c.popups.hideAll(), n(t)) : (c.$box.toggleClass("fr-code-view", !1), function a(e) { var t = g(); c.html.set(t), c.$el.blur(), c.$tb.find(".fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command, .fr-btn-grp > .fr-btn-wrap > .fr-command, .fr-more-toolbar > .fr-btn-wrap > .fr-command").not(e).removeClass("fr-disabled").attr("aria-disabled", !1), e.removeClass("fr-active").attr("aria-pressed", !1), c.selection.setAtStart(c.el), c.selection.restore(), c.placeholder.refresh(), c.undo.saveStep() }(t), c.events.trigger("codeView.update")) } function C() { u() && A(!1), f && f.toTextArea(), d.val("").removeData().remove(), d = null, m && (m.remove(), m = null) } return { _init: function e() { if (c.events.on("focus", function () { c.opts.toolbarContainer && function t() { var e = c.$tb.find('.fr-command[data-cmd="html"]'); u() ? (c.$tb.find(".fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command").not(e).filter(function () { return c.opts.codeViewKeepActiveButtons.indexOf(p(this).data("cmd")) < 0 }).addClass("fr-disabled").attr("aria-disabled", !1), e.addClass("fr-active").attr("aria-pressed", !1)) : (c.$tb.find(".fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command").not(e).removeClass("fr-disabled").attr("aria-disabled", !1), e.removeClass("fr-active").attr("aria-pressed", !1)) }() }), !c.$wp) return !1 }, toggle: A, isActive: u, get: g } }, mt.RegisterCommand("html", { title: "Code View", undo: !1, focus: !1, forcedRefresh: !0, toggle: !0, callback: function () { this.codeView.toggle() }, plugin: "codeView" }), mt.DefineIcon("html", { NAME: "code", SVG_KEY: "codeView" }), Object.assign(mt.POPUP_TEMPLATES, { "textColor.picker": "[_BUTTONS_][_TEXT_COLORS_][_CUSTOM_COLOR_]", "backgroundColor.picker": "[_BUTTONS_][_BACKGROUND_COLORS_][_CUSTOM_COLOR_]" }), Object.assign(mt.DEFAULTS, { colorsText: ["#61BD6D", "#1ABC9C", "#54ACD2", "#2C82C9", "#9365B8", "#475577", "#CCCCCC", "#41A85F", "#00A885", "#3D8EB9", "#2969B0", "#553982", "#28324E", "#000000", "#F7DA64", "#FBA026", "#EB6B56", "#E25041", "#A38F84", "#EFEFEF", "#FFFFFF", "#FAC51C", "#F37934", "#D14841", "#B8312F", "#7C706B", "#D1D5D8", "REMOVE"], colorsBackground: ["#61BD6D", "#1ABC9C", "#54ACD2", "#2C82C9", "#9365B8", "#475577", "#CCCCCC", "#41A85F", "#00A885", "#3D8EB9", "#2969B0", "#553982", "#28324E", "#000000", "#F7DA64", "#FBA026", "#EB6B56", "#E25041", "#A38F84", "#EFEFEF", "#FFFFFF", "#FAC51C", "#F37934", "#D14841", "#B8312F", "#7C706B", "#D1D5D8", "REMOVE"], colorsStep: 7, colorsHEXInput: !0, colorsButtons: ["colorsBack", "|", "-"] }), mt.PLUGINS.colors = function (m) { var v = m.$, s = '<div class="fr-color-hex-layer fr-active fr-layer" id="fr-color-hex-layer- \n  '.concat(m.id, '"><div class="fr-input-line"><input maxlength="7" id="[ID]"\n  type="text" placeholder="').concat(m.language.translate("HEX Color"), '" \n  tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button \n  type="button" class="fr-command fr-submit" data-cmd="[COMMAND]" tabIndex="2" role="button">\n  ').concat(m.language.translate("OK"), "</button></div></div>"); function l(e) { for (var t = "text" === e ? m.opts.colorsText : m.opts.colorsBackground, a = '<div class="fr-color-set fr-'.concat(e, '-color fr-selected-set">'), n = 0; n < t.length; n++)0 !== n && n % m.opts.colorsStep == 0 && (a += "<br>"), "REMOVE" !== t[n] ? a += '<span class="fr-command fr-select-color" style="background:'.concat(t[n], ';" \n        tabIndex="-1" aria-selected="false" role="button" data-cmd="apply').concat(e, 'Color" \n        data-param1="').concat(t[n], '"><span class="fr-sr-only"> ').concat(m.language.translate("Color")).concat(t[n], " \n        &nbsp;&nbsp;&nbsp;</span></span>") : a += '<span class="fr-command fr-select-color" data-cmd="apply'.concat(e, 'Color"\n         tabIndex="-1" role="button" data-param1="REMOVE" \n         title="').concat(m.language.translate("Clear Formatting"), '">').concat(m.icon.create("remove"), ' \n        <span class="fr-sr-only"> ').concat(m.language.translate("Clear Formatting"), " </span></span>"); return "".concat(a, "</div>") } function c(e) { var t, a = m.popups.get("".concat(e, "Color.picker")), n = v(m.selection.element()); t = "background" === e ? "background-color" : "color"; var i = a.find(".fr-".concat(e, "-color .fr-select-color")); for (i.find(".fr-selected-color").remove(), i.removeClass("fr-active-item"), i.not('[data-param1="REMOVE"]').attr("aria-selected", !1); n.get(0) !== m.el;) { if ("transparent" !== n.css(t) && "rgba(0, 0, 0, 0)" !== n.css(t)) { var r = a.find(".fr-".concat(e, '-color .fr-select-color[data-param1="').concat(m.helpers.RGBToHex(n.css(t)), '"]')); r.append('<span class="fr-selected-color" aria-hidden="true">\uf00c</span>'), r.addClass("fr-active-item").attr("aria-selected", !0); break } n = n.parent() } !function o(e) { var t = m.popups.get("".concat(e, "Color.picker")), a = t.find(".fr-".concat(e, "-color .fr-active-item")).attr("data-param1"), n = t.find(".fr-color-hex-layer input"); a || (a = ""); n.length && v(n.val(a).input).trigger("change") }(e) } function n(e) { "REMOVE" !== e ? m.format.applyStyle("background-color", m.helpers.HEXtoRGB(e)) : m.format.removeStyle("background-color"), m.popups.hide("backgroundColor.picker") } function i(e) { "REMOVE" !== e ? m.format.applyStyle("color", m.helpers.HEXtoRGB(e)) : m.format.removeStyle("color"), m.popups.hide("textColor.picker") } return { showColorsPopup: function d(e) { var t = m.$tb.find('.fr-command[data-cmd="'.concat(e, '"]')), a = m.popups.get("".concat(e, ".picker")); if (a || (a = function o(e) { var t = ""; m.opts.toolbarInline && 0 < m.opts.colorsButtons.length && (t += '<div class="fr-buttons fr-colors-buttons fr-tabs">\n        '.concat(m.button.buildList(m.opts.colorsButtons), "\n        </div>")); var a, n = ""; a = "textColor" === e ? (m.opts.colorsHEXInput && (n = s.replace(/\[ID\]/g, "fr-color-hex-layer-text-".concat(m.id)).replace(/\[COMMAND\]/g, "customTextColor")), { buttons: t, text_colors: l("text"), custom_color: n }) : (m.opts.colorsHEXInput && (n = s.replace(/\[ID\]/g, "fr-color-hex-layer-background-".concat(m.id)).replace(/\[COMMAND\]/g, "customBackgroundColor")), { buttons: t, background_colors: l("background"), custom_color: n }); var i = m.popups.create("".concat(e, ".picker"), a); return function r(g, h) { m.events.on("popup.tab", function (e) { var t = v(e.currentTarget); if (!m.popups.isVisible(h) || !t.is("span")) return !0; var a = e.which, n = !0; if (mt.KEYCODE.TAB === a) { var i = g.find(".fr-buttons"); n = !m.accessibility.focusToolbar(i, !!e.shiftKey) } else if (mt.KEYCODE.ARROW_UP === a || mt.KEYCODE.ARROW_DOWN === a || mt.KEYCODE.ARROW_LEFT === a || mt.KEYCODE.ARROW_RIGHT === a) { if (t.is("span.fr-select-color")) { var r = t.parent().find("span.fr-select-color"), o = r.index(t), s = m.opts.colorsStep, l = Math.floor(r.length / s), c = o % s, d = Math.floor(o / s), f = d * s + c, p = l * s; mt.KEYCODE.ARROW_UP === a ? f = ((f - s) % p + p) % p : mt.KEYCODE.ARROW_DOWN === a ? f = (f + s) % p : mt.KEYCODE.ARROW_LEFT === a ? f = ((f - 1) % p + p) % p : mt.KEYCODE.ARROW_RIGHT === a && (f = (f + 1) % p); var u = v(r.get(f)); m.events.disableBlur(), u.focus(), n = !1 } } else mt.KEYCODE.ENTER === a && (m.button.exec(t), n = !1); return !1 === n && (e.preventDefault(), e.stopPropagation()), n }, !0) }(i, "".concat(e, ".picker")), i }(e)), !a.hasClass("fr-active")) if (m.popups.setContainer("".concat(e, ".picker"), m.$tb), c("textColor" === e ? "text" : "background"), t.isVisible()) { var n = m.button.getPosition(t), i = n.left, r = n.top; m.popups.show("".concat(e, ".picker"), i, r, t.outerHeight()) } else m.position.forSelection(a), m.popups.show("".concat(e, ".picker")) }, background: n, customColor: function r(e) { var t = m.popups.get("".concat(e, "Color.picker")).find(".fr-color-hex-layer input"); if (t.length) { var a = t.val(); "background" === e ? n(a) : i(a) } }, text: i, back: function e() { m.popups.hide("textColor.picker"), m.popups.hide("backgroundColor.picker"), m.toolbar.showInline() } } }, mt.DefineIcon("textColor", { NAME: "tint", SVG_KEY: "textColor" }), mt.RegisterCommand("textColor", { title: "Text Color", undo: !1, focus: !0, refreshOnCallback: !1, popup: !0, callback: function () { this.popups.isVisible("textColor.picker") ? (this.$el.find(".fr-marker").length && (this.events.disableBlur(), this.selection.restore()), this.popups.hide("textColor.picker")) : this.colors.showColorsPopup("textColor") } }), mt.RegisterCommand("applytextColor", { undo: !0, callback: function (e, t) { this.colors.text(t) } }), mt.RegisterCommand("customTextColor", { title: "OK", undo: !0, callback: function () { this.colors.customColor("text") } }), mt.DefineIcon("backgroundColor", { NAME: "paint-brush", SVG_KEY: "backgroundColor" }), mt.RegisterCommand("backgroundColor", { title: "Background Color", undo: !1, focus: !0, refreshOnCallback: !1, popup: !0, callback: function () { this.popups.isVisible("backgroundColor.picker") ? (this.$el.find(".fr-marker").length && (this.events.disableBlur(), this.selection.restore()), this.popups.hide("backgroundColor.picker")) : this.colors.showColorsPopup("backgroundColor") } }), mt.RegisterCommand("applybackgroundColor", { undo: !0, callback: function (e, t) { this.colors.background(t) } }), mt.RegisterCommand("customBackgroundColor", { title: "OK", undo: !0, callback: function () { this.colors.customColor("background") } }), mt.DefineIcon("colorsBack", { NAME: "arrow-left", SVG_KEY: "back" }), mt.RegisterCommand("colorsBack", { title: "Back", undo: !1, focus: !1, back: !0, refreshAfterCallback: !1, callback: function () { this.colors.back() } }), mt.DefineIcon("remove", { NAME: "eraser", SVG_KEY: "remove" }), Object.assign(mt.DEFAULTS, { dragInline: !0 }), mt.PLUGINS.draggable = function (d) { var f = d.$; function e(e) { return !(!e.originalEvent || !e.originalEvent.target || e.originalEvent.target.nodeType !== Node.TEXT_NODE) || (e.target && "A" === e.target.tagName && 1 === e.target.childNodes.length && "IMG" === e.target.childNodes[0].tagName && (e.target = e.target.childNodes[0]), f(e.target).hasClass("fr-draggable") ? (d.undo.canDo() || d.undo.saveStep(), d.opts.dragInline ? d.$el.attr("contenteditable", !0) : d.$el.attr("contenteditable", !1), d.opts.toolbarInline && d.toolbar.hide(), f(e.target).addClass("fr-dragging"), d.browser.msie || d.browser.edge || d.selection.clear(), void e.originalEvent.dataTransfer.setData("text", "Froala")) : (e.preventDefault(), !1)) } var p, u = function u(e) { return !(e && ("HTML" === e.tagName || "BODY" === e.tagName || d.node.isElement(e))) }; function g(e, t, a) { if (d.opts.iframe) { var n = d.helpers.getPX(d.$wp.find(".fr-iframe").css("padding-top")), i = d.helpers.getPX(d.$wp.find(".fr-iframe").css("padding-left")); e += d.$iframe.offset().top + n, t += d.$iframe.offset().left + i } p.offset().top !== e && p.css("top", e), p.offset().left !== t && p.css("left", t), p.width() !== a && p.css("width", a) } function t(e) { e.originalEvent.dataTransfer.dropEffect = "move", d.opts.dragInline ? (!function a() { for (var e = null, t = 0; t < mt.INSTANCES.length; t++)if ((e = mt.INSTANCES[t].$el.find(".fr-dragging")).length) return e.get(0) }() || d.browser.msie || d.browser.edge) && e.preventDefault() : (e.preventDefault(), function c(e) { var t = d.doc.elementFromPoint(e.originalEvent.pageX - d.win.pageXOffset, e.originalEvent.pageY - d.win.pageYOffset); if (!u(t)) { for (var a = 0, n = t; !u(n) && n === t && 0 < e.originalEvent.pageY - d.win.pageYOffset - a;)a++, n = d.doc.elementFromPoint(e.originalEvent.pageX - d.win.pageXOffset, e.originalEvent.pageY - d.win.pageYOffset - a); (!u(n) || p && 0 === d.$el.find(n).length && n !== p.get(0)) && (n = null); for (var i = 0, r = t; !u(r) && r === t && e.originalEvent.pageY - d.win.pageYOffset + i < f(d.doc).height();)i++, r = d.doc.elementFromPoint(e.originalEvent.pageX - d.win.pageXOffset, e.originalEvent.pageY - d.win.pageYOffset + i); (!u(r) || p && 0 === d.$el.find(r).length && r !== p.get(0)) && (r = null), t = null === r && n ? n : r && null === n ? r : r && n ? a < i ? n : r : null } if (f(t).hasClass("fr-drag-helper")) return !1; if (t && !d.node.isBlock(t) && (t = d.node.blockParent(t)), t && 0 <= ["TD", "TH", "TR", "THEAD", "TBODY"].indexOf(t.tagName) && (t = f(t).parents("table").get(0)), t && 0 <= ["LI"].indexOf(t.tagName) && (t = f(t).parents("UL, OL").get(0)), t && !f(t).hasClass("fr-drag-helper")) { var o; p || (mt.$draggable_helper || (mt.$draggable_helper = f(document.createElement("div")).attr("class", "fr-drag-helper")), p = mt.$draggable_helper, d.events.on("shared.destroy", function () { p.html("").removeData().remove(), p = null }, !0)), o = e.originalEvent.pageY < f(t).offset().top + f(t).outerHeight() / 2; var s = f(t), l = 0; o || 0 !== s.next().length ? (o || (s = s.next()), "before" === p.data("fr-position") && s.is(p.data("fr-tag")) || (0 < s.prev().length && (l = parseFloat(s.prev().css("margin-bottom")) || 0), l = Math.max(l, parseFloat(s.css("margin-top")) || 0), g(s.offset().top - l / 2 - d.$box.offset().top, s.offset().left - d.win.pageXOffset - d.$box.offset().left, s.width()), p.data("fr-position", "before"))) : "after" === p.data("fr-position") && s.is(p.data("fr-tag")) || (l = parseFloat(s.css("margin-bottom")) || 0, g(s.offset().top + f(t).height() + l / 2 - d.$box.offset().top, s.offset().left - d.win.pageXOffset - d.$box.offset().left, s.width()), p.data("fr-position", "after")), p.data("fr-tag", s), p.addClass("fr-visible"), d.$box.append(p) } else p && 0 < d.$box.find(p).length && p.removeClass("fr-visible") }(e)) } function a(e) { e.originalEvent.dataTransfer.dropEffect = "move", d.opts.dragInline || e.preventDefault() } function n(e) { d.$el.attr("contenteditable", !0); var t = d.$el.find(".fr-dragging"); p && p.hasClass("fr-visible") && d.$box.find(p).length ? i(e) : t.length && (e.preventDefault(), e.stopPropagation()), p && d.$box.find(p).length && p.removeClass("fr-visible"), t.removeClass("fr-dragging") } function i(e) { var t, a; d.$el.attr("contenteditable", !0); for (var n = 0; n < mt.INSTANCES.length; n++)if ((t = mt.INSTANCES[n].$el.find(".fr-dragging")).length) { a = mt.INSTANCES[n]; break } if (t.length) { if (e.preventDefault(), e.stopPropagation(), p && p.hasClass("fr-visible") && d.$box.find(p).length) p.data("fr-tag")[p.data("fr-position")]('<span class="fr-marker"></span>'), p.removeClass("fr-visible"); else if (!1 === d.markers.insertAtPoint(e.originalEvent)) return !1; if (t.removeClass("fr-dragging"), !1 === (t = d.events.chainTrigger("element.beforeDrop", t))) return !1; var i = t; if (t.parent().is("A") && 1 === t.parent().get(0).childNodes.length && (i = t.parent()), d.core.isEmpty()) d.events.focus(); else d.$el.find(".fr-marker").replaceWith(mt.MARKERS), d.selection.restore(); if (a === d || d.undo.canDo() || d.undo.saveStep(), d.core.isEmpty()) d.$el.html(i); else { var r = d.markers.insert(); 0 === i.find(r).length ? f(r).replaceWith(i) : 0 === t.find(r).length && f(r).replaceWith(t), t.after(mt.MARKERS), d.selection.restore() } return d.popups.hideAll(), d.selection.save(), d.$el.find(d.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").not(d.opts.htmlAllowedEmptyTags.join(",")).remove(), d.html.wrap(), d.html.fillEmptyBlocks(), d.selection.restore(), d.undo.saveStep(), d.opts.iframe && d.size.syncIframe(), a !== d && (a.popups.hideAll(), a.$el.find(a.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").remove(), a.html.wrap(), a.html.fillEmptyBlocks(), a.undo.saveStep(), a.events.trigger("element.dropped"), a.opts.iframe && a.size.syncIframe()), d.events.trigger("element.dropped", [i]), !1 } p && p.removeClass("fr-visible"), d.undo.canDo() || d.undo.saveStep(), setTimeout(function () { d.undo.saveStep() }, 0) } function r(e) { if (e && "DIV" === e.tagName && d.node.hasClass(e, "fr-drag-helper")) e.parentNode.removeChild(e); else if (e && e.nodeType === Node.ELEMENT_NODE) for (var t = e.querySelectorAll("div.fr-drag-helper"), a = 0; a < t.length; a++)t[a].parentNode.removeChild(t[a]) } return { _init: function o() { d.opts.enter === mt.ENTER_BR && (d.opts.dragInline = !0), d.events.on("dragstart", e, !0), d.events.on("dragover", t, !0), d.events.on("dragenter", a, !0), d.events.on("document.dragend", n, !0), d.events.on("document.drop", n, !0), d.events.on("drop", i, !0), d.events.on("html.processGet", r) } } }, Object.assign(mt.DEFAULTS, { editInPopup: !1 }), mt.MODULES.editInPopup = function (n) { function e() { n.events.$on(n.$el, n._mouseup, function () { setTimeout(function () { !function a() { var e, t = n.popups.get("text.edit"); e = "INPUT" === n.el.tagName ? n.$el.attr("placeholder") : n.$el.text(), t.find("input").val(e).trigger("change"), n.popups.setContainer("text.edit", n.$sc), n.popups.show("text.edit", n.$el.offset().left + n.$el.outerWidth() / 2, n.$el.offset().top + n.$el.outerHeight(), n.$el.outerHeight()) }() }, 10) }) } return { _init: function a() { n.opts.editInPopup && (!function t() { var e = { edit: '<div id="fr-text-edit-'.concat(n.id, '" class="fr-layer fr-text-edit-layer"><div class="fr-input-line"><input type="text" placeholder="').concat(n.language.translate("Text"), '" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="updateText" tabIndex="2">').concat(n.language.translate("Update"), "</button></div></div>") }; n.popups.create("text.edit", e) }(), e()) }, update: function t() { var e = n.popups.get("text.edit").find("input").val(); 0 === e.length && (e = n.opts.placeholderText), "INPUT" === n.el.tagName ? n.$el.attr("placeholder", e) : n.$el.text(e), n.events.trigger("contentChanged"), n.popups.hide("text.edit") } } }, mt.RegisterCommand("updateText", { focus: !1, undo: !1, callback: function () { this.editInPopup.update() } }), Object.assign(mt.POPUP_TEMPLATES, { emoticons: "[_BUTTONS_][_CUSTOM_LAYER_]" }), Object.assign(mt.DEFAULTS, { emoticonsSet: [{ id: "people", name: "Smileys & People", code: "1f600", emoticons: [{ code: "1f600", desc: "Grinning face" }, { code: "1f601", desc: "Grinning Face with Smiling Eyes" }, { code: "1f602", desc: "Face with Tears of Joy" }, { code: "1f603", desc: "Smiling Face with Open Mouth" }, { code: "1f604", desc: "Smiling Face with Open Mouth and Smiling Eyes" }, { code: "1f605", desc: "Smiling Face with Open Mouth and Cold Sweat" }, { code: "1f606", desc: "Smiling Face with Open Mouth and Tightly-Closed Eyes" }, { code: "1f609", desc: "Winking Face" }, { code: "1f60a", desc: "Smiling Face with Smiling Eyes" }, { code: "1f608", desc: "Face Savouring Delicious Food" }, { code: "1f60e", desc: "Smiling Face with Sunglasses" }, { code: "1f60d", desc: "Smiling Face with Heart-Shaped Eyes" }, { code: "1f618", desc: "Face Throwing a Kiss" }, { code: "1f617", desc: "Kissing Face" }, { code: "1f619", desc: "Kissing Face with Smiling Eyes" }, { code: "1f61a", desc: "Kissing Face with Closed Eyes" }, { code: "263a", desc: "White Smiling Face" }, { code: "1f642", desc: "Slightly Smiling Face" }, { code: "1f610", desc: "Neutral Face" }, { code: "1f611", desc: "Expressionless Face" }, { code: "1f636", desc: "Face Without Mouth" }, { code: "1f60f", desc: "Smirking Face" }, { code: "1f623", desc: "Persevering Face" }, { code: "1f625", desc: "Disappointed but Relieved Face" }, { code: "1f62e", desc: "Face with Open Mouth" }, { code: "1f62f", desc: "Hushed Face" }, { code: "1f62a", desc: "Sleepy Face" }, { code: "1f62b", desc: "Tired Face" }, { code: "1f634", desc: "Sleeping Face" }, { code: "1f60c", desc: "Relieved Face" }, { code: "1f61b", desc: "Face with Stuck-out Tongue" }, { code: "1f61c", desc: "Face with Stuck-out Tongue and Winking Eye" }, { code: "1f61d", desc: "Face with Stuck-out Tongue and Tightly-Closed Eyes" }, { code: "1f612", desc: "Unamused Face" }, { code: "1f613", desc: "Face with Cold Sweat" }, { code: "1f613", desc: "Face with Cold Sweat" }, { code: "1f614", desc: "Pensive Face" }, { code: "1f615", desc: "Confused Face" }, { code: "1f632", desc: "Astonished  Face" }, { code: "1f616", desc: "Confounded Face" }, { code: "1f61e", desc: "Disappointed Face" }, { code: "1f61f", desc: "Worried Face" }, { code: "1f624", desc: "Face with Look of Triumph" }, { code: "1f622", desc: "Crying Face" }, { code: "1f62d", desc: "Loudly Crying Face" }, { code: "1f626", desc: "Frowning Face with Open Mouth" }, { code: "1f627", desc: "Anguished Face" }, { code: "1f628", desc: "Fearful Face" }, { code: "1f629", desc: "Weary Face" }, { code: "1f62c", desc: "Grimacing Face" }, { code: "1f630", desc: "Face with Open Mouth and Cold Sweat" }, { code: "1f631", desc: "Face Screaming in Fear" }, { code: "1f633", desc: "Flushed Face" }, { code: "1f635", desc: "Dizzy Face" }, { code: "1f621", desc: "Pouting Face" }, { code: "1f620", desc: "Angry Face" }, { code: "1f637", desc: "Face with Medical Mask" }, { code: "1f607", desc: "Smiling Face with Halo" }, { code: "1f608", desc: "Smiling Face with Horns" }, { code: "1f47f", desc: "Imp" }, { code: "1f479", desc: "Japanese Ogre" }, { code: "1f47a", desc: "Japanese Goblin" }, { code: "1f480", desc: "Skull" }, { code: "1f47b", desc: "Ghost" }, { code: "1f47d", desc: "Extraterrestrial Alien" }, { code: "1f47e", desc: "Alien Monster" }, { code: "1f4a9", desc: "Pile of Poo" }, { code: "1f63a", desc: "Smiling Cat Face with Open Mouth" }, { code: "1f638", desc: "Grinning Cat Face with Smiling Eyes" }, { code: "1f639", desc: "Cat Face with Tears of Joy" }, { code: "1f63b", desc: "Smiling Cat Face with Heart-Shaped Eyes" }, { code: "1f63c", desc: "Cat Face with Wry Smile" }, { code: "1f63d", desc: "Kissing Cat Face with Closed Eyes" }, { code: "1f640", desc: "Weary Cat Face" }, { code: "1f63f", desc: "Crying Cat Face" }, { code: "1f63e", desc: "Pouting Cat Face" }, { code: "1f648", desc: "See-No-Evil Monkey" }, { code: "1f649", desc: "Hear-No-Evil Monkey" }, { code: "1f64a", desc: "Speak-No-Evil Monkey" }, { code: "1f476", desc: "Baby" }, { code: "1f466", desc: "Boy" }, { code: "1f467", desc: "Girl" }, { code: "1f468", desc: "Man" }, { code: "1f469", desc: "Woman" }, { code: "1f474", desc: "Older Man" }, { code: "1f475", desc: "Older Woman" }, { code: "1f46e", desc: "Police Officer" }, { code: "1f482", desc: " Guardsman" }, { code: "1f477", desc: " Construction Worker" }, { code: "1f478", desc: "Princess" }, { code: "1f473", desc: "Man with Turban" }, { code: "1f472", desc: "Man with Gua Pi Mao" }, { code: "1f471", desc: "Person with Blond Hair" }, { code: "1f470", desc: "Bride with Veil" }, { code: "1f47c", desc: "Baby Angel" }, { code: "1f385", desc: "Father Christmas" }, { code: "1f64e", desc: "Person with Pouting Face" }, { code: "1f645", desc: "Face with No Good Gesture" }, { code: "1f646", desc: "Face with Ok Gesture" }, { code: "1f481", desc: "Information Desk Person" }, { code: "1f64b", desc: "Happy Person Raising One Hand" }, { code: "1f647", desc: "Person Bowing Deeply" }, { code: "1f486", desc: "Face Massage" }, { code: "1f487", desc: "Haircut" }, { code: "1f6b6", desc: "Pedestrian" }, { code: "1f3c3", desc: "Runner" }, { code: "1f483", desc: "Dancer" }, { code: "1f46f", desc: "Woman with Bunny Ears" }, { code: "1f6c0", desc: "Bath" }, { code: "1f464", desc: "Bust in Silhouette" }, { code: "1f465", desc: "Busts in Silhouette" }, { code: "1f3c7", desc: "Horse Racing" }, { code: "1f3c2", desc: " Snowboarder" }, { code: "1f3c4", desc: " Surfer" }, { code: "1f6a3", desc: " Rowboat" }, { code: "1f3ca", desc: " Swimmer" }, { code: "1f6b4", desc: " Bicyclist" }, { code: "1f6b5", desc: "Mountain Bicyclist" }, { code: "1f46b", desc: " Man and Woman Holding Hands" }, { code: "1f46c", desc: "Two Men Holding Hands" }, { code: "1f46d", desc: "Two Women Holding Hands" }, { code: "1f48f", desc: "Kiss" }, { code: "1f468-2764-1f48b-1f468", uCode: "\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68", desc: "Man Kiss Man" }, { code: "1f469-2764-1f48b-1f469", uCode: "\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc69", desc: "Woman Kiss Woman" }, { code: "1f491", desc: "Couple with Heart" }, { code: "1f468-2764-1f468", uCode: "\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68", desc: "Man Heart Man" }, { code: "1f469-2764-1f469", uCode: "\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc69", desc: "Woman Heart Woman" }, { code: "1f46a", desc: "Family" }, { code: "1f468", desc: "Man Woman Boy" }, { code: "1f468-1f469-1f467", desc: "Man Woman Girl" }, { code: "1f468-1f469-1f467-1f466", desc: "Man Woman Girl Boy" }, { code: "1f468-1f469-1f466-1f466", desc: "Man Woman Boy Boy" }, { code: "1f468-1f469-1f467-1f467", desc: "Man Woman Girl Girl" }, { code: "1f468-1f468-1f466", desc: "Man Man Boy" }, { code: "1f468-1f468-1f467", desc: "Man Man Girl" }, { code: "1f468-1f468-1f467-1f466", desc: "Man Man Girl Boy" }, { code: "1f468-1f468-1f466-1f466", desc: "Man Man Boy Boy" }, { code: "1f469-1f469-1f466", desc: "Woman Woman Boy" }, { code: "1f469-1f469-1f467", desc: "Woman Woman Girl" }, { code: "1f469-1f469-1f467-1f466", desc: "Woman Woman Girl Boy" }, { code: "1f469-1f469-1f467-1f467", desc: "Woman Woman Girl Girl" }, { code: "1f4aa", desc: "Flexed Biceps" }, { code: "1f448", desc: "White Left Pointing Backhand Index" }, { code: "1f449", desc: "White Right Pointing Backhand Index" }, { code: "1f446", desc: "White Up Pointing Backhand Index" }, { code: "1f447", desc: "White Down Pointing Backhand Index" }, { code: "270c", desc: "Victory Hand" }, { code: "270b", desc: "Raised Hand" }, { code: "1f44c", desc: "Ok Hand Sign" }, { code: "1f44d", desc: "Thumbs Up Sign" }, { code: "1f44e", desc: "Thumbs Down Sign" }, { code: "270a", desc: "Raised Fist" }, { code: "1f44a", desc: "Fisted Hand Sign" }, { code: "1f44b", desc: "Waving Hand Sign" }, { code: "1f44f", desc: "Clapping Hands Sign" }, { code: "1f450", desc: "Open  Hands Sign" }, { code: "1f64c", desc: "Person Raising Both Hands in Celebration" }, { code: "1f64f", desc: "Person with Folded Hands" }, { code: "1f485", desc: "Nail Polish" }, { code: "1f442", desc: "Ear" }, { code: "1f443", desc: "Nose" }, { code: "1f463", desc: "Footprints" }, { code: "1f440", desc: "Eyes" }, { code: "1f445", desc: "Tongue" }, { code: "1f444", desc: "Mouth" }, { code: "1f48b", desc: "Kiss Mark" }, { code: "1f498", desc: "Heart with Arrow" }, { code: "2764", desc: "Heavy Black Heart" }, { code: "1f493", desc: "Heavy Black Heart" }, { code: "1f494", desc: "Broken Heart" }, { code: "1f495", desc: "Two Hearts" }, { code: "1f496", desc: "Sparkling Hearts" }, { code: "1f497", desc: "Growing Hearts" }, { code: "1f499", desc: "Blue Heart" }, { code: "1f49a", desc: "Green Heart" }, { code: "1f49b", desc: "Yellow Heart" }, { code: "1f49c", desc: "Purple Heart" }, { code: "1f49d", desc: "Heart with Ribbon" }, { code: "1f49e", desc: "Revolving Hearts" }, { code: "1f49f", desc: "Heart Decoration" }, { code: "1f48c", desc: "Love Letter" }, { code: "1f4a4", desc: "Sleeping Symbol" }, { code: "1f4a2", desc: "Anger Symbol" }, { code: "1f4a3", desc: "Bomb" }, { code: "1f4a5", desc: "Collision Symbol" }, { code: "1f4a6", desc: "Splashing Sweat Symbol" }, { code: "1f4a8", desc: "Dash Symbol" }, { code: "1f4ab", desc: "Dizzy Symbol" }, { code: "1f4ab", desc: "Dizzy Symbol" }, { code: "1f4ac", desc: "Speech Balloon" }, { code: "1f4ad", desc: "Thought Balloon" }, { code: "1f453", desc: "Eyeglasses" }, { code: "1f454", desc: "Necktie" }, { code: "1f455", desc: "T-Shirt" }, { code: "1f456", desc: "Jeans" }, { code: "1f457", desc: "Dress" }, { code: "1f458", desc: "Kimono" }, { code: "1f459", desc: "Bikini" }, { code: "1f45a", desc: "Womans Clothes" }, { code: "1f45b", desc: "Purse" }, { code: "1f45c", desc: "Handbag" }, { code: "1f45d", desc: "Pouch" }, { code: "1f392", desc: "School Satchel" }, { code: "1f45e", desc: "Mans Shoe" }, { code: "1f45f", desc: "Athletic Shoe" }, { code: "1f460", desc: "High-Heeled Shoe" }, { code: "1f461", desc: "Womans Sandal" }, { code: "1f462", desc: "Womans Boots" }, { code: "1f451", desc: "Crown" }, { code: "1f452", desc: "Womans Hat" }, { code: "1f462", desc: "Top Hat" }, { code: "1f393", desc: "Graduation Cap" }, { code: "1f484", desc: "Lipstick" }, { code: "1f48d", desc: "Ring" }, { code: "1f48e", desc: "Gem Stone" }] }, { id: "nature", name: "Animals & Nature", code: "1F435", emoticons: [{ code: "1F435", desc: "Monkey Face" }, { code: "1F412", desc: "Monkey" }, { code: "1F436", desc: "Dog Face" }, { code: "1F415", desc: "Dog" }, { code: "1F429", desc: "Poodle" }, { code: "1F43A", desc: "Wolf Face" }, { code: "1F431", desc: "Cat Face" }, { code: "1F408", desc: "Cat" }, { code: "1F42F", desc: "Tiger Face" }, { code: "1F405", desc: "Tiger" }, { code: "1F406", desc: "Leopard" }, { code: "1F434", desc: "Horse Face" }, { code: "1F40E", desc: "Horse" }, { code: "1F42E", desc: "Cow Face" }, { code: "1F402", desc: "Ox" }, { code: "1F403", desc: "Water Buffalo" }, { code: "1F404", desc: "Cow" }, { code: "1F437", desc: "Pig Face" }, { code: "1F416", desc: "Pig" }, { code: "1F417", desc: "Boar" }, { code: "1F43D", desc: "Pig Nose" }, { code: "1F40F", desc: "Ram" }, { code: "1F411", desc: "Sheep" }, { code: "1F410", desc: "Goat" }, { code: "1F42A", desc: "Dromedary Camel" }, { code: "1F42B", desc: "Bactrian Camel" }, { code: "1F418", desc: "Elephant" }, { code: "1F42D", desc: "Mouse Face" }, { code: "1F401", desc: "Mouse" }, { code: "1F400", desc: "Rat" }, { code: "1F439", desc: "Hamster Face" }, { code: "1F430", desc: "Rabbit Face" }, { code: "1F407", desc: "Rabbit" }, { code: "1F43B", desc: "Bear Face" }, { code: "1F428", desc: "Koala" }, { code: "1F43C", desc: "Panda Face" }, { code: "1F43E", desc: "Paw Prints" }, { code: "1F414", desc: "Chicken" }, { code: "1F413", desc: "Rooster" }, { code: "1F423", desc: "Hatching Chick" }, { code: "1F424", desc: "Baby Chick" }, { code: "1F425", desc: "Front-Facing Baby Chick" }, { code: "1F426", desc: "Bird" }, { code: "1F427", desc: "Penguin" }, { code: "1F438", desc: "Frog Face" }, { code: "1F40A", desc: "Crocodile" }, { code: "1F422", desc: "Turtle" }, { code: "1F40D", desc: "Snake" }, { code: "1F432", desc: "Dragon Face" }, { code: "1F409", desc: "Dragon" }, { code: "1F433", desc: "Spouting Whale" }, { code: "1F40B", desc: "Whale" }, { code: "1F42C", desc: "Dolphin" }, { code: "1F41F", desc: "Fish" }, { code: "1F420", desc: "Tropical Fish" }, { code: "1F421", desc: "Blowfish" }, { code: "1F419", desc: "Octopus" }, { code: "1F41A", desc: "Spiral Shell" }, { code: "1F40C", desc: "Snail" }, { code: "1F41B", desc: "Bug" }, { code: "1F41C", desc: "Ant" }, { code: "1F41D", desc: "Honeybee" }, { code: "1F41E", desc: "Lady Beetle" }, { code: "1F490", desc: "Bouquet" }, { code: "1F338", desc: "Cherry Blossom" }, { code: "1F4AE", desc: "White Flower" }, { code: "1F339", desc: "Rose" }, { code: "1F33A", desc: "Hibiscus" }, { code: "1F33B", desc: "Sunflower" }, { code: "1F33C", desc: "Blossom" }, { code: "1F337", desc: "Tulip" }, { code: "1F331", desc: "Seedling" }, { code: "1F332", desc: "Evergreen Tree" }, { code: "1F333", desc: "Deciduous Tree" }, { code: "1F334", desc: "Palm Tree" }, { code: "1F335", desc: "Cactus" }, { code: "1F33E", desc: "Ear of Rice" }, { code: "1F33F", desc: "Herb" }, { code: "2618", desc: "Four Leaf Clover" }, { code: "1F341", desc: "Maple Leaf" }, { code: "1F342", desc: "Fallen Leaf" }, { code: "1F343", desc: "Leaf Fluttering in Wind" }] }, { id: "foods", name: "Food & Drink", code: "1F347", emoticons: [{ code: "1F347", desc: "Grapes" }, { code: "1F348", desc: "Melon" }, { code: "1F349", desc: "Watermelon" }, { code: "1F34A", desc: "Tangerine" }, { code: "1F34B", desc: "Lemon" }, { code: "1F34C", desc: "Banana" }, { code: "1F34D", desc: "Pineapple" }, { code: "1F34E", desc: "Red Apple" }, { code: "1F34F", desc: "Green Apple" }, { code: "1F350", desc: "Pear" }, { code: "1F351", desc: "Peach" }, { code: "1F352", desc: "Cherries" }, { code: "1F353", desc: "Strawberry" }, { code: "1F345", desc: "Tomato" }, { code: "1F346", desc: "Aubergine" }, { code: "1F33D", desc: "Ear of Maize" }, { code: "1F344", desc: "Mushroom" }, { code: "1F330", desc: "Chestnut" }, { code: "1F35E", desc: "Bread" }, { code: "1F356", desc: "Meat on Bone" }, { code: "1F357", desc: "Poultry Leg" }, { code: "1F354", desc: "Hamburger" }, { code: "1F35F", desc: "French Fries" }, { code: "1F355", desc: "Slice of Pizza" }, { code: "1F373", desc: "Cooking" }, { code: "1F372", desc: "Pot of Food" }, { code: "1F371", desc: "Bento Box" }, { code: "1F358", desc: "Rice Cracker" }, { code: "1F359", desc: "Rice Ball" }, { code: "1F35A", desc: "Cooked Rice" }, { code: "1F35B", desc: "Curry and Rice" }, { code: "1F35C", desc: "Steaming Bowl" }, { code: "1F35D", desc: "Spaghetti" }, { code: "1F360", desc: "Roasted Sweet Potato" }, { code: "1F362", desc: "Oden" }, { code: "1F363", desc: "Sushi" }, { code: "1F364", desc: "Fried Shrimp" }, { code: "1F365", desc: "Fish Cake with Swirl Design" }, { code: "1F361", desc: "Dango" }, { code: "1F366", desc: "Soft Ice Cream" }, { code: "1F367", desc: "Shaved Ice" }, { code: "1F368", desc: "Ice Cream" }, { code: "1F369", desc: "Doughnut" }, { code: "1F36A", desc: "Cookie" }, { code: "1F382", desc: "Birthday Cake" }, { code: "1F370", desc: "Shortcake" }, { code: "1F36B", desc: "Chocolate Bar" }, { code: "1F36C", desc: "Candy" }, { code: "1F36D", desc: "Lollipop" }, { code: "1F36E", desc: "Custard" }, { code: "1F36F", desc: "Honey Pot" }, { code: "1F37C", desc: "Baby Bottle" }, { code: "2615", desc: "Hot Beverage" }, { code: "1F375", desc: "Teacup Without Handle" }, { code: "1F376", desc: "Sake Bottle and Cup" }, { code: "1F377", desc: "Wine Glass" }, { code: "1F378", desc: "Cocktail Glass" }, { code: "1F379", desc: "Tropical Drink" }, { code: "1F37A", desc: "Beer Mug" }, { code: "1F37B", desc: "Clinking Beer Mugs" }, { code: "1F374", desc: "Fork and Knife" }, { code: "1F52A", desc: "Hocho" }] }, { id: "activity", name: "Activities", code: "1f383", emoticons: [{ code: "1f383", desc: " Jack-O-Lantern" }, { code: "1f384", desc: "Christmas Tree" }, { code: "1f386", desc: " Fireworks" }, { code: "1f387", desc: "Firework Sparkler" }, { code: "2728", desc: " Sparkles" }, { code: "1f388", desc: "Balloon" }, { code: "1f389", desc: "Party Popper" }, { code: "1f38a", desc: "Confetti Ball" }, { code: "1f38b", desc: "Tanabata Tree" }, { code: "1f38d", desc: "Pine Decoration" }, { code: "1f38e", desc: "Japanese Dolls" }, { code: "1f38f", desc: "Carp Streamer" }, { code: "1f390", desc: "Wind Chime" }, { code: "1f391", desc: "Moon Viewing Ceremony" }, { code: "1f380", desc: "Ribbon" }, { code: "1f381", desc: "Wrapped Present" }, { code: "1f3ab", desc: "Ticket" }, { code: "1f3c6", desc: "Trophy" }, { code: "1f388", desc: "Balloon" }, { code: "26bd", desc: "Soccer Ball" }, { code: "26be", desc: "Baseball" }, { code: "1f3c0", desc: "Basketball and Hoop" }, { code: "1f3c8", desc: "American Football" }, { code: "1f3c9", desc: "Rugby Football" }, { code: "1f3be", desc: "Tennis Racquet and Ball" }, { code: "1f3b1", desc: "Billiards" }, { code: "1f3b3", desc: "Bowling" }, { code: "1f3af", desc: "Direct Hit" }, { code: "26f3", desc: "Flag in Hole" }, { code: "1f3a3", desc: "Fishing Pole and Fish" }, { code: "1f3bd", desc: "Running Shirt with Sash" }, { code: "1f3bf", desc: "Ski and Ski Boot" }, { code: "1f3ae", desc: "Video Game" }, { code: "1f3b2", desc: "Game Die" }, { code: "2660", desc: "Black Spade Suit" }, { code: "2665", desc: "Black Heart SuiT" }, { code: "2666", desc: "Black Diamond Suit" }, { code: "2663", desc: "Black Club Suit" }, { code: "1f0cf", desc: "Playing Card Black Joker" }, { code: "1f004", desc: "Mahjong Tile Red Dragon" }, { code: "1f3b4", desc: "Flower Playing Cards" }] }, { id: "places", name: "Travel & Places", code: "1f30d", emoticons: [{ code: "1f30d", desc: "Earth Globe Europe-Africa" }, { code: "1f30e", desc: "Earth Globe Americas" }, { code: "1f30f", desc: "Earth Globe Asia-Australia" }, { code: "1f310", desc: "Globe with Meridians" }, { code: "1f5fe", desc: "Silhouette of Japan" }, { code: "1f30b", desc: "Volcano" }, { code: "1f5fb", desc: "Mount Fuji" }, { code: "1f3e0", desc: "House Building" }, { code: "1f3e1", desc: "House with Garden" }, { code: "1f3e2", desc: "Office Building" }, { code: "1f3e3", desc: "Japanese Post Office" }, { code: "1f3e4", desc: "European Post Office" }, { code: "1f3e5", desc: "Hospital" }, { code: "1f3e6", desc: "Bank" }, { code: "1f3e8", desc: "Hotel" }, { code: "1f3e9", desc: "Love Hotel" }, { code: "1f3ea", desc: "Convenience Store" }, { code: "1f3eb", desc: "School" }, { code: "1f3ec", desc: "Department Store" }, { code: "1f3ed", desc: "Factory" }, { code: "1f3ef", desc: "Japanese Castle" }, { code: "1f3f0", desc: "European Castle" }, { code: "1f492", desc: "Wedding" }, { code: "1f5fc", desc: "Tokyo Tower" }, { code: "1f5fd", desc: "Statue of Liberty" }, { code: "26ea", desc: "Church" }, { code: "26f2", desc: "Fountain" }, { code: "26fa", desc: "Tent" }, { code: "1f301", desc: "Foggy" }, { code: "1f303", desc: "Night with Stars" }, { code: "1f304", desc: "Sunrise over Mountains" }, { code: "1f305", desc: "Sunrise" }, { code: "1f306", desc: "Cityscape at Dusk" }, { code: "1f307", desc: "Sunset over Buildings" }, { code: "1f309", desc: "Bridge at Night" }, { code: "2668", desc: "Hot Springs" }, { code: "1f30c", desc: "Milky Way" }, { code: "1f3a0", desc: "Carousel Horse" }, { code: "1f3a1", desc: "Ferris Wheel" }, { code: "1f3a2", desc: "Roller Coaster" }, { code: "1f488", desc: "Barber Pole" }, { code: "1f3aa", desc: "Circus Tent" }, { code: "1f3ad", desc: "Performing Arts" }, { code: "1f3a8", desc: "Artist Palette" }, { code: "1f3b0", desc: "Slot Machine" }, { code: "1f682", desc: "Steam Locomotive" }, { code: "1f683", desc: "Railway Car" }, { code: "1f684", desc: "High-Speed Train" }, { code: "1f685", desc: "High-Speed Train with Bullet Nose" }, { code: "1f686", desc: "Train" }, { code: "1f687", desc: "Metro" }, { code: "1f688", desc: "Light Rail" }, { code: "1f689", desc: "Station" }, { code: "1f68a", desc: "Tram" }, { code: "1f69d", desc: "Monorail" }, { code: "1f69e", desc: "Mountain Railway" }, { code: "1f68b", desc: "Tram Car" }, { code: "1f68c", desc: "Bus" }, { code: "1f68d", desc: "Oncoming Bus" }, { code: "1f68e", desc: "Trolleybus" }, { code: "1f690", desc: "Minibus" }, { code: "1f691", desc: "Ambulance" }, { code: "1f692", desc: "Fire Engine" }, { code: "1f693", desc: "Police Car" }, { code: "1f694", desc: "Oncoming Police Car" }, { code: "1f695", desc: "Taxi" }, { code: "1f695", desc: "Oncoming Taxi" }, { code: "1f697", desc: "Automobile" }, { code: "1f698", desc: "Oncoming Automobile" }, { code: "1f699", desc: "Recreational Vehicle" }, { code: "1f69a", desc: "Delivery Truck" }, { code: "1f69b", desc: "Articulated Lorry" }, { code: "1f69c", desc: "Tractor" }, { code: "1f6b2", desc: "Bicycle" }, { code: "1f68f", desc: "Bus Stop" }, { code: "26fd", desc: "Fuel Pump" }, { code: "1f6a8", desc: "Police Cars Revolving Light" }, { code: "1f6a5", desc: "Horizontal Traffic Light" }, { code: "1f6a6", desc: "Vertical Traffic Light" }, { code: "1f6a7", desc: "Construction Sign" }, { code: "2693", desc: "Anchor" }, { code: "26f5", desc: "Sailboat" }, { code: "1f6a4", desc: "Speedboat" }, { code: "1f6a2", desc: "Ship" }, { code: "2708", desc: "Airplane" }, { code: "1f4ba", desc: "Seat" }, { code: "1f681", desc: "Helicopter" }, { code: "1f69f", desc: "Suspension Railway" }, { code: "1f6a0", desc: "Mountain Cableway" }, { code: "1f6a1", desc: "Aerial Tramway" }, { code: "1f680", desc: "Rocket" }, { code: "1f6aa", desc: "Door" }, { code: "1f6bd", desc: "Toilet" }, { code: "1f6bf", desc: "Shower" }, { code: "1f6c1", desc: "Bathtub" }, { code: "231b", desc: "Hourglass" }, { code: "23f3", desc: "Hourglass with Flowing Sand" }, { code: "231a", desc: "Watch" }, { code: "23f0", desc: "Alarm Clock" }, { code: "1f55b", desc: "Clock Face Twelve Oclock" }, { code: "1f567", desc: "Clock Face Twelve-Thirty" }, { code: "1f550", desc: "Clock Face One Oclock" }, { code: "1f55c", desc: "Clock Face One-thirty" }, { code: "1f551", desc: "Clock Face Two Oclock" }, { code: "1f55d", desc: "Clock Face Two-thirty" }, { code: "1f552", desc: "Clock Face Three Oclock" }, { code: "1f55e", desc: "Clock Face Three-thirty" }, { code: "1f553", desc: "Clock Face Four Oclock" }, { code: "1f55f", desc: "Clock Face Four-thirty" }, { code: "1f554", desc: "Clock Face Five Oclock" }, { code: "1f560", desc: "Clock Face Five-thirty" }, { code: "1f555", desc: "Clock Face Six Oclock" }, { code: "1f561", desc: "Clock Face Six-thirty" }, { code: "1f556", desc: "Clock Face Seven Oclock" }, { code: "1f562", desc: "Clock Face Seven-thirty" }, { code: "1f557", desc: "Clock Face Eight Oclock" }, { code: "1f563", desc: "Clock Face Eight-thirty" }, { code: "1f558", desc: "Clock Face Nine Oclock" }, { code: "1f564", desc: "Clock Face Nine-thirty" }, { code: "1f559", desc: "Clock Face Ten Oclock" }, { code: "1f565", desc: "Clock Face Ten-thirty" }, { code: "1f55a", desc: "Clock Face Eleven Oclock" }, { code: "1f566", desc: "Clock Face Eleven-thirty" }, { code: "1f311", desc: "New Moon Symbol" }, { code: "1f312", desc: "Waxing Crescent Moon Symbol" }, { code: "1f313", desc: "First Quarter Moon Symbol" }, { code: "1f314", desc: "Waxing Gibbous Moon Symbol" }, { code: "1f315", desc: "Full Moon Symbol" }, { code: "1f316", desc: "Waning Gibbous Moon Symbol" }, { code: "1f317", desc: "Last Quarter Moon Symbol" }, { code: "1f318", desc: "Waning Crescent Moon Symbol" }, { code: "1f319", desc: "Crescent Moon" }, { code: "1f31a", desc: "New Moon with Face" }, { code: "1f31b", desc: "First Quarter Moon with Face" }, { code: "1f31c", desc: "Last Quarter Moon with Face" }, { code: "2600", desc: "Black Sun with Rays" }, { code: "1f31d", desc: "Full Moon with Face" }, { code: "1f31e", desc: "Sun with Face" }, { code: "2b50", desc: "White Medium Star" }, { code: "1f31f", desc: "Glowing Star" }, { code: "1f320", desc: "Shooting Star" }, { code: "2601", desc: "Cloud" }, { code: "26c5", desc: "Sun Behind Cloud" }, { code: "1f300", desc: "Cyclone" }, { code: "1f308", desc: "Rainbow" }, { code: "1f302", desc: "Closed Umbrella" }, { code: "2614", desc: "Umbrella with Rain Drops" }, { code: "26a1", desc: "High Voltage Sign" }, { code: "2744", desc: "Snowflake" }, { code: "2603", desc: "Snowman Without Snow" }, { code: "1f525", desc: "Fire" }, { code: "1f4a7", desc: "Droplet" }, { code: "1F30A", desc: "Water Wave" }] }, { id: "objects", name: "Objects", code: "1F507", emoticons: [{ code: "1F507", desc: "Speaker with Cancellation Stroke" }, { code: "1F508", desc: "Speaker" }, { code: "1F509", desc: "Speaker with One Sound Wave" }, { code: "1F50A", desc: "Speaker with Three Sound Wave" }, { code: "1F4E2", desc: "Public Address Loudspeaker" }, { code: "1F4E3", desc: "Cheering Megaphone" }, { code: "1F4EF", desc: "Postal Horn" }, { code: "1F514", desc: "Bell" }, { code: "1F515", desc: "Bell with Cancellation Stroke" }, { code: "1F3BC", desc: "Musical Score" }, { code: "1F3B5", desc: "Musical Note" }, { code: "1F3B6", desc: "Multiple Musical Notes" }, { code: "1F3A4", desc: "Microphone" }, { code: "1F3A7", desc: "Headphone" }, { code: "1F4FB", desc: "Radio" }, { code: "1F3B7", desc: "Saxophone" }, { code: "1F3B8", desc: "Guitar" }, { code: "1F3B9", desc: "Musical Keyboard" }, { code: "1F3BA", desc: "Trumpet" }, { code: "1F3BB", desc: "Violin" }, { code: "1F4F1", desc: "Mobile Phone" }, { code: "1F4F2", desc: "Mobile Phone with Rightwards Arrow at Left" }, { code: "260E", desc: "Black Telephone" }, { code: "1F4DE", desc: "Telephone Receiver" }, { code: "1F4DF", desc: "Pager" }, { code: "1F4E0", desc: "Fax Machine" }, { code: "1F50B", desc: "Battery" }, { code: "1F50C", desc: "Electric Plug" }, { code: "1F4BB", desc: "Personal Computer" }, { code: "1F4BD", desc: "Minidisc" }, { code: "1F4BE", desc: "Floppy Disk" }, { code: "1F4BF", desc: "Optical Disk" }, { code: "1F4C0", desc: "Dvd" }, { code: "1F3A5", desc: "Movie Camera" }, { code: "1F3AC", desc: "Clapper Board" }, { code: "1F4FA", desc: "Television" }, { code: "1F4F7", desc: "Camera" }, { code: "1F4F9", desc: "Video Camera" }, { code: "1F4FC", desc: "Videocassette" }, { code: "1F50D", desc: "Left-Pointing Magnifying Glass" }, { code: "1F50E", desc: "Right-Pointing Magnifying Glass" }, { code: "1F52C", desc: "Microscope" }, { code: "1F52D", desc: "Telelscope" }, { code: "1F4E1", desc: "Satellite Antenna" }, { code: "1F4A1", desc: "Electric Light Bulb" }, { code: "1F526", desc: "Electric Torch" }, { code: "1F3EE", desc: "Izakaya Lantern" }, { code: "1F4D4", desc: "Notebook with Decorative Cover" }, { code: "1F4D5", desc: "Closed Book" }, { code: "1F4D6", desc: "Open Book" }, { code: "1F4D7", desc: "Green Book" }, { code: "1F4D8", desc: "Blue Book" }, { code: "1F4D9", desc: "Orange Book" }, { code: "1F4DA", desc: "Books" }, { code: "1F4D3", desc: "Notebook" }, { code: "1F4D2", desc: "Ledger" }, { code: "1F4C3", desc: "Curl" }, { code: "1F4DC", desc: "Scroll" }, { code: "1F4C4", desc: "Page Facing Up" }, { code: "1F4F0", desc: "Newspaper" }, { code: "1F4D1", desc: "Bookmark Tabs" }, { code: "1F516", desc: "Bookmark" }, { code: "1F4B0", desc: "Money Bag" }, { code: "1F4B4", desc: "Banknote with Yen Sign" }, { code: "1F4B5", desc: "Banknote with Dollar Sign" }, { code: "1F4B6", desc: "Banknote with Euro Sign" }, { code: "1F4B7", desc: "Banknote with Pound Sign" }, { code: "1F4B8", desc: "Money with Wings" }, { code: "1F4B3", desc: "Credit Card" }, { code: "1F4B9", desc: "Chart with Upwards Trend and Yen Sign" }, { code: "1F4B1", desc: "Currency Exchange" }, { code: "1F4B2", desc: "Heavy Dollar Sign" }, { code: "2709", desc: "Envelope" }, { code: "1F4E7", desc: "E-Mail Symbol" }, { code: "1F4E8", desc: "Incoming Envelope" }, { code: "1F4E9", desc: "Envelope with Downwards Arrow Above" }, { code: "1F4E4", desc: "Outbox Tray" }, { code: "1F4E5", desc: "Inbox Tray" }, { code: "1F4E6", desc: "Package" }, { code: "1F4BE", desc: "Closed Mailbox with Raised Flag" }, { code: "1F4EA", desc: "Closed Mailbox with Lowered Flag" }, { code: "1F4EC", desc: "Open Mailbox with Raised Flag" }, { code: "1F4ED", desc: "Open Mailbox with Lowered Flag" }, { code: "1F5F3", desc: "Postbox" }, { code: "270F", desc: "Pencil" }, { code: "2712", desc: "Black Nib" }, { code: "1F4DD", desc: "Memo" }, { code: "1F4BC", desc: "Briefcase" }, { code: "1F4C1", desc: "File Folder" }, { code: "1F4C2", desc: "Open File Folder" }, { code: "1F4C5", desc: "Calender" }, { code: "1F4C6", desc: "Tear-off Calender" }, { code: "1F4C7", desc: "Card Index" }, { code: "1F4C8", desc: "Chart with Upwards Trend" }, { code: "1F4C9", desc: "Chart with Downwards Trend" }, { code: "1F4CA", desc: "Bar Chart" }, { code: "1F4CB", desc: "Clipboard" }, { code: "1F4CC", desc: "Pushpin" }, { code: "1F4CD", desc: "Round Pushpin" }, { code: "1F4CE", desc: "Paperclip" }, { code: "1F4CF", desc: "Straight Ruler" }, { code: "1F4D0", desc: "Triangular Ruler" }, { code: "2702", desc: "Black Scissors" }, { code: "1F512", desc: "Lock" }, { code: "1F513", desc: "Open Lock" }, { code: "1F50F", desc: "Lock with Ink Pen" }, { code: "1F510", desc: "Closed Lock with Key" }, { code: "1F511", desc: "Key" }, { code: "1F528", desc: "Hammer" }, { code: "1F52B", desc: "Pistol" }, { code: "1F527", desc: "Wrench" }, { code: "1F529", desc: "Nut and Bolt" }, { code: "1F517", desc: "Link Symbol" }, { code: "1F489", desc: "Syringe" }, { code: "1F48A", desc: "Pill" }, { code: "1F6AC", desc: "Smoking Symbol" }, { code: "1F5FF", desc: "Moyai" }, { code: "1F52E", desc: "Crystal Ball" }] }, { id: "symbols", name: "Symbols", code: "1F3E7", emoticons: [{ code: "1F3E7", desc: "Automated Teller Machine" }, { code: "1F6AE", desc: "Put Litter in Its Place Symbol" }, { code: "1F6B0", desc: "Potable Water Symbol" }, { code: "267F", desc: "Wheelchair Symbol" }, { code: "1F6B9", desc: "Mens Symbol" }, { code: "1F6BA", desc: "Womens Symbol" }, { code: "1F6BB", desc: "Restroom" }, { code: "1F6BC", desc: "Baby Symbol" }, { code: "1F6BE", desc: "Water Closet" }, { code: "1F6C2", desc: "Passport Control" }, { code: "1F6C3", desc: "Customs" }, { code: "1F6C4", desc: "Baggage Claim" }, { code: "1F6C5", desc: "Left Luggage" }, { code: "26A0", desc: "Warning Sign" }, { code: "1F6B8", desc: "Children Crossing" }, { code: "26D4", desc: "No Entry" }, { code: "1F6AB", desc: "No Entry Sign" }, { code: "1F6B3", desc: "No Bicycles" }, { code: "1F6AD", desc: "No Smoking Symbol" }, { code: "1F6AF", desc: "Do Not Litter Symbol" }, { code: "1F6B1", desc: "Non-Potable Water Symbol" }, { code: "1F6B7", desc: "No Pedestrians" }, { code: "1F4F5", desc: "No Mobile Phones" }, { code: "1F51E", desc: "No One Under Eighteen Symbol" }, { code: "2B06", desc: "Upwards Black Arrow" }, { code: "2197", desc: "North East Arrow" }, { code: "27A1", desc: "Black Rightwards Arrow" }, { code: "2198", desc: "South East Arrow" }, { code: "2B07", desc: "Downwards Black Arrow" }, { code: "2199", desc: "South West Arrow" }, { code: "2B05", desc: "Leftwards Black Arrow" }, { code: "2196", desc: "North West Arrow" }, { code: "2195", desc: "Up Down Arrow" }, { code: "2194", desc: "Left Right Arrow" }, { code: "21A9", desc: "Leftwards Arrow with Hook" }, { code: "21AA", desc: "Rightwards Arrow with Hook" }, { code: "2934", desc: "Arrow Pointing Rightwards Then Curving Upwards" }, { code: "2935", desc: "Arrow Pointing Rightwards Then Curving Downwards" }, { code: "1F503", desc: "Clockwise Downwards and Upwards Open Circle Arrows" }, { code: "1F504", desc: "Anticlockwise Downwards and Upwards Open Circle Arrows" }, { code: "1F519", desc: "Back with Leftwards Arrow Above" }, { code: "1F51A", desc: "End with Leftwards Arrow Above" }, { code: "1F51B", desc: "On with Exclamation Mark with Left Right Arrow Above" }, { code: "1F51C", desc: "Soon with Rightwards Arrow Above" }, { code: "1F51D", desc: "Top with Upwards Arrow Above" }, { code: "1F52F", desc: "Six Pointed Star with Middle Dot" }, { code: "2648", desc: "Aries" }, { code: "2649", desc: "Taurus" }, { code: "264A", desc: "Gemini" }, { code: "264B", desc: "Cancer" }, { code: "264C", desc: "Leo" }, { code: "264D", desc: "Virgo" }, { code: "264E", desc: "Libra" }, { code: "264F", desc: "Scorpius" }, { code: "2650", desc: "Sagittarius" }, { code: "2651", desc: "Capricorn" }, { code: "2652", desc: "Aquarius" }, { code: "2653", desc: "Pisces" }, { code: "26CE", desc: "Ophiuchus" }, { code: "1F500", desc: "Twisted Rightwards Arrows" }, { code: "1F501", desc: "Clockwise Rightwards and Leftwards Open Circle Arrows" }, { code: "1F502", desc: "Clockwise Rightwards and Leftwards Open Circle Arrows with Circled One Overlay" }, { code: "25B6", desc: "Black Right-Pointing Triangle" }, { code: "23E9", desc: "Black Right-Pointing Double Triangle" }, { code: "25C0", desc: "Black Left-Pointing Triangle" }, { code: "23EA", desc: "Black Left-Pointing Double Triangle" }, { code: "1F53C", desc: "Up-Pointing Small Red Triangle" }, { code: "23EB", desc: "Black Up-Pointing Double Triangle" }, { code: "1F53D", desc: "Down-Pointing Small Red Triangle" }, { code: "23EC", desc: "Black Down-Pointing Double Triangle" }, { code: "1F3A6", desc: "Cinema" }, { code: "1F505", desc: "Low Brightness Symbol" }, { code: "1F506", desc: "High Brightness Symbol" }, { code: "1F4F6", desc: "Antenna with Bars" }, { code: "1F4F3", desc: "Vibration Mode" }, { code: "1F4F4", desc: "Mobile Phone off" }, { code: "267B", desc: "Black Universal Recycling Symbol" }, { code: "1F531", desc: "Trident Emblem" }, { code: "1F4DB", desc: "Name Badge" }, { code: "1F530", desc: "Japanese Symbol for Beginner" }, { code: "2B55", desc: "Heavy Large Circle" }, { code: "2705", desc: "White Heavy Check Mark" }, { code: "2611", desc: "Ballot Box with Check" }, { code: "2714", desc: "Heavy Check Mark" }, { code: "2716", desc: "Heavy Multiplication X" }, { code: "274C", desc: "Cross Mark" }, { code: "274E", desc: "Negative Squared Cross Mark" }, { code: "2795", desc: "Heavy Plus Sign" }, { code: "2796", desc: "Heavy Minus Sign" }, { code: "2797", desc: "Heavy Division Sign" }, { code: "27B0", desc: "Curly Loop" }, { code: "27BF", desc: "Double Curly Loop" }, { code: "303D", desc: "Part Alternation Mark" }, { code: "2733", desc: "Eight Spoked Asterisk" }, { code: "2734", desc: "Eight Pointed Black Star" }, { code: "2747", desc: "Sparkle" }, { code: "203C", desc: "Double Exclamation Mark" }, { code: "2049", desc: "Exclamation Question Mark" }, { code: "2753", desc: "Black Question Mark Ornament" }, { code: "2754", desc: "White Question Mark Ornament" }, { code: "2755", desc: "White Exclamation Mark Ornament" }, { code: "2757", desc: "Heavy Exclamation Mark Symbol" }, { code: "3030", desc: "Wavy Dash" }, { code: "2122", desc: "Trade Mark Sign" }, { code: "1F51F", desc: "Keycap Ten" }, { code: "1F4AF", desc: "Hundred Points Symbol" }, { code: "1F520", desc: "Input Symbol for Latin Capital Letters" }, { code: "1F521", desc: "Input Symbol for Latin Small Letters" }, { code: "1F522", desc: "Input Symbol for Numbers" }, { code: "1F523", desc: "Input Symbol for Symbols" }, { code: "1F524", desc: "Input Symbol for Latin Letters" }, { code: "1F170", desc: "Negative Squared Latin Capital Letter a" }, { code: "1F18E", desc: "Negative Squared Ab" }, { code: "1F171", desc: "Negative Squared Latin Capital Letter B" }, { code: "1F191", desc: "Squared Cl" }, { code: "1F192", desc: "Squared Cool" }, { code: "1F193", desc: "Squared Free" }, { code: "2139", desc: "Information Source" }, { code: "1F194", desc: "Squared Id" }, { code: "24C2", desc: "Circled Latin Capital Letter M" }, { code: "1F195", desc: "Squared New" }, { code: "1F196", desc: "Squared Ng" }, { code: "1F17E", desc: "Negative Squared Latin Capital Letter O" }, { code: "1F197", desc: "Squared Ok" }, { code: "1F17F", desc: "Negative Squared Latin Capital Letter P" }, { code: "1F198", desc: "Squared Sos" }, { code: "1F199", desc: "Squared Up with Exclamation Mark" }, { code: "1F19A", desc: "Squared Vs" }, { code: "1F201", desc: "Squared Katakana Koko" }, { code: "1F202", desc: "Squared Katakana Sa" }, { code: "1F237", desc: "Squared Cjk Unified Ideograph-6708" }, { code: "1F236", desc: "Squared Cjk Unified Ideograph-6709" }, { code: "1F22F", desc: "Squared Cjk Unified Ideograph-6307" }, { code: "1F250", desc: "Circled Ideograph Advantage" }, { code: "1F239", desc: "Squared Cjk Unified Ideograph-5272" }, { code: "1F21A", desc: "Squared Cjk Unified Ideograph-7121" }, { code: "1F232", desc: "Squared Cjk Unified Ideograph-7981" }, { code: "1F251", desc: "Circled Ideograph Accept" }, { code: "1F238", desc: "Squared Cjk Unified Ideograph-7533" }, { code: "1F234", desc: "Squared Cjk Unified Ideograph-5408" }, { code: "1F233", desc: "Squared Cjk Unified Ideograph-7a7a" }, { code: "3297", desc: "Circled Ideograph Congratulation" }, { code: "3299", desc: "Circled Ideograph Secret" }, { code: "1F23A", desc: "Squared Cjk Unified Ideograph-55b6" }, { code: "1F235", desc: "Squared Cjk Unified Ideograph-6e80" }, { code: "25AA", desc: "Black Small Square" }, { code: "25AB", desc: "White Small Square" }, { code: "25FB", desc: "White Medium Square" }, { code: "25FC", desc: "Black Medium Square" }, { code: "25FD", desc: "White Medium Small Square" }, { code: "25FE", desc: "Black Medium Small Square" }, { code: "2B1B", desc: "Black Large Square" }, { code: "2B1C", desc: "White Large Square" }, { code: "1F536", desc: "Large Orange Diamond" }, { code: "1F537", desc: "Large Blue Diamond" }, { code: "1F538", desc: "Small Orange Diamond" }, { code: "1F539", desc: "Small Blue Diamond" }, { code: "1F53A", desc: "Up-Pointing Red Triangle" }, { code: "1F53B", desc: "Down-Pointing Red Triangle" }, { code: "1F4A0", desc: "Diamond Shape with a Dot Inside" }, { code: "1F518", desc: "Radio Button" }, { code: "1F532", desc: "Black Square Button" }, { code: "1F533", desc: "White Square Button" }, { code: "26AA", desc: "Medium White Circle" }, { code: "26AB", desc: "Medium Black Circle" }, { code: "1F534", desc: "Large Red Circle" }, { code: "1F535", desc: "Large Blue Circle" }] }, { id: "flags", name: "Flags", code: "1F3C1", emoticons: [{ code: "1f3c1", desc: "Chequered Flag" }, { code: "1f1e8-1f1f3", desc: "China Flag" }, { code: "1f38c", desc: "Crossed Flags" }, { code: "1f1e9-1f1ea", desc: "Germany Flag" }, { code: "1f1ea-1f1f8", desc: "Spain Flag" }, { code: "1f1e6-1f1e8", desc: "Ascension Island Flag" }, { code: "1f1e6-1f1e9", desc: "Andorra Flag" }, { code: "1f1e6-1f1ea", desc: "United Arab Emirates Flag" }, { code: "1f1e6-1f1eb", desc: "Afghanistan Flag" }, { code: "1f1e6-1f1ec", desc: "Antigua & Barbuda Flag" }, { code: "1f1e6-1f1ee", desc: "Anguilla Flag" }, { code: "1f1e6-1f1f1", desc: "Albania Flag" }, { code: "1f1e6-1f1f2", desc: "Armenia Flag" }, { code: "1f1e6-1f1f4", desc: "Angola Flag" }, { code: "1f1e6-1f1f6", desc: "Antarctica Flag" }, { code: "1f1e6-1f1f7", desc: "Argentina Flag" }, { code: "1f1e6-1f1f8", desc: "American Samoa Flag" }, { code: "1f1e6-1f1f9", desc: "Austria Flag" }, { code: "1f1e6-1f1fa", desc: "Australia Flag" }, { code: "1f1e6-1f1fc", desc: "Aruba Flag" }, { code: "1f1e6-1f1fd", desc: "\xc5land Islands Flag" }, { code: "1f1e6-1f1ff", desc: "Azerbaijan Flag" }, { code: "1f1e7-1f1e7", desc: "Barbados Flag" }, { code: "1f1e7-1f1e9", desc: "Bangladesh Flag" }, { code: "1f1e7-1f1ea", desc: "Belgium Flag" }, { code: "1f1e7-1f1eb", desc: "Burkina Faso Flag" }, { code: "1f1e7-1f1ec", desc: "Bulgaria Flag" }, { code: "1f1e7-1f1ed", desc: "Bahrain Flag" }, { code: "1f1e7-1f1ee", desc: "Burundi Flag" }, { code: "1f1e7-1f1ef", desc: "Benin Flag" }, { code: "1f1e7-1f1f1", desc: "St. Barth\xe9lemy Flag" }, { code: "1f1e7-1f1f2", desc: "Bermuda Flag" }, { code: "1f1e7-1f1f4", desc: "Bolivia Flag" }, { code: "1f1e7-1f1f6", desc: "Caribbean Netherlands Flag" }, { code: "1f1e7-1f1f7", desc: "Brazil Flag" }, { code: "1f1e7-1f1f8", desc: "Bahamas Flag" }, { code: "1f1e7-1f1f9", desc: "Bhutan Flag" }, { code: "1f1e7-1f1fb", desc: "Bouvet Island Flag" }, { code: "1f1e7-1f1fc", desc: "Botswana Flag" }, { code: "1f1e7-1f1fe", desc: "Belarus Flag" }, { code: "1f1e7-1f1ff", desc: "Belize Flag" }, { code: "1f1e8-1f1e6", desc: "Canada Flag" }, { code: "1f1e8-1f1e8", desc: "Cocos (keeling) Islands Flag" }, { code: "1f1e8-1f1e9", desc: "Congo - Kinshasa Flag" }, { code: "1f1e8-1f1eb", desc: "Central African Republic Flag" }, { code: "1f1e8-1f1ec", desc: "Congo - Brazzaville Flag" }, { code: "1f1e8-1f1ed", desc: "Switzerland Flag" }, { code: "1f1e8-1f1ee", desc: "C\xf4te D\u2019ivoire Flag" }, { code: "1f1e8-1f1f0", desc: "Cook Islands Flag" }, { code: "1f1e8-1f1f1", desc: "Chile Flag" }, { code: "1f1e8-1f1f2", desc: "Cameroon Flag" }, { code: "1f1e8-1f1f4", desc: "Colombia Flag" }, { code: "1f1e8-1f1f7", desc: "Costa Rica Flag" }, { code: "1f1e8-1f1fa", desc: "Cuba Flag" }, { code: "1f1e8-1f1fb", desc: "Cape Verde Flag" }, { code: "1f1e8-1f1fc", desc: "Cura\xe7ao Flag" }, { code: "1f1e8-1f1fd", desc: "Christmas Island Flag" }, { code: "1f1e8-1f1fe", desc: "Cyprus Flag" }, { code: "1f1e8-1f1ff", desc: 'Czechia Flag"' }, { code: "1f1e9-1f1ec", desc: "Diego Garcia Flag" }, { code: "1f1e9-1f1ef", desc: "Djibouti Flag" }, { code: "1f1e9-1f1f0", desc: "Denmark Flag" }, { code: "1f1e9-1f1f2", desc: "Dominica Flag" }, { code: "1f1e9-1f1f4", desc: "Dominican Republic Flag" }, { code: "1f1e9-1f1ff", desc: "Algeria Flag" }, { code: "1f1ea-1f1e6", desc: "Ceuta & Melilla Flag" }, { code: "1f1ea-1f1e8", desc: "Ecuador Flag" }, { code: "1f1ea-1f1ea", desc: "Estonia Flag" }, { code: "1f1ea-1f1ec", desc: "Egypt Flag" }, { code: "1f1ea-1f1ed", desc: "Western Sahara Flag" }, { code: "1f1ea-1f1f7", desc: "Eritrea Flag" }, { code: "1f1ea-1f1f9", desc: "Ethiopia Flag" }, { code: "1f1ea-1f1fa", desc: "European Union Flag" }, { code: "1f1eb-1f1ee", desc: "Finland Flag" }, { code: "1f1eb-1f1ef", desc: "Fiji Flag" }, { code: "1f1eb-1f1f0", desc: "Falkland Islands Flag" }, { code: "1f1eb-1f1f2", desc: "Micronesia Flag" }, { code: "1f1eb-1f1f4", desc: "Faroe Islands Flag" }, { code: "1f1ec-1f1e6", desc: "Gabon Flag" }, { code: "1f1ec-1f1e9", desc: "Grenada Flag" }, { code: "1f1ec-1f1ea", desc: "Georgia Flag" }, { code: "1f1ec-1f1eb", desc: "French Guiana Flag" }, { code: "1f1ec-1f1ec", desc: "Guernsey Flag" }, { code: "1f1ec-1f1ed", desc: "Ghana Flag" }, { code: "1f1ec-1f1ee", desc: "Gibraltar Flag" }, { code: "1f1ec-1f1f1", desc: "Greenland Flag" }, { code: "1f1ec-1f1f2", desc: "Gambia Flag" }, { code: "1f1ec-1f1f3", desc: "Guinea Flag" }, { code: "1f1ec-1f1f5", desc: "Guadeloupe Flag" }, { code: "1f1ec-1f1f6", desc: "Equatorial Guinea Flag" }, { code: "1f1ec-1f1f7", desc: "Greece Flag" }, { code: "1f1ec-1f1f8", desc: "South Georgia & South Sandwich Islands Flag" }, { code: "1f1ec-1f1f9", desc: "Guatemala Flag" }, { code: "1f1ec-1f1fa", desc: "Guam Flag" }, { code: "1f1ec-1f1fc", desc: "Guinea-Bissau Flag" }, { code: "1f1ec-1f1fe", desc: "Guyana Flag" }, { code: "1f1ed-1f1f0", desc: "Hong Kong Sar China Flag" }, { code: "1f1ed-1f1f2", desc: "Heard & Mcdonald Islands Flag" }, { code: "1f1ed-1f1f3", desc: "Honduras Flag" }, { code: "1f1ed-1f1f7", desc: "Croatia Flag" }, { code: "1f1ed-1f1f9", desc: "Haiti Flag" }, { code: "1f1ed-1f1fa", desc: "Hungary Flag" }, { code: "1f1ee-1f1e8", desc: "Canary Islands Flag" }, { code: "1f1ee-1f1e9", desc: "Indonesia Flag" }, { code: "1f1ee-1f1ea", desc: "Ireland Flag" }, { code: "1f1ee-1f1f1", desc: "Israel Flag" }, { code: "1f1ee-1f1f2", desc: "Isle of Man Flag" }, { code: "1f1ee-1f1f3", desc: "India Flag" }, { code: "1f1ee-1f1f4", desc: "British Indian Ocean Territory Flag" }, { code: "1f1ee-1f1f6", desc: "Iraq Flag" }, { code: "1f1ee-1f1f7", desc: "Iran Flag" }, { code: "1f1ee-1f1f8", desc: "Iceland Flag" }, { code: "1f1ef-1f1ea", desc: "Jersey Flag" }, { code: "1f1ef-1f1f2", desc: "Jamaica Flag" }, { code: "1f1ef-1f1f4", desc: "Jordan Flag" }, { code: "1f1f0-1f1ea", desc: "Kenya Flag" }, { code: "1f1f0-1f1ec", desc: "Kyrgyzstan Flag" }, { code: "1f1f0-1f1ed", desc: "Cambodia Flag" }, { code: "1f1f0-1f1ee", desc: "Kiribati Flag" }, { code: "1f1f0-1f1f2", desc: "Comoros Flag" }, { code: "1f1f0-1f1f3", desc: "St. Kitts & Nevis Flag" }, { code: "1f1f0-1f1f5", desc: "North Korea Flag" }, { code: "1f1f0-1f1fc", desc: "Kuwait Flag" }, { code: "1f1f0-1f1fe", desc: "Cayman Islands Flag" }, { code: "1f1f0-1f1ff", desc: "Kazakhstan Flag" }, { code: "1f1f1-1f1e6", desc: "Laos Flag" }, { code: "1f1f1-1f1e7", desc: "Lebanon Flag" }, { code: "1f1f1-1f1e8", desc: "St. Lucia Flag" }, { code: "1f1f1-1f1ee", desc: "Liechtenstein Flag" }, { code: "1f1f1-1f1f0", desc: "Sri Lanka Flag" }, { code: "1f1f1-1f1f7", desc: "Liberia Flag" }, { code: "1f1f1-1f1f8", desc: "Lesotho Flag" }, { code: "1f1f1-1f1f9", desc: "Lithuania Flag" }, { code: "1f1f1-1f1fa", desc: "Luxembourg Flag" }, { code: "1f1f1-1f1fb", desc: "Latvia Flag" }, { code: "1f1f1-1f1fe", desc: "Libya Flag" }, { code: "1f1f2-1f1e6", desc: "Morocco Flag" }, { code: "1f1f2-1f1e8", desc: "Monaco Flag" }, { code: "1f1f2-1f1e9", desc: "Moldova Flag" }, { code: "1f1f2-1f1ea", desc: "Montenegro Flag" }, { code: "1f1f2-1f1eb", desc: "St. Martin Flag" }, { code: "1f1f2-1f1ec", desc: "Madagascar Flag" }, { code: "1f1f2-1f1ed", desc: "Marshall Islands Flag" }, { code: "1f1f2-1f1f0", desc: "Macedonia Flag" }, { code: "1f1f2-1f1f1", desc: "Mali Flag" }, { code: "1f1f2-1f1f2", desc: "Myanmar (burma) Flag" }, { code: "1f1f2-1f1f3", desc: "Mongolia Flag" }, { code: "1f1f2-1f1f4", desc: "Macau Sar China Flag" }, { code: "1f1f2-1f1f5", desc: "Northern Mariana Islands Flag" }, { code: "1f1f2-1f1f6", desc: "Martinique Flag" }, { code: "1f1f2-1f1f7", desc: "Mauritania Flag" }, { code: "1f1f2-1f1f8", desc: "Montserrat Flag" }, { code: "1f1f2-1f1f9", desc: "Malta Flag" }, { code: "1f1f2-1f1fa", desc: "Mauritius Flag" }, { code: "1f1f2-1f1fb", desc: "Maldives Flag" }, { code: "1f1f2-1f1fc", desc: "Malawi Flag" }, { code: "1f1f2-1f1fd", desc: "Mexico Flag" }, { code: "1f1f2-1f1fe", desc: "Malaysia Flag" }, { code: "1f1f2-1f1ff", desc: "Mozambique Flag" }, { code: "1f1f3-1f1e6", desc: "Namibia Flag" }, { code: "1f1f3-1f1e8", desc: "New Caledonia Flag" }, { code: "1f1f3-1f1ea", desc: "Niger Flag" }, { code: "1f1f3-1f1eb", desc: "Norfolk Island Flag" }, { code: "1f1f3-1f1ec", desc: "Nigeria Flag" }, { code: "1f1f3-1f1ee", desc: "Nicaragua Flag" }, { code: "1f1f3-1f1f1", desc: "Netherlands Flag" }, { code: "1f1f3-1f1f4", desc: "Norway Flag" }, { code: "1f1f3-1f1f5", desc: "Nepal Flag" }, { code: "1f1f3-1f1f7", desc: "Nauru Flag" }, { code: "1f1f3-1f1fa", desc: "Niue Flag" }, { code: "1f1f3-1f1ff", desc: "New Zealand Flag" }, { code: "1f1f4-1f1f2", desc: "Oman Flag" }, { code: "1f1f8-1f1ff", desc: "Swaziland Flag" }, { code: "1f1f5-1f1e6", desc: "Panama Flag" }, { code: "1f1f5-1f1ea", desc: "Peru Flag" }, { code: "1f1f5-1f1eb", desc: "French Polynesia Flag" }, { code: "1f1f5-1f1ec", desc: "Papua New Guinea Flag" }, { code: "1f1f5-1f1ed", desc: "Philippines Flag" }, { code: "1f1f5-1f1f0", desc: "Pakistan Flag" }, { code: "1f1f5-1f1f1", desc: "Poland Flag" }, { code: "1f1f5-1f1f2", desc: "St. Pierre & Miquelon  Flag" }, { code: "1f1f5-1f1f3", desc: "Pitcairn Islands Flag" }, { code: "1f1f5-1f1f7", desc: "Puerto Rico Flag" }, { code: "1f1f5-1f1f8", desc: "Palestinian Territories Flag" }, { code: "1f1f5-1f1f9", desc: "Portugal Flag" }, { code: "1f1f5-1f1fc", desc: "Palau Flag" }, { code: "1f1f5-1f1fe", desc: "Paraguay Flag" }, { code: "1f1f6-1f1e6", desc: "Qatar Flag" }, { code: "1f1f7-1f1ea", desc: "R\xe9union Flag" }, { code: "1f1f7-1f1f4", desc: "Romania Flag" }, { code: "1f1f7-1f1f8", desc: "Serbia Flag" }, { code: "1f1f7-1f1fc", desc: "Rwanda Flag" }, { code: "1f1f8-1f1e6", desc: "Saudi Arabia Flag" }, { code: "1f1f8-1f1e7", desc: "Solomon Islands Flag" }, { code: "1f1f8-1f1e8", desc: "Seychelles Flag" }, { code: "1f1f8-1f1e9", desc: "Sudan Flag" }, { code: "1f1f8-1f1ea", desc: "Sweden Flag" }, { code: "1f1f8-1f1ec", desc: "Singapore Flag" }, { code: "1f1f8-1f1ee", desc: "Slovenia Flag" }, { code: "1f1f8-1f1ed", desc: "St. Helena  Flag" }, { code: "1f1f8-1f1ef", desc: "Svalbard & Jan Mayen  Flag" }, { code: "1f1f8-1f1f1", desc: "Sierra Leone Flag" }, { code: "1f1f8-1f1f2", desc: "San Marino Flag" }, { code: "1f1f8-1f1f3", desc: "Senegal Flag" }, { code: "1f1f8-1f1f4", desc: "Somalia Flag" }, { code: "1f1f8-1f1f7", desc: "Suriname Flag" }, { code: "1f1f8-1f1f8", desc: "South Sudan  Flag" }, { code: "1f1f8-1f1f9", desc: "S\xe3o Tom\xe9 & Pr\xedncipe Flag" }, { code: "1f1f8-1f1fb", desc: "El Salvador Flag" }, { code: "1f1f8-1f1fd", desc: "Sint Maarten Flag" }, { code: "1f1f8-1f1fe", desc: "Syria Flag" }, { code: "1f1f9-1f1e6", desc: "Tristan Da Cunha Flag" }, { code: "1f1f9-1f1e8", desc: "Turks & Caicos Islands  Flag" }, { code: "1f1f9-1f1eb", desc: "French Southern Territories Flag" }, { code: "1f1f9-1f1ec", desc: "Togo Flag" }, { code: "1f1f9-1f1ed", desc: "Thailand Flag" }, { code: "1f1f9-1f1ef", desc: "Tajikistan Flag" }, { code: "1f1f9-1f1f0", desc: "Tokelau Flag" }, { code: "1f1f9-1f1f1", desc: "Timor-Leste Flag" }, { code: "1f1f9-1f1f2", desc: "Turkmenistan Flag" }, { code: "1f1f9-1f1f3", desc: "Tunisia Flag" }, { code: "1f1f9-1f1f4", desc: "Tonga Flag" }, { code: "1f1f9-1f1f7", desc: "Turkey Flag" }, { code: "1f1f9-1f1f9", desc: "Trinidad & Tobago Flag" }, { code: "1f1f9-1f1fb", desc: "Tuvalu Flag" }, { code: "1f1f9-1f1fc", desc: "Taiwan Flag" }, { code: "1f1f9-1f1ff", desc: "Tanzania Flag" }, { code: "1f1fa-1f1e6", desc: "Ukraine City  Flag" }, { code: "1f1fa-1f1ec", desc: "Uganda Flag" }, { code: "1f1fa-1f1f2", desc: "U.s. Outlying Islands  Flag" }, { code: "1f1fa-1f1fe", desc: "Uruguay  Flag" }, { code: "1f1fa-1f1ff", desc: "Uzbekistan Flag" }, { code: "1f1fb-1f1e6", desc: "Vatican City  Flag" }, { code: "1f1fb-1f1e8", desc: "St. Vincent & Grenadines Flag" }, { code: "1f1fb-1f1ea", desc: "Venezuela Flag" }, { code: "1f1fb-1f1ec", desc: "British Virgin Islands Flag" }, { code: "1f1fb-1f1ee", desc: "U.s. Virgin Islands Flag" }, { code: "1f1fb-1f1f3", desc: "Vietnam Flag" }, { code: "1f1fc-1f1f8", desc: "Samoa Flag" }, { code: "1f1fb-1f1fa", desc: "Vanuatu Flag" }, { code: "1f1fc-1f1eb", desc: '"Wallis & Futuna Flag' }, { code: "1f1fd-1f1f0", desc: "Kosovo Flag" }, { code: "1f1fe-1f1ea", desc: "Yemen Flag" }, { code: "1f1fe-1f1f9", desc: "Mayotte Flag" }, { code: "1f1ff-1f1e6", desc: "South Africa Flag" }, { code: "1f1ff-1f1f2", desc: "Zambia Flag" }, { code: "1f1ff-1f1fc", desc: "Zimbabwe Flag" }, { code: "1f1eb-1f1f7", desc: "France Flag" }, { code: "1f1ec-1f1e7", desc: "United Kingdom  Flag" }, { code: "1f1ee-1f1f9", desc: "Italy Flag" }, { code: "1f1ef-1f1f5", desc: "Japan Flag" }, { code: "1f1f0-1f1f7", desc: "South Korea Flag" }, { code: "1f1f7-1f1fa", desc: "Russia Flag" }, { code: "1F6A9", desc: "Triangular Flag on Post" }, { code: "1f1fa-1f1f8", desc: "United States Flag" }] }], emoticonsButtons: ["emoticonsBack", "|"], emoticonsUseImage: !0 }), mt.PLUGINS.emoticons = function (m) { var v = m.$, i = m.opts.emoticonsSet, r = i && i[0], o = ""; function s() { if (!m.selection.isCollapsed()) return !1; var e = m.selection.element(), t = m.selection.endElement(); if (e && m.node.hasClass(e, "fr-emoticon")) return e; if (t && m.node.hasClass(t, "fr-emoticon")) return t; var a = m.selection.ranges(0), n = a.startContainer; if (n.nodeType == Node.ELEMENT_NODE && 0 < n.childNodes.length && 0 < a.startOffset) { var i = n.childNodes[a.startOffset - 1]; if (m.node.hasClass(i, "fr-emoticon")) return i } return !1 } function l() { return "".concat(function n(e, t) { return '<div class="fr-buttons fr-tabs fr-tabs-scroll">\n                        '.concat(function a(e, n) { var i = ""; return e.forEach(function (e) { var t = { image: e.code.toLowerCase() }, a = { elementClass: e.id === n.id ? "fr-active fr-active-tab" : "", emoticonsUnicodeClass: m.opts.emoticonsUseImage ? "" : "fr-tabs-unicode", title: m.language.translate(e.name), dataCmd: "setEmoticonCategory", dataParam1: e.id, image: m.opts.emoticonsUseImage ? '<img src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/'.concat(t.image, '.svg"/>') : "&#x".concat(t.image, ";") }; i += '<button class="fr-command fr-btn '.concat(a.elementClass, " ").concat(a.emoticonsUnicodeClass, '" \n      title="').concat(a.title, '" data-cmd="').concat(a.dataCmd, '" data-param1="').concat(a.dataParam1, '">\n       ').concat(a.image, " </button>") }), i }(e, t), "\n                        </div>") }(i, r), "\n                      ").concat(function a(e) { return '\n        <div class="fr-icon-container fr-emoticon-container">\n            '.concat(function t(e) { var i = ""; return e.emoticons.forEach(function (e) { var t = e.code.split("-").reduce(function (e, t) { return e ? "".concat(e, "&zwj;&#x").concat(t.toLowerCase(), ";") : "&#x".concat(t.toLowerCase(), ";") }, ""), a = { image: e.code.toLowerCase(), compiledCode: e.uCode ? e.uCode : t }, n = { dataParam1: e.code.toLowerCase(), dataParam2: a.compiledCode, title: m.language.translate(e.desc), image: m.opts.emoticonsUseImage ? '<img src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/'.concat(a.image, '.svg"/>') : "".concat(a.compiledCode), desc: m.language.translate(e.desc) }; i += '<span class="fr-command fr-emoticon fr-icon" role="button" \n      data-cmd="insertEmoticon" data-param1="'.concat(n.dataParam1, '" \n      data-param2="').concat(n.dataParam2, '"  title="').concat(n.title, '" >\n      ').concat(n.image, '<span class="fr-sr-only">').concat(n.desc, "&nbsp;&nbsp;&nbsp;</span></span>") }), i }(e), "\n        </div>\n        ") }(r), "\n                      ").concat(function e() { return m.opts.emoticonsUseImage ? '<p style="font-size: 12px; text-align: center; padding: 0 5px;">Emoji free by <a class="fr-link" tabIndex="-1" href="http://emojione.com/" target="_blank" rel="nofollow noopener noreferrer" role="link" aria-label="Open Emoji One website.">Emoji One</a></p>' : "" }()) } return { _init: function e() { var a = function a() { for (var e = m.el.querySelectorAll(".fr-emoticon:not(.fr-deletable)"), t = 0; t < e.length; t++)e[t].className += " fr-deletable" }; a(), m.events.on("html.set", a), m.events.on("keydown", function (e) { if (m.keys.isCharacter(e.which) && m.selection.inEditor()) { var t = m.selection.ranges(0), a = s(); m.node.hasClass(a, "fr-emoticon-img") && a && (0 === t.startOffset && m.selection.element() === a ? v(a).before(mt.MARKERS + mt.INVISIBLE_SPACE) : v(a).after(mt.INVISIBLE_SPACE + mt.MARKERS), m.selection.restore()) } }), m.events.on("keyup", function (e) { for (var t = m.el.querySelectorAll(".fr-emoticon"), a = 0; a < t.length; a++)"undefined" != typeof t[a].textContent && 0 === t[a].textContent.replace(/\u200B/gi, "").length && v(t[a]).remove(); if (!(e.which >= mt.KEYCODE.ARROW_LEFT && e.which <= mt.KEYCODE.ARROW_DOWN)) { var n = s(); m.node.hasClass(n, "fr-emoticon-img") && (v(n).append(mt.MARKERS), m.selection.restore()) } }) }, insert: function c(e, t) { var a = s(), n = m.selection.ranges(0); a ? (0 === n.startOffset && m.selection.element() === a ? v(a).before(mt.MARKERS + mt.INVISIBLE_SPACE) : 0 < n.startOffset && m.selection.element() === a && n.commonAncestorContainer.parentNode.classList.contains("fr-emoticon") && v(a).after(mt.INVISIBLE_SPACE + mt.MARKERS), m.selection.restore(), m.html.insert('<span class="fr-emoticon fr-deletable'.concat(t ? " fr-emoticon-img" : "", '"').concat(t ? ' style="background: url('.concat(t, ');"') : "", ">").concat(t ? "&nbsp;" : e, "</span>&nbsp;").concat(mt.MARKERS), !0)) : m.html.insert('<span class="fr-emoticon fr-deletable'.concat(t ? " fr-emoticon-img" : "", '"').concat(t ? ' style="background: url('.concat(t, ');"') : "", ">").concat(t ? "&nbsp;" : e, "</span>&nbsp;"), !0) }, setEmoticonCategory: function a(t) { r = i.filter(function (e) { return e.id === t })[0], function e() { m.popups.get("emoticons").html(o + l()) }() }, showEmoticonsPopup: function d() { var e = m.popups.get("emoticons"); if (e || (e = function r() { m.opts.toolbarInline && 0 < m.opts.emoticonsButtons.length && (o = '<div class="fr-buttons fr-emoticons-buttons fr-tabs">'.concat(m.button.buildList(m.opts.emoticonsButtons), "</div>")); var e = { buttons: o, custom_layer: l() }, t = m.popups.create("emoticons", e); return function a(h) { m.events.on("popup.tab", function (e) { var t = v(e.currentTarget); if (!m.popups.isVisible("emoticons") || !t.is("span, a")) return !0; var a, n, i, r = e.which; if (mt.KEYCODE.TAB == r) { if (t.is("span.fr-emoticon") && e.shiftKey || t.is("a") && !e.shiftKey) { var o = h.find(".fr-buttons"); a = !m.accessibility.focusToolbar(o, !!e.shiftKey) } if (!1 !== a) { var s = h.find("span.fr-emoticon:focus").first().concat(h.findVisible(" div.fr-tabs").first().concat(h.find("a"))); t.is("span.fr-emoticon") && (s = s.not("span.fr-emoticon:not(:focus)")), n = s.index(t), n = e.shiftKey ? ((n - 1) % s.length + s.length) % s.length : (n + 1) % s.length, i = s.get(n), m.events.disableBlur(), i.focus(), a = !1 } } else if (mt.KEYCODE.ARROW_UP == r || mt.KEYCODE.ARROW_DOWN == r || mt.KEYCODE.ARROW_LEFT == r || mt.KEYCODE.ARROW_RIGHT == r) { if (t.is("span.fr-emoticon")) { var l = t.parent().find("span.fr-emoticon"); n = l.index(t); var c = m.opts.emoticonsStep, d = Math.floor(l.length / c), f = n % c, p = Math.floor(n / c), u = p * c + f, g = d * c; mt.KEYCODE.ARROW_UP == r ? u = ((u - c) % g + g) % g : mt.KEYCODE.ARROW_DOWN == r ? u = (u + c) % g : mt.KEYCODE.ARROW_LEFT == r ? u = ((u - 1) % g + g) % g : mt.KEYCODE.ARROW_RIGHT == r && (u = (u + 1) % g), i = v(l.get(u)), m.events.disableBlur(), i.focus(), a = !1 } } else mt.KEYCODE.ENTER == r && (t.is("a") ? t[0].click() : m.button.exec(t), a = !1); return !1 === a && (e.preventDefault(), e.stopPropagation()), a }, !0) }(t), t }()), !e.hasClass("fr-active")) { m.popups.refresh("emoticons"), m.popups.setContainer("emoticons", m.$tb); var t = m.$tb.find('.fr-command[data-cmd="emoticons"]'), a = m.button.getPosition(t), n = a.left, i = a.top; m.popups.show("emoticons", n, i, t.outerHeight()) } }, back: function t() { m.popups.hide("emoticons"), m.toolbar.showInline() } } }, mt.DefineIcon("emoticons", { NAME: "smile-o", FA5NAME: "smile", SVG_KEY: "smile" }), mt.RegisterCommand("emoticons", { title: "Emoticons", undo: !1, focus: !0, refreshAfterCallback: !1, popup: !0, callback: function () { this.popups.isVisible("emoticons") ? (this.$el.find(".fr-marker").length && (this.events.disableBlur(), this.selection.restore()), this.popups.hide("emoticons")) : this.emoticons.showEmoticonsPopup() }, plugin: "emoticons" }), mt.RegisterCommand("insertEmoticon", { callback: function (e, t, a) { this.emoticons.insert(a, this.opts.emoticonsUseImage ? "https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/".concat(t, ".svg") : null), this.popups.hide("emoticons") } }), mt.RegisterCommand("setEmoticonCategory", { undo: !1, focus: !1, callback: function (e, t) { this.emoticons.setEmoticonCategory(t) } }), mt.DefineIcon("emoticonsBack", { NAME: "arrow-left", SVG_KEY: "back" }), mt.RegisterCommand("emoticonsBack", { title: "Back", undo: !1, focus: !1, back: !0, refreshAfterCallback: !1, callback: function () { this.emoticons.back() } }), Object.assign(mt.DEFAULTS, { entities: "&quot;&#39;&iexcl;&cent;&pound;&curren;&yen;&brvbar;&sect;&uml;&copy;&ordf;&laquo;&not;&shy;&reg;&macr;&deg;&plusmn;&sup2;&sup3;&acute;&micro;&para;&middot;&cedil;&sup1;&ordm;&raquo;&frac14;&frac12;&frac34;&iquest;&Agrave;&Aacute;&Acirc;&Atilde;&Auml;&Aring;&AElig;&Ccedil;&Egrave;&Eacute;&Ecirc;&Euml;&Igrave;&Iacute;&Icirc;&Iuml;&ETH;&Ntilde;&Ograve;&Oacute;&Ocirc;&Otilde;&Ouml;&times;&Oslash;&Ugrave;&Uacute;&Ucirc;&Uuml;&Yacute;&THORN;&szlig;&agrave;&aacute;&acirc;&atilde;&auml;&aring;&aelig;&ccedil;&egrave;&eacute;&ecirc;&euml;&igrave;&iacute;&icirc;&iuml;&eth;&ntilde;&ograve;&oacute;&ocirc;&otilde;&ouml;&divide;&oslash;&ugrave;&uacute;&ucirc;&uuml;&yacute;&thorn;&yuml;&OElig;&oelig;&Scaron;&scaron;&Yuml;&fnof;&circ;&tilde;&Alpha;&Beta;&Gamma;&Delta;&Epsilon;&Zeta;&Eta;&Theta;&Iota;&Kappa;&Lambda;&Mu;&Nu;&Xi;&Omicron;&Pi;&Rho;&Sigma;&Tau;&Upsilon;&Phi;&Chi;&Psi;&Omega;&alpha;&beta;&gamma;&delta;&epsilon;&zeta;&eta;&theta;&iota;&kappa;&lambda;&mu;&nu;&xi;&omicron;&pi;&rho;&sigmaf;&sigma;&tau;&upsilon;&phi;&chi;&psi;&omega;&thetasym;&upsih;&piv;&ensp;&emsp;&thinsp;&zwnj;&zwj;&lrm;&rlm;&ndash;&mdash;&lsquo;&rsquo;&sbquo;&ldquo;&rdquo;&bdquo;&dagger;&Dagger;&bull;&hellip;&permil;&prime;&Prime;&lsaquo;&rsaquo;&oline;&frasl;&euro;&image;&weierp;&real;&trade;&alefsym;&larr;&uarr;&rarr;&darr;&harr;&crarr;&lArr;&uArr;&rArr;&dArr;&hArr;&forall;&part;&exist;&empty;&nabla;&isin;&notin;&ni;&prod;&sum;&minus;&lowast;&radic;&prop;&infin;&ang;&and;&or;&cap;&cup;&int;&there4;&sim;&cong;&asymp;&ne;&equiv;&le;&ge;&sub;&sup;&nsub;&sube;&supe;&oplus;&otimes;&perp;&sdot;&lceil;&rceil;&lfloor;&rfloor;&lang;&rang;&loz;&spades;&clubs;&hearts;&diams;" }), mt.PLUGINS.entities = function (i) { var r, o, s = i.$; function n(e) { var t = e.textContent; if (t.match(r)) { for (var a = "", n = 0; n < t.length; n++)o[t[n]] ? a += o[t[n]] : a += t[n]; e.textContent = a } } function l(e) { if (e && 0 <= ["STYLE", "SCRIPT", "svg", "IFRAME"].indexOf(e.tagName)) return !0; for (var t = i.node.contents(e), a = 0; a < t.length; a++)t[a].nodeType === Node.TEXT_NODE ? n(t[a]) : l(t[a]); return e.nodeType === Node.TEXT_NODE && n(e), !1 } var c = function c(e) { return 0 === e.length ? "" : i.clean.exec(e, l).replace(/\&amp;/g, "&") }; return { _init: function d() { i.opts.htmlSimpleAmpersand || (i.opts.entities = "".concat(i.opts.entities, "&amp;")); var e = s(document.createElement("div")).html(i.opts.entities).text(), t = i.opts.entities.split(";"); o = {}, r = ""; for (var a = 0; a < e.length; a++) { var n = e.charAt(a); o[n] = "".concat(t[a], ";"), r += "\\".concat(n + (a < e.length - 1 ? "|" : "")) } r = new RegExp("(".concat(r, ")"), "g"), i.events.on("html.get", c, !0) } } }, Object.assign(mt.POPUP_TEMPLATES, { "file.insert": "[_BUTTONS_][_UPLOAD_LAYER_][_PROGRESS_BAR_]" }), Object.assign(mt.DEFAULTS, { fileUpload: !0, fileUploadURL: null, fileUploadParam: "file", fileUploadParams: {}, fileUploadToS3: !1, fileUploadMethod: "POST", fileMaxSize: 10485760, fileAllowedTypes: ["*"], fileInsertButtons: ["fileBack", "|"], fileUseSelectedText: !1 }), mt.PLUGINS.file = function (d) { var n, f = d.$, l = "https://i.froala.com/upload", p = 2, u = 3, g = 4, c = 5, h = 6, a = {}; function m() { var e = d.popups.get("file.insert"); e || (e = R()), e.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"), e.find(".fr-file-progress-bar-layer").addClass("fr-active"), e.find(".fr-buttons").hide(), i(d.language.translate("Uploading"), 0) } function r(e) { var t = d.popups.get("file.insert"); t && (t.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"), t.find(".fr-file-progress-bar-layer").removeClass("fr-active"), t.find(".fr-buttons").show(), e && (d.events.focus(), d.popups.hide("file.insert"))) } function i(e, t) { var a = d.popups.get("file.insert"); if (a) { var n = a.find(".fr-file-progress-bar-layer"); n.find("h3").text(e + (t ? " ".concat(t, "%") : "")), n.removeClass("fr-error"), t ? (n.find("div").removeClass("fr-indeterminate"), n.find("div > span").css("width", "".concat(t, "%"))) : n.find("div").addClass("fr-indeterminate") } } function v(e, t, a) { d.edit.on(), d.events.focus(!0), d.selection.restore(), d.opts.fileUseSelectedText && d.selection.text().length && (t = d.selection.text()), d.html.insert('<a href="'.concat(e, '" target="_blank" id="fr-inserted-file" class="fr-file">').concat(t, "</a>")); var n = d.$el.find("#fr-inserted-file"); n.removeAttr("id"), d.popups.hide("file.insert"), d.undo.saveStep(), w(), d.events.trigger("file.inserted", [n, a]) } function b(e) { var t = this.status, a = this.response, n = this.responseXML, i = this.responseText; try { if (d.opts.fileUploadToS3) if (201 === t) { var r = function s(e) { try { var t = f(e).find("Location").text(), a = f(e).find("Key").text(); return !1 === d.events.trigger("file.uploadedToS3", [t, a, e], !0) ? (d.edit.on(), !1) : t } catch (n) { return C(g, e), !1 } }(n); r && v(r, e, a || n) } else C(g, a || n); else if (200 <= t && t < 300) { var o = function l(e) { try { if (!1 === d.events.trigger("file.uploaded", [e], !0)) return d.edit.on(), !1; var t = JSON.parse(e); return t.link ? t : (C(p, e), !1) } catch (a) { return C(g, e), !1 } }(i); o && v(o.link, e, a || i) } else C(u, a || i) } catch (c) { C(g, a || i) } } function E() { C(g, this.response || this.responseText || this.responseXML) } function A(e) { if (e.lengthComputable) { var t = e.loaded / e.total * 100 | 0; i(d.language.translate("Uploading"), t) } } function C(e, t) { d.edit.on(), function n(e) { m(); var t = d.popups.get("file.insert").find(".fr-file-progress-bar-layer"); t.addClass("fr-error"); var a = t.find("h3"); a.text(e), d.events.disableBlur(), a.focus() }(d.language.translate("Something went wrong. Please try again.")), d.events.trigger("file.error", [{ code: e, message: a[e] }, t]) } function T() { d.edit.on(), r(!0) } function o(e) { if (void 0 !== e && 0 < e.length) { if (!1 === d.events.trigger("file.beforeUpload", [e])) return !1; var t, a = e[0]; if ((null === d.opts.fileUploadURL || d.opts.fileUploadURL === l) && !d.opts.fileUploadToS3) return function s(i) { var r = new FileReader; r.onload = function () { for (var e = r.result, t = atob(r.result.split(",")[1]), a = [], n = 0; n < t.length; n++)a.push(t.charCodeAt(n)); e = window.URL.createObjectURL(new Blob([new Uint8Array(a)], { type: i.type })), d.file.insert(e, i.name, null) }, m(), r.readAsDataURL(i) }(a), !1; if (a.size > d.opts.fileMaxSize) return C(c), !1; if (d.opts.fileAllowedTypes.indexOf("*") < 0 && d.opts.fileAllowedTypes.indexOf(a.type.replace(/file\//g, "")) < 0) return C(h), !1; if (d.drag_support.formdata && (t = d.drag_support.formdata ? new FormData : null), t) { var n; if (!1 !== d.opts.fileUploadToS3) for (n in t.append("key", d.opts.fileUploadToS3.keyStart + (new Date).getTime() + "-" + (a.name || "untitled")), t.append("success_action_status", "201"), t.append("X-Requested-With", "xhr"), t.append("Content-Type", a.type), d.opts.fileUploadToS3.params) d.opts.fileUploadToS3.params.hasOwnProperty(n) && t.append(n, d.opts.fileUploadToS3.params[n]); for (n in d.opts.fileUploadParams) d.opts.fileUploadParams.hasOwnProperty(n) && t.append(n, d.opts.fileUploadParams[n]); t.append(d.opts.fileUploadParam, a); var i = d.opts.fileUploadURL; d.opts.fileUploadToS3 && (i = d.opts.fileUploadToS3.uploadURL ? d.opts.fileUploadToS3.uploadURL : "https://".concat(d.opts.fileUploadToS3.region, ".amazonaws.com/").concat(d.opts.fileUploadToS3.bucket)); var r = d.core.getXHR(i, d.opts.fileUploadMethod); r.onload = function () { b.call(r, a.name) }, r.onerror = E, r.upload.onprogress = A, r.onabort = T, m(); var o = d.popups.get("file.insert"); o && (o.off("abortUpload"), o.on("abortUpload", function () { 4 !== r.readyState && r.abort() })), r.send(t) } } } function s() { r() } function R(e) { if (e) return d.popups.onHide("file.insert", s), !0; var t; d.opts.fileUpload || d.opts.fileInsertButtons.splice(d.opts.fileInsertButtons.indexOf("fileUpload"), 1), t = '<div class="fr-buttons fr-tabs">'.concat(d.button.buildList(d.opts.fileInsertButtons), "</div>"); var a = ""; d.opts.fileUpload && (a = '<div class="fr-file-upload-layer fr-layer fr-active" id="fr-file-upload-layer-'.concat(d.id, '"><strong>').concat(d.language.translate("Drop file"), "</strong><br>(").concat(d.language.translate("or click"), ')<div class="fr-form"><input type="file" name="').concat(d.opts.fileUploadParam, '" accept="').concat(0 <= d.opts.fileAllowedTypes.indexOf("*") ? "/" : "").concat(d.opts.fileAllowedTypes.join(", ").toLowerCase(), '" tabIndex="-1" aria-labelledby="fr-file-upload-layer-').concat(d.id, '" role="button"></div></div>')); var n = { buttons: t, upload_layer: a, progress_bar: '<div class="fr-file-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="fileDismissError" tabIndex="2" role="button">OK</button></div></div>' }, i = d.popups.create("file.insert", n); return function r(a) { d.events.$on(a, "dragover dragenter", ".fr-file-upload-layer", function () { return f(this).addClass("fr-drop"), !1 }, !0), d.events.$on(a, "dragleave dragend", ".fr-file-upload-layer", function () { return f(this).removeClass("fr-drop"), !1 }, !0), d.events.$on(a, "drop", ".fr-file-upload-layer", function (e) { e.preventDefault(), e.stopPropagation(), f(this).removeClass("fr-drop"); var t = e.originalEvent.dataTransfer; t && t.files && (a.data("instance") || d).file.upload(t.files) }, !0), d.helpers.isIOS() && d.events.$on(a, "touchstart", '.fr-file-upload-layer input[type="file"]', function () { f(this).trigger("click") }), d.events.$on(a, "change", '.fr-file-upload-layer input[type="file"]', function () { if (this.files) { var e = a.data("instance") || d; e.events.disableBlur(), a.find("input:focus").blur(), e.events.enableBlur(), e.file.upload(this.files) } f(this).val("") }, !0) }(i), i } function t(e) { d.node.hasClass(e, "fr-file") } function y(e) { var t = e.originalEvent.dataTransfer; if (t && t.files && t.files.length) { var a = t.files[0]; if (a && "undefined" != typeof a.type) { if (a.type.indexOf("image") < 0) { if (!d.opts.fileUpload) return e.preventDefault(), e.stopPropagation(), !1; d.markers.remove(), d.markers.insertAtPoint(e.originalEvent), d.$el.find(".fr-marker").replaceWith(mt.MARKERS), d.popups.hideAll(); var n = d.popups.get("file.insert"); return n || (n = R()), d.popups.setContainer("file.insert", d.$sc), d.popups.show("file.insert", e.originalEvent.pageX, e.originalEvent.pageY), m(), o(t.files), e.preventDefault(), e.stopPropagation(), !1 } } else a.type.indexOf("image") < 0 && (e.preventDefault(), e.stopPropagation()) } } function w() { var e, t = Array.prototype.slice.call(d.el.querySelectorAll("a.fr-file")), a = []; for (e = 0; e < t.length; e++)a.push(t[e].getAttribute("href")); if (n) for (e = 0; e < n.length; e++)a.indexOf(n[e].getAttribute("href")) < 0 && d.events.trigger("file.unlink", [n[e]]); n = t } return a[1] = "File cannot be loaded from the passed link.", a[p] = "No link in upload response.", a[u] = "Error during file upload.", a[g] = "Parsing response failed.", a[c] = "File is too large.", a[h] = "File file type is invalid.", a[7] = "Files can be uploaded only to same domain in IE 8 and IE 9.", { _init: function S() { !function e() { d.events.on("drop", y), d.events.$on(d.$win, "keydown", function (e) { var t = e.which, a = d.popups.get("file.insert"); a && t === mt.KEYCODE.ESC && a.trigger("abortUpload") }), d.events.on("destroy", function () { var e = d.popups.get("file.insert"); e && e.trigger("abortUpload") }) }(), d.events.on("link.beforeRemove", t), d.$wp && (w(), d.events.on("contentChanged", w)), R(!0) }, showInsertPopup: function L() { var e = d.$tb.find('.fr-command[data-cmd="insertFile"]'), t = d.popups.get("file.insert"); if (t || (t = R()), r(), !t.hasClass("fr-active")) if (d.popups.refresh("file.insert"), d.popups.setContainer("file.insert", d.$tb), e.isVisible) { var a = d.button.getPosition(e), n = a.left, i = a.top; d.popups.show("file.insert", n, i, e.outerHeight()) } else d.position.forSelection(t), d.popups.show("file.insert") }, upload: o, insert: v, back: function e() { d.events.disableBlur(), d.selection.restore(), d.events.enableBlur(), d.popups.hide("file.insert"), d.toolbar.showInline() }, hideProgressBar: r } }, mt.DefineIcon("insertFile", { NAME: "file-o", FA5NAME: "file", SVG_KEY: "insertFile" }), mt.RegisterCommand("insertFile", { title: "Upload File", undo: !1, focus: !0, refreshAfterCallback: !1, popup: !0, callback: function () { this.popups.isVisible("file.insert") ? (this.$el.find(".fr-marker").length && (this.events.disableBlur(), this.selection.restore()), this.popups.hide("file.insert")) : this.file.showInsertPopup() }, plugin: "file" }), mt.DefineIcon("fileBack", { NAME: "arrow-left", SVG_KEY: "back" }), mt.RegisterCommand("fileBack", { title: "Back", undo: !1, focus: !1, back: !0, refreshAfterCallback: !1, callback: function () { this.file.back() }, refresh: function (e) { this.opts.toolbarInline ? (e.removeClass("fr-hidden"), e.next(".fr-separator").removeClass("fr-hidden")) : (e.addClass("fr-hidden"), e.next(".fr-separator").addClass("fr-hidden")) } }), mt.RegisterCommand("fileDismissError", { title: "OK", callback: function () { this.file.hideProgressBar(!0) } }), Object.assign(mt.POPUP_TEMPLATES, { "filesManager.insert": "[_BUTTONS_][_UPLOAD_LAYER_][_BY_URL_LAYER_][_EMBED_LAYER_][_UPLOAD_PROGRESS_LAYER_][_PROGRESS_BAR_]", "image.edit": "[_BUTTONS_]", "image.alt": "[_BUTTONS_][_ALT_LAYER_]", "image.size": "[_BUTTONS_][_SIZE_LAYER_]" }), Object.assign(mt.DEFAULTS, { filesInsertButtons: ["imageBack", "|", "filesUpload", "filesByURL", "filesEmbed"], filesInsertButtons2: ["deleteAll", "insertAll", "cancel", "minimize"], imageEditButtons: ["imageReplace", "imageAlign", "imageCaption", "imageRemove", "imageLink", "linkOpen", "linkEdit", "linkRemove", "-", "imageDisplay", "imageStyle", "imageAlt", "imageSize"], imageAltButtons: ["imageBack", "|"], imageSizeButtons: ["imageBack", "|"], imageUpload: !0, filesManagerUploadURL: null, imageCORSProxy: "https://cors-anywhere.froala.com", imageUploadRemoteUrls: !0, imageUploadParam: "file", filesManagerUploadParams: {}, googleOptions: {}, filesManagerUploadToS3: !1, imageUploadMethod: "POST", filesManagerMaxSize: 10485760, filesManagerAllowedTypes: ["*"], imageResize: !0, imageResizeWithPercent: !1, imageRoundPercent: !1, imageDefaultWidth: 300, imageDefaultAlign: "center", imageDefaultDisplay: "block", imageSplitHTML: !1, imageStyles: { "fr-rounded": "Rounded", "fr-bordered": "Bordered", "fr-shadow": "Shadow" }, imageMove: !0, imageMultipleStyles: !0, imageTextNear: !0, imagePaste: !0, imagePasteProcess: !1, imageMinWidth: 16, imageOutputSize: !1, imageDefaultMargin: 5, imageAddNewLine: !1 }), mt.VIDEO_PROVIDERS = [{ test_regex: /^.*((youtu.be)|(youtube.com))\/((v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))?\??v?=?([^#\&\?]*).*/, url_regex: /(?:https?:\/\/)?(?:www\.)?(?:m\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=|embed\/)?([0-9a-zA-Z_\-]+)(.+)?/g, url_text: "https://www.youtube.com/embed/$1?$2", html: '<iframe width="640" height="360" src="{url}&wmode=opaque" frameborder="0" allowfullscreen></iframe>', provider: "youtube" }, { test_regex: /^.*(?:vimeo.com)\/(?:channels(\/\w+\/)?|groups\/*\/videos\/\u200b\d+\/|video\/|)(\d+)(?:$|\/|\?)/, url_regex: /(?:https?:\/\/)?(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:[a-zA-Z0-9_\-]+)?(\/[a-zA-Z0-9_\-]+)?/i, url_text: "https://player.vimeo.com/video/$1", html: '<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>', provider: "vimeo" }, { test_regex: /^.+(dailymotion.com|dai.ly)\/(video|hub)?\/?([^_]+)[^#]*(#video=([^_&]+))?/, url_regex: /(?:https?:\/\/)?(?:www\.)?(?:dailymotion\.com|dai\.ly)\/(?:video|hub)?\/?(.+)/g, url_text: "https://www.dailymotion.com/embed/video/$1", html: '<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>', provider: "dailymotion" }, { test_regex: /^.+(screen.yahoo.com)\/[^_&]+/, url_regex: "", url_text: "", html: '<iframe width="640" height="360" src="{url}?format=embed" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>', provider: "yahoo" }, { test_regex: /^.+(rutube.ru)\/[^_&]+/, url_regex: /(?:https?:\/\/)?(?:www\.)?(?:rutube\.ru)\/(?:video)?\/?(.+)/g, url_text: "https://rutube.ru/play/embed/$1", html: '<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>', provider: "rutube" }, { test_regex: /^(?:.+)vidyard.com\/(?:watch)?\/?([^.&/]+)\/?(?:[^_.&]+)?/, url_regex: /^(?:.+)vidyard.com\/(?:watch)?\/?([^.&/]+)\/?(?:[^_.&]+)?/g, url_text: "https://play.vidyard.com/$1", html: '<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>', provider: "vidyard" }], mt.VIDEO_EMBED_REGEX = /^\W*((<iframe(.|\n)*>(\s|\n)*<\/iframe>)|(<embed(.|\n)*>))\W*$/i, mt.IMAGE_EMBED_REGEX = /^\W*((<img(.|\n)*>(\s|\n)*))\W*$/i, mt.PLUGINS.filesManager = function (w) { var v, o, S, l, c, d, s, n, L, f, r, _ = w.$, p = "https://i.froala.com/upload", u = !1, t = !1, b = new Map, I = new Map, g = new Map, h = new Map, x = new Map, m = new Map, E = 0, i = [], A = -1, O = [], C = 0, T = ["file", "image", "imageTUI", "video"], k = 1, R = 2, y = 3, F = 4, D = 5, M = 6, N = 10, B = ["video/avi", "video/mpeg", "video/x-ms-wmv"], P = {}; function U() { var e = w.popups.get("filesManager.insert"), t = e.find(".fr-files-by-url-layer input"); t.val(""), e.find(".fr-files-embed-layer textarea").val("").trigger("change"), t.trigger("change") } function $(e) { var t; m.forEach(function (e, t) { Q(t) }), !function o() { var t = !0; return T.forEach(function (e) { w.opts.pluginsEnabled.indexOf(e) < 0 && (t = !1) }), t }() ? (t = w.popups.get("filesManager.insert")) || (t = function s() { var e = '<div class="fr-buttons fr-tabs">'.concat(w.button.buildList(w.opts.fileInsertButtons), "</div>"), t = "<div style= 'padding:10px'>\n    <div class = 'fr-message'><h3 style ='font-size: 16px; margin: 10px 10px;font-weight: normal;'>".concat(w.language.translate(function i() { var e = "", t = function a() { var t = []; return T.forEach(function (e) { w.opts.pluginsEnabled.indexOf(e) < 0 && t.push(e.charAt(0).toUpperCase() + e.slice(1)) }), t }(); e = t.join(", "), 1 < t.length ? e += " plugin are" : e += " plugin is"; return e }() + " not enabled. Do you want to enable?"), "</h3></div>\n    <div style='text-align:right;'>\n      <button class='fr-trim-button fr-plugins-enable'>").concat(w.language.translate("Enable"), "</button>               \n      <button class='fr-trim-button fr-plugins-cancel'>").concat(w.language.translate("Cancel"), "</button>\n    </div>"), a = { buttons: e, upload_layer: t, by_url_layer: "", embed_layer: "", upload_progress_layer: "", progress_bar: "" }, n = w.popups.create("filesManager.insert", a); return Te(n), n }()) : (t = w.popups.get("filesManager.insert")) || (t = _e()); var a = w.$tb.find('.fr-command[data-cmd="insertFiles"]'); if (ee(), e || !t.hasClass("fr-active")) if (e || Z(), w.popups.refresh("filesManager.insert"), w.popups.setContainer("filesManager.insert", w.$tb), a.isVisible()) { var n = w.button.getPosition(a, b.size), i = n.left, r = n.top; w.popups.show("filesManager.insert", i, r, a.outerHeight()) } else w.position.forSelection(t), w.popups.show("filesManager.insert"); w.popups.setPopupDimensions(t), t.find(".fr-upload-progress") && 0 == b.size && t.find(".fr-upload-progress").addClass("fr-none") } function W() { ee() } function K() { if (l || function o() { var e; w.shared.$image_resizer ? (l = w.shared.$image_resizer, d = w.shared.$img_overlay, w.events.on("destroy", function () { _("body").first().append(l.removeClass("fr-active")) }, !0)) : (w.shared.$image_resizer = _(document.createElement("div")).attr("class", "fr-image-resizer"), l = w.shared.$image_resizer, w.events.$on(l, "mousedown", function (e) { e.stopPropagation() }, !0), w.opts.imageResize && (l.append(H("nw") + H("ne") + H("sw") + H("se")), w.shared.$img_overlay = _(document.createElement("div")).attr("class", "fr-image-overlay"), d = w.shared.$img_overlay, e = l.get(0).ownerDocument, _(e).find("body").first().append(d))); w.events.on("shared.destroy", function () { l.html("").removeData().remove(), l = null, w.opts.imageResize && (d.remove(), d = null) }, !0), w.helpers.isMobile() || w.events.$on(_(w.o_win), "resize", function () { v && !v.hasClass("fr-uploading") ? Ye(!0) : v && (K(), replace(), J(!1)) }); if (w.opts.imageResize) { e = l.get(0).ownerDocument, w.events.$on(l, w._mousedown, ".fr-handler", Y), w.events.$on(_(e), w._mousemove, z), w.events.$on(_(e.defaultView || e.parentWindow), w._mouseup, V), w.events.$on(d, "mouseleave", V); var n = 1, i = null, r = 0; w.events.on("keydown", function (e) { if (v) { var t = -1 != navigator.userAgent.indexOf("Mac OS X") ? e.metaKey : e.ctrlKey, a = e.which; (a !== i || 200 < e.timeStamp - r) && (n = 1), (a == mt.KEYCODE.EQUALS || w.browser.mozilla && a == mt.KEYCODE.FF_EQUALS) && t && !e.altKey ? n = Ne.call(this, e, 1, 1, n) : (a == mt.KEYCODE.HYPHEN || w.browser.mozilla && a == mt.KEYCODE.FF_HYPHEN) && t && !e.altKey ? n = Ne.call(this, e, 2, -1, n) : w.keys.ctrlKey(e) || a != mt.KEYCODE.ENTER || (v.before("<br>"), pe(v)), i = a, r = e.timeStamp } }, !0), w.events.on("keyup", function () { n = 1 }) } }(), !v) return !1; var e = w.$wp || w.$sc; e.append(l), l.data("instance", w); var t = e.scrollTop() - ("static" != e.css("position") ? e.offset().top : 0), a = e.scrollLeft() - ("static" != e.css("position") ? e.offset().left : 0); a -= w.helpers.getPX(e.css("border-left-width")), t -= w.helpers.getPX(e.css("border-top-width")), w.$el.is("img") && w.$sc.is("body") && (a = t = 0); var n = Qe(); Ze() && (n = n.find(".fr-img-wrap")); var i = 0, r = 0; w.opts.iframe && (i = w.helpers.getPX(w.$wp.find(".fr-iframe").css("padding-top")), r = w.helpers.getPX(w.$wp.find(".fr-iframe").css("padding-left"))), l.css("top", (w.opts.iframe ? n.offset().top + i : n.offset().top + t) - 1).css("left", (w.opts.iframe ? n.offset().left + r : n.offset().left + a) - 1).css("width", n.get(0).getBoundingClientRect().width).css("height", n.get(0).getBoundingClientRect().height).addClass("fr-active") } function H(e) { return '<div class="fr-handler fr-h'.concat(e, '"></div>') } function G(e) { Ze() ? v.parents(".fr-img-caption").css("width", e) : v.css("width", e) } function Y(e) { if (!w.core.sameInstance(l)) return !0; if (e.preventDefault(), e.stopPropagation(), w.$el.find("img.fr-error").left) return !1; w.undo.canDo() || w.undo.saveStep(); var t = e.pageX || e.originalEvent.touches[0].pageX; if ("mousedown" == e.type) { var a = w.$oel.get(0).ownerDocument, n = a.defaultView || a.parentWindow, i = !1; try { i = n.location != n.parent.location && !(n.$ && n.$.FE) } catch (s) { } i && n.frameElement && (t += w.helpers.getPX(_(n.frameElement).offset().left) + n.frameElement.clientLeft) } (c = _(this)).data("start-x", t), c.data("start-width", v.width()), c.data("start-height", v.height()); var r = v.width(); if (w.opts.imageResizeWithPercent) { var o = v.parentsUntil(w.$el, w.html.blockTagsQuery()).get(0) || w.el; r = (r / _(o).outerWidth() * 100).toFixed(2) + "%" } G(r), d.show(), w.popups.hideAll(), je() } function z(e) { if (!w.core.sameInstance(l)) return !0; var t; if (c && v) { if (e.preventDefault(), w.$el.find("img.fr-error").left) return !1; var a = e.pageX || (e.originalEvent.touches ? e.originalEvent.touches[0].pageX : null); if (!a) return !1; var n = a - c.data("start-x"), i = c.data("start-width"); if ((c.hasClass("fr-hnw") || c.hasClass("fr-hsw")) && (n = 0 - n), w.opts.imageResizeWithPercent) { var r = v.parentsUntil(w.$el, w.html.blockTagsQuery()).get(0) || w.el; i = ((i + n) / _(r).outerWidth() * 100).toFixed(2), w.opts.imageRoundPercent && (i = Math.round(i)), G("".concat(i, "%")), (t = Ze() ? (w.helpers.getPX(v.parents(".fr-img-caption").css("width")) / _(r).outerWidth() * 100).toFixed(2) : (w.helpers.getPX(v.css("width")) / _(r).outerWidth() * 100).toFixed(2)) === i || w.opts.imageRoundPercent || G("".concat(t, "%")), v.css("height", "").removeAttr("height") } else i + n >= w.opts.imageMinWidth && (G(i + n), t = Ze() ? w.helpers.getPX(v.parents(".fr-img-caption").css("width")) : w.helpers.getPX(v.css("width"))), t !== i + n && G(t), ((v.attr("style") || "").match(/(^height:)|(; *height:)/) || v.attr("height")) && (v.css("height", c.data("start-height") * v.width() / c.data("start-width")), v.removeAttr("height")); K(), w.events.trigger("image.resize", [Xe()]) } } function V(e) { if (!w.core.sameInstance(l)) return !0; if (c && v) { if (e && e.stopPropagation(), w.$el.find("img.fr-error").left) return !1; c = null, d.hide(), K(), w.undo.saveStep(), w.events.trigger("image.resizeEnd", [Xe()]) } else l.removeClass("fr-active") } function j() { m.forEach(function (e, t) { var a = w.popups.get("filesManager.insert"); a.find(".fr-checkbox-file-" + t).get(0).disabled = !0, document.getElementById("fr-file-autoplay-button-" + t) && (document.getElementById("fr-file-autoplay-button-" + t).disabled = !0, document.getElementById("fr-file-autoplay-button-" + t).parentElement.classList.add("fr-checkbox-disabled"), document.getElementById("fr-file-autoplay-button-" + t).parentElement.classList.remove("fr-files-checkbox")), a.find(".fr-checkbox-" + t).get(0).classList.remove("fr-files-checkbox"), a.find(".fr-checkbox-" + t).get(0).classList.add("fr-checkbox-disabled") }) } function q(e, t, a, n) { w.edit.on(), v && v.addClass("fr-error"), P[e] ? (m.set(n, P[e]), j(), function i() { m.forEach(function (e, t) { w.popups.get("filesManager.insert"), document.getElementById("fr-file-edit-button-".concat(t)).classList.add("fr-disabled"), document.getElementById("fr-file-view-button-".concat(t)).classList.add("fr-disabled"), document.getElementById("fr-file-insert-button-".concat(t)).classList.add("fr-disabled") }) }(), ne(w.language.translate(P[e]), n)) : ne(w.language.translate("Something went wrong. Please try again."), n), !v && a && Be(a), w.events.trigger("filesManager.error", [{ code: e, message: P[e] }, t, a]) } function X() { var e = w.popups.get("filesManager.insert"), t = e.find('.fr-command[data-cmd="insertAll"]'), a = e.find('.fr-command[data-cmd="deleteAll"]'), n = !0; x.forEach(function i(e, t, a) { x.get(t) && (n = !1) }), n ? t.addClass("fr-disabled") : t.removeClass("fr-disabled"), n ? a.addClass("fr-disabled") : a.removeClass("fr-disabled") } function Q(e) { var t = w.popups.get("filesManager.insert"); t.find(".fr-file-" + e).get(0) !== undefined && (t.find(".fr-file-" + e).get(0).outerHTML = ""), I["delete"](e), b["delete"](e), x["delete"](e), X(), 0 == b.size && (C = 0), m["delete"](e), w.popups.setPopupDimensions(t, !0), w.opts.toolbarBottom ? $(!0) : w.popups.setPopupDimensions(t), t.find(".fr-upload-progress") && 0 == b.size && t.find(".fr-upload-progress").addClass("fr-none") } function Z() { for (var e = w.popups.get("filesManager.insert"), t = e.find(".fr-insert-checkbox"), a = 0; a < t.length; a++)t.get(a).children.target.checked = !1, e.find(".fr-file-" + t.get(a).id.split("-").pop()).get(0).classList.add("fr-unchecked"); if (S) document.getElementById("fr-file-autoplay-button-".concat(S)) && (document.getElementById("fr-file-autoplay-button-".concat(S)).checked = !1), O = O.filter(function (e) { return e != S }); else { for (var n = e.find(".fr-file-autoplay-button"), i = 0; i < n.length; i++)n.get(i).checked = !1; O = [] } x = new Map, X() } function J(e) { var t = w.popups.get("filesManager.insert"); if (t || (t = _e()), t.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"), t.find(".fr-files-progress-bar-layer").addClass("fr-active"), t.find(".fr-buttons").hide(), v) { var a = Qe(); w.popups.setContainer("filesManager.insert", w.$sc); var n = a.offset().left, i = a.offset().top + a.height(); w.popups.show("filesManager.insert", n, i, a.outerHeight()) } void 0 === e && te(w.language.translate("Uploading"), 0) } function ee(e) { var t = w.popups.get("filesManager.insert"); if (t && (t.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"), t.find(".fr-files-progress-bar-layer").removeClass("fr-active"), t.find(".fr-buttons").show(), e || w.$el.find("img.fr-error").length)) { if (w.events.focus(), w.$el.find("img.fr-error").length && (w.$el.find("img.fr-error").remove(), w.undo.saveStep(), w.undo.run(), w.undo.dropRedo()), !w.$wp && v) { var a = v; Ye(!0), w.selection.setAfter(a.get(0)), w.selection.restore() } w.popups.hide("filesManager.insert") } } function te(e, t) { var a = w.popups.get("filesManager.insert"); if (a) { var n = a.find(".fr-files-progress-bar-layer"); n.find("h3").text(e + (t ? " ".concat(t, "%") : "")), n.removeClass("fr-error"), t ? (n.find("div").removeClass("fr-indeterminate"), n.find("div > span").css("width", "".concat(t, "%"))) : n.find("div").addClass("fr-indeterminate") } } function ae(e) { J(); var t = w.popups.get("filesManager.insert").find(".fr-files-progress-bar-layer"); t.addClass("fr-error"); var a = t.find("h3"); a.text(e), w.events.disableBlur(), a.focus() } function ne(e, t) { var a = w.popups.get("filesManager.insert"), n = a.find(".fr-upload-progress-layer"), i = a.find(".fr-file-".concat(t)); n.addClass("fr-error"), i.find("h5").text(e) } function ie(e) { var n = w.popups.get("filesManager.insert"); n.find(".fr-upload-progress-layer").hasClass("fr-active") || n.find(".fr-upload-progress-layer").addClass("fr-active"), n.find(".fr-upload-progress").removeClass("fr-none"); var t = b.get(e), a = function o(e, t) { return t.toLocaleDateString(w.opts.language ? w.opts.language : undefined, { weekday: "long", year: "numeric", month: "long", day: "numeric" }) + " . " + function a(e) { if (0 == e) return "0 Bytes"; var t = Math.floor(Math.log(e) / Math.log(1024)); return 1 * (e / Math.pow(1024, t)).toFixed(2) + " " + ["Bytes", "KB", "MB", "GB", "TB"][t] }(e.size) }(t, new Date), i = x.get(e) ? "" : "fr-unchecked ", r = "\n        <div class='fr-file-list-item fr-file-".concat(e, " ").concat(i, "' draggable = \"").concat(!i, '" >\n        <div class=\'fr-file-item-left\' >\n    \n            <div class="fr-file-item-insert-checkbox fr-files-checkbox-line">\n            <div id="checkbox-key-').concat(e, '" class="fr-files-checkbox fr-insert-checkbox  fr-checkbox-').concat(e, '">\n            <input name="target" class="fr-insert-attr fr-checkbox-file-').concat(e, ' fr-file-insert-check" data-cmd="fileInsertCheckbox"\n             data-checked="_blank" type="checkbox" id="fr-link-target-').concat(w.id, '" tabIndex="0" />\n            <span>').concat('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z" fill="#FFF"></path></svg>', '\n            </span>\n        </div>\n                <label id="fr-label-target-').concat(w.id, "\"></label>\n            </div>\n    \n            <div class='fr-file-item-icon fr-file-item-icon-").concat(e, "' >\n                <img src='https://secure.webtoolhub.com/static/resources/icons/set112/f2afb6f7.png' alt='Image preview' class='thumbnail-padding' height='36px' width='36px' />\n            </div>\n\n            <div class='fr-file-item-description' >\n                    <div class='fr-file-name tooltip'>").concat(re(t.name, 20), '<span class="').concat(20 < t.name.length ? "tooltiptext" : "fr-none", '">').concat(t.name, "</span></div>\n                  <div class='fr-file-description tooltip'>").concat(re(a, 50), '<span class="').concat(50 < a.length ? "tooltiptext" : "fr-none", '">').concat(a, "</span></div>\n                  <div class='fr-file-error'>\n                    <h5 class='fr-file-error-h5'></h5>\n                </div>\n            </div>\n    \n        </div>\n\n        <div class='fr-file-item-right fr-file-item-right-").concat(e, "'>") + le(e) + "</div>\n    </div>"; n.find(".fr-upload-progress-layer")[0].innerHTML = r + n.find(".fr-upload-progress-layer")[0].innerHTML, b.forEach(function s(e, t, a) { x.get(t) && n.find("input.fr-insert-attr.fr-checkbox-file-".concat(t))[0].setAttribute("checked", null) }), O.forEach(function (e) { document.getElementById("fr-file-autoplay-button-" + e).checked = !0 }), se(e, t), ee(), w.opts.toolbarBottom ? $(!0) : w.popups.setPopupDimensions(n) } function re(e, t, a) { return null == t && (t = 100), null == a && (a = "..."), e.length > t ? e.substring(0, t - a.length) + a : e } function oe(e) { switch (e) { case "application/msword": return w.icon.getFileIcon("docIcon"); case "application/vnd.openxmlformats-officedocument.wordprocessingml.document": return w.icon.getFileIcon("docxIcon"); case "image/gif": return w.icon.getFileIcon("gifIcon"); case "image/jpeg": return w.icon.getFileIcon("jpegIcon"); case "image/jpeg": return w.icon.getFileIcon("jpgIcon"); case "type/text": return w.icon.getFileIcon("logIcon"); case "video/quicktime": return w.icon.getFileIcon("movIcon"); case "audio/mp3": case "audio/mpeg": return w.icon.getFileIcon("mp3Icon"); case "video/mp4": return w.icon.getFileIcon("mp4Icon"); case "audio/ogg": return w.icon.getFileIcon("oggIcon"); case "video/ogg": return w.icon.getFileIcon("ogvIcon"); case "application/pdf": return w.icon.getFileIcon("pdfIcon"); case "image/png": return w.icon.getFileIcon("pngIcon"); case "text/plain": return w.icon.getFileIcon("txtIcon"); case "video/webm": return w.icon.getFileIcon("webmIcon"); case "image/webp": return w.icon.getFileIcon("webpIcon"); case "video/x-ms-wmv": return w.icon.getFileIcon("wmvIcon"); case "application/vnd.ms-excel": return w.icon.getFileIcon("xlsIcon"); case "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet": return w.icon.getFileIcon("xlsxIcon"); case "application/x-zip-compressed": return w.icon.getFileIcon("zipIcon"); default: return w.icon.getFileIcon("defaultIcon") } } function se(n, i, e) { var r = w.popups.get("filesManager.insert"), t = r.find(".fr-file-item-icon-" + n).get(0); if (ye(me(i)) && "image/gif" != me(i) && "image/webp" != me(i)) { "a" != t.children[0].localName && (t.innerHTML = "<a target='_blank' href=''>" + t.innerHTML + "</a>"); r.find(".fr-file-item-icon-" + n).get(0).children[0].children[0]; var o = new FileReader; if (null != e && e) { var a = b.get(n); i.name = a.name, b.set(n, i) } if (o.onloadend = function () { r.find(".fr-file-item-icon-" + n).get(0).children[0].children[0].src = o.result; for (var e = atob(o.result.split(",")[1]), t = [], a = 0; a < e.length; a++)t.push(e.charCodeAt(a)); r.find(".fr-file-item-icon-" + n).get(0).children[0].href = window.URL.createObjectURL(new Blob([new Uint8Array(t)], { type: me(i) })), r.find(".fr-file-item-icon-" + n).get(0).classList.add("file-item-thumbnail-hover") }, i) o.readAsDataURL(i); else { var s = oe(me(i)); t.innerHTML = '<svg height="40px" width="40px" viewBox="0 0 55 5" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n        '.concat(s.path, "\n        </svg>") } } else { var l = oe(me(i)); t.innerHTML = '<svg height="40px" width="40px" viewBox="0 0 55 55" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      '.concat(l.path, "\n      </svg>") } } function le(e) { var t = ""; if (Se(me(b.get(e)))) { t = '\n      <div class="fr-files-checkbox-line align-autoplay">\n      <div id="checkbox-key-'.concat(e, '" class="fr-files-checkbox fr-autoplay-checkbox  fr-checkbox-').concat(e, '">  \n                   \n      <input type="checkbox" id="fr-file-autoplay-button-').concat(e, '" class="fr-file-button-').concat(e, ' fr-file-autoplay-button" data-title="Edit" data-param1="').concat(e, '" role="button" />\n\n      <span>').concat('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z" fill="#FFF"></path></svg>', " </span>\n      </div>      \n      <label  class='fr-autoplay-checkbox-label'>Autoplay </label>\n      </div>") } var a = "application/msword", n = "application/vnd.openxmlformats-officedocument.wordprocessingml.document", i = "", r = ""; return Le(me(b.get(e))) && (i = "fr-disabled"), Se(me(b.get(e))) && (i = "fr-disabled"), we(me(b.get(e))) && (r = i = "fr-disabled", me(b.get(e)) != a && me(b.get(e)) != n || w.opts.googleOptions && !w.helpers.isMobile() && w.opts.googleOptions.API_KEY && w.opts.googleOptions.CLIENT_ID && (i = ""), "text/plain" != me(b.get(e)) && me(b.get(e)) != a && "application/pdf" != me(b.get(e)) && me(b.get(e)) != n && "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" != me(b.get(e)) && "application/vnd.ms-excel" != me(b.get(e)) && "type/text" != me(b.get(e)) || (r = "")), t += '<div class=\'fr-file-item-action-buttons\' >\n                <button type="button" id="fr-file-insert-button-'.concat(e, '" class=" fr-doc-edit-').concat(e, " fa fa-upload fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons \n                fr-file-button-").concat(e, " fr-file-insert-button-").concat(e, ' fr-file-insert-button" data-cmd="imageInsertByUpload" data-title="Insert" data-param1="').concat(e, '" tabIndex="2" role="button"></button>\n                <button type="button" id="fr-file-edit-button-').concat(e, '" class=" fr-doc-edit-').concat(e, " ").concat(i, "  fa fa-pencil-square-o fr-img-icon fr-btn fr-command fr-submit \n                fr-file-action-icons fr-file-edit-button-").concat(e, " fr-file-button-").concat(e, ' fr-file-edit-button" data-cmd="editImage" data-title="Edit" data-param1="').concat(e, '" role="button"></button>\n                <span class="fr-file-view-').concat(e, '"><button type="button" id="fr-file-view-button-').concat(e, '" class=" fr-doc-edit-').concat(e, " ").concat(r, " fa fa-eye fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons \n                fr-file-view-button-").concat(e, ' fr-file-view-button" data-cmd="viewImage" data-title="View" data-param1="').concat(e, '" tabIndex="2" role="button"></button></span>\n                <button type="button" id="fr-file-delete-button-').concat(e, '" class=" fr-doc-edit-').concat(e, " fa fa-trash-o fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons\n                fr-file-button-").concat(e, ' fr-file-delete-button" data-cmd="deleteImage" data-title="Delete" data-param1="').concat(e, '" role="button"></button>\n                 \n            </div>\n            <div id="user_area-').concat(e, "\" style=\"display: none;\">\n            \n              <div id=\"file_container\"></div>\n              <div style='display:block;text-align: center; margin-left:50%; id='edit-file-loader' class='fr-file-loader'></div>\n          </div> \n            ") } function ce(e, t, a) { var n = w.popups.get("filesManager.insert"); if (!a && e <= 100) { n.find(".fr-checkbox-file-" + t).get(0).disabled = !0, n.find(".fr-checkbox-" + t).get(0).classList.remove("fr-files-checkbox"), n.find(".fr-checkbox-" + t).get(0).classList.add("fr-checkbox-disabled"); var i = n.find(".fr-file-progress-circle-" + t), r = n.find(".fr-file-upload-percent-" + t); return 50 < e ? i.get(0).setAttribute("class", "fr-file-progress-circle-" + t + " progress-circle p" + Math.floor(e) + " over50") : i.get(0).setAttribute("class", "fr-file-progress-circle-" + t + " progress-circle p" + Math.floor(e)), r.get(0).innerHTML = Math.floor(e) + "%", void de(t, e, a) } a && (n.find(".fr-checkbox-file-" + t).get(0).disabled = !1, n.find(".fr-checkbox-" + t).get(0).classList.remove("fr-checkbox-disabled"), n.find(".fr-checkbox-" + t).get(0).classList.add("fr-files-checkbox"), n.find(".fr-file-item-right-" + t).get(0).innerHTML = le(t), de(t, 100, a)) } function de(e, t, a) { var n = w.popups.get("filesManager.insert"); n.find(".fr-progress-bar").removeClass("fr-none").addClass("fr-display-block"), n.find(".fr-upload-progress").hasClass("fr-height-set") && w.popups.setFileListHeight(n); var i = 0; h.set(e, t), h.forEach(function (e, t) { i += e }), i /= h.size, 100 == t && a && E++, n.find('.fr-command[data-cmd="filesUpload"]').addClass("fr-disabled"), n.find('.fr-command[data-cmd="filesByURL"]').addClass("fr-disabled"), n.find('.fr-command[data-cmd="filesEmbed"]').addClass("fr-disabled"), n.find(".fr-progress-bar").get(0).style.width = i + "%", E == h.size && (n.find(".fr-progress-bar").removeClass("fr-display-block").addClass("fr-none"), h = new Map, E = 0, n.find('.fr-command[data-cmd="filesUpload"]').removeClass("fr-disabled"), n.find('.fr-command[data-cmd="filesByURL"]').removeClass("fr-disabled"), n.find('.fr-command[data-cmd="filesEmbed"]').removeClass("fr-disabled")) } function fe(a, n) { ee(), w.popups.get("filesManager.insert").find(".fr-upload-progress-layer").addClass("fr-active"), a.forEach(function (e, t) { ye(me(e)) && w.opts.imageUploadRemoteUrls && w.opts.imageCORSProxy && w.opts.imageUpload ? Ce(e, a, v, n[t]) : I.set(n[t], e) }) } function pe(e) { (function a(e) { if ("false" == _(this).parents("[contenteditable]").not(".fr-element").not(".fr-img-caption").not("body").first().attr("contenteditable")) return !0; if (e && "touchend" == e.type && r) return !0; if (e && w.edit.isDisabled()) return e.stopPropagation(), e.preventDefault(), !1; for (var t = 0; t < mt.INSTANCES.length; t++)mt.INSTANCES[t] != w && mt.INSTANCES[t].events.trigger("image.hideResizer"); w.toolbar.disable(), e && (e.stopPropagation(), e.preventDefault()); w.helpers.isMobile() && (w.events.disableBlur(), w.$el.blur(), w.events.enableBlur()); w.opts.iframe && w.size.syncIframe(); v = _(this), K(), w.browser.msie ? (w.popups.areVisible() && w.events.disableBlur(), w.win.getSelection && (w.win.getSelection().removeAllRanges(), w.win.getSelection().addRange(w.doc.createRange()))) : w.selection.clear(); w.helpers.isIOS() && (w.events.disableBlur(), w.$el.blur()); w.button.bulkRefresh(), w.events.trigger("video.hideResizer") }).call(e.get(0)) } function ue() { var e = _(this); e.removeClass("fr-uploading"), e.next().is("br") && e.next().remove(), (0 == i.length || 0 < i.length && i.length == A) && (s = e), "VIDEO" == e.get(0).tagName || "AUDIO" == e.get(0).tagName ? w.selection.setAfter(e.parent()) : w.selection.setAfter(e), w.undo.saveStep(), w.events.trigger("filesManager.loaded", [e]), he(i) } function ge() { var e, t = Array.prototype.slice.call(w.el.querySelectorAll("video, .fr-video > *")), a = []; for (e = 0; e < t.length; e++)a.push(t[e].getAttribute("src")), _(t[e]).toggleClass("fr-draggable", w.opts.videoMove), "" === t[e].getAttribute("class") && t[e].removeAttribute("class"), "" === t[e].getAttribute("style") && t[e].removeAttribute("style"); if (n) for (e = 0; e < n.length; e++)a.indexOf(n[e].getAttribute("src")) < 0 && w.events.trigger("video.removed", [_(n[e])]); n = t } function he(e) { if (null != e) { if (0 == e.length) return void (null != s && ("VIDEO" == s.get(0).tagName ? w.video._editVideo(s.parent()) : "IMG" == s.get(0).tagName ? w.image.edit(s) : s.trigger("click"), w.toolbar.disable())); ve(e.shift(), e) } } function a(e) { var t = !1; if (ye(me(I.get(e)))) { var a = I.get(e).link, n = w.o_doc.createElement("img"); n.src = a, v = n, o = e, w.imageTUI.launch(w, !1, e), t = !0 } else if (we(me(I.get(e)))) { var i = { apiKey: w.opts.googleOptions.API_KEY, clientId: w.opts.googleOptions.CLIENT_ID, authorizeButton: "authorize_button-".concat(e), signoutButton: "signout_button", userArea: "user_area-".concat(e), fileInput: "file_input", fileIndex: e, file: b.get(e), fileContainer: "file_container", loadingText: "File is being uploaded...", events: { onInvalidFile: function (e) { }, onError: function (e) { } } }; f = function d(p) { var r, e = ["https://www.googleapis.com/discovery/v1/apis/drive/v2/rest"], u = "id,title,mimeType,userPermission,editable,copyable,shared,fileSize", g = "-------314159265358979323846", h = "\r\n--" + g + "\r\n", m = "\r\n--" + g + "--", t = (document.getElementById(p.authorizeButton), document.getElementById(p.userArea)); p.events || (p.events = {}); function a() { gapi.client.init({ apiKey: p.apiKey, clientId: p.clientId, discoveryDocs: e, scope: "https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/drive.appdata" }).then(function () { gapi.auth2.getAuthInstance().isSignedIn.listen(n), n(gapi.auth2.getAuthInstance().isSignedIn.get()), function t(e) { gapi.auth2.getAuthInstance().isSignedIn.get() ? o() : Promise.resolve(gapi.auth2.getAuthInstance().signIn()).then(function () { o() }) }() }, function (e) { p.events.onError(e) }) } function n(e) { e && (t.style.display = "block") } function i(e) { var t = gapi.auth.getToken().access_token, a = r, n = "https://docs.google.com/feeds/download/documents/export/Export?id=" + a + "&format=docx&access_token=" + t, i = new XMLHttpRequest; i.open("get", n), i.responseType = "arraybuffer", i.onload = function () { var e = new Blob([new Uint8Array(this.response)], { type: "application/vnd.openxmlformats-officedocument.wordprocessingml.document" }), t = b.get(p.fileIndex); e.name = t.name, e.lastModified = t.lastModified, e.lastModifiedDate = t.lastModifiedDate, b.set(p.fileIndex, e), w.filesManager.upload(e, I, v, p.fileIndex), l() }, i.send() } function o(e) { !function n(e) { for (var t = document.getElementsByClassName("fr-doc-edit-".concat(e)), a = 0; a < t.length; a++)t[a].setAttribute("disabled", !0), t[a].classList.add("fr-disabled") }(p.fileIndex); var t = p.file; t ? function a(c, d) { var f = new FileReader; f.readAsArrayBuffer(c), f.onload = function (e) { for (var t = { title: c.name, mimeType: "application/vnd.google-apps.document" }, a = "", n = new Uint8Array(f.result), i = n.byteLength, r = 0; r < i; r++)a += String.fromCharCode(n[r]); var o = btoa(a), s = h + "Content-Type: application/json; charset=UTF-8\r\n\r\n" + JSON.stringify(t) + h + "Content-Type: application/octet-stream\r\nContent-Transfer-Encoding: base64\r\n\r\n" + o + m, l = gapi.client.request({ path: "/upload/drive/v2/files", method: "POST", params: { uploadType: "multipart", fields: u }, headers: { "Content-Type": 'multipart/related; boundary="' + g + '"', "Content-Length": s.Length }, body: s }); d || (d = function (e) { }), l.execute(function (e, t) { e.error ? p.events.onError(e.error) : d(e) }) } }(t, s) : p.events.onInvalidFile("File is not selected") } function s(e) { r = e.id; var t = "https://docs.google.com/document/d/" + e.id + "/edit", a = w.o_doc.body, n = w.o_doc.createElement("div"); n.setAttribute("id", "editDocContainer"), n.style.cssText = "position: fixed; top: 0;left: 0;padding: 0;width: 100%;height: 100%;background: rgba(255,255,255,1);z-index: 9998;display:block", n.innerHTML = '<label>Sign Out : </label><input type="checkbox" id ="markSignOut" role="button"/>  <button id="signout_button"  class="fr-trim-button" >Save </button> <button id="cancel_file_edit" class="fr-trim-button">Cancel</button>  <iframe title="Edit your file" frameBorder="0" width="100%" height="700px" src="' + t + '"></iframe>', a.appendChild(n), document.getElementById("signout_button").onclick = i, document.getElementById("cancel_file_edit").onclick = l } function l() { document.getElementById("markSignOut").checked && gapi.auth2.getAuthInstance().signOut(); var e = document.getElementById("editDocContainer"); e.parentNode.removeChild(e), document.getElementById("user_area-".concat(p.fileIndex)) && (document.getElementById("user_area-".concat(p.fileIndex)).style.display = "none"), function n(e) { for (var t = document.getElementsByClassName("fr-doc-edit-".concat(e)), a = 0; a < t.length; a++)t[a].removeAttribute("disabled"), t[a].classList.remove("fr-disabled") }(p.fileIndex) } p.events.onInvalidFile = p.events.onInvalidFile || function (e) { }, p.events.onError = p.events.onError || function (e) { }; var c = {}; return c.handleClientLoad = function () { gapi.load("client:auth2", a) }, c }(i), function r(e, t) { var n = function n(e, t) { var a = document.createElement("script"); a.src = e, a.onload = function () { this.onload = function () { }, f.handleClientLoad() }, a.onreadystatechange = function () { "complete" === this.readyState && this.onload() }, (document.getElementsByTagName("head")[0] || document.body).appendChild(a) }; !function a() { 0 != e.length ? n(e.shift(), a) : t && t() }() }(["https://apis.google.com/js/api.js"], function () { }) } t && (u = !0) } function me(e) { var t = new Map([[".doc", "application/msword"], [".docx", "application/vnd.openxmlformats-officedocument.wordprocessingml.document"], [".gif", "image/gif"], [".jpeg", "image/jpeg"], [".jpg", "image/jpeg"], [".txt", "text/plain"], [".log", "type/text"], [".mov", "video/quicktime"], [".mp3", "audio/mpeg"], [".mp4", "video/mp4"], [".ogg", "audio/ogg"], [".ogv", "video/ogg"], [".pdf", "application/pdf"], [".png", "image/png"], [".webm", "video/webm"], [".webp", "image/webp"], [".wmv", "video/x-ms-wmv"], [".xls", "application/vnd.ms-excel"], [".xlsx", "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"], [".zip", "application/x-zip-compressed"]]); if ("" != e.type) return e.type; var a = /(?:\.([^.]+))?$/.exec(e.name)[1]; return t.get(".".concat(a)) } function ve(s, e) { if (we(me(I.get(s)))) { var t = I.get(s).link, a = I.get(s).text, n = I.get(s).response; if (w.edit.on(), w.events.focus(!0), w.selection.restore(), w.opts.fileUseSelectedText && w.selection.text().length && (a = w.selection.text()), t.endsWith(".pdf") || t.endsWith(".txt")) be('<iframe src="'.concat(t, '" title="').concat(a, '" width="\u201d100%\u201d" height="\u201d100%\u201d" class="fr-file"></iframe>'), !0); else w.html.insert('<a href="'.concat(t, '" target="_blank" id="fr-inserted-file" class="fr-file">').concat(a, "</a>")); var i = w.$el.find("#fr-inserted-file"); i.removeAttr("id"), w.undo.saveStep(), function T() { var e, t = Array.prototype.slice.call(w.el.querySelectorAll("a.fr-file")), a = []; for (e = 0; e < t.length; e++)a.push(t[e].getAttribute("href")); if (L) for (e = 0; e < L.length; e++)a.indexOf(L[e].getAttribute("href")) < 0 && w.events.trigger("file.unlink", [L[e]]); L = t }(), w.selection.clear(), w.selection.setAfter(i), w.events.trigger("file.inserted", [i, n]), he(e) } if (ye(me(I.get(s)))) { var o = I.get(s).link, r = I.get(s).sanitize, l = I.get(s).data, c = I.get(s).$existing_img, d = I.get(s).response; c && "string" == typeof c && (c = w.$(c)), w.edit.off(), te(w.language.translate("Loading image")), r && (o = w.helpers.sanitizeURL(o)); var f = new Image; f.onload = function () { var e, t; if (c) { w.undo.canDo() || c.hasClass("fr-uploading") || w.undo.saveStep(); var a = c.data("fr-old-src"); c.data("fr-image-pasted") && (a = null), w.$wp ? ((e = c.clone().removeData("fr-old-src").removeClass("fr-uploading").removeAttr("data-fr-image-pasted")).off("load"), a && c.attr("src", a), c.replaceWith(e)) : e = c; for (var n = e.get(0).attributes, i = 0; i < n.length; i++) { var r = n[i]; 0 === r.nodeName.indexOf("data-") && e.removeAttr(r.nodeName) } if (void 0 !== l) for (t in l) l.hasOwnProperty(t) && "link" != t && e.attr("data-".concat(t), l[t]); e.on("load", ue), e.attr("src", o), w.edit.on(), w.undo.saveStep(), w.events.disableBlur(), w.$el.blur(), w.events.trigger(a ? "image.replaced" : "image.inserted", [e, d]) } else e = function s(e, t, a) { var n, i = _(document.createElement("img")).attr("src", e); if (t && void 0 !== t) for (n in t) t.hasOwnProperty(n) && "link" != n && (" data-".concat(n, '="').concat(t[n], '"'), i.attr("data-".concat(n), t[n])); var r = w.opts.imageDefaultWidth; r && "auto" != r && (r = w.opts.imageResizeWithPercent ? "100%" : "".concat(r, "px")); i.attr("style", r ? "width: ".concat(r, ";") : ""), qe(i, w.opts.imageDefaultDisplay, w.opts.imageDefaultAlign), i.on("load", a), i.on("error", a), w.edit.on(), w.events.focus(!0), w.selection.restore(), w.undo.saveStep(), w.opts.imageSplitHTML ? w.markers.split() : w.markers.insert(); w.html.wrap(); var o = w.$el.find(".fr-marker"); o.length ? (o.parent().is("hr") && o.parent().after(o), w.node.isLastSibling(o) && o.parent().hasClass("fr-deletable") && o.insertAfter(o.parent()), o.replaceWith(i)) : w.$el.append(i); return i }(o, l, ue), w.undo.saveStep(), w.events.disableBlur(), w.$el.blur(), w.events.trigger("image.inserted", [e, d]) }, f.onerror = function () { q(k), he(e) }, f.src = o } if (Se(me(I.get(s))) || Le(me(I.get(s)))) if (S = s, "video/url" == me(I.get(s))) { var p = !1; if (document.getElementById("fr-file-autoplay-button-" + s) !== undefined && (p = document.getElementById("fr-file-autoplay-button-" + s).checked), p && I.get(s) !== undefined && -1 < I.get(s).video.indexOf("iframe") && I.get(s).video.indexOf("autoplay=1") < 0) { var u = I.get(s).video.substring(I.get(s).video.indexOf("src") + 3), g = "&"; (u = (u = u.substring(u.indexOf('"') + 1)).substring(0, u.indexOf('"'))).indexOf("?") < 0 && (g = "?"), I.get(s).video = I.get(s).video.replace(u, u += g + "autoplay=1") } else !p && I.get(s).video.indexOf(!1) && (-1 < I.get(s).video.indexOf("&autoplay=1") && (I.get(s).video = I.get(s).video.replace("&autoplay=1", "")), -1 < I.get(s).video.indexOf("?autoplay=1") && (I.get(s).video = I.get(s).video.replace("?autoplay=1", ""))); w.events.focus(!0), w.selection.restore(), w.html.insert('<span contenteditable="false" draggable="true" class="fr-jiv fr-video fr-deletable">'.concat(I.get(s).video, "</span>"), !1, w.opts.videoSplitHTML), w.popups.hide("filesManager.insert"); var h = w.$el.find(".fr-jiv"); h.removeClass("fr-jiv"), h.toggleClass("fr-rv", w.opts.videoResponsive), function R(e, t, a) { !w.opts.htmlUntouched && w.opts.useClasses ? (e.removeClass("fr-fvl fr-fvr fr-dvb fr-dvi"), e.addClass("fr-fv".concat(a[0], " fr-dv").concat(t[0]))) : "inline" == t ? (e.css({ display: "inline-block" }), "center" == a ? e.css({ "float": "none" }) : "left" == a ? e.css({ "float": "left" }) : e.css({ "float": "right" })) : (e.css({ display: "block", clear: "both" }), "left" == a ? e.css({ textAlign: "left" }) : "right" == a ? e.css({ textAlign: "right" }) : e.css({ textAlign: "center" })) }(h, w.opts.videoDefaultDisplay, w.opts.videoDefaultAlign), h.toggleClass("fr-draggable", w.opts.videoMove), w.events.trigger("video.inserted", [h]), ue.call(h) } else { var m = I.get(s).link, v = I.get(s).sanitize, b = I.get(s).data, E = I.get(s).$existing_img, A = I.get(s).response; w.edit.off(), v && (m = w.helpers.sanitizeURL(m)), function y() { var e, t; if (E) { w.undo.canDo() || E.find("video").hasClass("fr-uploading") || w.undo.saveStep(); var a = E.find("video").data("fr-old-src"), n = E.data("fr-replaced"); E.data("fr-replaced", !1), w.$wp ? ((e = E.clone(!0)).find("video").removeData("fr-old-src").removeClass("fr-uploading"), e.find("video").off("canplay"), a && E.find("video").attr("src", a), E.replaceWith(e)) : e = E; for (var i = e.find("video").get(0).attributes, r = 0; r < i.length; r++) { var o = i[r]; 0 === o.nodeName.indexOf("data-") && e.find("video").removeAttr(o.nodeName) } if (void 0 !== b) for (t in b) b.hasOwnProperty(t) && "link" != t && e.find("video").attr("data-".concat(t), b[t]); e.find("video").on("canplay", ue), e.find("video").attr("src", m), w.edit.on(), ge(), w.undo.saveStep(), w.$el.blur(), w.events.trigger(n ? "video.replaced" : "video.inserted", [e, A]) } else e = function u(e, t, a, n, i) { var r, o = ""; if (t && void 0 !== t) for (r in t) t.hasOwnProperty(r) && "link" != r && (o += " data-".concat(r, '="').concat(t[r], '"')); var s, l = w.opts.videoDefaultWidth; l && "auto" != l && (l = "".concat(l, "px")); if (Le(n)) s = _(document.createElement("span")).attr("contenteditable", "false").attr("draggable", "true").attr("class", "fr-video fr-dv" + w.opts.videoDefaultDisplay[0] + ("center" != w.opts.videoDefaultAlign ? " fr-fv" + w.opts.videoDefaultAlign[0] : "")).html('<audio src="' + e + '" ' + o + " controls>" + w.language.translate("Your browser does not support HTML5 video.") + "</audio>"); else { var c = "", d = document.getElementById("fr-file-autoplay-button-" + i).checked; d && (c = "autoplay"), s = _(document.createElement("span")).attr("contenteditable", "false").attr("draggable", "true").attr("class", "fr-video fr-dv" + w.opts.videoDefaultDisplay[0] + ("center" != w.opts.videoDefaultAlign ? " fr-fv" + w.opts.videoDefaultAlign[0] : "")).html('<video src="' + e + '" ' + o + (l ? ' style="width: ' + l + ';" ' : "") + c + "  controls>" + w.language.translate("Your browser does not support HTML5 video.") + "</video>") } s.toggleClass("fr-draggable", w.opts.videoMove), w.edit.on(), w.events.focus(!0), w.selection.restore(), w.undo.saveStep(), w.opts.videoSplitHTML ? w.markers.split() : w.markers.insert(); w.html.wrap(); var f = w.$el.find(".fr-marker"); w.node.isLastSibling(f) && f.parent().hasClass("fr-deletable") && f.insertAfter(f.parent()); f.replaceWith(s); var p = ""; p = Le(n) ? "audio" : "video", s.find(p).get(0).readyState > s.find(p).get(0).HAVE_FUTURE_DATA || w.helpers.isIOS() ? a.call(s.find(p).get(0)) : (s.find(p).on("canplaythrough load", a), s.find(p).on("error", a)); return s }(m, b, ue, me(I.get(s)), s), ge(), w.undo.saveStep(), w.events.trigger("video.inserted", [e, A]) }() } w.popups.hide("filesManager.insert"), x["delete"](s); var C = w.popups.get("filesManager.insert"); C.find("input.fr-insert-attr.fr-checkbox-file-".concat(s))[0].checked = !1, C.find(".fr-file-" + s).get(0).classList.add("fr-unchecked"), X(), document.getElementById("fr-file-autoplay-button-" + s) && (document.getElementById("fr-file-autoplay-button-" + s).checked = !1), O = O.filter(function (e) { return e != s }) } function be(e, t) { var a, n; mt.VIDEO_EMBED_REGEX.test(e) ? (a = "video", n = w.opts.videoSplitHTML) : mt.IMAGE_EMBED_REGEX.test(e) && (a = "image", n = w.opts.imageSplitHTML), w.events.focus(!0), w.selection.restore(); var i = !1; v && (Be(), i = !0), w.html.insert('<span id="fr-inserted-file" contenteditable="true" draggable="true" class="fr-'.concat(a, ' fr-jiv fr-deletable">').concat(e, "</span>"), !1, n), w.popups.hide("filesManager.insert"); var r = w.$el.find(".fr-jiv"); r.removeClass("fr-jiv"), "video" == a && (r.toggleClass("fr-rv", w.opts.videoResponsive), function o(e, t, a) { !w.opts.htmlUntouched && w.opts.useClasses ? (e.removeClass("fr-fvl fr-fvr fr-dvb fr-dvi"), e.addClass("fr-fv".concat(a[0], " fr-dv").concat(t[0]))) : "inline" == t ? (e.css({ display: "inline-block" }), "center" == a ? e.css({ "float": "none" }) : "left" == a ? e.css({ "float": "left" }) : e.css({ "float": "right" })) : (e.css({ display: "block", clear: "both" }), "left" == a ? e.css({ textAlign: "left" }) : "right" == a ? e.css({ textAlign: "right" }) : e.css({ textAlign: "center" })) }(r, w.opts.videoDefaultDisplay, w.opts.videoDefaultAlign), r.toggleClass("fr-draggable", w.opts.videoMove), w.events.trigger(i ? "video.replaced" : "video.inserted", [r])), "image" == a && (qe(r, w.opts.imageDefaultDisplay, w.opts.imageDefaultAlign), r.find("img").removeClass("fr-dii"), r.find("img").addClass("fr-dib"), r.toggleClass("fr-draggable", w.opts.imageMove), w.events.trigger(i ? "image.replaced" : "image.inserted", [r])), t && (s = r, w.selection.clear(), w.toolbar.disable(), w.video._editVideo(s)) } function Ee(e) { try { if (!1 === w.events.trigger("filesManager.uploaded", [e], !0)) return w.edit.on(), !1; var t = JSON.parse(e); return t.link ? t : (q(R, e), !1) } catch (a) { return q(F, e), !1 } } function Ae(e) { try { var t = _(e).find("Location").text(), a = _(e).find("Key").text(); return !1 === w.events.trigger("filesManager.uploadedToS3", [t, a, e], !0) ? (w.edit.on(), !1) : t } catch (n) { return q(F, e), !1 } } function Ce(e, t, a, n) { var i, r, o; if (ye(me(e)) ? (i = w.opts.imageUploadParam, r = w.opts.imageUploadMethod) : we(me(e)) ? (i = w.opts.fileUploadParam, r = w.opts.fileUploadMethod) : Se(me(e)) ? (i = w.opts.videoUploadParam, r = w.opts.videoUploadMethod) : Le(me(e)) && (i = w.opts.videoUploadParam, r = w.opts.videoUploadMethod), -1 < B.indexOf(me(e)) || !me(e)) return q(M, null, null, n), !1; if (!1 === w.events.trigger("filesManager.beforeUpload", [t])) return !1; if ((null === w.opts.filesManagerUploadURL || w.opts.filesManagerUploadURL == p) && !w.opts.filesManagerUploadToS3) return function f(s, l, c) { var d = new FileReader; d.onload = function () { var e = d.result; if (d.result.indexOf("svg+xml") < 0) { for (var t = atob(d.result.split(",")[1]), a = [], n = 0; n < t.length; n++)a.push(t.charCodeAt(n)); if (e = window.URL.createObjectURL(new Blob([new Uint8Array(a)], { type: me(l) })), ye(me(l))) { var i = { link: e, sanitize: !1, data: null, $existing_img: c, response: null, type: me(l) }; I.set(s, i) } if (we(me(l))) { var r = { link: e, text: l.name, response: null, type: me(l) }; I.set(s, r) } if (Se(me(l)) || Le(me(l))) { var o = { link: e, sanitize: !1, data: null, $existing_img: c, type: me(l) }; I.set(s, o) } } }, d.readAsDataURL(l) }(n, e), !1; if (ye(me(e)) && (e.name || (e.name = (new Date).getTime() + "." + (me(e) || "image/jpeg").replace(/image\//g, ""))), e.size > w.opts.filesManagerMaxSize) return q(D, null, null, n), !1; if (w.opts.filesManagerAllowedTypes.indexOf("*") < 0 && w.opts.filesManagerAllowedTypes.indexOf(me(e)) < 0) return q(M, null, null, n), !1; if (function d(e) { isNaN(e) || (w.popups.get("filesManager.insert").find(".fr-file-item-right-" + e).get(0).innerHTML = '<div class=\'fr-file-item-action-buttons\' >\n                <button type="button" id="fr-file-cancel-upload-button-'.concat(e, '" class="fa fa-times fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons \n                fr-file-button-').concat(e, ' fr-file-cancel-upload-button" data-cmd="cancelUpload" data-title="Cancel" data-param1="').concat(e, '" role="button"></button>\n                <button type="button" id="fr-upload-delete-button-').concat(e, '" class="fa fa-trash-o fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons \n                fr-file-button-').concat(e, ' fr-upload-delete-button" data-cmd="deleteUpload" data-title="Delete" data-param1="').concat(e, '" role="button"></button>\n                <div class=\'progress-circle p0 fr-file-progress-circle-').concat(e, "'>\n                  <span class='fr-file-upload-percent-").concat(e, " fr-file-upload-percent'>0%</span>\n                  <div class='left-half-clipper'>\n                    <div class='first50-bar'></div>\n                    <div class='value-bar'></div>\n                  </div>\n                </div>\n            </div>"), h.set(e, 0)) }(n), w.drag_support.formdata && (o = w.drag_support.formdata ? new FormData : null), o) { var s; if (!1 !== w.opts.filesManagerUploadToS3) for (s in o.append("key", w.opts.filesManagerUploadToS3.keyStart + (new Date).getTime() + "-" + (e.name || "untitled")), o.append("success_action_status", "201"), o.append("X-Requested-With", "xhr"), o.append("Content-Type", me(e)), w.opts.filesManagerUploadToS3.params) w.opts.filesManagerUploadToS3.params.hasOwnProperty(s) && o.append(s, w.opts.filesManagerUploadToS3.params[s]); for (s in w.opts.filesManagerUploadParams) w.opts.filesManagerUploadParams.hasOwnProperty(s) && o.append(s, w.opts.filesManagerUploadParams[s]); o.append(i, e, e.name); var l = w.opts.filesManagerUploadURL; w.opts.filesManagerUploadToS3 && (l = w.opts.filesManagerUploadToS3.uploadURL ? w.opts.filesManagerUploadToS3.uploadURL : "https://".concat(w.opts.filesManagerUploadToS3.region, ".amazonaws.com/").concat(w.opts.filesManagerUploadToS3.bucket)); var c = w.core.getXHR(l, r); c.onload = function () { we(me(e)) ? function p(e, t, a) { var n = this.status, i = this.response, r = this.responseXML, o = this.responseText; try { if (w.opts.filesManagerUploadToS3) if (201 === n) { var s = Ae(r); if (s) { var l = { link: s, text: e, response: i, type: a }; I.set(t, l) } } else q(F, i || r); else if (200 <= n && n < 300) { var c = Ee(o); if (c) { var d = { link: c.link, text: e, response: i, type: a }; I.set(t, d) } } else q(y, i || o) } catch (f) { q(F, i || o) } }.call(c, e.name, n, me(e)) : function u(e, t, a) { var n = this.status, i = this.response, r = this.responseXML, o = this.responseText; try { if (w.opts.filesManagerUploadToS3) if (201 == n) { var s = Ae(r); if (s) { var l = { link: s, sanitize: !1, data: [], $existing_img: e, response: i || r, type: a }; I.set(t, l) } } else q(F, i || r, e); else if (200 <= n && n < 300) { var c = Ee(o); if (c) { var d = { link: c.link, sanitize: !1, data: c, $existing_img: e, response: i || r, type: a }; I.set(t, d) } } else q(y, i || o, e) } catch (f) { q(F, i || o, e) } }.call(c, v, n, me(e)), ce(100, n, !0) }, c.onerror = function () { q(F, this.response || this.responseText || this.responseXML, null, n) }, c.upload.onprogress = function (e) { !function a(e, t) { e.lengthComputable && ce(e.loaded / e.total * 100 | 0, t, !1) }(e, n) }, c.onabort = function (e) { !function a(e, t) { q(N, t, v, e) }(n, e) }, c.send(o), g.set(n, c) } } function Te(l) { w.events.$on(l, "click", ".fr-upload-progress-layer", function (e) { if (w.helpers.isMobile()) return e.stopPropagation(), !1 }, !0), w.events.$on(l, "dragover dragenter", ".fr-upload-progress-layer", function (e) { return e.preventDefault(), !(e.originalEvent.dataTransfer.dropEffect = "none") }, !0), w.events.$on(l, "dragleave dragend", ".fr-upload-progress-layer", function (e) { return e.preventDefault(), !1 }, !0), w.events.$on(l, "dragover dragenter", ".fr-files-upload-layer", function (e) { return _(this).addClass("fr-drop"), (w.browser.msie || w.browser.edge) && e.preventDefault(), !1 }, !0), w.events.$on(l, "dragleave dragend", ".fr-files-upload-layer", function (e) { return _(this).removeClass("fr-drop"), (w.browser.msie || w.browser.edge) && e.preventDefault(), !1 }, !0), w.events.$on(l, "click", ".fr-insert-checkbox", function (e) { if (this.classList.contains("fr-checkbox-disabled")) return this.children.target.disabled = !0, void (this.children.target.checked = !1); var t = parseInt(this.id.split("-").pop()); x.set(t, this.children.target.checked); for (var a = l.find('.fr-command[data-cmd="insertAll"]'), n = l.find('.fr-command[data-cmd="deleteAll"]'), i = l.find('input.fr-file-insert-check[type="checkbox"]'), r = i.length, o = !0, s = 0; s < r; s++)1 == i[s].checked && (o = !1); if (o ? a.addClass("fr-disabled") : a.removeClass("fr-disabled"), o ? n.addClass("fr-disabled") : n.removeClass("fr-disabled"), this.children.target.checked) l.find(".fr-file-" + this.id.split("-").pop()).get(0).setAttribute("draggable", "true"); else { this.id.split("-").pop(); l.find(".fr-file-" + this.id.split("-").pop()).get(0).setAttribute("draggable", "false") } }), w.events.$on(l, "click", ".fr-file-insert-button", function (e) { this.classList.contains("fr-disabled") || ve(parseInt(this.id.split("-").pop())) }), w.events.$on(l, "click", ".fr-file-autoplay-button", function (e) { if (this.parentNode.classList.contains("fr-checkbox-disabled")) return this.disabled = !0, void (this.checked = !1); Re(parseInt(this.id.split("-").pop())) }), w.events.$on(l, "click", ".fr-file-edit-button", function (e) { var t = parseInt(this.id.split("-").pop()); l.find(".fr-file-edit-button-".concat(t)).hasClass("fr-disabled") || a(t) }), w.events.$on(l, "click", ".fr-file-view-button", function (e) { var t = parseInt(this.id.split("-").pop()); l.find(".fr-file-view-button-".concat(t)).hasClass("fr-disabled") || function g(e) { var t = w.popups.get("filesManager.insert"); if (0 < t.find(".fr-file-view-image-" + e).length) t.find(".fr-file-view-image-" + e)[0].remove(); else { for (var a = t.find(".fr-file-view"), n = 0; n < a.length; n++)a.get(n).remove(); var i = t.find(".fr-file-view-" + e); if (ye(me(I.get(e)))) { var r = '<div class="fr-file-view-modal">\n              <div class="fr-file-view-modal-content">\n              <div class="fr-file-view-close">&times;</div> \n                <img src="' + I.get(e).link + "\" class ='fr-file-view-image'/>\n                </div>\n              </div>"; i[0].innerHTML = r + i[0].innerHTML } else if (Se(me(I.get(e)))) { var o; if (I.get(e).hasOwnProperty("video")) { var s = I.get(e).video.substring(I.get(e).video.indexOf("src") + 3), l = s.substring(s.indexOf('"') + 1); l = l.substring(0, l.indexOf('"')), o = '<div class="fr-file-view-modal">\n        <div class="fr-file-view-modal-content ">\n          <div class="fr-file-view-close">&times;</div> \n          <iframe width="640" height="360" src="'.concat(l + "&autoplay=1", '" frameborder="0" class = "fr-file-view-image"></iframe>\n        </div>\n      </div>') } else o = '<div class="fr-file-view-modal">\n          <div class="fr-file-view-modal-content ">\n            <div class="fr-file-view-close">&times;</div> \n            <video controls src="' + I.get(e).link + "\"  class ='fr-file-view-image' autoplay></video>\n          </div>\n        </div>"; i[0].innerHTML = o + i[0].innerHTML } else if (Le(me(I.get(e)))) { var c = '<div class="fr-file-view-modal">\n        <div class="fr-file-view-modal-content ">\n          <div  class="fr-file-view-close">&times;</div> \n          <audio controls="controls"  class =\'fr-file-view-image\' autoplay>\n\n          <source src="'.concat(I.get(e).link, '" type="').concat(me(I.get(e)), '" />\n\n            Your browser does not support the audio element.\n          </audio>\n        </div>\n      </div>'); i[0].innerHTML = c + i[0].innerHTML } else if (we(me(I.get(e)))) { var d = I.get(e).link, f = I.get(e).text; if (d.endsWith(".pdf") || d.endsWith(".txt")) { var p = '<div class="fr-file-view-modal">\t\n              <div class="fr-file-view-modal-content " >\t\n              <div class="fr-file-view-close">&times;</div> \t\n              <iframe src="'.concat(d, "\" style='background-color: white;' height='50%' width='50%' title=\"").concat(f, '" class="fr-file fr-file-view-image"></iframe>\t\n            </div>\t\n            </div>'); i[0].innerHTML = p + i[0].innerHTML } else if (0 === d.indexOf("blob:") && w.browser.msie && window.navigator && window.navigator.msSaveBlob) window.navigator.msSaveBlob(b.get(e), f); else { var u = document.createElement("a"); u.href = d, u.download = f, u.click() } } } }(t) }), w.events.$on(l, "click", ".fr-file-delete-button", function (e) { Q(parseInt(this.id.split("-").pop())) }), w.events.$on(l, "click", ".fr-file-cancel-upload-button", function (e) { !function a(e) { var t = w.popups.get("filesManager.insert"); t.find(".fr-file-item-right-" + e).get(0).innerHTML = le(e), g.get(e).abort(), de(e, 100, !0), t.find(".fr-checkbox-file-" + e).get(0).disabled = !0 }(parseInt(this.id.split("-").pop())) }), w.events.$on(l, "click", ".fr-upload-delete-button", function (e) { !function t(e) { 0 != g.get(e).readyState && (g.get(e).abort(), de(e, 100, !0), g["delete"](e)), Q(e) }(parseInt(this.id.split("-").pop())) }), w.events.$on(l, "click", ".fr-file-view-close", function (e) { l.find(".fr-file-view-modal").get(0).outerHTML = "" }), w.events.$on(l, "click", ".fr-plugins-enable", function (e) { !function t() { T.forEach(function (e) { w.opts.pluginsEnabled.indexOf(e) < 0 && w.opts.pluginsEnabled.push(e) }) }(), function a(e) { for (var t in e) if (!w[t]) { if (mt.PLUGINS[t] && w.opts.pluginsEnabled.indexOf(t) < 0) continue; w[t] = new e[t](w), w[t]._init && w[t]._init() } }(mt.PLUGINS), w.popups.get("filesManager.insert").get(0).outerHTML = "", _e(), $(!0) }), w.events.$on(l, "click", ".fr-plugins-cancel", function (e) { w.popups.hide("filesManager.insert") }), w.events.$on(l, "drop", ".fr-upload-progress", function (e) { e.preventDefault(), e.stopPropagation() }), w.events.$on(l, "drop", ".fr-files-upload-layer", function (e) { e.preventDefault(), e.stopPropagation(), _(this).removeClass("fr-drop"); var t = e.originalEvent.dataTransfer; if (t && t.files) { var a = l.data("instance") || w; a.events.disableBlur(); for (var n = [], i = 0; i < t.files.length; i++) { var r = C; b.set(r, t.files[i]), ie(r), x.set(r, !1), n.push(r), C++ } for (var o = 0; o < n.length; o++)a.filesManager.upload(b.get(n[o]), t.files, v, n[o]); a.events.enableBlur() } }, !0), w.helpers.isIOS() && w.events.$on(l, "touchstart", '.fr-files-upload-layer input[type="file"]', function () { _(this).trigger("click") }, !0), w.events.$on(l, "change", '.fr-files-upload-layer input[type="file"]', function () { if (this.files) { var e = l.data("instance") || w; e.events.disableBlur(), l.find("input:focus").blur(), e.events.enableBlur(); var t = []; if ("undefined" != typeof this.files && 0 < this.files.length) { for (var a = 0; a < this.files.length; a++) { var n = C; b.set(n, this.files[a]), ie(n), x.set(n, !1), ++C, t.push(n) } for (var i = 0; i < t.length; i++)e.filesManager.upload(b.get(t[i]), this.files, v, t[i]) } } _(this).val("") }, !0) } function Re(t) { document.getElementById("fr-file-autoplay-button-" + t).checked ? O.push(t) : O = O.filter(function (e) { return e != t }) } function ye(e) { return e && "image" === e.split("/")[0] } function we(e) { return e && "image" != e.split("/")[0] && e && "video" != e.split("/")[0] && e && "audio" != e.split("/")[0] } function Se(e) { return e && "video" === e.split("/")[0] } function Le(e) { return e && "audio" === e.split("/")[0] } function _e(e) { if (e) return w.popups.onRefresh("filesManager.insert", U), w.popups.onHide("filesManager.insert", W), !0; var t, a, n = ""; w.opts.imageUpload || -1 === w.opts.filesInsertButtons.indexOf("filesUpload") || w.opts.imageInsertButtons.splice(w.opts.filesInsertButtons.indexOf("filesUpload"), 1); var i = w.button.buildList(w.opts.filesInsertButtons), r = w.button.buildList(w.opts.filesInsertButtons2); "" !== i && (n = '<div class="fr-buttons fr-tabs">'.concat(i, '<span class="fr-align-right">').concat(r, "</span></div>")); var o = w.opts.filesInsertButtons.indexOf("filesUpload"), s = w.opts.filesInsertButtons.indexOf("filesByURL"), l = w.opts.filesInsertButtons.indexOf("filesEmbed"), c = ""; 0 <= o && (t = " fr-active", 0 <= s && s < o && (t = ""), c = '<div class="fr-files-upload-layer'.concat(t, ' fr-layer " id="fr-files-upload-layer-').concat(w.id, '"><div style="display:flex"><div class="fr-upload-section"><div class = \'fr-blue-decorator\'><div class = \'fr-cloud-icon\'><svg class = "fr-svg" focusable="false" width="26px" height="26px" viewBox = "0 0 24 24" xlmns = "http://w3.org/200/svg"><path d = \'M12 6.66667a4.87654 4.87654 0 0 1 4.77525 3.92342l0.29618 1.50268 1.52794 0.10578a2.57021 2.57021 0 0 1 -0.1827 5.13478H6.5a3.49774 3.49774 0 0 1 -0.3844 -6.97454l1.06682 -0.11341L7.678 9.29387A4.86024 4.86024 0 0 1 12 6.66667m0 -2A6.871 6.871 0 0 0 5.90417 8.37 5.49773 5.49773 0 0 0 6.5 19.33333H18.41667a4.57019 4.57019 0 0 0 0.32083 -9.13A6.86567 6.86567 0 0 0 12 4.66667Zm0.99976 7.2469h1.91406L11.99976 9 9.08618 11.91357h1.91358v3H11V16h2V14h-0.00024Z\'></path></svg></div>Drag & Drop One or More Files<br><div class="decorated"><span> OR </span></div> Click Browse Files </div> </div><div class="fr-form"><input type="file" accept="').concat(w.opts.filesManagerAllowedTypes.join(",").toLowerCase(), '" tabIndex="-1" aria - labelledby="fr-files-upload-layer-').concat(w.id, '"role="button" multiple></div> </div></div>')); var d = ""; 0 <= l && (t = " fr-active", (o < l && 0 <= o || s < l && 0 <= s) && (t = ""), d = '<div class="fr-files-embed-layer fr-layer'.concat(t, '" id="fr-files-embed-layer-').concat(w.id, '"><div class="fr-input-line padding-top-15"><textarea data-gramm_editor="false" style=\'height:60px\' id="fr-files-embed-layer-text').concat(w.id, '" type="text" placeholder="').concat(w.language.translate("Embedded Code"), '" tabIndex="1" aria-required="true" rows="5"></textarea></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="insertEmbed" tabIndex="2" role="button">').concat(w.language.translate("Insert"), "</button></div></div>")); var f = ""; 0 <= s && (t = " fr-active", 0 <= o && o < s && (t = ""), f = '<div class="fr-files-by-url-layer'.concat(t, ' fr-layer" id="fr-files-by-url-layer-').concat(w.id, '"><div class="fr-input-line fr-by-url-padding"><input id="fr-files-by-url-layer-text-').concat(w.id, '" type="text" placeholder="http://" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="filesInsertByURL" tabIndex="2" role="button">').concat(w.language.translate("Add"), "</button></div></div>")); var p = { buttons: n, upload_layer: c, by_url_layer: f, embed_layer: d, upload_progress_layer: "<div class = ' fr-margin-16 fr-upload-progress' id=\"fr-upload-progress-layer-".concat(w.id, "\" ><div  class='fr-progress-bar-style'><div class='fr-progress-bar fr-none'></div></div><div id='filesList' class = 'fr-upload-progress-layer fr-layer'></div></div>"), progress_bar: '<div class="fr-files-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="filesDismissError" tabIndex="2" role="button">OK</button></div></div>' }; return 1 <= w.opts.imageInsertButtons.length && (a = w.popups.create("filesManager.insert", p)), w.$wp && w.events.$on(w.$wp, "scroll", function () { v && w.popups.isVisible("filesManager.insert") && replace() }), Te(a), w.popups.setPopupDimensions(a), a } function Ie(e) { var t = e.split("/").pop(); if (t.split(".").length < 2) { var a = new Date; return t + "-" + a.getDate() + "/" + (a.getMonth() + 1) + "/" + a.getFullYear() } return t } function xe() { v && w.popups.get("image.alt").find("input").val(v.attr("alt") || "").trigger("change") } function Oe() { var e = w.popups.get("image.alt"); e || (e = ke()), ee(), w.popups.refresh("image.alt"), w.popups.setContainer("image.alt", w.$sc); var t = Qe(); Ze() && (t = t.find(".fr-img-wrap")); var a = t.offset().left + t.outerWidth() / 2, n = t.offset().top + t.outerHeight(); w.popups.show("image.alt", a, n, t.outerHeight(), !0) } function ke(e) { if (e) return w.popups.onRefresh("image.alt", xe), !0; var t = { buttons: '<div class="fr-buttons fr-tabs">'.concat(w.button.buildList(w.opts.imageAltButtons), "</div>"), alt_layer: '<div class="fr-image-alt-layer fr-layer fr-active" id="fr-image-alt-layer-'.concat(w.id, '"><div class="fr-input-line"><input id="fr-image-alt-layer-text-').concat(w.id, '" type="text" placeholder="').concat(w.language.translate("Alternative Text"), '" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetAlt" tabIndex="2" role="button">').concat(w.language.translate("Update"), "</button></div></div>") }, a = w.popups.create("image.alt", t); return w.$wp && w.events.$on(w.$wp, "scroll.image-alt", function () { v && w.popups.isVisible("image.alt") && Oe() }), a } function Fe() { var e = w.popups.get("image.size"); if (v) if (Ze()) { var t = v.parent(); t.get(0).style.width || (t = v.parent().parent()), e.find('input[name="width"]').val(t.get(0).style.width).trigger("change"), e.find('input[name="height"]').val(t.get(0).style.height).trigger("change") } else e.find('input[name="width"]').val(v.get(0).style.width).trigger("change"), e.find('input[name="height"]').val(v.get(0).style.height).trigger("change") } function De() { var e = w.popups.get("image.size"); e || (e = Me()), ee(), w.popups.refresh("image.size"), w.popups.setContainer("image.size", w.$sc); var t = Qe(); Ze() && (t = t.find(".fr-img-wrap")); var a = t.offset().left + t.outerWidth() / 2, n = t.offset().top + t.outerHeight(); w.popups.show("image.size", a, n, t.outerHeight(), !0) } function Me(e) { if (e) return w.popups.onRefresh("image.size", Fe), !0; var t = { buttons: '<div class="fr-buttons fr-tabs">'.concat(w.button.buildList(w.opts.imageSizeButtons), "</div>"), size_layer: '<div class="fr-image-size-layer fr-layer fr-active" id="fr-image-size-layer-'.concat(w.id, '"><div class="fr-image-group"><div class="fr-input-line"><input id="fr-image-size-layer-width-\'').concat(w.id, '" type="text" name="width" placeholder="').concat(w.language.translate("Width"), '" tabIndex="1"></div><div class="fr-input-line"><input id="fr-image-size-layer-height').concat(w.id, '" type="text" name="height" placeholder="').concat(w.language.translate("Height"), '" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetSize" tabIndex="2" role="button">').concat(w.language.translate("Update"), "</button></div></div>") }, a = w.popups.create("image.size", t); return w.$wp && w.events.$on(w.$wp, "scroll.image-size", function () { v && w.popups.isVisible("image.size") && De() }), a } function Ne(e, t, a, n) { return e.pageX = t, Y.call(this, e), e.pageX = e.pageX + a * Math.floor(Math.pow(1.1, n)), z.call(this, e), V.call(this, e), ++n } function Be(e) { (e = e || Qe()) && !1 !== w.events.trigger("image.beforeRemove", [e]) && (w.popups.hideAll(), Ye(!0), w.undo.canDo() || w.undo.saveStep(), e.get(0) == w.el ? e.removeAttr("src") : (e.get(0).parentNode && "A" == e.get(0).parentNode.tagName ? (w.selection.setBefore(e.get(0).parentNode) || w.selection.setAfter(e.get(0).parentNode) || e.parent().after(mt.MARKERS), _(e.get(0).parentNode).remove()) : (w.selection.setBefore(e.get(0)) || w.selection.setAfter(e.get(0)) || e.after(mt.MARKERS), e.remove()), w.html.fillEmptyBlocks(), w.selection.restore()), w.undo.saveStep()) } function Pe(e) { var t = e.which; if (v && (t == mt.KEYCODE.BACKSPACE || t == mt.KEYCODE.DELETE)) return e.preventDefault(), e.stopPropagation(), Be(), !1; if (v && t == mt.KEYCODE.ESC) { var a = v; return Ye(!0), w.selection.setAfter(a.get(0)), w.selection.restore(), e.preventDefault(), !1 } if (!v || t != mt.KEYCODE.ARROW_LEFT && t != mt.KEYCODE.ARROW_RIGHT) return v && t === mt.KEYCODE.TAB ? (e.preventDefault(), e.stopPropagation(), Ye(!0), !1) : v && t != mt.KEYCODE.F10 && !w.keys.isBrowserAction(e) ? (e.preventDefault(), e.stopPropagation(), !1) : void 0; var n = v.get(0); return Ye(!0), t == mt.KEYCODE.ARROW_LEFT ? w.selection.setBefore(n) : w.selection.setAfter(n), w.selection.restore(), e.preventDefault(), !1 } function Ue(e) { if (e && "IMG" == e.tagName) { if (w.node.hasClass(e, "fr-uploading") || w.node.hasClass(e, "fr-error") ? e.parentNode.removeChild(e) : w.node.hasClass(e, "fr-draggable") && e.classList.remove("fr-draggable"), e.parentNode && e.parentNode.parentNode && w.node.hasClass(e.parentNode.parentNode, "fr-img-caption")) { var t = e.parentNode.parentNode; t.removeAttribute("contenteditable"), t.removeAttribute("draggable"), t.classList.remove("fr-draggable"); var a = e.nextSibling; a && a.removeAttribute("contenteditable") } } else if (e && e.nodeType == Node.ELEMENT_NODE) for (var n = e.querySelectorAll("img.fr-uploading, img.fr-error, img.fr-draggable"), i = 0; i < n.length; i++)Ue(n[i]) } function $e(e) { if (!1 === w.events.trigger("image.beforePasteUpload", [e])) return !1; v = _(e), K(), replace(), J(), v.on("load", function () { var t = []; K(), _(w.popups.get("filesManager.insert").get(0)).find("div.fr-active.fr-error").length < 1 && J(), _(this).data("events").find(function (e) { "load" === e[0] && t.push(e) }), t.length <= 1 && _(this).off("load") }); for (var t = _(e).attr("src").split(","), a = atob(t[1]), n = [], i = 0; i < a.length; i++)n.push(a.charCodeAt(i)); Ce([new Blob([new Uint8Array(n)], { type: t[0].replace(/data\:/g, "").replace(/;base64/g, "") })], v) } function We() { w.opts.imagePaste ? w.$el.find("img[data-fr-image-pasted]").each(function (e, n) { if (w.opts.imagePasteProcess) { var t = w.opts.imageDefaultWidth; t && "auto" != t && (t += w.opts.imageResizeWithPercent ? "%" : "px"), _(n).css("width", t).removeClass("fr-dii fr-dib fr-fir fr-fil"), qe(_(n), w.opts.imageDefaultDisplay, w.opts.imageDefaultAlign) } if (0 === n.src.indexOf("data:")) $e(n); else if (0 === n.src.indexOf("blob:") || 0 === n.src.indexOf("http") && w.opts.imageUploadRemoteUrls && w.opts.imageCORSProxy) { var a = new Image; a.crossOrigin = "Anonymous", a.onload = function () { var e, t = w.o_doc.createElement("CANVAS"), a = t.getContext("2d"); t.height = this.naturalHeight, t.width = this.naturalWidth, a.drawImage(this, 0, 0), setTimeout(function () { $e(n) }, 0), e = 2e3 < this.naturalWidth || 1500 < this.naturalHeight ? "jpeg" : "png", n.src = t.toDataURL("image/".concat(e)) }, a.src = (0 === n.src.indexOf("blob:") ? "" : "".concat(w.opts.imageCORSProxy, "/")) + n.src } else 0 !== n.src.indexOf("http") || 0 === n.src.indexOf("https://mail.google.com/mail") ? (w.selection.save(), _(n).remove(), w.selection.restore()) : _(n).removeAttr("data-fr-image-pasted") }) : w.$el.find("img[data-fr-image-pasted]").remove() } function Ke(e) { var t = e.target.result, a = w.opts.imageDefaultWidth; a && "auto" != a && (a += w.opts.imageResizeWithPercent ? "%" : "px"), w.undo.saveStep(), w.html.insert('<img data-fr-image-pasted="true" src="'.concat(t, '"').concat(a ? ' style="width: '.concat(a, ';"') : "", ">")); var n = w.$el.find('img[data-fr-image-pasted="true"]'); n && qe(n, w.opts.imageDefaultDisplay, w.opts.imageDefaultAlign), w.events.trigger("paste.after") } function He(e) { if (e && e.clipboardData && e.clipboardData.items) { var t = null; if (e.clipboardData.types && -1 != [].indexOf.call(e.clipboardData.types, "text/rtf") || e.clipboardData.getData("text/rtf")) t = e.clipboardData.items[0].getAsFile(); else for (var a = 0; a < e.clipboardData.items.length && !(t = e.clipboardData.items[a].getAsFile()); a++); if (t) return function n(e) { var t = new FileReader; t.onload = Ke, t.readAsDataURL(e) }(t), !1 } } function Ge(e) { return e = e.replace(/<img /gi, '<img data-fr-image-pasted="true" ') } function Ye(e) { v && (function t() { return ze }() || !0 === e) && (w.toolbar.enable(), l && l.removeClass("fr-active"), w.popups.hide("image.edit"), v = null, je(), c = null, d && d.hide()) } P[k] = "File cannot be loaded from the passed link.", P[R] = "No link in upload response.", P[y] = "Error during file upload.", P[F] = "Parsing response failed.", P[D] = "File is too large.", P[M] = "File type is invalid.", P[7] = "Files can be uploaded only to same domain in IE 8 and IE 9.", P[8] = "File is corrupted.", P[9] = "Error during file loading."; var ze = !(P[N] = "File upload cancelled"); function Ve() { ze = !0 } function je() { ze = !1 } function qe(e, t, a) { !w.opts.htmlUntouched && w.opts.useClasses ? (e.removeClass("fr-fil fr-fir fr-dib fr-dii"), a && e.addClass("fr-fi".concat(a[0])), t && e.addClass("fr-di".concat(t[0]))) : "inline" == t ? (e.css({ display: "inline-block", verticalAlign: "bottom", margin: w.opts.imageDefaultMargin }), "center" == a ? e.css({ "float": "none", marginBottom: "", marginTop: "", maxWidth: "calc(100% - ".concat(2 * w.opts.imageDefaultMargin, "px)"), textAlign: "center" }) : "left" == a ? e.css({ "float": "left", marginLeft: 0, maxWidth: "calc(100% - ".concat(w.opts.imageDefaultMargin, "px)"), textAlign: "left" }) : e.css({ "float": "right", marginRight: 0, maxWidth: "calc(100% - ".concat(w.opts.imageDefaultMargin, "px)"), textAlign: "right" })) : "block" == t && (e.css({ display: "block", "float": "none", verticalAlign: "top", margin: "".concat(w.opts.imageDefaultMargin, "px auto"), textAlign: "center" }), "left" == a ? e.css({ marginLeft: 0, textAlign: "left" }) : "right" == a && e.css({ marginRight: 0, textAlign: "right" })) } function Xe() { return v } function Qe() { return Ze() ? v.parents(".fr-img-caption").first() : v } function Ze() { return !!v && 0 < v.parents(".fr-img-caption").length } return { _init: function Je() { var n; (function e() { w.events.$on(w.$el, w._mousedown, "IMG" == w.el.tagName ? null : 'img:not([contenteditable="false"])', function (e) { if ("false" == _(this).parents("contenteditable").not(".fr-element").not(".fr-img-caption").not("body").first().attr("contenteditable")) return !0; w.helpers.isMobile() || w.selection.clear(), t = !0, w.popups.areVisible() && w.events.disableBlur(), w.browser.msie && (w.events.disableBlur(), w.$el.attr("contenteditable", !1)), w.draggable || "touchstart" == e.type || e.preventDefault(), e.stopPropagation() }), w.events.$on(w.$el, w._mousedown, ".fr-img-caption .fr-inner", function (e) { w.core.hasFocus() || w.events.focus(), e.stopPropagation() }), w.events.$on(w.$el, "paste", ".fr-img-caption .fr-inner", function (e) { w.toolbar.hide(), e.stopPropagation() }), w.events.$on(w.$el, w._mouseup, "IMG" == w.el.tagName ? null : 'img:not([contenteditable="false"])', function (e) { if ("false" == _(this).parents("contenteditable").not(".fr-element").not(".fr-img-caption").not("body").first().attr("contenteditable")) return !0; t && (t = !1, e.stopPropagation(), w.browser.msie && (w.$el.attr("contenteditable", !0), w.events.enableBlur())) }), w.events.on("keyup", function (e) { if (e.shiftKey && "" === w.selection.text().replace(/\n/g, "") && w.keys.isArrow(e.which)) { var t = w.selection.element(), a = w.selection.endElement(); t && "IMG" == t.tagName ? pe(_(t)) : a && "IMG" == a.tagName && pe(_(a)) } }, !0), w.events.on("window.mousedown", Ve), w.events.on("window.touchmove", je), w.events.on("mouseup window.mouseup", function () { if (v) return Ye(), !1; je() }), w.events.on("commands.mousedown", function (e) { 0 < e.parents(".fr-toolbar").length && Ye() }), w.events.on("image.resizeEnd", function () { w.opts.iframe && w.size.syncIframe() }), w.events.on("blur image.hideResizer commands.undo commands.redo element.dropped", function () { Ye(!(t = !1)) }), w.events.on("modals.hide", function () { v && w.selection.clear() }), w.events.on("image.resizeEnd", function () { w.win.getSelection && pe(v) }), w.opts.imageAddNewLine && w.events.on("image.inserted", function (e) { var t = e.get(0); for (t.nextSibling && "BR" === t.nextSibling.tagName && (t = t.nextSibling); t && !w.node.isElement(t);)t = w.node.isLastSibling(t) ? t.parentNode : null; w.node.isElement(t) && (w.opts.enter === mt.ENTER_BR ? e.after("<br>") : _(w.node.blockParent(e.get(0))).after("<".concat(w.html.defaultTag(), "><br></").concat(w.html.defaultTag(), ">"))) }) })(), "IMG" == w.el.tagName && w.$el.addClass("fr-view"), w.helpers.isMobile() && (w.events.$on(w.$el, "touchstart", "IMG" == w.el.tagName ? null : 'img:not([contenteditable="false"])', function () { r = !1 }), w.events.$on(w.$el, "touchmove", function () { r = !0 })), w.$wp ? (w.events.on("window.keydown keydown", Pe, !0), w.events.on("keyup", function (e) { if (v && e.which == mt.KEYCODE.ENTER) return !1 }, !0), w.events.$on(w.$el, "keydown", function () { var e = w.selection.element(); (e.nodeType === Node.TEXT_NODE || "BR" == e.tagName && w.node.isLastSibling(e)) && (e = e.parentNode), w.node.hasClass(e, "fr-inner") || (w.node.hasClass(e, "fr-img-caption") || (e = _(e).parents(".fr-img-caption").get(0)), w.node.hasClass(e, "fr-img-caption") && (_(e).after(mt.INVISIBLE_SPACE + mt.MARKERS), w.selection.restore())) })) : w.events.$on(w.$win, "keydown", Pe), w.events.on("toolbar.esc", function () { if (v) { if (w.$wp) w.events.disableBlur(), w.events.focus(); else { var e = v; Ye(!0), w.selection.setAfter(e.get(0)), w.selection.restore() } return !1 } }, !0), w.events.on("toolbar.focusEditor", function () { if (v) return !1 }, !0), w.events.on("window.cut window.copy", function (e) { if (v && w.popups.isVisible("image.edit") && !w.popups.get("image.edit").find(":focus").length) { var t = Qe(); Ze() ? (t.before(mt.START_MARKER), t.after(mt.END_MARKER), w.selection.restore(), w.paste.saveCopiedText(t.get(0).outerHTML, t.text())) : w.paste.saveCopiedText(v.get(0).outerHTML, v.attr("alt")), "copy" == e.type ? setTimeout(function () { pe(v) }) : (Ye(!0), w.undo.saveStep(), setTimeout(function () { w.undo.saveStep() }, 0)) } }, !0), w.browser.msie && w.events.on("keydown", function (e) { if (!w.selection.isCollapsed() || !v) return !0; var t = e.which; t == mt.KEYCODE.C && w.keys.ctrlKey(e) ? w.events.trigger("window.copy") : t == mt.KEYCODE.X && w.keys.ctrlKey(e) && w.events.trigger("window.cut") }), w.events.$on(_(w.o_win), "keydown", function (e) { var t = e.which; if (v && t == mt.KEYCODE.BACKSPACE) return e.preventDefault(), !1 }), w.events.$on(w.$win, "keydown", function (e) { var t = e.which; v && v.hasClass("fr-uploading") && t == mt.KEYCODE.ESC && v.trigger("abortUpload") }), w.events.on("destroy", function () { v && v.hasClass("fr-uploading") && v.trigger("abortUpload") }), w.events.on("paste.before", He), w.events.on("paste.beforeCleanup", Ge), w.events.on("paste.after", We), w.events.on("html.processGet", Ue), w.opts.imageOutputSize && w.events.on("html.beforeGet", function () { n = w.el.querySelectorAll("img"); for (var e = 0; e < n.length; e++) { var t = n[e].style.width || _(n[e]).width(), a = n[e].style.height || _(n[e]).height(); t && n[e].setAttribute("width", "".concat(t).replace(/px/, "")), a && n[e].setAttribute("height", "".concat(a).replace(/px/, "")) } }), w.opts.iframe && w.events.on("image.loaded", w.size.syncIframe), w.events.$on(_(w.o_win), "orientationchange.image", function () { setTimeout(function () { v && pe(v) }, 100) }), function i(e) { if (e) return w.$wp && w.events.$on(w.$wp, "scroll.image-edit", function () { v && w.popups.isVisible("image.edit") && w.events.disableBlur() }), !0; var t = ""; if (0 < w.opts.imageEditButtons.length) { var a = { buttons: t += '<div class="fr-buttons"> \n        '.concat(w.button.buildList(w.opts.imageEditButtons), "\n        </div>") }; return w.popups.create("image.edit", a) } return !1 }(!0), _e(!0), Me(!0), ke(!0), w.events.on("node.remove", function (e) { if ("IMG" == e.get(0).tagName) return Be(e), !1 }), w.events.on("popups.hide.filesManager.insert", function (e) { w.filesManager.minimizePopup(S) }) }, showInsertPopup: $, showLayer: function et(e) { var t, a, n = w.popups.get("filesManager.insert"); if (v || w.opts.toolbarInline) { if (v) { var i = Qe(); Ze() && (i = i.find(".fr-img-wrap")), a = i.offset().top + i.outerHeight(), t = i.offset().left } } else { var r = w.$tb.find('.fr-command[data-cmd="insertFiles"]'); t = r.offset().left, a = r.offset().top + (w.opts.toolbarBottom ? 10 : r.outerHeight() - 10) } !v && w.opts.toolbarInline && (a = n.offset().top - w.helpers.getPX(n.css("margin-top")), n.hasClass("fr-above") && (a += n.outerHeight())), n.find(".fr-layer").removeClass("fr-active"), n.find(".fr-".concat(e, "-layer")).addClass("fr-active"), n.find(".fr-upload-progress-layer").addClass("fr-active"), w.popups.show("filesManager.insert", t, a, v ? v.outerHeight() : 0), w.accessibility.focusPopup(n) }, refreshUploadButton: function tt(e) { var t = w.popups.get("filesManager.insert"); t && t.find(".fr-files-upload-layer").hasClass("fr-active") && e.addClass("fr-active").attr("aria-pressed", !0) }, refreshByURLButton: function at(e) { var t = w.popups.get("filesManager.insert"); t && t.find(".fr-files-by-url-layer").hasClass("fr-active") && e.addClass("fr-active").attr("aria-pressed", !0) }, upload: Ce, insertByURL: function nt() { for (var e, t = w.popups.get("filesManager.insert").find(".fr-files-by-url-layer input"), a = t.val().trim().split(/[ ,]+/), n = [], i = 0, r = 0; r < a.length; r++)e = a[r], new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$", "i").test(e) && (n[i] = a[r], i++); if (0 != n.length) { if (0 < t.val().trim().length && 0 < n.length) { var s = [], l = [], c = C, d = n.length; n.forEach(function (e, a) { if (0 == e.trim().length) C == c + --d && fe(s, l); else { ee(), J(), te(w.language.translate("Loading file(s)")); var n = e.trim(), t = function o(e) { if (void 0 === e) return e; var t = null; if (/^http/.test(e) || (e = "https://".concat(e)), w.helpers.isURL(e)) for (var a = 0; a < mt.VIDEO_PROVIDERS.length; a++) { var n = mt.VIDEO_PROVIDERS[a]; if (n.test_regex.test(e) && new RegExp(w.opts.videoAllowedProviders.join("|")).test(n.provider)) { t = e.replace(n.url_regex, n.url_text), t = n.html.replace(/\{url\}/, t); break } } return t }(n); if (t) { var i = { link: n, name: n, type: "video/url", size: 2, video: t }; b.set(c + a, i), ie(c + a), ee(), J(), te(w.language.translate("Loading file(s)")), I.set(c + a, i), ++C == c + d && fe(s, l) } else { var r = new XMLHttpRequest; r.onload = function () { if (200 == this.status) { var e = new Blob([this.response], { type: this.response.type || " " }); e.name = Ie(n), e.link = n, ye(this.response.type) ? (e.sanitize = !0, e.existing_image = v) : we(this.response.type) && (e.text = Ie(n)), s.push(e), l.push(c + a), b.set(c + a, e), ie(c + a) } else { var t = new Blob([this.response], { type: this.response.type || " " }); t.name = Ie(n), t.link = n, b.set(c + a, t), ie(c + a), q(k, this.response, v, c + a) } ee(), J(), te(w.language.translate("Loading file(s)")), ++C == c + d && fe(s, l) }, r.onerror = function () { var e = { link: n, name: Ie(n), size: 0, type: "" }; q(9, this.response, v, c + a); var t = C; b.set(t, e), ie(t), ee(), J(), te(w.language.translate("Loading file(s)")), ++C == c + d && fe(s, l) }, r.open("GET", "".concat(w.opts.imageCORSProxy, "/").concat(n), !0), r.responseType = "blob", r.send() } } }), t.val(""), t.blur() } } else ae(w.language.translate("Url entered is invalid. Please try again.")) }, insertAllFiles: function it() { i = []; var e = w.popups.get("filesManager.insert"); A = -1, s = null, e.find(".fr-insert-checkbox").toArray().forEach(function n(e, t, a) { e.children.target.checked && (i.push(parseInt(e.id.split("-").pop())), ye(I.get(parseInt(e.id.split("-").pop())).type) && -1 == A && (A = t)) }), he(i), X() }, deleteAllFiles: function e() { w.popups.get("filesManager.insert").find(".fr-insert-checkbox").toArray().forEach(function i(e, t, a) { if (e.children.target.checked) { var n = parseInt(e.id.split("-").pop()); g.has(n) && g["delete"](n), Q(n) } }), X() }, get: Xe, getEl: Qe, insert: ve, showProgressBar: J, remove: Be, hideProgressBar: ee, applyStyle: function rt(e, t, a) { if (void 0 === t && (t = w.opts.imageStyles), void 0 === a && (a = w.opts.imageMultipleStyles), !v) return !1; var n = Qe(); if (!a) { var i = Object.keys(t); i.splice(i.indexOf(e), 1), n.removeClass(i.join(" ")) } "object" == vt(t[e]) ? (n.removeAttr("style"), n.css(t[e].style)) : n.toggleClass(e), pe(v) }, showAltPopup: Oe, showSizePopup: De, setAlt: function ot(e) { if (v) { var t = w.popups.get("image.alt"); v.attr("alt", e || t.find("input").val() || ""), t.find("input:focus").blur(), pe(v) } }, setSize: function st(e, t) { if (v) { var a = w.popups.get("image.size"); e = e || a.find('input[name="width"]').val() || "", t = t || a.find('input[name="height"]').val() || ""; var n = /^[\d]+((px)|%)*$/g; v.removeAttr("width").removeAttr("height"), e.match(n) ? v.css("width", e) : v.css("width", ""), t.match(n) ? v.css("height", t) : v.css("height", ""), Ze() && (v.parents(".fr-img-caption").removeAttr("width").removeAttr("height"), e.match(n) ? v.parents(".fr-img-caption").css("width", e) : v.parents(".fr-img-caption").css("width", ""), t.match(n) ? v.parents(".fr-img-caption").css("height", t) : v.parents(".fr-img-caption").css("height", "")), a && a.find("input:focus").blur(), pe(v) } }, toggleCaption: function lt() { var e; if (v && !Ze()) { (e = v).parent().is("a") && (e = v.parent()); var t, a, n = v.parents("ul") && 0 < v.parents("ul").length ? v.parents("ul") : v.parents("ol") && 0 < v.parents("ol").length ? v.parents("ol") : []; if (0 < n.length) { var i = n.find("li").length, r = v.parents("li"), o = document.createElement("li"); i - 1 === r.index() && (n.append(o), o.innerHTML = "&nbsp;") } e.attr("style") && (a = -1 < (t = e.attr("style").split(":")).indexOf("width") ? t[t.indexOf("width") + 1].replace(";", "") : ""); var s = w.opts.imageResizeWithPercent ? (-1 < a.indexOf("px") ? null : a) || "100%" : v.width() + "px"; e.wrap('<div class="fr-img-space-wrap"><span ' + (w.browser.mozilla ? "" : 'contenteditable="false"') + 'class="fr-img-caption ' + v.attr("class") + '" style="' + (w.opts.useClasses ? "" : e.attr("style")) + '" draggable="false"></span><p class="fr-img-space-wrap2">&nbsp;</p></div>'), e.wrap('<span class="fr-img-wrap"></span>'), v.after('<span class="fr-inner"'.concat(w.browser.mozilla ? "" : ' contenteditable="true"', ">").concat(mt.START_MARKER).concat(w.language.translate("Image Caption")).concat(mt.END_MARKER, "</span>")), v.removeAttr("class").removeAttr("style").removeAttr("width"), v.parents(".fr-img-caption").css("width", s), Ye(!0), w.selection.restore() } else e = Qe(), v.insertAfter(e), v.attr("class", e.attr("class").replace("fr-img-caption", "")).attr("style", e.attr("style")), e.remove(), pe(v) }, refreshEmbedButton: function ct(e) { var t = w.popups.get("filesManager.insert"); t && t.find(".fr-files-embed-layer").hasClass("fr-active") && e.addClass("fr-active").attr("aria-pressed", !0) }, insertEmbed: function dt(e) { void 0 === e && (e = w.popups.get("filesManager.insert").find(".fr-files-embed-layer textarea").val() || ""), 0 === e.length || !mt.VIDEO_EMBED_REGEX.test(e) && !mt.IMAGE_EMBED_REGEX.test(e) ? (ae(w.language.translate("Something went wrong. Please try again.")), mt.VIDEO_EMBED_REGEX.test(e) && w.events.trigger("video.codeError", [e])) : be(e) }, hasCaption: Ze, exitEdit: Ye, edit: pe, cancelFileInsert: function ft() { this.file_manager_dialog_open = !1, g.forEach(function (e, t) { 4 != e.readyState && (e.abort(), Q(t)) }); var e = w.popups.get("filesManager.insert"); e.find(".fr-progress-bar").removeClass("fr-display-block").addClass("fr-none"), e.find('.fr-command[data-cmd="filesUpload"]').removeClass("fr-disabled"), e.find('.fr-command[data-cmd="filesByURL"]').removeClass("fr-disabled"), e.find('.fr-command[data-cmd="filesEmbed"]').removeClass("fr-disabled"), E = 0, g = new Map, h = new Map, Z(), w.popups.hide("filesManager.insert") }, minimizePopup: function pt(e) { this.file_manager_dialog_open = !1, w.popups.hide("filesManager.insert"), Z() }, editImage: a, saveImage: function ut(e) { var t = I.get(o); t.link = window.URL.createObjectURL(new Blob(e, { type: "image/png" })), I.set(o, t) }, _showErrorMessage: ae, _showFileErrorMessage: ne, getFileThumbnail: se, deleteFile: Q, checkAutoplay: Re, checkInsertAllState: X, _disableInsertCheckbox: j, _getFileType: me, isChildWindowOpen: function gt() { return u }, setChildWindowState: function ht(e) { e !== undefined && (u = e) }, resetAllFilesCheckbox: Z } }, mt.DefineIcon("insertFiles", { NAME: "image", SVG_KEY: "fileManager" }), mt.RegisterShortcut(mt.KEYCODE.P, "insertFiles", null, "P"), mt.RegisterCommand("insertFiles", { title: "Insert Files", undo: !1, focus: !0, refreshAfterCallback: !1, popup: !0, callback: function () { this.popups.isVisible("filesManager.insert") ? (this.$el.find(".fr-marker").length && (this.events.disableBlur(), this.selection.restore()), this.popups.hide("filesManager.insert")) : this.filesManager.showInsertPopup() }, plugin: "filesManager" }), mt.DefineIcon("cloudIcon", { NAME: "cloudIcon", SVG_KEY: "uploadFiles" }), mt.DefineIcon("filesUpload", { NAME: "uploadFiles", SVG_KEY: "uploadFiles" }), mt.RegisterCommand("filesUpload", { title: "Upload Files", undo: !1, focus: !1, toggle: !0, callback: function () { this.filesManager.showLayer("files-upload") }, refresh: function (e) { this.filesManager.refreshUploadButton(e) } }), mt.DefineIcon("filesByURL", { NAME: "link", SVG_KEY: "insertLink" }), mt.RegisterCommand("filesByURL", { title: "By URL", undo: !1, focus: !1, toggle: !0, callback: function () { this.filesManager.showLayer("files-by-url") }, refresh: function (e) { this.filesManager.refreshByURLButton(e) } }), mt.DefineIcon("filesEmbed", { NAME: "code", SVG_KEY: "codeView" }), mt.RegisterCommand("filesEmbed", { title: "Embedded Code", undo: !1, focus: !1, toggle: !0, callback: function () { this.filesManager.showLayer("files-embed") }, refresh: function (e) { this.filesManager.refreshEmbedButton(e) } }), mt.DefineIcon("insertAll", { NAME: "insertAll", SVG_KEY: "fileInsert" }), mt.RegisterCommand("insertAll", { title: "Insert", undo: !1, focus: !1, toggle: !0, disabled: !0, callback: function () { this.filesManager.insertAllFiles() } }), mt.DefineIcon("deleteAll", { NAME: "remove", SVG_KEY: "remove" }), mt.RegisterCommand("deleteAll", { title: "Delete", undo: !1, focus: !1, toggle: !0, disabled: !0, callback: function () { this.filesManager.deleteAllFiles() } }), mt.DefineIcon("cancel", { NAME: "cancel", SVG_KEY: "cancel" }), mt.RegisterCommand("cancel", { title: "Cancel", undo: !1, focus: !1, toggle: !0, callback: function () { this.filesManager.cancelFileInsert() }, refresh: function (e) { } }), mt.DefineIcon("minimize", { NAME: "minimize", SVG_KEY: "minimize" }), mt.RegisterCommand("minimize", { title: "Minimize", undo: !1, focus: !1, toggle: !0, callback: function () { this.filesManager.minimizePopup("image.insert", !0) }, refresh: function (e) { this.filesManager.refreshEmbedButton(e) } }), mt.RegisterCommand("filesInsertByURL", { title: "Insert Image", undo: !0, refreshAfterCallback: !1, callback: function () { this.filesManager.insertByURL() }, refresh: function (e) { e.text(this.language.translate("Add")) } }), mt.RegisterCommand("imageInsertByUpload", { title: "Insert", undo: !0, refreshAfterCallback: !1, callback: function (e, t) { }, refresh: function (e) { } }), mt.RegisterCommand("viewImage", { title: "View Image", undo: !0, refreshAfterCallback: !1, callback: function (e, t) { }, refresh: function (e) { } }), mt.RegisterCommand("insertEmbed", { undo: !0, focus: !0, callback: function () { this.filesManager.insertEmbed(), this.popups.get("filesManager.insert").find("textarea")[0].value = "", this.popups.get("filesManager.insert").find("textarea").removeClass("fr-not-empty") } }), mt.RegisterCommand("filesDismissError", { title: "OK", undo: !1, callback: function () { this.filesManager.hideProgressBar(!0) } }), Object.assign(mt.DEFAULTS, { fontFamily: { "Arial,Helvetica,sans-serif": "Arial", "Georgia,serif": "Georgia", "Impact,Charcoal,sans-serif": "Impact", "Tahoma,Geneva,sans-serif": "Tahoma", "Times New Roman,Times,serif,-webkit-standard": "Times New Roman", "Verdana,Geneva,sans-serif": "Verdana" }, fontFamilySelection: !1, fontFamilyDefaultSelection: "Font Family" }), mt.PLUGINS.fontFamily = function (i) { var r = i.$; function o(e) { var t = e.replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi, "").replace(/"|'| /g, "").split(","); return r(this).grep(t, function (e) { return 0 < e.length }) } function s(e, t) { for (var a = 0; a < e.length; a++)for (var n = 0; n < t.length; n++)if (e[a].toLowerCase() === t[n].toLowerCase()) return [a, n]; return null } function a() { var e = o(r(i.selection.element()).css("font-family")), t = []; for (var a in i.opts.fontFamily) if (i.opts.fontFamily.hasOwnProperty(a)) { var n = s(e, o(a)); n && t.push([a, n]) } return 0 === t.length ? null : (t.sort(function (e, t) { var a = e[1][0] - t[1][0]; return 0 === a ? e[1][1] - t[1][1] : a }), t[0][0]) } return { apply: function t(e) { i.format.applyStyle("font-family", e) }, refreshOnShow: function n(e, t) { t.find(".fr-command.fr-active").removeClass("fr-active").attr("aria-selected", !1), t.find('.fr-command[data-param1="'.concat(a(), '"]')).addClass("fr-active").attr("aria-selected", !0) }, refresh: function l(e) { if (i.opts.fontFamilySelection) { var t = r(i.selection.element()).css("font-family").replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi, "").replace(/"|'|/g, "").split(","); e.find("> span").text(i.opts.fontFamily[a()] || t[0] || i.language.translate(i.opts.fontFamilyDefaultSelection)) } } } }, mt.RegisterCommand("fontFamily", { type: "dropdown", displaySelection: function (e) { return e.opts.fontFamilySelection }, defaultSelection: function (e) { return e.opts.fontFamilyDefaultSelection }, displaySelectionWidth: 120, html: function () { var e = '<ul class="fr-dropdown-list" role="presentation">', t = this.opts.fontFamily; for (var a in t) t.hasOwnProperty(a) && (e += '<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="fontFamily" data-param1="'.concat(a, '" \n        style="font-family: ').concat(a, '" title="').concat(t[a], '">').concat(t[a], "</a></li>")); return e += "</ul>" }, title: "Font Family", callback: function (e, t) { this.fontFamily.apply(t) }, refresh: function (e) { this.fontFamily.refresh(e) }, refreshOnShow: function (e, t) { this.fontFamily.refreshOnShow(e, t) }, plugin: "fontFamily" }), mt.DefineIcon("fontFamily", { NAME: "font", SVG_KEY: "fontFamily" }), Object.assign(mt.DEFAULTS, { fontSize: ["8", "9", "10", "11", "12", "14", "18", "24", "30", "36", "48", "60", "72", "96"], fontSizeSelection: !1, fontSizeDefaultSelection: "12", fontSizeUnit: "px" }), mt.PLUGINS.fontSize = function (n) { var i = n.$; return { apply: function t(e) { n.format.applyStyle("font-size", e) }, refreshOnShow: function r(e, t) { var a = i(n.selection.element()).css("font-size"); "pt" === n.opts.fontSizeUnit && (a = "".concat(Math.round(72 * parseFloat(a, 10) / 96), "pt")), t.find(".fr-command.fr-active").removeClass("fr-active").attr("aria-selected", !1), t.find('.fr-command[data-param1="'.concat(a, '"]')).addClass("fr-active").attr("aria-selected", !0) }, refresh: function a(e) { if (n.opts.fontSizeSelection) { var t = n.helpers.getPX(i(n.selection.element()).css("font-size")); "pt" === n.opts.fontSizeUnit && (t = "".concat(Math.round(72 * parseFloat(t, 10) / 96), "pt")), e.find("> span").text(t) } } } }, mt.RegisterCommand("fontSize", { type: "dropdown", title: "Font Size", displaySelection: function (e) { return e.opts.fontSizeSelection }, displaySelectionWidth: 30, defaultSelection: function (e) { return e.opts.fontSizeDefaultSelection }, html: function () { for (var e = '<ul class="fr-dropdown-list" role="presentation">', t = this.opts.fontSize, a = 0; a < t.length; a++) { var n = t[a]; e += '<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="fontSize" data-param1="'.concat(n).concat(this.opts.fontSizeUnit, '" title="').concat(n, '">').concat(n, "</a></li>") } return e += "</ul>" }, callback: function (e, t) { this.fontSize.apply(t) }, refresh: function (e) { this.fontSize.refresh(e) }, refreshOnShow: function (e, t) { this.fontSize.refreshOnShow(e, t) }, plugin: "fontSize" }), mt.DefineIcon("fontSize", { NAME: "text-height", SVG_KEY: "fontSize" }), Object.assign(mt.POPUP_TEMPLATES, { "forms.edit": "[_BUTTONS_]", "forms.update": "[_BUTTONS_][_TEXT_LAYER_]" }), Object.assign(mt.DEFAULTS, { formEditButtons: ["inputStyle", "inputEdit"], formStyles: { "fr-rounded": "Rounded", "fr-large": "Large" }, formMultipleStyles: !0, formUpdateButtons: ["inputBack", "|"] }), mt.PLUGINS.forms = function (o) { var s, l = o.$; function t(e) { o.selection.clear(), l(this).data("mousedown", !0) } function a(e) { l(this).data("mousedown") && (e.stopPropagation(), l(this).removeData("mousedown"), d(s = this)), e.preventDefault() } function n() { o.$el.find("input, textarea, button").removeData("mousedown") } function i() { l(this).removeData("mousedown") } function c() { return s || null } function d(e) { if (-1 == ["checkbox", "radio"].indexOf(e.type)) { var t = o.popups.get("forms.edit"); t || (t = function r() { var e = ""; 0 < o.opts.formEditButtons.length && (e = '<div class="fr-buttons">'.concat(o.button.buildList(o.opts.formEditButtons), "</div>")); var t = { buttons: e }, a = o.popups.create("forms.edit", t); return o.$wp && o.events.$on(o.$wp, "scroll.link-edit", function () { c() && o.popups.isVisible("forms.edit") && d(c()) }), a }()); var a = l(s = e); o.popups.refresh("forms.edit"), o.popups.setContainer("forms.edit", o.$sc); var n = a.offset().left + a.outerWidth() / 2, i = a.offset().top + a.outerHeight(); o.popups.show("forms.edit", n, i, a.outerHeight()) } } function r() { var e = o.popups.get("forms.update"), t = c(); if (t) { var a = l(t); a.is("button") ? e.find('input[type="text"][name="text"]').val(a.text()) : a.is("input[type=button]") || a.is("input[type=submit]") || a.is("input[type=reset]") ? e.find('input[type="text"][name="text"]').val(a.val()) : e.find('input[type="text"][name="text"]').val(a.attr("placeholder")) } e.find('input[type="text"][name="text"]').trigger("change") } function f() { s = null } function p(e) { if (e) return o.popups.onRefresh("forms.update", r), o.popups.onHide("forms.update", f), !0; var t = ""; 1 <= o.opts.formUpdateButtons.length && (t = '<div class="fr-buttons">'.concat(o.button.buildList(o.opts.formUpdateButtons), "</div>")); var a = 0, n = { buttons: t, text_layer: '<div class="fr-forms-text-layer fr-layer fr-active"> \n    <div class="fr-input-line"><input name="text" type="text" placeholder="Text" tabIndex=" '.concat(++a, ' "></div>\n    <div class="fr-action-buttons"><button class="fr-command fr-submit" data-cmd="updateInput" href="#" tabIndex="').concat(2, '" type="button">').concat(o.language.translate("Update"), "</button></div></div>") }; return o.popups.create("forms.update", n) } return { _init: function u() { !function e() { o.events.$on(o.$el, o._mousedown, "input, textarea, button", t), o.events.$on(o.$el, o._mouseup, "input, textarea, button", a), o.events.$on(o.$el, "touchmove", "input, textarea, button", i), o.events.$on(o.$el, o._mouseup, n), o.events.$on(o.$win, o._mouseup, n), p(!0) }(), o.events.$on(o.$el, "submit", "form", function (e) { return e.preventDefault(), !1 }) }, updateInput: function g() { var e = o.popups.get("forms.update"), t = c(); if (t) { var a = l(t), n = e.find('input[type="text"][name="text"]').val() || ""; a.is("button") ? n.length ? a.text(n) : a.text("\u200b") : -1 != ["button", "submit", "reset"].indexOf(t.type) ? a.attr("value", n) : a.attr("placeholder", n), o.popups.hide("forms.update"), d(t) } }, getInput: c, applyStyle: function h(e, t, a) { void 0 === t && (t = o.opts.formStyles), void 0 === a && (a = o.opts.formMultipleStyles); var n = c(); if (!n) return !1; if (!a) { var i = Object.keys(t); i.splice(i.indexOf(e), 1), l(n).removeClass(i.join(" ")) } l(n).toggleClass(e) }, showUpdatePopup: function m() { var e = c(); if (e) { var t = l(e), a = o.popups.get("forms.update"); a || (a = p()), o.popups.isVisible("forms.update") || o.popups.refresh("forms.update"), o.popups.setContainer("forms.update", o.$sc); var n = t.offset().left + t.outerWidth() / 2, i = t.offset().top + t.outerHeight(); o.popups.show("forms.update", n, i, t.outerHeight()) } }, showEditPopup: d, back: function v() { o.events.disableBlur(), o.selection.restore(), o.events.enableBlur(); var e = c(); e && o.$wp && ("BUTTON" === e.tagName && o.selection.restore(), d(e)) } } }, mt.RegisterCommand("updateInput", { undo: !1, focus: !1, title: "Update", callback: function () { this.forms.updateInput() } }), mt.DefineIcon("inputStyle", { NAME: "magic", SVG_KEY: "inlineStyle" }), mt.RegisterCommand("inputStyle", { title: "Style", type: "dropdown", html: function () { var e = '<ul class="fr-dropdown-list">', t = this.opts.formStyles; for (var a in t) t.hasOwnProperty(a) && (e += '<li><a class="fr-command" tabIndex="-1" data-cmd="inputStyle" data-param1="'.concat(a, '">').concat(this.language.translate(t[a]), "</a></li>")); return e += "</ul>" }, callback: function (e, t) { var a = this.forms.getInput(); a && (this.forms.applyStyle(t), this.forms.showEditPopup(a)) }, refreshOnShow: function (e, t) { var a = this.$, n = this.forms.getInput(); if (n) { var i = a(n); t.find(".fr-command").each(function () { var e = a(this).data("param1"); a(this).toggleClass("fr-active", i.hasClass(e)) }) } } }), mt.DefineIcon("inputEdit", { NAME: "edit", SVG_KEY: "edit" }), mt.RegisterCommand("inputEdit", { title: "Edit Button", undo: !1, refreshAfterCallback: !1, callback: function () { this.forms.showUpdatePopup() } }), mt.DefineIcon("inputBack", { NAME: "arrow-left", SVG_KEY: "back" }), mt.RegisterCommand("inputBack", { title: "Back", undo: !1, focus: !1, back: !0, refreshAfterCallback: !1, callback: function () { this.forms.back() } }), mt.RegisterCommand("updateInput", { undo: !1, focus: !1, title: "Update", callback: function () { this.forms.updateInput() } }), mt.PLUGINS.fullscreen = function (i) { var t, a, n, r, o = i.$, s = function s() { return i.$box.hasClass("fr-fullscreen") }; function l() { if (i.helpers.isIOS() && i.core.hasFocus()) return i.$el.blur(), setTimeout(d, 250), !1; t = i.helpers.scrollTop(), i.$box.toggleClass("fr-fullscreen"), o("body").first().toggleClass("fr-fullscreen"), i.helpers.isMobile() && (i.$tb.data("parent", i.$tb.parent()), i.$box.prepend(i.$tb), i.$tb.data("sticky-dummy") && i.$tb.after(i.$tb.data("sticky-dummy"))), a = i.opts.height, n = i.opts.heightMax, r = i.opts.z_index, i.opts.height = i.o_win.innerHeight - (i.opts.toolbarInline ? 0 : i.$tb.outerHeight() + (i.$second_tb ? i.$second_tb.outerHeight() : 0)), i.opts.zIndex = 2147483641, i.opts.heightMax = null, i.size.refresh(), i.opts.toolbarInline && i.toolbar.showInline(); for (var e = i.$box.parent(); !e.first().is("body");)e.addClass("fr-fullscreen-wrapper"), e = e.parent(); i.opts.toolbarContainer && i.$box.prepend(i.$tb), i.events.trigger("charCounter.update"), i.events.trigger("codeView.update"), i.$win.trigger("scroll") } function c() { if (i.helpers.isIOS() && i.core.hasFocus()) return i.$el.blur(), setTimeout(d, 250), !1; i.$box.toggleClass("fr-fullscreen"), o("body").first().toggleClass("fr-fullscreen"), i.$tb.data("parent") && i.$tb.data("parent").prepend(i.$tb), i.$tb.data("sticky-dummy") && i.$tb.after(i.$tb.data("sticky-dummy")), i.opts.height = a, i.opts.heightMax = n, i.opts.zIndex = r, i.size.refresh(), o(i.o_win).scrollTop(t), i.opts.toolbarInline && i.toolbar.showInline(), i.events.trigger("charCounter.update"), i.opts.toolbarSticky && i.opts.toolbarStickyOffset && (i.opts.toolbarBottom ? i.$tb.css("bottom", i.opts.toolbarStickyOffset).data("bottom", i.opts.toolbarStickyOffset) : i.$tb.css("top", i.opts.toolbarStickyOffset).data("top", i.opts.toolbarStickyOffset)); for (var e = i.$box.parent(); !e.first().is("body");)e.removeClass("fr-fullscreen-wrapper"), e = e.parent(); i.opts.toolbarContainer && o(i.opts.toolbarContainer).append(i.$tb), o(i.o_win).trigger("scroll"), i.events.trigger("codeView.update") } function d() { s() ? c() : l(), f(i.$tb.find('.fr-command[data-cmd="fullscreen"]')); var e = i.$tb.find('.fr-command[data-cmd="moreText"]'), t = i.$tb.find('.fr-command[data-cmd="moreParagraph"]'), a = i.$tb.find('.fr-command[data-cmd="moreRich"]'), n = i.$tb.find('.fr-command[data-cmd="moreMisc"]'); e.length && i.refresh.moreText(e), t.length && i.refresh.moreParagraph(t), a.length && i.refresh.moreRich(a), n.length && i.refresh.moreMisc(n) } function f(e) { var t = s(); e.toggleClass("fr-active", t).attr("aria-pressed", t), e.find("> *").not(".fr-sr-only").replaceWith(t ? i.icon.create("fullscreenCompress") : i.icon.create("fullscreen")) } return { _init: function e() { if (!i.$wp) return !1; i.events.$on(o(i.o_win), "resize", function () { s() && (c(), l()) }), i.events.on("toolbar.hide", function () { if (s() && i.helpers.isMobile()) return !1 }), i.events.on("position.refresh", function () { if (i.helpers.isIOS()) return !s() }), i.events.on("destroy", function () { s() && c() }, !0) }, toggle: d, refresh: f, isActive: s } }, mt.RegisterCommand("fullscreen", { title: "Fullscreen", undo: !1, focus: !1, accessibilityFocus: !0, forcedRefresh: !0, toggle: !0, callback: function () { this.fullscreen.toggle() }, refresh: function (e) { this.fullscreen.refresh(e) }, plugin: "fullscreen" }), mt.DefineIcon("fullscreen", { NAME: "expand", SVG_KEY: "fullscreen" }), mt.DefineIcon("fullscreenCompress", { NAME: "compress", SVG_KEY: "exitFullscreen" }), Object.assign(mt.DEFAULTS, { helpSets: [{ title: "Inline Editor", commands: [{ val: "OSkeyE", desc: "Show the editor" }] }, { title: "Common actions", commands: [{ val: "OSkeyC", desc: "Copy" }, { val: "OSkeyX", desc: "Cut" }, { val: "OSkeyV", desc: "Paste" }, { val: "OSkeyZ", desc: "Undo" }, { val: "OSkeyShift+Z", desc: "Redo" }, { val: "OSkeyK", desc: "Insert Link" }, { val: "OSkeyP", desc: "Insert Image" }] }, { title: "Basic Formatting", commands: [{ val: "OSkeyA", desc: "Select All" }, { val: "OSkeyB", desc: "Bold" }, { val: "OSkeyI", desc: "Italic" }, { val: "OSkeyU", desc: "Underline" }, { val: "OSkeyS", desc: "Strikethrough" }, { val: "OSkey]", desc: "Increase Indent" }, { val: "OSkey[", desc: "Decrease Indent" }] }, { title: "Quote", commands: [{ val: "OSkey'", desc: "Increase quote level" }, { val: "OSkeyShift+'", desc: "Decrease quote level" }] }, { title: "Image / Video", commands: [{ val: "OSkey+", desc: "Resize larger" }, { val: "OSkey-", desc: "Resize smaller" }] }, { title: "Table", commands: [{ val: "Alt+Space", desc: "Select table cell" }, { val: "Shift+Left/Right arrow", desc: "Extend selection one cell" }, { val: "Shift+Up/Down arrow", desc: "Extend selection one row" }] }, { title: "Navigation", commands: [{ val: "OSkey/", desc: "Shortcuts" }, { val: "Alt+F10", desc: "Focus popup / toolbar" }, { val: "Esc", desc: "Return focus to previous position" }] }] }), mt.PLUGINS.help = function (s) { var n, i = s.$, r = "help"; return { _init: function e() { }, show: function l() { if (!n) { var e = "<h4>".concat(s.language.translate("Shortcuts"), "</h4>"), t = function o() { for (var e = '<div class="fr-help-modal">', t = 0; t < s.opts.helpSets.length; t++) { var a = s.opts.helpSets[t], n = "<table>"; n += "<thead><tr><th>".concat(s.language.translate(a.title), "</th></tr></thead>"), n += "<tbody>"; for (var i = 0; i < a.commands.length; i++) { var r = a.commands[i]; n += "<tr>", n += "<td>".concat(s.language.translate(r.desc), "</td>"), n += "<td>".concat(r.val.replace("OSkey", s.helpers.isMac() ? "&#8984;" : "Ctrl+"), "</td>"), n += "</tr>" } e += n += "</tbody></table>" } return e += "</div>" }(), a = s.modals.create(r, e, t); n = a.$modal, s.events.$on(i(s.o_win), "resize", function () { s.modals.resize(r) }) } s.modals.show(r), s.modals.resize(r) }, hide: function t() { s.modals.hide(r) } } }, mt.DefineIcon("help", { NAME: "question", SVG_KEY: "help" }), mt.RegisterShortcut(mt.KEYCODE.SLASH, "help", null, "/"), mt.RegisterCommand("help", { title: "Help", icon: "help", undo: !1, focus: !1, modal: !0, callback: function () { this.help.show() }, plugin: "help", showOnMobile: !1 }), Object.assign(mt.POPUP_TEMPLATES, { "image.insert": "[_BUTTONS_][_UPLOAD_LAYER_][_BY_URL_LAYER_][_PROGRESS_BAR_]", "image.edit": "[_BUTTONS_]", "image.alt": "[_BUTTONS_][_ALT_LAYER_]", "image.size": "[_BUTTONS_][_SIZE_LAYER_]" }), Object.assign(mt.DEFAULTS, { imageInsertButtons: ["imageBack", "|", "imageUpload", "imageByURL"], imageEditButtons: ["imageReplace", "imageAlign", "imageCaption", "imageRemove", "imageLink", "linkOpen", "linkEdit", "linkRemove", "-", "imageDisplay", "imageStyle", "imageAlt", "imageSize"], imageAltButtons: ["imageBack", "|"], imageSizeButtons: ["imageBack", "|"], imageUpload: !0, imageUploadURL: null, imageCORSProxy: "https://cors-anywhere.froala.com", imageUploadRemoteUrls: !0, imageUploadParam: "file", imageUploadParams: {}, imageUploadToS3: !1, imageUploadMethod: "POST", imageMaxSize: 10485760, imageAllowedTypes: ["jpeg", "jpg", "png", "gif", "webp"], imageResize: !0, imageResizeWithPercent: !1, imageRoundPercent: !1, imageDefaultWidth: 300, imageDefaultAlign: "center", imageDefaultDisplay: "block", imageSplitHTML: !1, imageStyles: { "fr-rounded": "Rounded", "fr-bordered": "Bordered", "fr-shadow": "Shadow" }, imageMove: !0, imageMultipleStyles: !0, imageTextNear: !0, imagePaste: !0, imagePasteProcess: !1, imageMinWidth: 16, imageOutputSize: !1, imageDefaultMargin: 5, imageAddNewLine: !1 }), mt.PLUGINS.image = function (f) { var p, l, c, d, s, a, u = f.$, o = "https://i.froala.com/upload", t = !1, n = 1, g = 2, h = 3, m = 4, v = 5, b = 6, i = {}; function E() { var e = f.popups.get("image.insert").find(".fr-image-by-url-layer input"); e.val(""), p && e.val(p.attr("src")), e.trigger("change") } function r() { var e = f.popups.get("image.edit"); if (e || (e = O()), e) { var t = Ae(); Ce() && (t = t.find(".fr-img-wrap")), f.popups.setContainer("image.edit", f.$sc), f.popups.refresh("image.edit"); var a = t.offset().left + t.outerWidth() / 2, n = t.offset().top + t.outerHeight(); p.hasClass("fr-uploading") ? k() : f.popups.show("image.edit", a, n, t.outerHeight(), !0) } } function A() { F() } function C(e) { 0 < e.parents(".fr-img-caption").length && (e = e.parents(".fr-img-caption").first()); var t = e.hasClass("fr-dib") ? "block" : e.hasClass("fr-dii") ? "inline" : null, a = e.hasClass("fr-fil") ? "left" : e.hasClass("fr-fir") ? "right" : he(e); ge(e, t, a), e.removeClass("fr-dib fr-dii fr-fir fr-fil") } function T() { for (var e, t = "IMG" == f.el.tagName ? [f.el] : f.el.querySelectorAll("img"), a = 0; a < t.length; a++) { var n = u(t[a]); !f.opts.htmlUntouched && f.opts.useClasses ? ((f.opts.imageDefaultAlign || f.opts.imageDefaultDisplay) && (0 < (e = n).parents(".fr-img-caption").length && (e = e.parents(".fr-img-caption").first()), e.hasClass("fr-dii") || e.hasClass("fr-dib") || (e.addClass("fr-fi".concat(he(e)[0])), e.addClass("fr-di".concat(me(e)[0])), e.css("margin", ""), e.css("float", ""), e.css("display", ""), e.css("z-index", ""), e.css("position", ""), e.css("overflow", ""), e.css("vertical-align", ""))), f.opts.imageTextNear || (0 < n.parents(".fr-img-caption").length ? n.parents(".fr-img-caption").first().removeClass("fr-dii").addClass("fr-dib") : n.removeClass("fr-dii").addClass("fr-dib"))) : f.opts.htmlUntouched || f.opts.useClasses || (f.opts.imageDefaultAlign || f.opts.imageDefaultDisplay) && C(n), f.opts.iframe && n.on("load", f.size.syncIframe) } } function R(e) { void 0 === e && (e = !0); var t, a = Array.prototype.slice.call(f.el.querySelectorAll("img")), n = []; for (t = 0; t < a.length; t++)if (n.push(a[t].getAttribute("src")), u(a[t]).toggleClass("fr-draggable", f.opts.imageMove), "" === a[t].getAttribute("class") && a[t].removeAttribute("class"), "" === a[t].getAttribute("style") && a[t].removeAttribute("style"), a[t].parentNode && a[t].parentNode.parentNode && f.node.hasClass(a[t].parentNode.parentNode, "fr-img-caption")) { var i = a[t].parentNode.parentNode; f.browser.mozilla || i.setAttribute("contenteditable", !1), i.setAttribute("draggable", !1), i.classList.add("fr-draggable"); var r = a[t].nextSibling; r && !f.browser.mozilla && r.setAttribute("contenteditable", !0) } if (s) for (t = 0; t < s.length; t++)n.indexOf(s[t].getAttribute("src")) < 0 && f.events.trigger("image.removed", [u(s[t])]); if (s && e) { var o = []; for (t = 0; t < s.length; t++)o.push(s[t].getAttribute("src")); for (t = 0; t < a.length; t++)o.indexOf(a[t].getAttribute("src")) < 0 && f.events.trigger("image.loaded", [u(a[t])]) } s = a } function y() { if (l || function o() { var e; f.shared.$image_resizer ? (l = f.shared.$image_resizer, d = f.shared.$img_overlay, f.events.on("destroy", function () { u("body").first().append(l.removeClass("fr-active")) }, !0)) : (f.shared.$image_resizer = u(document.createElement("div")).attr("class", "fr-image-resizer"), l = f.shared.$image_resizer, f.events.$on(l, "mousedown", function (e) { e.stopPropagation() }, !0), f.opts.imageResize && (l.append(w("nw") + w("ne") + w("sw") + w("se")), f.shared.$img_overlay = u(document.createElement("div")).attr("class", "fr-image-overlay"), d = f.shared.$img_overlay, e = l.get(0).ownerDocument, u(e).find("body").first().append(d))); f.events.on("shared.destroy", function () { l.html("").removeData().remove(), l = null, f.opts.imageResize && (d.remove(), d = null) }, !0), f.helpers.isMobile() || f.events.$on(u(f.o_win), "resize", function () { p && !p.hasClass("fr-uploading") ? de(!0) : p && (y(), ve(), k(!1)) }); if (f.opts.imageResize) { e = l.get(0).ownerDocument, f.events.$on(l, f._mousedown, ".fr-handler", L), f.events.$on(u(e), f._mousemove, _), f.events.$on(u(e.defaultView || e.parentWindow), f._mouseup, I), f.events.$on(d, "mouseleave", I); var n = 1, i = null, r = 0; f.events.on("keydown", function (e) { if (p) { var t = -1 != navigator.userAgent.indexOf("Mac OS X") ? e.metaKey : e.ctrlKey, a = e.which; (a !== i || 200 < e.timeStamp - r) && (n = 1), (a == mt.KEYCODE.EQUALS || f.browser.mozilla && a == mt.KEYCODE.FF_EQUALS) && t && !e.altKey ? n = ee.call(this, e, 1, 1, n) : (a == mt.KEYCODE.HYPHEN || f.browser.mozilla && a == mt.KEYCODE.FF_HYPHEN) && t && !e.altKey ? n = ee.call(this, e, 2, -1, n) : f.keys.ctrlKey(e) || a != mt.KEYCODE.ENTER || (p.before("<br>"), N(p)), i = a, r = e.timeStamp } }, !0), f.events.on("keyup", function () { n = 1 }) } }(), !p) return !1; var e = f.$wp || f.$sc; e.append(l), l.data("instance", f); var t = e.scrollTop() - ("static" != e.css("position") ? e.offset().top : 0), a = e.scrollLeft() - ("static" != e.css("position") ? e.offset().left : 0); a -= f.helpers.getPX(e.css("border-left-width")), t -= f.helpers.getPX(e.css("border-top-width")), f.$el.is("img") && f.$sc.is("body") && (a = t = 0); var n = Ae(); Ce() && (n = n.find(".fr-img-wrap")); var i = 0, r = 0; f.opts.iframe && (i = f.helpers.getPX(f.$wp.find(".fr-iframe").css("padding-top")), r = f.helpers.getPX(f.$wp.find(".fr-iframe").css("padding-left"))), l.css("top", (f.opts.iframe ? n.offset().top + i : n.offset().top + t) - 1).css("left", (f.opts.iframe ? n.offset().left + r : n.offset().left + a) - 1).css("width", n.get(0).getBoundingClientRect().width).css("height", n.get(0).getBoundingClientRect().height).addClass("fr-active") } function w(e) { return '<div class="fr-handler fr-h'.concat(e, '"></div>') } function S(e) { Ce() ? p.parents(".fr-img-caption").css("width", e) : p.css("width", e) } function L(e) { if (!f.core.sameInstance(l)) return !0; if (e.preventDefault(), e.stopPropagation(), f.$el.find("img.fr-error").left) return !1; f.undo.canDo() || f.undo.saveStep(); var t = e.pageX || e.originalEvent.touches[0].pageX; if ("mousedown" == e.type) { var a = f.$oel.get(0).ownerDocument, n = a.defaultView || a.parentWindow, i = !1; try { i = n.location != n.parent.location && !(n.$ && n.$.FE) } catch (s) { } i && n.frameElement && (t += f.helpers.getPX(u(n.frameElement).offset().left) + n.frameElement.clientLeft) } (c = u(this)).data("start-x", t), c.data("start-width", p.width()), c.data("start-height", p.height()); var r = p.width(); if (f.opts.imageResizeWithPercent) { var o = p.parentsUntil(f.$el, f.html.blockTagsQuery()).get(0) || f.el; r = (r / u(o).outerWidth() * 100).toFixed(2) + "%" } S(r), d.show(), f.popups.hideAll(), ue() } function _(e) { if (!f.core.sameInstance(l)) return !0; var t; if (c && p) { if (e.preventDefault(), f.$el.find("img.fr-error").left) return !1; var a = e.pageX || (e.originalEvent.touches ? e.originalEvent.touches[0].pageX : null); if (!a) return !1; var n = a - c.data("start-x"), i = c.data("start-width"); if ((c.hasClass("fr-hnw") || c.hasClass("fr-hsw")) && (n = 0 - n), f.opts.imageResizeWithPercent) { var r = p.parentsUntil(f.$el, f.html.blockTagsQuery()).get(0) || f.el; i = ((i + n) / u(r).outerWidth() * 100).toFixed(2), f.opts.imageRoundPercent && (i = Math.round(i)), S("".concat(i, "%")), (t = Ce() ? (f.helpers.getPX(p.parents(".fr-img-caption").css("width")) / u(r).outerWidth() * 100).toFixed(2) : (f.helpers.getPX(p.css("width")) / u(r).outerWidth() * 100).toFixed(2)) === i || f.opts.imageRoundPercent || S("".concat(t, "%")), p.css("height", "").removeAttr("height") } else i + n >= f.opts.imageMinWidth && (S(i + n), t = Ce() ? f.helpers.getPX(p.parents(".fr-img-caption").css("width")) : f.helpers.getPX(p.css("width"))), t !== i + n && S(t), ((p.attr("style") || "").match(/(^height:)|(; *height:)/) || p.attr("height")) && (p.css("height", c.data("start-height") * p.width() / c.data("start-width")), p.removeAttr("height")); y(), f.events.trigger("image.resize", [Ee()]) } } function I(e) { if (!f.core.sameInstance(l)) return !0; if (c && p) { if (e && e.stopPropagation(), f.$el.find("img.fr-error").left) return !1; c = null, d.hide(), y(), r(), f.undo.saveStep(), f.events.trigger("image.resizeEnd", [Ee()]) } else l.removeClass("fr-active") } function x(e, t, a) { f.edit.on(), p && p.addClass("fr-error"), i[e] ? M(f.language.translate(i[e])) : M(f.language.translate("Something went wrong. Please try again.")), !p && a && te(a), f.events.trigger("image.error", [{ code: e, message: i[e] }, t, a]) } function O(e) { if (e) return f.$wp && f.events.$on(f.$wp, "scroll.image-edit", function () { p && f.popups.isVisible("image.edit") && (f.events.disableBlur(), r()) }), !0; var t = ""; if (0 < f.opts.imageEditButtons.length) { var a = { buttons: t += '<div class="fr-buttons"> \n        '.concat(f.button.buildList(f.opts.imageEditButtons), "\n        </div>") }; return f.popups.create("image.edit", a) } return !1 } function k(e) { var t = f.popups.get("image.insert"); if (t || (t = V()), t.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"), t.find(".fr-image-progress-bar-layer").addClass("fr-active"), t.find(".fr-buttons").hide(), p) { var a = Ae(); f.popups.setContainer("image.insert", f.$sc); var n = a.offset().left, i = a.offset().top + a.height(); f.popups.show("image.insert", n, i, a.outerHeight()) } void 0 === e && D(f.language.translate("Uploading"), 0) } function F(e) { var t = f.popups.get("image.insert"); if (t && (t.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"), t.find(".fr-image-progress-bar-layer").removeClass("fr-active"), t.find(".fr-buttons").show(), e || f.$el.find("img.fr-error").length)) { if (f.events.focus(), f.$el.find("img.fr-error").length && (f.$el.find("img.fr-error").remove(), f.undo.saveStep(), f.undo.run(), f.undo.dropRedo()), !f.$wp && p) { var a = p; de(!0), f.selection.setAfter(a.get(0)), f.selection.restore() } f.popups.hide("image.insert") } } function D(e, t) { var a = f.popups.get("image.insert"); if (a) { var n = a.find(".fr-image-progress-bar-layer"); n.find("h3").text(e + (t ? " ".concat(t, "%") : "")), n.removeClass("fr-error"), t ? (n.find("div").removeClass("fr-indeterminate"), n.find("div > span").css("width", "".concat(t, "%"))) : n.find("div").addClass("fr-indeterminate") } } function M(e) { k(); var t = f.popups.get("image.insert").find(".fr-image-progress-bar-layer"); t.addClass("fr-error"); var a = t.find("h3"); a.text(e), f.events.disableBlur(), a.focus() } function N(e) { ce.call(e.get(0)) } function B() { var e = u(this); f.popups.hide("image.insert"), e.removeClass("fr-uploading"), e.next().is("br") && e.next().remove(), N(e), f.events.trigger("image.loaded", [e]) } function P(o, e, s, l, c) { l && "string" == typeof l && (l = f.$(l)), f.edit.off(), D(f.language.translate("Loading image")), e && (o = f.helpers.sanitizeURL(o)); var t = new Image; t.onload = function () { var e, t; if (l) { f.undo.canDo() || l.hasClass("fr-uploading") || f.undo.saveStep(); var a = l.data("fr-old-src"); l.data("fr-image-pasted") && (a = null), f.$wp ? ((e = l.clone().removeData("fr-old-src").removeClass("fr-uploading").removeAttr("data-fr-image-pasted")).off("load"), a && l.attr("src", a), l.replaceWith(e)) : e = l; for (var n = e.get(0).attributes, i = 0; i < n.length; i++) { var r = n[i]; 0 === r.nodeName.indexOf("data-") && e.removeAttr(r.nodeName) } if (void 0 !== s) for (t in s) s.hasOwnProperty(t) && "link" != t && e.attr("data-".concat(t), s[t]); e.on("load", B), e.attr("src", o), f.edit.on(), R(!1), f.undo.saveStep(), f.events.disableBlur(), f.$el.blur(), f.events.trigger(a ? "image.replaced" : "image.inserted", [e, c]) } else e = K(o, s, B), R(!1), f.undo.saveStep(), f.events.disableBlur(), f.$el.blur(), f.events.trigger("image.inserted", [e, c]) }, t.onerror = function () { x(n) }, k(f.language.translate("Loading image")), t.src = o } function U(e) { D(f.language.translate("Loading image")); var t = this.status, a = this.response, n = this.responseXML, i = this.responseText; try { if (f.opts.imageUploadToS3) if (201 == t) { var r = function s(e) { try { var t = u(e).find("Location").text(), a = u(e).find("Key").text(); return !1 === f.events.trigger("image.uploadedToS3", [t, a, e], !0) ? (f.edit.on(), !1) : t } catch (n) { return x(m, e), !1 } }(n); r && P(r, !1, [], e, a || n) } else x(m, a || n, e); else if (200 <= t && t < 300) { var o = function l(e) { try { if (!1 === f.events.trigger("image.uploaded", [e], !0)) return f.edit.on(), !1; var t = JSON.parse(e); return t.link ? t : (x(g, e), !1) } catch (a) { return x(m, e), !1 } }(i); o && P(o.link, !1, o, e, a || i) } else x(h, a || i, e) } catch (c) { x(m, a || i, e) } } function $() { x(m, this.response || this.responseText || this.responseXML) } function W(e) { if (e.lengthComputable) { var t = e.loaded / e.total * 100 | 0; D(f.language.translate("Uploading"), t) } } function K(e, t, a) { var n, i = u(document.createElement("img")).attr("src", e); if (t && void 0 !== t) for (n in t) t.hasOwnProperty(n) && "link" != n && (" data-".concat(n, '="').concat(t[n], '"'), i.attr("data-".concat(n), t[n])); var r = f.opts.imageDefaultWidth; r && "auto" != r && (r = f.opts.imageResizeWithPercent ? "100%" : "".concat(r, "px")), i.attr("style", r ? "width: ".concat(r, ";") : ""), ge(i, f.opts.imageDefaultDisplay, f.opts.imageDefaultAlign), i.on("load", a), i.on("error", a), f.edit.on(), f.events.focus(!0), f.selection.restore(), f.undo.saveStep(), f.opts.imageSplitHTML ? f.markers.split() : f.markers.insert(), f.html.wrap(); var o = f.$el.find(".fr-marker"); return o.length ? (o.parent().is("hr") && o.parent().after(o), f.node.isLastSibling(o) && o.parent().hasClass("fr-deletable") && o.insertAfter(o.parent()), o.replaceWith(i)) : f.$el.append(i), f.selection.clear(), i } function H() { f.edit.on(), F(!0) } function G(e, t) { if (void 0 !== e && 0 < e.length) { if (!1 === f.events.trigger("image.beforeUpload", [e, t])) return !1; var a, n = e[0]; if ((null === f.opts.imageUploadURL || f.opts.imageUploadURL == o) && !f.opts.imageUploadToS3) return function s(i, r) { var o = new FileReader; o.onload = function () { var e = o.result; if (o.result.indexOf("svg+xml") < 0) { for (var t = atob(o.result.split(",")[1]), a = [], n = 0; n < t.length; n++)a.push(t.charCodeAt(n)); e = window.URL.createObjectURL(new Blob([new Uint8Array(a)], { type: i.type })), f.image.insert(e, !1, null, r) } }, k(), o.readAsDataURL(i) }(n, t || p), !1; if (n.name || (n.name = (new Date).getTime() + "." + (n.type || "image/jpeg").replace(/image\//g, "")), n.size > f.opts.imageMaxSize) return x(v), !1; if (f.opts.imageAllowedTypes.indexOf(n.type.replace(/image\//g, "")) < 0) return x(b), !1; if (f.drag_support.formdata && (a = f.drag_support.formdata ? new FormData : null), a) { var i; if (!1 !== f.opts.imageUploadToS3) for (i in a.append("key", f.opts.imageUploadToS3.keyStart + (new Date).getTime() + "-" + (n.name || "untitled")), a.append("success_action_status", "201"), a.append("X-Requested-With", "xhr"), a.append("Content-Type", n.type), f.opts.imageUploadToS3.params) f.opts.imageUploadToS3.params.hasOwnProperty(i) && a.append(i, f.opts.imageUploadToS3.params[i]); for (i in f.opts.imageUploadParams) f.opts.imageUploadParams.hasOwnProperty(i) && a.append(i, f.opts.imageUploadParams[i]); a.append(f.opts.imageUploadParam, n, n.name); var r = f.opts.imageUploadURL; f.opts.imageUploadToS3 && (r = f.opts.imageUploadToS3.uploadURL ? f.opts.imageUploadToS3.uploadURL : "https://".concat(f.opts.imageUploadToS3.region, ".amazonaws.com/").concat(f.opts.imageUploadToS3.bucket)), function l(t, a, e, i) { function r() { var e = u(this); e.off("load"), e.addClass("fr-uploading"), e.next().is("br") && e.next().remove(), f.placeholder.refresh(), N(e), y(), k(), f.edit.off(), t.onload = function () { U.call(t, e) }, t.onerror = $, t.upload.onprogress = W, t.onabort = H, u(e.off("abortUpload")).on("abortUpload", function () { 4 != t.readyState && (t.abort(), i ? (i.attr("src", i.data("fr-old-src")), i.removeClass("fr-uploading")) : e.remove(), de(!0)) }), t.send(a) } var o = new FileReader; o.onload = function () { var e = o.result; if (o.result.indexOf("svg+xml") < 0) { for (var t = atob(o.result.split(",")[1]), a = [], n = 0; n < t.length; n++)a.push(t.charCodeAt(n)); e = window.URL.createObjectURL(new Blob([new Uint8Array(a)], { type: "image/jpeg" })) } i ? (i.on("load", r), i.on("error", function () { r(), u(this).off("error") }), f.edit.on(), f.undo.saveStep(), i.data("fr-old-src", i.attr("src")), i.attr("src", e)) : K(e, null, r) }, o.readAsDataURL(e) }(f.core.getXHR(r, f.opts.imageUploadMethod), a, n, t || p) } } } function Y(e) { if (e.is("img") && 0 < e.parents(".fr-img-caption").length) return e.parents(".fr-img-caption") } function z(e) { var t = e.originalEvent.dataTransfer; if (t && t.files && t.files.length) { var a = t.files[0]; if (a && a.type && -1 !== a.type.indexOf("image") && 0 <= f.opts.imageAllowedTypes.indexOf(a.type.replace(/image\//g, ""))) { if (!f.opts.imageUpload) return e.preventDefault(), e.stopPropagation(), !1; f.markers.remove(), f.markers.insertAtPoint(e.originalEvent), f.$el.find(".fr-marker").replaceWith(mt.MARKERS), 0 === f.$el.find(".fr-marker").length && f.selection.setAtEnd(f.el), f.popups.hideAll(); var n = f.popups.get("image.insert"); n || (n = V()), f.popups.setContainer("image.insert", f.$sc); var i = e.originalEvent.pageX, r = e.originalEvent.pageY; if (f.opts.iframe) { var o = f.helpers.getPX(f.$wp.find(".fr-iframe").css("padding-top")), s = f.helpers.getPX(f.$wp.find(".fr-iframe").css("padding-left")); r += f.$iframe.offset().top + o, i += f.$iframe.offset().left + s } return f.popups.show("image.insert", i, r), k(), 0 <= f.opts.imageAllowedTypes.indexOf(a.type.replace(/image\//g, "")) ? (de(!0), G(t.files)) : x(b), e.preventDefault(), e.stopPropagation(), !1 } } } function V(e) { if (e) return f.popups.onRefresh("image.insert", E), f.popups.onHide("image.insert", A), !0; var t, a, n = ""; f.opts.imageUpload || -1 === f.opts.imageInsertButtons.indexOf("imageUpload") || f.opts.imageInsertButtons.splice(f.opts.imageInsertButtons.indexOf("imageUpload"), 1); var i = f.button.buildList(f.opts.imageInsertButtons); "" !== i && (n = '<div class="fr-buttons fr-tabs">'.concat(i, "</div>")); var r = f.opts.imageInsertButtons.indexOf("imageUpload"), o = f.opts.imageInsertButtons.indexOf("imageByURL"), s = ""; 0 <= r && (t = " fr-active", 0 <= o && o < r && (t = ""), s = '<div class="fr-image-upload-layer'.concat(t, ' fr-layer" id="fr-image-upload-layer-').concat(f.id, '"><strong>').concat(f.language.translate("Drop image"), "</strong><br>(").concat(f.language.translate("or click"), ')<div class="fr-form"><input type="file" accept="image/').concat(f.opts.imageAllowedTypes.join(", image/").toLowerCase(), '" tabIndex="-1" aria-labelledby="fr-image-upload-layer-').concat(f.id, '" role="button"></div></div>')); var l = ""; 0 <= o && (t = " fr-active", 0 <= r && r < o && (t = ""), l = '<div class="fr-image-by-url-layer'.concat(t, ' fr-layer" id="fr-image-by-url-layer-').concat(f.id, '"><div class="fr-input-line"><input id="fr-image-by-url-layer-text-').concat(f.id, '" type="text" placeholder="http://" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageInsertByURL" tabIndex="2" role="button">').concat(f.language.translate("Insert"), "</button></div></div>")); var c = { buttons: n, upload_layer: s, by_url_layer: l, progress_bar: '<div class="fr-image-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="imageDismissError" tabIndex="2" role="button">OK</button></div></div>' }; return 1 <= f.opts.imageInsertButtons.length && (a = f.popups.create("image.insert", c)), f.$wp && f.events.$on(f.$wp, "scroll", function () { p && f.popups.isVisible("image.insert") && ve() }), function d(n) { f.events.$on(n, "dragover dragenter", ".fr-image-upload-layer", function (e) { return u(this).addClass("fr-drop"), (f.browser.msie || f.browser.edge) && e.preventDefault(), !1 }, !0), f.events.$on(n, "dragleave dragend", ".fr-image-upload-layer", function (e) { return u(this).removeClass("fr-drop"), (f.browser.msie || f.browser.edge) && e.preventDefault(), !1 }, !0), f.events.$on(n, "drop", ".fr-image-upload-layer", function (e) { e.preventDefault(), e.stopPropagation(), u(this).removeClass("fr-drop"); var t = e.originalEvent.dataTransfer; if (t && t.files) { var a = n.data("instance") || f; a.events.disableBlur(), a.image.upload(t.files), a.events.enableBlur() } }, !0), f.helpers.isIOS() && f.events.$on(n, "touchstart", '.fr-image-upload-layer input[type="file"]', function () { u(this).trigger("click") }, !0), f.events.$on(n, "change", '.fr-image-upload-layer input[type="file"]', function () { if (this.files) { var e = n.data("instance") || f; e.events.disableBlur(), n.find("input:focus").blur(), e.events.enableBlur(), e.image.upload(this.files, p) } u(this).val("") }, !0) }(a), a } function j() { p && f.popups.get("image.alt").find("input").val(p.attr("alt") || "").trigger("change") } function q() { var e = f.popups.get("image.alt"); e || (e = X()), F(), f.popups.refresh("image.alt"), f.popups.setContainer("image.alt", f.$sc); var t = Ae(); Ce() && (t = t.find(".fr-img-wrap")); var a = t.offset().left + t.outerWidth() / 2, n = t.offset().top + t.outerHeight(); f.popups.show("image.alt", a, n, t.outerHeight(), !0) } function X(e) { if (e) return f.popups.onRefresh("image.alt", j), !0; var t = { buttons: '<div class="fr-buttons fr-tabs">'.concat(f.button.buildList(f.opts.imageAltButtons), "</div>"), alt_layer: '<div class="fr-image-alt-layer fr-layer fr-active" id="fr-image-alt-layer-'.concat(f.id, '"><div class="fr-input-line"><input id="fr-image-alt-layer-text-').concat(f.id, '" type="text" placeholder="').concat(f.language.translate("Alternative Text"), '" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetAlt" tabIndex="2" role="button">').concat(f.language.translate("Update"), "</button></div></div>") }, a = f.popups.create("image.alt", t); return f.$wp && f.events.$on(f.$wp, "scroll.image-alt", function () { p && f.popups.isVisible("image.alt") && q() }), a } function Q() { var e = f.popups.get("image.size"); if (p) if (Ce()) { var t = p.parent(); t.get(0).style.width || (t = p.parent().parent()), e.find('input[name="width"]').val(t.get(0).style.width).trigger("change"), e.find('input[name="height"]').val(t.get(0).style.height).trigger("change") } else e.find('input[name="width"]').val(p.get(0).style.width).trigger("change"), e.find('input[name="height"]').val(p.get(0).style.height).trigger("change") } function Z() { var e = f.popups.get("image.size"); e || (e = J()), F(), f.popups.refresh("image.size"), f.popups.setContainer("image.size", f.$sc); var t = Ae(); Ce() && (t = t.find(".fr-img-wrap")); var a = t.offset().left + t.outerWidth() / 2, n = t.offset().top + t.outerHeight(); f.popups.show("image.size", a, n, t.outerHeight(), !0) } function J(e) { if (e) return f.popups.onRefresh("image.size", Q), !0; var t = { buttons: '<div class="fr-buttons fr-tabs">'.concat(f.button.buildList(f.opts.imageSizeButtons), "</div>"), size_layer: '<div class="fr-image-size-layer fr-layer fr-active" id="fr-image-size-layer-'.concat(f.id, '"><div class="fr-image-group"><div class="fr-input-line"><input id="fr-image-size-layer-width-\'').concat(f.id, '" type="text" name="width" placeholder="').concat(f.language.translate("Width"), '" tabIndex="1"></div><div class="fr-input-line"><input id="fr-image-size-layer-height').concat(f.id, '" type="text" name="height" placeholder="').concat(f.language.translate("Height"), '" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetSize" tabIndex="2" role="button">').concat(f.language.translate("Update"), "</button></div></div>") }, a = f.popups.create("image.size", t); return f.$wp && f.events.$on(f.$wp, "scroll.image-size", function () { p && f.popups.isVisible("image.size") && Z() }), a } function ee(e, t, a, n) { return e.pageX = t, L.call(this, e), e.pageX = e.pageX + a * Math.floor(Math.pow(1.1, n)), _.call(this, e), I.call(this, e), ++n } function te(e) { (e = e || Ae()) && !1 !== f.events.trigger("image.beforeRemove", [e]) && (f.popups.hideAll(), be(), de(!0), f.undo.canDo() || f.undo.saveStep(), e.get(0) == f.el ? e.removeAttr("src") : (e.get(0).parentNode && "A" == e.get(0).parentNode.tagName ? (f.selection.setBefore(e.get(0).parentNode) || f.selection.setAfter(e.get(0).parentNode) || e.parent().after(mt.MARKERS), u(e.get(0).parentNode).remove()) : (f.selection.setBefore(e.get(0)) || f.selection.setAfter(e.get(0)) || e.after(mt.MARKERS), e.remove()), f.html.fillEmptyBlocks(), f.selection.restore()), f.undo.saveStep()) } function ae(e) { var t = e.which; if (p && (t == mt.KEYCODE.BACKSPACE || t == mt.KEYCODE.DELETE)) return e.preventDefault(), e.stopPropagation(), te(), !1; if (p && t == mt.KEYCODE.ESC) { var a = p; return de(!0), f.selection.setAfter(a.get(0)), f.selection.restore(), e.preventDefault(), !1 } if (!p || t != mt.KEYCODE.ARROW_LEFT && t != mt.KEYCODE.ARROW_RIGHT) return p && t === mt.KEYCODE.TAB ? (e.preventDefault(), e.stopPropagation(), de(!0), !1) : p && t != mt.KEYCODE.F10 && !f.keys.isBrowserAction(e) ? (e.preventDefault(), e.stopPropagation(), !1) : void 0; var n = p.get(0); return de(!0), t == mt.KEYCODE.ARROW_LEFT ? f.selection.setBefore(n) : f.selection.setAfter(n), f.selection.restore(), e.preventDefault(), !1 } function ne(e) { if (e && "IMG" == e.tagName) { if (f.node.hasClass(e, "fr-uploading") || f.node.hasClass(e, "fr-error") ? e.parentNode.removeChild(e) : f.node.hasClass(e, "fr-draggable") && e.classList.remove("fr-draggable"), e.parentNode && e.parentNode.parentNode && f.node.hasClass(e.parentNode.parentNode, "fr-img-caption")) { var t = e.parentNode.parentNode; t.removeAttribute("contenteditable"), t.removeAttribute("draggable"), t.classList.remove("fr-draggable"); var a = e.nextSibling; a && a.removeAttribute("contenteditable") } } else if (e && e.nodeType == Node.ELEMENT_NODE) for (var n = e.querySelectorAll("img.fr-uploading, img.fr-error, img.fr-draggable"), i = 0; i < n.length; i++)ne(n[i]) } function ie(e) { if (!1 === f.events.trigger("image.beforePasteUpload", [e])) return !1; p = u(e), y(), r(), ve(), k(), p.on("load", function () { var t = []; y(), u(f.popups.get("image.insert").get(0)).find("div.fr-active.fr-error").length < 1 && k(), u(this).data("events").find(function (e) { "load" === e[0] && t.push(e) }), t.length <= 1 && u(this).off("load") }); for (var t = u(e).attr("src").split(","), a = atob(t[1]), n = [], i = 0; i < a.length; i++)n.push(a.charCodeAt(i)); G([new Blob([new Uint8Array(n)], { type: t[0].replace(/data\:/g, "").replace(/;base64/g, "") })], p) } function re() { f.opts.imagePaste ? f.$el.find("img[data-fr-image-pasted]").each(function (e, n) { if (f.opts.imagePasteProcess) { var t = f.opts.imageDefaultWidth; t && "auto" != t && (t += f.opts.imageResizeWithPercent ? "%" : "px"), u(n).css("width", t).removeClass("fr-dii fr-dib fr-fir fr-fil"), ge(u(n), f.opts.imageDefaultDisplay, f.opts.imageDefaultAlign) } if (0 === n.src.indexOf("data:")) ie(n); else if (0 === n.src.indexOf("blob:") || 0 === n.src.indexOf("http") && f.opts.imageUploadRemoteUrls && f.opts.imageCORSProxy) { var a = new Image; a.crossOrigin = "Anonymous", a.onload = function () { var e, t = f.o_doc.createElement("CANVAS"), a = t.getContext("2d"); t.height = this.naturalHeight, t.width = this.naturalWidth, a.drawImage(this, 0, 0), setTimeout(function () { ie(n) }, 0), e = 2e3 < this.naturalWidth || 1500 < this.naturalHeight ? "jpeg" : "png", n.src = t.toDataURL("image/".concat(e)) }, a.src = (0 === n.src.indexOf("blob:") ? "" : "".concat(f.opts.imageCORSProxy, "/")) + n.src } else 0 !== n.src.indexOf("http") || 0 === n.src.indexOf("https://mail.google.com/mail") ? (f.selection.save(), u(n).remove(), f.selection.restore()) : u(n).removeAttr("data-fr-image-pasted") }) : f.$el.find("img[data-fr-image-pasted]").remove() } function oe(e) { var t = e.target.result, a = f.opts.imageDefaultWidth; a && "auto" != a && (a += f.opts.imageResizeWithPercent ? "%" : "px"), f.undo.saveStep(), f.html.insert('<img data-fr-image-pasted="true" src="'.concat(t, '"').concat(a ? ' style="width: '.concat(a, ';"') : "", ">")); var n = f.$el.find('img[data-fr-image-pasted="true"]'); n && ge(n, f.opts.imageDefaultDisplay, f.opts.imageDefaultAlign), f.events.trigger("paste.after") } function se(e) { if (e && e.clipboardData && e.clipboardData.items) { var t = null; if (e.clipboardData.types && -1 != [].indexOf.call(e.clipboardData.types, "text/rtf") || e.clipboardData.getData("text/rtf")) t = e.clipboardData.items[0].getAsFile(); else for (var a = 0; a < e.clipboardData.items.length && !(t = e.clipboardData.items[a].getAsFile()); a++); if (t) return function n(e) { var t = new FileReader; t.onload = oe, t.readAsDataURL(e) }(t), !1 } } function le(e) { return e = e.replace(/<img /gi, '<img data-fr-image-pasted="true" ') } function ce(e) { if ("false" == u(this).parents("[contenteditable]").not(".fr-element").not(".fr-img-caption").not("body").first().attr("contenteditable")) return !0; if (e && "touchend" == e.type && a) return !0; if (e && f.edit.isDisabled()) return e.stopPropagation(), e.preventDefault(), !1; for (var t = 0; t < mt.INSTANCES.length; t++)mt.INSTANCES[t] != f && mt.INSTANCES[t].events.trigger("image.hideResizer"); f.toolbar.disable(), e && (e.stopPropagation(), e.preventDefault()), f.helpers.isMobile() && (f.events.disableBlur(), f.$el.blur(), f.events.enableBlur()), f.opts.iframe && f.size.syncIframe(), p = u(this), be(), y(), r(), f.browser.msie ? (f.popups.areVisible() && f.events.disableBlur(), f.win.getSelection && (f.win.getSelection().removeAllRanges(), f.win.getSelection().addRange(f.doc.createRange()))) : f.selection.clear(), f.helpers.isIOS() && (f.events.disableBlur(), f.$el.blur()), f.button.bulkRefresh(), f.events.trigger("video.hideResizer") } function de(e) { p && (function t() { return fe }() || !0 === e) && (f.toolbar.enable(), l.removeClass("fr-active"), f.popups.hide("image.edit"), p = null, ue(), c = null, d && d.hide()) } i[n] = "Image cannot be loaded from the passed link.", i[g] = "No link in upload response.", i[h] = "Error during file upload.", i[m] = "Parsing response failed.", i[v] = "File is too large.", i[b] = "Image file type is invalid.", i[7] = "Files can be uploaded only to same domain in IE 8 and IE 9."; var fe = !(i[8] = "Image file is corrupted."); function pe() { fe = !0 } function ue() { fe = !1 } function ge(e, t, a) { !f.opts.htmlUntouched && f.opts.useClasses ? (e.removeClass("fr-fil fr-fir fr-dib fr-dii"), a && e.addClass("fr-fi".concat(a[0])), t && e.addClass("fr-di".concat(t[0]))) : "inline" == t ? (e.css({ display: "inline-block", verticalAlign: "bottom", margin: f.opts.imageDefaultMargin }), "center" == a ? e.css({ "float": "none", marginBottom: "", marginTop: "", maxWidth: "calc(100% - ".concat(2 * f.opts.imageDefaultMargin, "px)"), textAlign: "center" }) : "left" == a ? e.css({ "float": "left", marginLeft: 0, maxWidth: "calc(100% - ".concat(f.opts.imageDefaultMargin, "px)"), textAlign: "left" }) : e.css({ "float": "right", marginRight: 0, maxWidth: "calc(100% - ".concat(f.opts.imageDefaultMargin, "px)"), textAlign: "right" })) : "block" == t && (e.css({ display: "block", "float": "none", verticalAlign: "top", margin: "".concat(f.opts.imageDefaultMargin, "px auto"), textAlign: "center" }), "left" == a ? e.css({ marginLeft: 0, textAlign: "left" }) : "right" == a && e.css({ marginRight: 0, textAlign: "right" })) } function he(e) { if (void 0 === e && (e = Ae()), e) { if (e.hasClass("fr-fil")) return "left"; if (e.hasClass("fr-fir")) return "right"; if (e.hasClass("fr-dib") || e.hasClass("fr-dii")) return "center"; var t = e.css("float"); if (e.css("float", "none"), "block" == e.css("display")) { if (e.css("float", ""), e.css("float") != t && e.css("float", t), 0 === parseInt(e.css("margin-left"), 10)) return "left"; if (0 === parseInt(e.css("margin-right"), 10)) return "right" } else { if (e.css("float", ""), e.css("float") != t && e.css("float", t), "left" == e.css("float")) return "left"; if ("right" == e.css("float")) return "right" } } return "center" } function me(e) { void 0 === e && (e = Ae()); var t = e.css("float"); return e.css("float", "none"), "block" == e.css("display") ? (e.css("float", ""), e.css("float") != t && e.css("float", t), "block") : (e.css("float", ""), e.css("float") != t && e.css("float", t), "inline") } function ve() { var e = f.popups.get("image.insert"); e || (e = V()), f.popups.isVisible("image.insert") || (F(), f.popups.refresh("image.insert"), f.popups.setContainer("image.insert", f.$sc)); var t = Ae(); Ce() && (t = t.find(".fr-img-wrap")); var a = t.offset().left + t.outerWidth() / 2, n = t.offset().top + t.outerHeight(); f.popups.show("image.insert", a, n, t.outerHeight(!0), !0) } function be() { if (p) { f.events.disableBlur(), f.selection.clear(); var e = f.doc.createRange(); e.selectNode(p.get(0)), f.browser.msie && e.collapse(!0), f.selection.get().addRange(e), f.events.enableBlur() } } function Ee() { return p } function Ae() { return Ce() ? p.parents(".fr-img-caption").first() : p } function Ce() { return !!p && 0 < p.parents(".fr-img-caption").length } return { _init: function Te() { var n; (function e() { f.events.$on(f.$el, f._mousedown, "IMG" == f.el.tagName ? null : 'img:not([contenteditable="false"])', function (e) { if ("false" == u(this).parents("contenteditable").not(".fr-element").not(".fr-img-caption").not("body").first().attr("contenteditable")) return !0; f.helpers.isMobile() || f.selection.clear(), t = !0, f.popups.areVisible() && f.events.disableBlur(), f.browser.msie && (f.events.disableBlur(), f.$el.attr("contenteditable", !1)), f.draggable || "touchstart" == e.type || e.preventDefault(), e.stopPropagation() }), f.events.$on(f.$el, f._mousedown, ".fr-img-caption .fr-inner", function (e) { f.core.hasFocus() || f.events.focus(), e.stopPropagation() }), f.events.$on(f.$el, "paste", ".fr-img-caption .fr-inner", function (e) { f.toolbar.hide(), e.stopPropagation() }), f.events.$on(f.$el, f._mouseup, "IMG" == f.el.tagName ? null : 'img:not([contenteditable="false"])', function (e) { if ("false" == u(this).parents("contenteditable").not(".fr-element").not(".fr-img-caption").not("body").first().attr("contenteditable")) return !0; t && (t = !1, e.stopPropagation(), f.browser.msie && (f.$el.attr("contenteditable", !0), f.events.enableBlur())) }), f.events.on("keyup", function (e) { if (e.shiftKey && "" === f.selection.text().replace(/\n/g, "") && f.keys.isArrow(e.which)) { var t = f.selection.element(), a = f.selection.endElement(); t && "IMG" == t.tagName ? N(u(t)) : a && "IMG" == a.tagName && N(u(a)) } }, !0), f.events.on("drop", z), f.events.on("element.beforeDrop", Y), f.events.on("window.mousedown", pe), f.events.on("window.touchmove", ue), f.events.on("mouseup window.mouseup", function () { if (p) return de(), !1; ue() }), f.events.on("commands.mousedown", function (e) { 0 < e.parents(".fr-toolbar").length && de() }), f.events.on("image.resizeEnd", function () { f.opts.iframe && f.size.syncIframe() }), f.events.on("blur image.hideResizer commands.undo commands.redo element.dropped", function () { de(!(t = !1)) }), f.events.on("modals.hide", function () { p && (be(), f.selection.clear()) }), f.events.on("image.resizeEnd", function () { f.win.getSelection && N(p) }), f.opts.imageAddNewLine && f.events.on("image.inserted", function (e) { var t = e.get(0); for (t.nextSibling && "BR" === t.nextSibling.tagName && (t = t.nextSibling); t && !f.node.isElement(t);)t = f.node.isLastSibling(t) ? t.parentNode : null; f.node.isElement(t) && (f.opts.enter === mt.ENTER_BR ? e.after("<br>") : u(f.node.blockParent(e.get(0))).after("<".concat(f.html.defaultTag(), "><br></").concat(f.html.defaultTag(), ">"))) }) })(), "IMG" == f.el.tagName && f.$el.addClass("fr-view"), f.events.$on(f.$el, f.helpers.isMobile() && !f.helpers.isWindowsPhone() ? "touchend" : "click", "IMG" == f.el.tagName ? null : 'img:not([contenteditable="false"])', ce), f.helpers.isMobile() && (f.events.$on(f.$el, "touchstart", "IMG" == f.el.tagName ? null : 'img:not([contenteditable="false"])', function () { a = !1 }), f.events.$on(f.$el, "touchmove", function () { a = !0 })), f.$wp ? (f.events.on("window.keydown keydown", ae, !0), f.events.on("keyup", function (e) { if (p && e.which == mt.KEYCODE.ENTER) return !1 }, !0), f.events.$on(f.$el, "keydown", function () { var e = f.selection.element(); (e.nodeType === Node.TEXT_NODE || "BR" == e.tagName && f.node.isLastSibling(e)) && (e = e.parentNode), f.node.hasClass(e, "fr-inner") || (f.node.hasClass(e, "fr-img-caption") || (e = u(e).parents(".fr-img-caption").get(0)), f.node.hasClass(e, "fr-img-caption") && (u(e).after(mt.INVISIBLE_SPACE + mt.MARKERS), f.selection.restore())) })) : f.events.$on(f.$win, "keydown", ae), f.events.on("toolbar.esc", function () { if (p) { if (f.$wp) f.events.disableBlur(), f.events.focus(); else { var e = p; de(!0), f.selection.setAfter(e.get(0)), f.selection.restore() } return !1 } }, !0), f.events.on("toolbar.focusEditor", function () { if (p) return !1 }, !0), f.events.on("window.cut window.copy", function (e) { if (p && f.popups.isVisible("image.edit") && !f.popups.get("image.edit").find(":focus").length) { var t = Ae(); Ce() ? (t.before(mt.START_MARKER), t.after(mt.END_MARKER), f.selection.restore(), f.paste.saveCopiedText(t.get(0).outerHTML, t.text())) : (be(), f.paste.saveCopiedText(p.get(0).outerHTML, p.attr("alt"))), "copy" == e.type ? setTimeout(function () { N(p) }) : (de(!0), f.undo.saveStep(), setTimeout(function () { f.undo.saveStep() }, 0)) } }, !0), f.browser.msie && f.events.on("keydown", function (e) { if (!f.selection.isCollapsed() || !p) return !0; var t = e.which; t == mt.KEYCODE.C && f.keys.ctrlKey(e) ? f.events.trigger("window.copy") : t == mt.KEYCODE.X && f.keys.ctrlKey(e) && f.events.trigger("window.cut") }), f.events.$on(u(f.o_win), "keydown", function (e) { var t = e.which; if (p && t == mt.KEYCODE.BACKSPACE) return e.preventDefault(), !1 }), f.events.$on(f.$win, "keydown", function (e) { var t = e.which; p && p.hasClass("fr-uploading") && t == mt.KEYCODE.ESC && p.trigger("abortUpload") }), f.events.on("destroy", function () { p && p.hasClass("fr-uploading") && p.trigger("abortUpload") }), f.events.on("paste.before", se), f.events.on("paste.beforeCleanup", le), f.events.on("paste.after", re), f.events.on("html.set", T), f.events.on("html.inserted", T), T(), f.events.on("destroy", function () { s = [] }), f.events.on("html.processGet", ne), f.opts.imageOutputSize && f.events.on("html.beforeGet", function () { n = f.el.querySelectorAll("img"); for (var e = 0; e < n.length; e++) { var t = n[e].style.width || u(n[e]).width(), a = n[e].style.height || u(n[e]).height(); t && n[e].setAttribute("width", "".concat(t).replace(/px/, "")), a && n[e].setAttribute("height", "".concat(a).replace(/px/, "")) } }), f.opts.iframe && f.events.on("image.loaded", f.size.syncIframe), f.$wp && (R(), f.events.on("contentChanged", R)), f.events.$on(u(f.o_win), "orientationchange.image", function () { setTimeout(function () { p && N(p) }, 100) }), O(!0), V(!0), J(!0), X(!0), f.events.on("node.remove", function (e) { if ("IMG" == e.get(0).tagName) return te(e), !1 }) }, showInsertPopup: function Re() { var e = f.$tb.find('.fr-command[data-cmd="insertImage"]'), t = f.popups.get("image.insert"); if (t || (t = V()), F(), !t.hasClass("fr-active")) if (f.popups.refresh("image.insert"), f.popups.setContainer("image.insert", f.$tb), e.isVisible()) { var a = f.button.getPosition(e), n = a.left, i = a.top; f.popups.show("image.insert", n, i, e.outerHeight()) } else f.position.forSelection(t), f.popups.show("image.insert") }, showLayer: function ye(e) { var t, a, n = f.popups.get("image.insert"); if (p || f.opts.toolbarInline) { if (p) { var i = Ae(); Ce() && (i = i.find(".fr-img-wrap")), a = i.offset().top + i.outerHeight(), t = i.offset().left } } else { var r = f.$tb.find('.fr-command[data-cmd="insertImage"]'); t = r.offset().left, a = r.offset().top + (f.opts.toolbarBottom ? 10 : r.outerHeight() - 10) } !p && f.opts.toolbarInline && (a = n.offset().top - f.helpers.getPX(n.css("margin-top")), n.hasClass("fr-above") && (a += n.outerHeight())), n.find(".fr-layer").removeClass("fr-active"), n.find(".fr-".concat(e, "-layer")).addClass("fr-active"), f.popups.show("image.insert", t, a, p ? p.outerHeight() : 0), f.accessibility.focusPopup(n) }, refreshUploadButton: function we(e) { var t = f.popups.get("image.insert"); t && t.find(".fr-image-upload-layer").hasClass("fr-active") && e.addClass("fr-active").attr("aria-pressed", !0) }, refreshByURLButton: function Se(e) { var t = f.popups.get("image.insert"); t && t.find(".fr-image-by-url-layer").hasClass("fr-active") && e.addClass("fr-active").attr("aria-pressed", !0) }, upload: G, insertByURL: function Le() { var e = f.popups.get("image.insert").find(".fr-image-by-url-layer input"); if (0 < e.val().length) { k(), D(f.language.translate("Loading image")); var t = e.val().trim(); if (f.opts.imageUploadRemoteUrls && f.opts.imageCORSProxy && f.opts.imageUpload) { var a = new XMLHttpRequest; a.onload = function () { 200 == this.status ? G([new Blob([this.response], { type: this.response.type || "image/png" })], p) : x(n) }, a.onerror = function () { P(t, !0, [], p) }, a.open("GET", "".concat(f.opts.imageCORSProxy, "/").concat(t), !0), a.responseType = "blob", a.send() } else P(t, !0, [], p); e.val(""), e.blur() } }, align: function _e(e) { var t = Ae(); t.removeClass("fr-fir fr-fil"), !f.opts.htmlUntouched && f.opts.useClasses ? "left" == e ? t.addClass("fr-fil") : "right" == e && t.addClass("fr-fir") : ge(t, me(), e), be(), y(), r(), f.selection.clear() }, refreshAlign: function Ie(e) { p && e.find("> *").first().replaceWith(f.icon.create("image-align-".concat(he()))) }, refreshAlignOnShow: function xe(e, t) { p && t.find('.fr-command[data-param1="'.concat(he(), '"]')).addClass("fr-active").attr("aria-selected", !0) }, display: function Oe(e) { var t = Ae(); t.removeClass("fr-dii fr-dib"), !f.opts.htmlUntouched && f.opts.useClasses ? "inline" == e ? t.addClass("fr-dii") : "block" == e && t.addClass("fr-dib") : ge(t, e, he()), be(), y(), r(), f.selection.clear() }, refreshDisplayOnShow: function ke(e, t) { p && t.find('.fr-command[data-param1="'.concat(me(), '"]')).addClass("fr-active").attr("aria-selected", !0) }, replace: ve, back: function e() { p ? (f.events.disableBlur(), u(".fr-popup input:focus").blur(), N(p)) : (f.events.disableBlur(), f.selection.restore(), f.events.enableBlur(), f.popups.hide("image.insert"), f.toolbar.showInline()) }, get: Ee, getEl: Ae, insert: P, showProgressBar: k, remove: te, hideProgressBar: F, applyStyle: function Fe(e, t, a) { if (void 0 === t && (t = f.opts.imageStyles), void 0 === a && (a = f.opts.imageMultipleStyles), !p) return !1; var n = Ae(); if (!a) { var i = Object.keys(t); i.splice(i.indexOf(e), 1), n.removeClass(i.join(" ")) } "object" == vt(t[e]) ? (n.removeAttr("style"), n.css(t[e].style)) : n.toggleClass(e), N(p) }, showAltPopup: q, showSizePopup: Z, setAlt: function De(e) { if (p) { var t = f.popups.get("image.alt"); p.attr("alt", e || t.find("input").val() || ""), t.find("input:focus").blur(), N(p) } }, setSize: function Me(e, t) { if (p) { var a = f.popups.get("image.size"); e = e || a.find('input[name="width"]').val() || "", t = t || a.find('input[name="height"]').val() || ""; var n = /^[\d]+((px)|%)*$/g; p.removeAttr("width").removeAttr("height"), e.match(n) ? p.css("width", e) : p.css("width", ""), t.match(n) ? p.css("height", t) : p.css("height", ""), Ce() && (p.parents(".fr-img-caption").removeAttr("width").removeAttr("height"), e.match(n) ? p.parents(".fr-img-caption").css("width", e) : p.parents(".fr-img-caption").css("width", ""), t.match(n) ? p.parents(".fr-img-caption").css("height", t) : p.parents(".fr-img-caption").css("height", "")), a && a.find("input:focus").blur(), N(p) } }, toggleCaption: function Ne() { var e; if (p && !Ce()) { (e = p).parent().is("a") && (e = p.parent()); var t, a, n = p.parents("ul") && 0 < p.parents("ul").length ? p.parents("ul") : p.parents("ol") && 0 < p.parents("ol").length ? p.parents("ol") : []; if (0 < n.length) { var i = n.find("li").length, r = p.parents("li"), o = document.createElement("li"); i - 1 === r.index() && (n.append(o), o.innerHTML = "&nbsp;") } e.attr("style") && (a = -1 < (t = e.attr("style").split(":")).indexOf("width") ? t[t.indexOf("width") + 1].replace(";", "") : ""); var s = f.opts.imageResizeWithPercent ? (-1 < a.indexOf("px") ? null : a) || "100%" : p.width() + "px"; e.wrap('<div class="fr-img-space-wrap"><span ' + (f.browser.mozilla ? "" : 'contenteditable="false"') + 'class="fr-img-caption ' + p.attr("class") + '" style="' + (f.opts.useClasses ? "" : e.attr("style")) + '" draggable="false"></span><p class="fr-img-space-wrap2">&nbsp;</p></div>'), e.wrap('<span class="fr-img-wrap"></span>'), p.after('<span class="fr-inner"'.concat(f.browser.mozilla ? "" : ' contenteditable="true"', ">").concat(mt.START_MARKER).concat(f.language.translate("Image Caption")).concat(mt.END_MARKER, "</span>")), p.removeAttr("class").removeAttr("style").removeAttr("width"), p.parents(".fr-img-caption").css("width", s), de(!0), f.selection.restore() } else e = Ae(), p.insertAfter(e), p.attr("class", e.attr("class").replace("fr-img-caption", "")).attr("style", e.attr("style")), e.remove(), N(p) }, hasCaption: Ce, exitEdit: de, edit: N } }, mt.DefineIcon("insertImage", { NAME: "image", SVG_KEY: "insertImage" }), mt.RegisterShortcut(mt.KEYCODE.P, "insertImage", null, "P"), mt.RegisterCommand("insertImage", { title: "Insert Image", undo: !1, focus: !0, refreshAfterCallback: !1, popup: !0, callback: function () { this.popups.isVisible("image.insert") ? (this.$el.find(".fr-marker").length && (this.events.disableBlur(), this.selection.restore()), this.popups.hide("image.insert")) : this.image.showInsertPopup() }, plugin: "image" }), mt.DefineIcon("imageUpload", { NAME: "upload", SVG_KEY: "upload" }), mt.RegisterCommand("imageUpload", { title: "Upload Image", undo: !1, focus: !1, toggle: !0, callback: function () { this.image.showLayer("image-upload") }, refresh: function (e) { this.image.refreshUploadButton(e) } }), mt.DefineIcon("imageByURL", { NAME: "link", SVG_KEY: "insertLink" }), mt.RegisterCommand("imageByURL", { title: "By URL", undo: !1, focus: !1, toggle: !0, callback: function () { this.image.showLayer("image-by-url") }, refresh: function (e) { this.image.refreshByURLButton(e) } }), mt.RegisterCommand("imageInsertByURL", { title: "Insert Image", undo: !0, refreshAfterCallback: !1, callback: function () { this.image.insertByURL() }, refresh: function (e) { this.image.get() ? e.text(this.language.translate("Replace")) : e.text(this.language.translate("Insert")) } }), mt.DefineIcon("imageDisplay", { NAME: "star", SVG_KEY: "imageDisplay" }), mt.RegisterCommand("imageDisplay", { title: "Display", type: "dropdown", options: { inline: "Inline", block: "Break Text" }, callback: function (e, t) { this.image.display(t) }, refresh: function (e) { this.opts.imageTextNear || e.addClass("fr-hidden") }, refreshOnShow: function (e, t) { this.image.refreshDisplayOnShow(e, t) } }), mt.DefineIcon("image-align", { NAME: "align-left", SVG_KEY: "alignLeft" }), mt.DefineIcon("image-align-left", { NAME: "align-left", SVG_KEY: "alignLeft" }), mt.DefineIcon("image-align-right", { NAME: "align-right", SVG_KEY: "alignRight" }), mt.DefineIcon("image-align-center", { NAME: "align-justify", SVG_KEY: "alignCenter" }), mt.DefineIcon("imageAlign", { NAME: "align-justify", SVG_KEY: "alignJustify" }), mt.RegisterCommand("imageAlign", { type: "dropdown", title: "Align", options: { left: "Align Left", center: "None", right: "Align Right" }, html: function () { var e = '<ul class="fr-dropdown-list" role="presentation">', t = mt.COMMANDS.imageAlign.options; for (var a in t) t.hasOwnProperty(a) && (e += '<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="imageAlign" data-param1="'.concat(a, '" title="').concat(this.language.translate(t[a]), '">').concat(this.icon.create("image-align-".concat(a)), '<span class="fr-sr-only">').concat(this.language.translate(t[a]), "</span></a></li>")); return e += "</ul>" }, callback: function (e, t) { this.image.align(t) }, refresh: function (e) { this.image.refreshAlign(e) }, refreshOnShow: function (e, t) { this.image.refreshAlignOnShow(e, t) } }), mt.DefineIcon("imageReplace", { NAME: "exchange", FA5NAME: "exchange-alt", SVG_KEY: "replaceImage" }), mt.RegisterCommand("imageReplace", { title: "Replace", undo: !1, focus: !1, popup: !0, refreshAfterCallback: !1, callback: function () { this.image.replace() } }), mt.DefineIcon("imageRemove", { NAME: "trash", SVG_KEY: "remove" }), mt.RegisterCommand("imageRemove", { title: "Remove", callback: function () { this.image.remove() } }), mt.DefineIcon("imageBack", { NAME: "arrow-left", SVG_KEY: "back" }), mt.RegisterCommand("imageBack", { title: "Back", undo: !1, focus: !1, back: !0, callback: function () { this.image.back() }, refresh: function (e) { this.$; this.image.get() || this.opts.toolbarInline ? (e.removeClass("fr-hidden"), e.next(".fr-separator").removeClass("fr-hidden")) : (e.addClass("fr-hidden"), e.next(".fr-separator").addClass("fr-hidden")) } }), mt.RegisterCommand("imageDismissError", { title: "OK", undo: !1, callback: function () { this.image.hideProgressBar(!0) } }), mt.DefineIcon("imageStyle", { NAME: "magic", SVG_KEY: "imageClass" }), mt.RegisterCommand("imageStyle", { title: "Style", type: "dropdown", html: function () { var e = '<ul class="fr-dropdown-list" role="presentation">', t = this.opts.imageStyles; for (var a in t) if (t.hasOwnProperty(a)) { var n = t[a]; "object" == vt(n) && (n = n.title), e += '<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="imageStyle" data-param1="'.concat(a, '">').concat(this.language.translate(n), "</a></li>") } return e += "</ul>" }, callback: function (e, t) { this.image.applyStyle(t) }, refreshOnShow: function (e, t) { var a = this.$, n = this.image.getEl(); n && t.find(".fr-command").each(function () { var e = a(this).data("param1"), t = n.hasClass(e); a(this).toggleClass("fr-active", t).attr("aria-selected", t) }) } }), mt.DefineIcon("imageAlt", { NAME: "info", SVG_KEY: "imageAltText" }), mt.RegisterCommand("imageAlt", { undo: !1, focus: !1, popup: !0, title: "Alternative Text", callback: function () { this.image.showAltPopup() } }), mt.RegisterCommand("imageSetAlt", { undo: !0, focus: !1, title: "Update", refreshAfterCallback: !1, callback: function () { this.image.setAlt() } }), mt.DefineIcon("imageSize", { NAME: "arrows-alt", SVG_KEY: "imageSize" }), mt.RegisterCommand("imageSize", { undo: !1, focus: !1, popup: !0, title: "Change Size", callback: function () { this.image.showSizePopup() } }), mt.RegisterCommand("imageSetSize", { undo: !0, focus: !1, title: "Update", refreshAfterCallback: !1, callback: function () { this.image.setSize() } }), mt.DefineIcon("imageCaption", { NAME: "commenting", FA5NAME: "comment-alt", SVG_KEY: "imageCaption" }), mt.RegisterCommand("imageCaption", { undo: !0, focus: !1, title: "Image Caption", refreshAfterCallback: !0, callback: function () { this.image.toggleCaption() }, refresh: function (e) { this.image.get() && e.toggleClass("fr-active", this.image.hasCaption()) } }), Object.assign(mt.DEFAULTS, { imageManagerLoadURL: "https://i.froala.com/load-files", imageManagerLoadMethod: "get", imageManagerLoadParams: {}, imageManagerPreloader: null, imageManagerDeleteURL: "", imageManagerDeleteMethod: "post", imageManagerDeleteParams: {}, imageManagerPageSize: 12, imageManagerScrollOffset: 20, imageManagerToggleTags: !0 }), mt.PLUGINS.imageManager = function (s) { var l, c, r, o, d, f, p, u, g, h, m, v = s.$, b = "image_manager", e = 10, E = 11, A = 12, C = 13, T = 14, R = 15, a = 21, n = 22, i = {}; function y() { var e = v(window).outerWidth(); return e < 768 ? 2 : e < 1200 ? 3 : 4 } function w() { d.empty(); for (var e = 0; e < m; e++)d.append('<div class="fr-list-column"></div>') } function S() { if (g < p.length && (d.outerHeight() <= r.outerHeight() + s.opts.imageManagerScrollOffset || r.scrollTop() + s.opts.imageManagerScrollOffset > d.outerHeight() - r.outerHeight())) { u++; for (var e = s.opts.imageManagerPageSize * (u - 1); e < Math.min(p.length, s.opts.imageManagerPageSize * u); e++)t(p[e]) } } function t(i) { var r = new Image, o = v(document.createElement("div")).attr("class", "fr-image-container fr-empty fr-image-" + h++).attr("data-loading", s.language.translate("Loading") + "..").attr("data-deleting", s.language.translate("Deleting") + ".."); x(!1), r.onload = function () { o.height(Math.floor(o.width() / r.width * r.height)); var a = v(document.createElement("img")); if (i.thumb) a.attr("src", i.thumb); else { if (D(T, i), !i.url) return D(R, i), !1; a.attr("src", i.url) } if (i.url && a.attr("data-url", i.url), i.tag) if (c.find(".fr-modal-more.fr-not-available").removeClass("fr-not-available"), c.find(".fr-modal-tags").show(), 0 <= i.tag.indexOf(",")) { for (var e = i.tag.split(","), t = 0; t < e.length; t++)e[t] = e[t].trim(), 0 === f.find('a[title="'.concat(e[t], '"]')).length && f.append('<a role="button" title="'.concat(e[t], '">').concat(e[t], "</a>")); a.attr("data-tag", e.join()) } else 0 === f.find('a[title="'.concat(i.tag.trim(), '"]')).length && f.append('<a role="button" title="'.concat(i.tag.trim(), '">').concat(i.tag.trim(), "</a>")), a.attr("data-tag", i.tag.trim()); for (var n in i.name && a.attr("alt", i.name), i) i.hasOwnProperty(n) && "thumb" !== n && "url" !== n && "tag" !== n && a.attr("data-".concat(n), i[n]); o.append(a).append(v(s.icon.create("imageManagerDelete")).addClass("fr-delete-img").attr("title", s.language.translate("Delete"))).append(v(s.icon.create("imageManagerInsert")).addClass("fr-insert-img").attr("title", s.language.translate("Insert"))), f.find(".fr-selected-tag").each(function (e, t) { P(a, t.text) || o.hide() }), a.on("load", function () { o.removeClass("fr-empty"), o.height("auto"), g++, I(_(parseInt(a.parent().attr("class").match(/fr-image-(\d+)/)[1], 10) + 1)), x(!1), g % s.opts.imageManagerPageSize == 0 && S() }), s.events.trigger("imageManager.imageLoaded", [a]) }, r.onerror = function () { g++, o.remove(), I(_(parseInt(o.attr("class").match(/fr-image-(\d+)/)[1], 10) + 1)), D(e, i), g % s.opts.imageManagerPageSize == 0 && S() }, r.src = i.thumb || i.url, L().append(o) } function L() { var n, i; return d.find(".fr-list-column").each(function (e, t) { var a = v(t); 0 === e ? (i = a.outerHeight(), n = a) : a.outerHeight() < i && (i = a.outerHeight(), n = a) }), n } function _(e) { e === undefined && (e = 0); for (var t = [], a = h - 1; e <= a; a--) { var n = d.find(".fr-image-".concat(a)); n.length && (t.push(n), v(document.createElement("div")).attr("id", "fr-image-hidden-container").append(n), d.find(".fr-image-".concat(a)).remove()) } return t } function I(e) { for (var t = e.length - 1; 0 <= t; t--)L().append(e[t]) } function x(e) { if (e === undefined && (e = !0), !l.isVisible()) return !0; var t = y(); if (t !== m) { m = t; var a = _(); w(), I(a) } s.modals.resize(b), e && S() } function O(e) { for (var t, a = e[0].attributes, n = a.length, i = {}; n--;)a[n] && 0 === (t = a[n].name).indexOf("data-") && "url" !== (t = t.slice(5)) && "tag" !== t && (i[t] = a[n].value); return i } function k(e) { var t = v(e.currentTarget).siblings("img"), a = l.data("instance") || s, n = l.data("current-image"); if (s.modals.hide(b), a.image.showProgressBar(), n) n.data("fr-old-src", n.attr("src")), n.trigger("click"); else { a.events.focus(!0), a.selection.restore(); var i = a.position.getBoundingRect(), r = i.left + i.width / 2 + v(s.doc).scrollLeft(), o = i.top + i.height + v(s.doc).scrollTop(); a.popups.setContainer("image.insert", s.$sc), a.popups.show("image.insert", r, o) } a.image.insert(t.data("url"), !1, O(t), n) } function F(e) { var r = v(e.currentTarget).siblings("img"), t = s.language.translate("Are you sure? Image will be deleted."); confirm(t) && (s.opts.imageManagerDeleteURL ? !1 !== s.events.trigger("imageManager.beforeDeleteImage", [r]) && (r.parent().addClass("fr-image-deleting"), v(this).ajax({ method: s.opts.imageManagerDeleteMethod, url: s.opts.imageManagerDeleteURL, data: Object.assign(Object.assign({ src: r.attr("src") }, O(r)), s.opts.imageManagerDeleteParams), crossDomain: s.opts.requestWithCORS, withCredentials: s.opts.requestWithCredentials, headers: s.opts.requestHeaders, done: function (e, t, a) { s.events.trigger("imageManager.imageDeleted", [e]); var n = _(parseInt(r.parent().attr("class").match(/fr-image-(\d+)/)[1], 10) + 1); r.parent().remove(), I(n), function i() { l.find("#fr-modal-tags > a").each(function () { 0 === l.find('#fr-image-list [data-tag*="'.concat(v(this).text(), '"]')).length && v(this).removeClass("fr-selected-tag").hide() }), N() }(), x(!0) }, fail: function (e) { D(a, e.response || e.responseText) } })) : D(n)) } function D(e, t) { 10 <= e && e < 20 ? o.hide() : 20 <= e && e < 30 && v(".fr-image-deleting").removeClass("fr-image-deleting"), s.events.trigger("imageManager.error", [{ code: e, message: i[e] }, t]) } function M() { var e = c.find(".fr-modal-head-line").outerHeight(), t = f.outerHeight(); c.toggleClass("fr-show-tags"), c.hasClass("fr-show-tags") ? (c.css("height", e + t), r.css("marginTop", e + t), f.find("a").css("opacity", 1)) : (c.css("height", e), r.css("marginTop", e), f.find("a").css("opacity", 0)) } function N() { var e = f.find(".fr-selected-tag"); 0 < e.length ? (d.find("img").parents().show(), e.each(function (e, n) { d.find("img").each(function (e, t) { var a = v(t); P(a, n.text) || a.parent().hide() }) })) : d.find("img").parents().show(), I(_()), S() } function B(e) { e.preventDefault(); var t = v(e.currentTarget); t.toggleClass("fr-selected-tag"), s.opts.imageManagerToggleTags && t.siblings("a").removeClass("fr-selected-tag"), N() } function P(e, t) { for (var a = (e.attr("data-tag") || "").split(","), n = 0; n < a.length; n++)if (a[n] === t) return !0; return !1 } return i[e] = "Image cannot be loaded from the passed link.", i[E] = "Error during load images request.", i[A] = "Missing imageManagerLoadURL option.", i[C] = "Parsing load response failed.", i[T] = "Missing image thumb.", i[R] = "Missing image URL.", i[a] = "Error during delete image request.", i[n] = "Missing imageManagerDeleteURL option.", { require: ["image"], _init: function U() { if (!s.$wp && "IMG" !== s.el.tagName) return !1 }, show: function $() { if (!l) { var e, t = '<button class="fr-command fr-btn fr-modal-more fr-not-available" id="fr-modal-more-'.concat(s.sid, '"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24""><path d="').concat(mt.SVG.tags, '"/></svg></button><h4 data-text="true">').concat(s.language.translate("Manage Images"), '</h4></div>\n      <div class="fr-modal-tags" id="fr-modal-tags">'); e = s.opts.imageManagerPreloader ? '<img class="fr-preloader" id="fr-preloader" alt="'.concat(s.language.translate("Loading"), '.." src="').concat(s.opts.imageManagerPreloader, '" style="display: none;">') : '<span class="fr-preloader" id="fr-preloader" style="display: none;">'.concat(s.language.translate("Loading"), "</span>"), e += '<div class="fr-image-list" id="fr-image-list"></div>'; var a = s.modals.create(b, t, e); l = a.$modal, c = a.$head, r = a.$body } l.data("current-image", s.image.get()), s.modals.show(b), o || function n() { o = l.find("#fr-preloader"), d = l.find("#fr-image-list"), f = l.find("#fr-modal-tags"), m = y(), w(), c.css("height", c.find(".fr-modal-head-line").outerHeight()), s.events.$on(v(s.o_win), "resize", function () { x(!!p) }), s.events.bindClick(d, ".fr-insert-img", k), s.events.bindClick(d, ".fr-delete-img", F), s.helpers.isMobile() && (s.events.bindClick(d, "div.fr-image-container", function (e) { l.find(".fr-mobile-selected").removeClass("fr-mobile-selected"), v(e.currentTarget).addClass("fr-mobile-selected") }), l.on(s._mousedown, function () { l.find(".fr-mobile-selected").removeClass("fr-mobile-selected") })), l.on(s._mousedown + " " + s._mouseup, function (e) { e.stopPropagation() }), l.on(s._mousedown, "*", function () { s.events.disableBlur() }), r.on("scroll", S), s.events.bindClick(l, "button#fr-modal-more-".concat(s.sid), M), s.events.bindClick(f, "a", B) }(), function i() { o.show(), d.find(".fr-list-column").empty(), s.opts.imageManagerLoadURL ? v(this).ajax({ url: s.opts.imageManagerLoadURL, method: s.opts.imageManagerLoadMethod, data: s.opts.imageManagerLoadParams, crossDomain: s.opts.requestWithCORS, withCredentials: s.opts.requestWithCredentials, headers: s.opts.requestHeaders, done: function (e, t, a) { s.events.trigger("imageManager.imagesLoaded", [e]), function n(e, t) { try { d.find(".fr-list-column").empty(), h = g = u = 0, p = JSON.parse(e), S() } catch (a) { D(C, t) } }(e, a.response), o.hide() }, fail: function (e) { D(E, e.response || e.responseText) } }) : D(A) }() }, hide: function W() { s.modals.hide(b) } } }, !mt.PLUGINS.image) throw new Error("Image manager plugin requires image plugin."); mt.DEFAULTS.imageInsertButtons.push("imageManager"), mt.RegisterCommand("imageManager", { title: "Browse", undo: !1, focus: !1, modal: !0, callback: function () { this.imageManager.show() }, plugin: "imageManager" }), mt.DefineIcon("imageManager", { NAME: "folder", SVG_KEY: "imageManager" }), mt.DefineIcon("imageManagerInsert", { NAME: "plus", SVG_KEY: "add" }), mt.DefineIcon("imageManagerDelete", { NAME: "trash", SVG_KEY: "remove" }), Object.assign(mt.DEFAULTS, { inlineClasses: { "fr-class-code": "Code", "fr-class-highlighted": "Highlighted", "fr-class-transparency": "Transparent" } }), mt.PLUGINS.inlineClass = function (a) { var n = a.$; return { apply: function t(e) { a.format.toggle("span", { "class": e }) }, refreshOnShow: function i(e, t) { t.find(".fr-command").each(function () { var e = n(this).data("param1"), t = a.format.is("span", { "class": e }); n(this).toggleClass("fr-active", t).attr("aria-selected", t) }) } } }, mt.RegisterCommand("inlineClass", { type: "dropdown", title: "Inline Class", html: function () { var e = '<ul class="fr-dropdown-list" role="presentation">', t = this.opts.inlineClasses; for (var a in t) t.hasOwnProperty(a) && (e += '<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="inlineClass" data-param1="'.concat(a, '" title="').concat(t[a], '">').concat(t[a], "</a></li>")); return e += "</ul>" }, callback: function (e, t) { this.inlineClass.apply(t) }, refreshOnShow: function (e, t) { this.inlineClass.refreshOnShow(e, t) }, plugin: "inlineClass" }), mt.DefineIcon("inlineClass", { NAME: "tag", SVG_KEY: "inlineClass" }), Object.assign(mt.DEFAULTS, { inlineStyles: { "Big Red": "font-size: 20px; color: red;", "Small Blue": "font-size: 14px; color: blue;" } }), mt.PLUGINS.inlineStyle = function (i) { return { apply: function r(e) { for (var t = e.split(";"), a = 0; a < t.length; a++) { var n = t[a].split(":"); t[a].length && 2 == n.length && i.format.applyStyle(n[0].trim(), n[1].trim()) } } } }, mt.RegisterCommand("inlineStyle", { type: "dropdown", html: function () { var e = '<ul class="fr-dropdown-list" role="presentation">', t = this.opts.inlineStyles; for (var a in t) if (t.hasOwnProperty(a)) { var n = t[a] + (-1 === t[a].indexOf("display:block;") ? " display:block;" : ""); e += '<li role="presentation"><span style="'.concat(n, '" role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="inlineStyle" data-param1="').concat(t[a], '" title="').concat(this.language.translate(a), '">').concat(this.language.translate(a), "</a></span></li>") } return e += "</ul>" }, title: "Inline Style", callback: function (e, t) { this.inlineStyle.apply(t) }, plugin: "inlineStyle" }), mt.DefineIcon("inlineStyle", { NAME: "paint-brush", SVG_KEY: "inlineStyle" }), Object.assign(mt.DEFAULTS, { lineBreakerTags: ["table", "hr", "form", "dl", "span.fr-video", ".fr-embedly", "img"], lineBreakerOffset: 15, lineBreakerHorizontalOffset: 10 }), mt.PLUGINS.lineBreaker = function (g) { var h, t, i, m = g.$; function l(e, t) { var a, n, i, r, o, s, l, c; if (null == e) o = (r = t.parent()).offset().top, a = (l = t.offset().top) - Math.min((l - o) / 2, g.opts.lineBreakerOffset), i = r.outerWidth(), n = r.offset().left; else if (null == t) (s = (r = e.parent()).offset().top + r.outerHeight()) < (c = e.offset().top + e.outerHeight()) && (s = (r = m(r).parent()).offset().top + r.outerHeight()), a = c + Math.min(Math.abs(s - c) / 2, g.opts.lineBreakerOffset), i = r.outerWidth(), n = r.offset().left; else { r = e.parent(); var d = e.offset().top + e.height(), f = t.offset().top; if (f < d) return !1; a = (d + f) / 2, i = r.outerWidth(), n = r.offset().left } if (g.opts.iframe) { var p = g.helpers.getPX(g.$wp.find(".fr-iframe").css("padding-top")), u = g.helpers.getPX(g.$wp.find(".fr-iframe").css("padding-left")); n += g.$iframe.offset().left - g.helpers.scrollLeft() + u, a += g.$iframe.offset().top - g.helpers.scrollTop() + p } g.$box.append(h), h.css("top", a - g.win.pageYOffset), h.css("left", n - g.win.pageXOffset), h.css("width", i), h.data("tag1", e), h.data("tag2", t), h.addClass("fr-visible").data("instance", g) } function c(e) { if (e) { var t = m(e); if (0 === g.$el.find(t).length) return null; if (e.nodeType != Node.TEXT_NODE && t.is(g.opts.lineBreakerTags.join(","))) return t; if (0 < t.parents(g.opts.lineBreakerTags.join(",")).length) return e = t.parents(g.opts.lineBreakerTags.join(",")).get(0), 0 !== g.$el.find(m(e)).length && m(e).is(g.opts.lineBreakerTags.join(",")) ? m(e) : null } return null } function r(e, t) { var a = g.doc.elementFromPoint(e, t); return a && !m(a).closest(".fr-line-breaker").length && !g.node.isElement(a) && a != g.$wp.get(0) && function n(e) { if ("undefined" != typeof e.inFroalaWrapper) return e.inFroalaWrapper; for (var t = e; e.parentNode && e.parentNode !== g.$wp.get(0);)e = e.parentNode; return t.inFroalaWrapper = e.parentNode == g.$wp.get(0), t.inFroalaWrapper }(a) ? a : null } function o(e, t, a) { for (var n = a, i = null; n <= g.opts.lineBreakerOffset && !i;)(i = r(e, t - n)) || (i = r(e, t + n)), n += a; return i } function d(e, t, a) { for (var n = null, i = 100; !n && e > g.$box.offset().left && e < g.$box.offset().left + g.$box.outerWidth() && 0 < i;)(n = r(e, t)) || (n = o(e, t, 5)), "left" == a ? e -= g.opts.lineBreakerHorizontalOffset : e += g.opts.lineBreakerHorizontalOffset, i -= g.opts.lineBreakerHorizontalOffset; return n } function a(e) { var t = i = null, a = null, n = g.doc.elementFromPoint(e.pageX - g.win.pageXOffset, e.pageY - g.win.pageYOffset); (t = n && ("HTML" == n.tagName || "BODY" == n.tagName || g.node.isElement(n) || 0 <= (n.getAttribute("class") || "").indexOf("fr-line-breaker")) ? ((a = o(e.pageX - g.win.pageXOffset, e.pageY - g.win.pageYOffset, 1)) || (a = d(e.pageX - g.win.pageXOffset - g.opts.lineBreakerHorizontalOffset, e.pageY - g.win.pageYOffset, "left")), a || (a = d(e.pageX - g.win.pageXOffset + g.opts.lineBreakerHorizontalOffset, e.pageY - g.win.pageYOffset, "right")), c(a)) : c(n)) ? function s(e, t) { var a, n, i = e.offset().top, r = e.offset().top + e.outerHeight(); if (Math.abs(r - t) <= g.opts.lineBreakerOffset || Math.abs(t - i) <= g.opts.lineBreakerOffset) if (Math.abs(r - t) < Math.abs(t - i)) { for (var o = (n = e.get(0)).nextSibling; o && o.nodeType == Node.TEXT_NODE && 0 === o.textContent.length;)o = o.nextSibling; if (!o) return l(e, null), !0; if (a = c(o)) return l(e, a), !0 } else { if (!(n = e.get(0)).previousSibling) return l(null, e), !0; if (a = c(n.previousSibling)) return l(a, e), !0 } h.removeClass("fr-visible").removeData("instance") }(t, e.pageY) : g.core.sameInstance(h) && h.removeClass("fr-visible").removeData("instance") } function n(e) { return !(h.hasClass("fr-visible") && !g.core.sameInstance(h)) && (g.popups.areVisible() || g.el.querySelector(".fr-selected-cell") ? (h.removeClass("fr-visible"), !0) : void (!1 !== t || g.edit.isDisabled() || (i && clearTimeout(i), i = setTimeout(a, 30, e)))) } function s() { i && clearTimeout(i), h && h.hasClass("fr-visible") && h.removeClass("fr-visible").removeData("instance") } var f = function f() { t = !0, s() }, p = function p() { t = !1 }; function u(e) { e.preventDefault(); var t = h.data("instance") || g; h.removeClass("fr-visible").removeData("instance"); var a = h.data("tag1"), n = h.data("tag2"), i = g.html.defaultTag(); null == a ? i && "TD" != n.parent().get(0).tagName && 0 === n.parents(i).length ? n.before("<".concat(i, ">").concat(mt.MARKERS, "<br></").concat(i, ">")) : n.before("".concat(mt.MARKERS, "<br>")) : i && "TD" != a.parent().get(0).tagName && 0 === a.parents(i).length ? a.after("<".concat(i, ">").concat(mt.MARKERS, "<br></").concat(i, ">")) : a.after("".concat(mt.MARKERS, "<br>")), t.selection.restore(), g.toolbar.enable() } return { _init: function v() { if (!g.$wp) return !1; !function e() { g.shared.$line_breaker || (g.shared.$line_breaker = m(document.createElement("div")).attr("class", "fr-line-breaker").html('<a class="fr-floating-btn" role="button" tabIndex="-1" title="'.concat(g.language.translate("Break"), '"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><rect x="17" y="7" width="2" height="8"/><rect x="10" y="13" width="7" height="2"/><path d="M10.000,10.000 L10.000,18.013 L5.000,14.031 L10.000,10.000 Z"/></svg></a>'))), h = g.shared.$line_breaker, g.events.on("shared.destroy", function () { h.html("").removeData().remove(), h = null }, !0), g.events.on("destroy", function () { h.removeData("instance").removeClass("fr-visible"), m("body").first().append(h), clearTimeout(i) }, !0), g.events.$on(h, "mousemove", function (e) { e.stopPropagation() }, !0), g.events.bindClick(h, "a", u) }(), t = !1, g.events.$on(g.$win, "mousemove", n), g.events.$on(m(g.win), "scroll", s), g.events.on("popups.show.table.edit", s), g.events.on("commands.after", s), g.events.$on(m(g.win), "mousedown", f), g.events.$on(m(g.win), "mouseup", p) } } }, Object.assign(mt.DEFAULTS, { lineHeights: { Default: "", Single: "1", 1.15: "1.15", 1.5: "1.5", Double: "2" } }), mt.PLUGINS.lineHeight = function (n) { var s = n.$; return { _init: function e() { }, apply: function i(e) { n.selection.save(), n.html.wrap(!0, !0, !0, !0), n.selection.restore(); var t = n.selection.blocks(); t.length && s(t[0]).parent().is("td") && n.format.applyStyle("line-height", e.toString()), n.selection.save(); for (var a = 0; a < t.length; a++)s(t[a]).css("line-height", e), "" === s(t[a]).attr("style") && s(t[a]).removeAttr("style"); n.html.unwrap(), n.selection.restore() }, refreshOnShow: function r(e, t) { var a = n.selection.blocks(); if (a.length) { var o = s(a[0]); t.find(".fr-command").each(function () { var e = s(this).data("param1"), t = o.attr("style"), a = 0 <= (t || "").indexOf("line-height: " + e + ";"); if (t) { var n = t.substring(t.indexOf("line-height")), i = n.substr(0, n.indexOf(";")), r = i && i.split(":")[1]; r && r.length || "Default" !== o.text() || (a = !0) } t && -1 !== t.indexOf("line-height") || "" !== e || (a = !0), s(this).toggleClass("fr-active", a).attr("aria-selected", a) }) } } } }, mt.RegisterCommand("lineHeight", { type: "dropdown", html: function () { var e = '<ul class="fr-dropdown-list" role="presentation">', t = this.opts.lineHeights; for (var a in t) t.hasOwnProperty(a) && (e += '<li role="presentation"><a class="fr-command '.concat(a, '" tabIndex="-1" role="option" data-cmd="lineHeight" data-param1="').concat(t[a], '" title="').concat(this.language.translate(a), '">').concat(this.language.translate(a), "</a></li>")); return e += "</ul>" }, title: "Line Height", callback: function (e, t) { this.lineHeight.apply(t) }, refreshOnShow: function (e, t) { this.lineHeight.refreshOnShow(e, t) }, plugin: "lineHeight" }), mt.DefineIcon("lineHeight", { NAME: "arrows-v", FA5NAME: "arrows-alt-v", SVG_KEY: "lineHeight" }), Object.assign(mt.POPUP_TEMPLATES, { "link.edit": "[_BUTTONS_]", "link.insert": "[_BUTTONS_][_INPUT_LAYER_]" }), Object.assign(mt.DEFAULTS, { linkEditButtons: ["linkOpen", "linkStyle", "linkEdit", "linkRemove"], linkInsertButtons: ["linkBack", "|", "linkList"], linkAttributes: {}, linkAutoPrefix: "http://", linkStyles: { "fr-green": "Green", "fr-strong": "Thick" }, linkMultipleStyles: !0, linkConvertEmailAddress: !0, linkAlwaysBlank: !1, linkAlwaysNoFollow: !1, linkNoOpener: !0, linkNoReferrer: !0, linkList: [{ text: "Froala", href: "https://froala.com", target: "_blank" }, { text: "Google", href: "https://google.com", target: "_blank" }, { displayText: "Facebook", href: "https://facebook.com" }], linkText: !0 }), mt.PLUGINS.link = function (u) { var g = u.$; function h() { var e = u.image ? u.image.get() : null; if (e || !u.$wp) return "A" == u.el.tagName ? u.el : e && e.get(0).parentNode && "A" == e.get(0).parentNode.tagName ? e.get(0).parentNode : void 0; var t = u.selection.ranges(0).commonAncestorContainer; try { t && (t.contains && t.contains(u.el) || !u.el.contains(t) || u.el == t) && (t = null) } catch (i) { t = null } if (t && "A" === t.tagName) return t; var a = u.selection.element(), n = u.selection.endElement(); "A" == a.tagName || u.node.isElement(a) || (a = g(a).parentsUntil(u.$el, "a").first().get(0)), "A" == n.tagName || u.node.isElement(n) || (n = g(n).parentsUntil(u.$el, "a").first().get(0)); try { n && (n.contains && n.contains(u.el) || !u.el.contains(n) || u.el == n) && (n = null) } catch (i) { n = null } try { a && (a.contains && a.contains(u.el) || !u.el.contains(a) || u.el == a) && (a = null) } catch (i) { a = null } return n && n == a && "A" == n.tagName ? (u.browser.msie || u.helpers.isMobile()) && (u.selection.info(a).atEnd || u.selection.info(a).atStart) ? null : a : null } function m() { var e, t, a, n, i = u.image ? u.image.get() : null, r = []; if (i) "A" == i.get(0).parentNode.tagName && r.push(i.get(0).parentNode); else if (u.win.getSelection) { var o = u.win.getSelection(); if (o.getRangeAt && o.rangeCount) { n = u.doc.createRange(); for (var s = 0; s < o.rangeCount; ++s)if ((t = (e = o.getRangeAt(s)).commonAncestorContainer) && 1 != t.nodeType && (t = t.parentNode), t && "a" == t.nodeName.toLowerCase()) r.push(t); else { a = t.getElementsByTagName("a"); for (var l = 0; l < a.length; ++l)n.selectNodeContents(a[l]), n.compareBoundaryPoints(e.END_TO_START, e) < 1 && -1 < n.compareBoundaryPoints(e.START_TO_END, e) && r.push(a[l]) } } } else if (u.doc.selection && "Control" != u.doc.selection.type) if ("a" == (t = (e = u.doc.selection.createRange()).parentElement()).nodeName.toLowerCase()) r.push(t); else { a = t.getElementsByTagName("a"), n = u.doc.body.createTextRange(); for (var c = 0; c < a.length; ++c)n.moveToElementText(a[c]), -1 < n.compareEndPoints("StartToEnd", e) && n.compareEndPoints("EndToStart", e) < 1 && r.push(a[c]) } return r } function v(i) { if (u.core.hasFocus()) { if (r(), i && "keyup" === i.type && (i.altKey || i.which == mt.KEYCODE.ALT)) return !0; setTimeout(function () { if (!i || i && (1 == i.which || "mouseup" != i.type)) { var e = h(), t = u.image ? u.image.get() : null; if (e && !t) { if (u.image) { var a = u.node.contents(e); if (1 == a.length && "IMG" == a[0].tagName) { var n = u.selection.ranges(0); return 0 === n.startOffset && 0 === n.endOffset ? g(e).before(mt.MARKERS) : g(e).after(mt.MARKERS), u.selection.restore(), !1 } } i && i.stopPropagation(), o(e) } } }, u.helpers.isIOS() ? 100 : 0) } } function o(e) { var t = u.popups.get("link.edit"); t || (t = function r() { var e = ""; 1 <= u.opts.linkEditButtons.length && ("A" == u.el.tagName && 0 <= u.opts.linkEditButtons.indexOf("linkRemove") && u.opts.linkEditButtons.splice(u.opts.linkEditButtons.indexOf("linkRemove"), 1), e = '<div class="fr-buttons">'.concat(u.button.buildList(u.opts.linkEditButtons), "</div>")); var t = { buttons: e }, a = u.popups.create("link.edit", t); u.$wp && u.events.$on(u.$wp, "scroll.link-edit", function () { h() && u.popups.isVisible("link.edit") && o(h()) }); return a }()); var a = g(e); u.popups.isVisible("link.edit") || u.popups.refresh("link.edit"), u.popups.setContainer("link.edit", u.$sc); var n = a.offset().left + a.outerWidth() / 2, i = a.offset().top + a.outerHeight(); u.popups.show("link.edit", n, i, a.outerHeight(), !0) } function r() { u.popups.hide("link.edit") } function l() { var e = u.popups.get("link.insert"), t = h(); if (t) { var a, n, i = g(t), r = e.find('input.fr-link-attr[type="text"]'), o = e.find('input.fr-link-attr[type="checkbox"]'); for (a = 0; a < r.length; a++)(n = g(r[a])).val(i.attr(n.attr("name") || "")); for (o.attr("checked", !1), a = 0; a < o.length; a++)n = g(o[a]), i.attr(n.attr("name")) == n.data("checked") && n.attr("checked", !0); e.find('input.fr-link-attr[type="text"][name="text"]').val(i.text()) } else e.find('input.fr-link-attr[type="text"]').val(""), e.find('input.fr-link-attr[type="checkbox"]').attr("checked", !1), e.find('input.fr-link-attr[type="text"][name="text"]').val(u.selection.text()); e.find("input.fr-link-attr").trigger("change"), (u.image ? u.image.get() : null) ? e.find('.fr-link-attr[name="text"]').parent().hide() : e.find('.fr-link-attr[name="text"]').parent().show() } function s(e) { if (e) return u.popups.onRefresh("link.insert", l), !0; var t = ""; 1 <= u.opts.linkInsertButtons.length && (t = '<div class="fr-buttons fr-tabs">'.concat(u.button.buildList(u.opts.linkInsertButtons), "</div>")); var a = "", n = 0; for (var i in a = '<div class="fr-link-insert-layer fr-layer fr-active" id="fr-link-insert-layer-'.concat(u.id, '">'), a += '<div class="fr-input-line"><input id="fr-link-insert-layer-url-'.concat(u.id, '" name="href" type="text" class="fr-link-attr" placeholder="').concat(u.language.translate("URL"), '" tabIndex="').concat(++n, '"></div>'), u.opts.linkText && (a += '<div class="fr-input-line"><input id="fr-link-insert-layer-text-'.concat(u.id, '" name="text" type="text" class="fr-link-attr" placeholder="').concat(u.language.translate("Text"), '" tabIndex="').concat(++n, '"></div>')), u.opts.linkAttributes) if (u.opts.linkAttributes.hasOwnProperty(i)) { var r = u.opts.linkAttributes[i]; a += '<div class="fr-input-line"><input name="'.concat(i, '" type="text" class="fr-link-attr" placeholder="').concat(u.language.translate(r), '" tabIndex="').concat(++n, '"></div>') } u.opts.linkAlwaysBlank || (a += '<div class="fr-checkbox-line"><span class="fr-checkbox"><input name="target" class="fr-link-attr" data-checked="_blank" type="checkbox" id="fr-link-target-'.concat(u.id, '" tabIndex="').concat(++n, '"><span>').concat('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z" fill="#FFF"></path></svg>', '</span></span><label id="fr-label-target-').concat(u.id, '">').concat(u.language.translate("Open in new tab"), "</label></div>")); var o = { buttons: t, input_layer: a += '<div class="fr-action-buttons"><button class="fr-command fr-submit" role="button" data-cmd="linkInsert" href="#" tabIndex="'.concat(++n, '" type="button">').concat(u.language.translate("Insert"), "</button></div></div>") }, s = u.popups.create("link.insert", o); return u.$wp && u.events.$on(u.$wp, "scroll.link-insert", function () { (u.image ? u.image.get() : null) && u.popups.isVisible("link.insert") && f(), u.popups.isVisible("link.insert") && d() }), s } function c(e, t, a) { if (void 0 === a && (a = {}), !1 === u.events.trigger("link.beforeInsert", [e, t, a])) return !1; var n = u.image ? u.image.get() : null; n || "A" == u.el.tagName ? "A" == u.el.tagName && u.$el.focus() : (u.selection.restore(), u.popups.hide("link.insert")); var i = e; u.opts.linkConvertEmailAddress && u.helpers.isEmail(e) && !/^mailto:.*/i.test(e) && (e = "mailto:".concat(e)); if ("" === u.opts.linkAutoPrefix || new RegExp("^(" + mt.LinkProtocols.join("|") + "):.", "i").test(e) || /^data:image.*/i.test(e) || /^(https?:|ftps?:|file:|)\/\//i.test(e) || /^([A-Za-z]:(\\){1,2}|[A-Za-z]:((\\){1,2}[^\\]+)+)(\\)?$/i.test(e) || ["/", "{", "[", "#", "(", "."].indexOf((e || "")[0]) < 0 && (e = u.opts.linkAutoPrefix + u.helpers.sanitizeURL(e)), e = u.helpers.sanitizeURL(e), u.opts.linkAlwaysBlank && (a.target = "_blank"), u.opts.linkAlwaysNoFollow && (a.rel = "nofollow"), u.helpers.isEmail(i) && (a.target = null, a.rel = null), "_blank" == a.target ? (u.opts.linkNoOpener && (a.rel ? a.rel += " noopener" : a.rel = "noopener"), u.opts.linkNoReferrer && (a.rel ? a.rel += " noreferrer" : a.rel = "noreferrer")) : null == a.target && (a.rel ? a.rel = a.rel.replace(/noopener/, "").replace(/noreferrer/, "") : a.rel = null), t = t || "", e === u.opts.linkAutoPrefix) return u.popups.get("link.insert").find('input[name="href"]').addClass("fr-error"), u.events.trigger("link.bad", [i]), !1; var r, o = h(); if (o) { if ((r = g(o)).attr("href", e), 0 < t.length && r.text() != t && !n) { for (var s = r.get(0); 1 === s.childNodes.length && s.childNodes[0].nodeType == Node.ELEMENT_NODE;)s = s.childNodes[0]; g(s).text(t) } for (var l in n || r.prepend(mt.START_MARKER).append(mt.END_MARKER), a) a[l] ? r.attr(l, a[l]) : r.removeAttr(l); n || u.selection.restore() } else { n ? (n.wrap('<a href="'.concat(e, '"></a>')), u.image.hasCaption() && n.parent().append(n.parents(".fr-img-caption").find(".fr-inner"))) : (u.format.remove("a"), u.selection.isCollapsed() ? (t = 0 === t.length ? i : t, u.html.insert('<a href="'.concat(e, '">').concat(mt.START_MARKER).concat(t.replace(/&/g, "&amp;").replace(/</, "&lt;", ">", "&gt;")).concat(mt.END_MARKER, "</a>")), u.selection.restore()) : 0 < t.length && t != u.selection.text().replace(/\n/g, "") ? (u.selection.remove(), u.html.insert('<a href="'.concat(e, '">').concat(mt.START_MARKER).concat(t.replace(/&/g, "&amp;")).concat(mt.END_MARKER, "</a>")), u.selection.restore()) : (!function p() { if (!u.selection.isCollapsed()) { u.selection.save(); for (var e = u.$el.find(".fr-marker").addClass("fr-unprocessed").toArray(); e.length;) { var t = g(e.pop()); t.removeClass("fr-unprocessed"); var a = u.node.deepestParent(t.get(0)); if (a) { for (var n = t.get(0), i = "", r = ""; n = n.parentNode, u.node.isBlock(n) || (i += u.node.closeTagString(n), r = u.node.openTagString(n) + r), n != a;); var o = u.node.openTagString(t.get(0)) + t.html() + u.node.closeTagString(t.get(0)); t.replaceWith('<span id="fr-break"></span>'); var s = a.outerHTML; s = (s = s.replace(/<span id="fr-break"><\/span>/g, i + o + r)).replace(r + i, ""), a.outerHTML = s } e = u.$el.find(".fr-marker.fr-unprocessed").toArray() } u.html.cleanEmptyTags(), u.selection.restore() } }(), u.format.apply("a", { href: e }))); for (var c = m(), d = 0; d < c.length; d++)(r = g(c[d])).attr(a), r.removeAttr("_moz_dirty"); 1 == c.length && u.$wp && !n && (g(c[0]).prepend(mt.START_MARKER).append(mt.END_MARKER), u.selection.restore()) } if (n) { var f = u.popups.get("link.insert"); f && f.find("input:focus").blur(), u.image.edit(n) } else v() } function d() { r(); var e = h(); if (e) { var t = u.popups.get("link.insert"); t || (t = s()), u.popups.isVisible("link.insert") || (u.popups.refresh("link.insert"), u.selection.save(), u.helpers.isMobile() && (u.events.disableBlur(), u.$el.blur(), u.events.enableBlur())), u.popups.setContainer("link.insert", u.$sc); var a = (u.image ? u.image.get() : null) || g(e), n = a.offset().left + a.outerWidth() / 2, i = a.offset().top + a.outerHeight(); u.popups.show("link.insert", n, i, a.outerHeight(), !0) } } function f() { var e = u.image ? u.image.getEl() : null; if (e) { var t = u.popups.get("link.insert"); u.image.hasCaption() && (e = e.find(".fr-img-wrap")), t || (t = s()), l(), u.popups.setContainer("link.insert", u.$sc); var a = e.offset().left + e.outerWidth() / 2, n = e.offset().top + e.outerHeight(); u.popups.show("link.insert", a, n, e.outerHeight(), !0) } } return { _init: function e() { u.events.on("keyup", function (e) { e.which != mt.KEYCODE.ESC && v(e) }), u.events.on("window.mouseup", v), u.events.$on(u.$el, "click", "a", function (e) { u.edit.isDisabled() && e.preventDefault() }), u.helpers.isMobile() && u.events.$on(u.$doc, "selectionchange", v), s(!0), "A" == u.el.tagName && u.$el.addClass("fr-view"), u.events.on("toolbar.esc", function () { if (u.popups.isVisible("link.edit")) return u.events.disableBlur(), u.events.focus(), !1 }, !0) }, remove: function a() { var e = h(), t = u.image ? u.image.get() : null; if (!1 === u.events.trigger("link.beforeRemove", [e])) return !1; t && e ? (t.unwrap(), u.image.edit(t)) : e && (u.selection.save(), g(e).replaceWith(g(e).html()), u.selection.restore(), r()) }, showInsertPopup: function p() { var e = u.$tb.find('.fr-command[data-cmd="insertLink"]'), t = u.popups.get("link.insert"); if (t || (t = s()), !t.hasClass("fr-active")) if (u.popups.refresh("link.insert"), u.popups.setContainer("link.insert", u.$tb || u.$sc), e.isVisible()) { var a = u.button.getPosition(e), n = a.left, i = a.top; u.popups.show("link.insert", n, i, e.outerHeight()) } else u.position.forSelection(t), u.popups.show("link.insert") }, usePredefined: function b(e) { var t, a, n = u.opts.linkList[e], i = u.popups.get("link.insert"), r = i.find('input.fr-link-attr[type="text"]'), o = i.find('input.fr-link-attr[type="checkbox"]'); for (n.rel && (i.rel = n.rel), a = 0; a < r.length; a++)n[(t = g(r[a])).attr("name")] ? (t.val(n[t.attr("name")]), t.toggleClass("fr-not-empty", !0)) : "text" != t.attr("name") && t.val(""); for (a = 0; a < o.length; a++)(t = g(o[a])).attr("checked", t.data("checked") == n[t.attr("name")]); u.accessibility.focusPopup(i) }, insertCallback: function E() { var e, t, a = u.popups.get("link.insert"), n = a.find('input.fr-link-attr[type="text"]'), i = a.find('input.fr-link-attr[type="checkbox"]'), r = (n.filter('[name="href"]').val() || "").trim(), o = n.filter('[name="text"]').val(), s = {}; for (t = 0; t < n.length; t++)e = g(n[t]), ["href", "text"].indexOf(e.attr("name")) < 0 && (s[e.attr("name")] = e.val()); for (t = 0; t < i.length; t++)(e = g(i[t])).is(":checked") ? s[e.attr("name")] = e.data("checked") : s[e.attr("name")] = e.data("unchecked") || null; a.rel && (s.rel = a.rel); var l = u.helpers.scrollTop(); c(r, o, s), g(u.o_win).scrollTop(l) }, insert: c, update: d, get: h, allSelected: m, back: function t() { u.image && u.image.get() ? u.image.back() : (u.events.disableBlur(), u.selection.restore(), u.events.enableBlur(), h() && u.$wp ? (u.selection.restore(), r(), v()) : "A" == u.el.tagName ? (u.$el.focus(), v()) : (u.popups.hide("link.insert"), u.toolbar.showInline())) }, imageLink: f, applyStyle: function A(e, t, a) { void 0 === a && (a = u.opts.linkMultipleStyles), void 0 === t && (t = u.opts.linkStyles); var n = h(); if (!n) return !1; if (!a) { var i = Object.keys(t); i.splice(i.indexOf(e), 1), g(n).removeClass(i.join(" ")) } g(n).toggleClass(e), v() } } }, mt.DefineIcon("insertLink", { NAME: "link", SVG_KEY: "insertLink" }), mt.RegisterShortcut(mt.KEYCODE.K, "insertLink", null, "K"), mt.RegisterCommand("insertLink", { title: "Insert Link", undo: !1, focus: !0, refreshOnCallback: !1, popup: !0, callback: function () { this.popups.isVisible("link.insert") ? (this.$el.find(".fr-marker").length && (this.events.disableBlur(), this.selection.restore()), this.popups.hide("link.insert")) : this.link.showInsertPopup() }, plugin: "link" }), mt.DefineIcon("linkOpen", { NAME: "external-link", FA5NAME: "external-link-alt", SVG_KEY: "openLink" }), mt.RegisterCommand("linkOpen", { title: "Open Link", undo: !1, refresh: function (e) { this.link.get() ? e.removeClass("fr-hidden") : e.addClass("fr-hidden") }, callback: function () { var e = this.link.get(); e && (-1 !== e.href.indexOf("mailto:") ? this.o_win.open(e.href).close() : (e.target || (e.target = "_self"), this.browser.msie || this.browser.edge ? this.o_win.open(e.href, e.target) : this.o_win.open(e.href, e.target, "noopener")), this.popups.hide("link.edit")) }, plugin: "link" }), mt.DefineIcon("linkEdit", { NAME: "edit", SVG_KEY: "edit" }), mt.RegisterCommand("linkEdit", { title: "Edit Link", undo: !1, refreshAfterCallback: !1, popup: !0, callback: function () { this.link.update() }, refresh: function (e) { this.link.get() ? e.removeClass("fr-hidden") : e.addClass("fr-hidden") }, plugin: "link" }), mt.DefineIcon("linkRemove", { NAME: "unlink", SVG_KEY: "unlink" }), mt.RegisterCommand("linkRemove", { title: "Unlink", callback: function () { this.link.remove() }, refresh: function (e) { this.link.get() ? e.removeClass("fr-hidden") : e.addClass("fr-hidden") }, plugin: "link" }), mt.DefineIcon("linkBack", { NAME: "arrow-left", SVG_KEY: "back" }), mt.RegisterCommand("linkBack", { title: "Back", undo: !1, focus: !1, back: !0, refreshAfterCallback: !1, callback: function () { this.link.back() }, refresh: function (e) { var t = this.link.get() && this.doc.hasFocus(); (this.image ? this.image.get() : null) || t || this.opts.toolbarInline ? (e.removeClass("fr-hidden"), e.next(".fr-separator").removeClass("fr-hidden")) : (e.addClass("fr-hidden"), e.next(".fr-separator").addClass("fr-hidden")) }, plugin: "link" }), mt.DefineIcon("linkList", { NAME: "search", SVG_KEY: "search" }), mt.RegisterCommand("linkList", { title: "Choose Link", type: "dropdown", focus: !1, undo: !1, refreshAfterCallback: !1, html: function () { for (var e = '<ul class="fr-dropdown-list" role="presentation">', t = this.opts.linkList, a = 0; a < t.length; a++)e += '<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkList" data-param1="'.concat(a, '">').concat(t[a].displayText || t[a].text, "</a></li>"); return e += "</ul>" }, callback: function (e, t) { this.link.usePredefined(t) }, plugin: "link" }), mt.RegisterCommand("linkInsert", { focus: !1, refreshAfterCallback: !1, callback: function () { this.link.insertCallback() }, refresh: function (e) { this.link.get() ? e.text(this.language.translate("Update")) : e.text(this.language.translate("Insert")) }, plugin: "link" }), mt.DefineIcon("imageLink", { NAME: "link", SVG_KEY: "insertLink" }), mt.RegisterCommand("imageLink", { title: "Insert Link", undo: !1, focus: !1, popup: !0, callback: function () { this.link.imageLink() }, refresh: function (e) { var t; this.link.get() ? ((t = e.prev()).hasClass("fr-separator") && t.removeClass("fr-hidden"), e.addClass("fr-hidden")) : ((t = e.prev()).hasClass("fr-separator") && t.addClass("fr-hidden"), e.removeClass("fr-hidden")) }, plugin: "link" }), mt.DefineIcon("linkStyle", { NAME: "magic", SVG_KEY: "linkStyles" }), mt.RegisterCommand("linkStyle", { title: "Style", type: "dropdown", html: function () { var e = '<ul class="fr-dropdown-list" role="presentation">', t = this.opts.linkStyles; for (var a in t) t.hasOwnProperty(a) && (e += '<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkStyle" data-param1="'.concat(a, '">').concat(this.language.translate(t[a]), "</a></li>")); return e += "</ul>" }, callback: function (e, t) { this.link.applyStyle(t) }, refreshOnShow: function (e, t) { var a = this.$, n = this.link.get(); if (n) { var i = a(n); t.find(".fr-command").each(function () { var e = a(this).data("param1"), t = i.hasClass(e); a(this).toggleClass("fr-active", t).attr("aria-selected", t) }) } }, refresh: function (e) { this.link.get() ? e.removeClass("fr-hidden") : e.addClass("fr-hidden") }, plugin: "link" }), Object.assign(mt.DEFAULTS, { listAdvancedTypes: !0 }), mt.PLUGINS.lists = function (f) { var p = f.$; function u(e) { return '<span class="fr-open-'.concat(e.toLowerCase(), '"></span>') } function g(e) { return '<span class="fr-close-'.concat(e.toLowerCase(), '"></span>') } function r(e, t) { !function c(e, t) { for (var a = [], n = 0; n < e.length; n++) { var i = e[n].parentNode; "LI" == e[n].tagName && i.tagName != t && a.indexOf(i) < 0 && a.push(i) } for (var r = a.length - 1; 0 <= r; r--) { var o = p(a[r]); o.replaceWith("<".concat(t.toLowerCase(), " ").concat(f.node.attributes(o.get(0)), ">").concat(o.html(), "</").concat(t.toLowerCase(), ">")) } }(e, t); var a, n = f.html.defaultTag(), i = null; e.length && (a = "rtl" == f.opts.direction || "rtl" == p(e[0]).css("direction") ? "margin-right" : "margin-left"); for (var r = 0; r < e.length; r++)if ("TD" != e[r].tagName && "TH" != e[r].tagName && "LI" != e[r].tagName) { var o = f.helpers.getPX(p(e[r]).css(a)) || 0; (e[r].style.marginLeft = null) === i && (i = o); var s = 0 < i ? "<".concat(t, ' style="').concat(a, ": ").concat(i, 'px ">') : "<".concat(t, ">"), l = "</".concat(t, ">"); for (o -= i; 0 < o / f.opts.indentMargin;)s += "</".concat(t, ">"), l += l, o -= f.opts.indentMargin; n && e[r].tagName.toLowerCase() == n ? p(e[r]).replaceWith("".concat(s, "<li").concat(f.node.attributes(e[r]), ">").concat(p(e[r]).html(), "</li>").concat(l)) : p(e[r]).wrap("".concat(s, "<li></li>").concat(l)) } f.clean.lists() } function o(e) { var t, a; for (t = e.length - 1; 0 <= t; t--)for (a = t - 1; 0 <= a; a--)if (p(e[a]).find(e[t]).length || e[a] == e[t]) { e.splice(t, 1); break } var n = []; for (t = 0; t < e.length; t++) { var i = p(e[t]), r = e[t].parentNode, o = i.attr("class"); if (i.before(g(r.tagName)), "LI" == r.parentNode.tagName) i.before(g("LI")), i.after(u("LI")); else { var s = ""; o && (s += ' class="'.concat(o, '"')); var l = "rtl" == f.opts.direction || "rtl" == i.css("direction") ? "margin-right" : "margin-left"; f.helpers.getPX(p(r).css(l)) && 0 <= (p(r).attr("style") || "").indexOf("".concat(l, ":")) && (s += ' style="'.concat(l, ":").concat(f.helpers.getPX(p(r).css(l)), 'px;"')), f.html.defaultTag() && 0 === i.find(f.html.blockTagsQuery()).length && i.wrapInner(f.html.defaultTag() + s), f.node.isEmpty(i.get(0), !0) || 0 !== i.find(f.html.blockTagsQuery()).length || i.append("<br>"), i.append(u("LI")), i.prepend(g("LI")) } i.after(u(r.tagName)), "LI" == r.parentNode.tagName && (r = r.parentNode.parentNode), n.indexOf(r) < 0 && n.push(r) } for (t = 0; t < n.length; t++) { var c = p(n[t]), d = c.html(); d = (d = d.replace(/<span class="fr-close-([a-z]*)"><\/span>/g, "</$1>")).replace(/<span class="fr-open-([a-z]*)"><\/span>/g, "<$1>"), c.replaceWith(f.node.openTagString(c.get(0)) + d + f.node.closeTagString(c.get(0))) } f.$el.find("li:empty").remove(), f.$el.find("ul:empty, ol:empty").remove(), f.clean.lists(), f.html.wrap() } function s(e) { f.selection.save(); for (var t = 0; t < e.length; t++) { var a = e[t].previousSibling; if (a) { var n = p(e[t]).find("> ul, > ol").last().get(0); if (n) { var i = p(document.createElement("li")); p(n).prepend(i); for (var r = f.node.contents(e[t])[0]; r && !f.node.isList(r);) { var o = r.nextSibling; i.append(r), r = o } p(a).append(p(n)), p(e[t]).remove() } else { var s = p(a).find("> ul, > ol").last().get(0); if (s) p(s).append(p(e[t])); else { var l = p("<".concat(e[t].parentNode.tagName, ">")); p(a).append(l), l.append(p(e[t])) } } } } f.clean.lists(), f.selection.restore() } function l(e) { f.selection.save(), o(e), f.selection.restore() } function e(e) { if ("indent" == e || "outdent" == e) { var t = !1, a = f.selection.blocks(), n = [], i = a[0].previousSibling || a[0].parentElement; if ("outdent" == e) { if ("LI" == i.tagName || "LI" != i.parentNode.tagName) return } else if (!a[0].previousSibling || "LI" != a[0].previousSibling.tagName) return; for (var r = 0; r < a.length; r++)"LI" == a[r].tagName ? (t = !0, n.push(a[r])) : "LI" == a[r].parentNode.tagName && (t = !0, n.push(a[r].parentNode)); t && ("indent" == e ? s(n) : l(n)) } } return { _init: function t() { f.events.on("commands.after", e), f.events.on("keydown", function (e) { if (e.which == mt.KEYCODE.TAB) { for (var t = f.selection.blocks(), a = [], n = 0; n < t.length; n++)"LI" == t[n].tagName ? a.push(t[n]) : "LI" == t[n].parentNode.tagName && a.push(t[n].parentNode); if (1 < a.length || a.length && (f.selection.info(a[0]).atStart || f.node.isEmpty(a[0]))) return e.preventDefault(), e.stopPropagation(), e.shiftKey ? l(a) : s(a), !1 } }, !0) }, format: function c(e, t) { var a, n; for (f.html.syncInputs(), f.selection.save(), f.html.wrap(!0, !0, !0, !0), f.selection.restore(), n = f.selection.blocks(), a = 0; a < n.length; a++)"LI" != n[a].tagName && "LI" == n[a].parentNode.tagName && (n[a] = n[a].parentNode); if (f.selection.save(), function i(e, t) { for (var a = !0, n = 0; n < e.length; n++) { if ("LI" != e[n].tagName) return !1; e[n].parentNode.tagName != t && (a = !1) } return a }(n, e) ? t || o(n) : r(n, e), f.html.unwrap(), f.selection.restore(), t = t || "default") { for (n = f.selection.blocks(), a = 0; a < n.length; a++)"LI" != n[a].tagName && "LI" == n[a].parentNode.tagName && (n[a] = n[a].parentNode); for (a = 0; a < n.length; a++)"LI" == n[a].tagName && (p(n[a].parentNode).css("list-style-type", "default" === t ? "" : t), 0 === (p(n[a].parentNode).attr("style") || "").length && p(n[a].parentNode).removeAttr("style")) } }, refresh: function i(e, t) { var a = p(f.selection.element()); if (a.get(0) != f.el) { var n = a.get(0); (n = "LI" != n.tagName && n.firstElementChild && "LI" != n.firstElementChild.tagName ? a.parents("li").get(0) : "LI" == n.tagName || n.firstElementChild ? n.firstElementChild && "LI" == n.firstElementChild.tagName ? a.get(0).firstChild : a.get(0) : a.parents("li").get(0)) && n.parentNode.tagName == t && f.el.contains(n.parentNode) && e.addClass("fr-active") } } } }, mt.DefineIcon("formatOLSimple", { NAME: "list-ol", SVG_KEY: "orderedList" }), mt.RegisterCommand("formatOLSimple", { title: "Ordered List", type: "button", options: { "default": "Default", circle: "Circle", disc: "Disc", square: "Square" }, refresh: function (e) { this.lists.refresh(e, "OL") }, callback: function (e, t) { this.lists.format("OL", t) }, plugin: "lists" }), mt.RegisterCommand("formatUL", { title: "Unordered List", type: "button", hasOptions: function () { return this.opts.listAdvancedTypes }, options: { "default": "Default", circle: "Circle", disc: "Disc", square: "Square" }, refresh: function (e) { this.lists.refresh(e, "UL") }, callback: function (e, t) { this.lists.format("UL", t) }, plugin: "lists" }), mt.RegisterCommand("formatOL", { title: "Ordered List", hasOptions: function () { return this.opts.listAdvancedTypes }, options: { "default": "Default", "lower-alpha": "Lower Alpha", "lower-greek": "Lower Greek", "lower-roman": "Lower Roman", "upper-alpha": "Upper Alpha", "upper-roman": "Upper Roman" }, refresh: function (e) { this.lists.refresh(e, "OL") }, callback: function (e, t) { this.lists.format("OL", t) }, plugin: "lists" }), mt.DefineIcon("formatUL", { NAME: "list-ul", SVG_KEY: "unorderedList" }), mt.DefineIcon("formatOL", { NAME: "list-ol", SVG_KEY: "orderedList" }), Object.assign(mt.DEFAULTS, { paragraphFormat: { N: "Normal", H1: "Heading 1", H2: "Heading 2", H3: "Heading 3", H4: "Heading 4", PRE: "Code" }, paragraphFormatSelection: !1, paragraphDefaultSelection: "Paragraph Format" }), mt.PLUGINS.paragraphFormat = function (p) { var u = p.$; function g(e, t) { var a = p.html.defaultTag(); if (t && t.toLowerCase() != a) if (0 < e.find("ul, ol").length) { var n = u("<" + t + ">"); e.prepend(n); for (var i = p.node.contents(e.get(0))[0]; i && ["UL", "OL"].indexOf(i.tagName) < 0;) { var r = i.nextSibling; n.append(i), i = r } } else e.html("<" + t + ">" + e.html() + "</" + t + ">") } return { apply: function h(e) { "N" == e && (e = p.html.defaultTag()), p.selection.save(), p.html.wrap(!0, !0, !p.opts.paragraphFormat.BLOCKQUOTE, !0, !0), p.selection.restore(); var t, a, n, i, r, o, s, l, c = p.selection.blocks(); p.selection.save(), p.$el.find("pre").attr("skip", !0); for (var d = 0; d < c.length; d++)if (c[d].tagName != e && !p.node.isList(c[d])) { var f = u(c[d]); "LI" == c[d].tagName ? g(f, e) : "LI" == c[d].parentNode.tagName && c[d] ? (o = f, s = e, l = p.html.defaultTag(), s && s.toLowerCase() != l || (s = 'div class="fr-temp-div"'), o.replaceWith(u("<" + s + ">").html(o.html()))) : 0 <= ["TD", "TH"].indexOf(c[d].parentNode.tagName) ? (n = f, i = e, r = p.html.defaultTag(), i || (i = 'div class="fr-temp-div"' + (p.node.isEmpty(n.get(0), !0) ? ' data-empty="true"' : "")), i.toLowerCase() == r ? (p.node.isEmpty(n.get(0), !0) || n.append("<br/>"), n.replaceWith(n.html())) : n.replaceWith(u("<" + i + ">").html(n.html()))) : (t = f, (a = e) || (a = 'div class="fr-temp-div"' + (p.node.isEmpty(t.get(0), !0) ? ' data-empty="true"' : "")), "H1" != a && "H2" != a && "H3" != a && "H4" != a && "H5" != a || !p.node.attributes(t.get(0)).includes("font-size:") ? t.replaceWith(u("<" + a + " " + p.node.attributes(t.get(0)) + ">").html(t.html()).removeAttr("data-empty")) : t.replaceWith(u("<" + a + " " + p.node.attributes(t.get(0)).replace(/font-size:[0-9]+px;?/, "") + ">").html(t.html()).removeAttr("data-empty"))) } p.$el.find('pre:not([skip="true"]) + pre:not([skip="true"])').each(function () { u(this).prev().append("<br>" + u(this).html()), u(this).remove() }), p.$el.find("pre").removeAttr("skip"), p.html.unwrap(), p.selection.restore() }, refreshOnShow: function o(e, t) { var a = p.selection.blocks(); if (a.length) { var n = a[0], i = "N", r = p.html.defaultTag(); n.tagName.toLowerCase() != r && n != p.el && (i = n.tagName), t.find('.fr-command[data-param1="' + i + '"]').addClass("fr-active").attr("aria-selected", !0) } else t.find('.fr-command[data-param1="N"]').addClass("fr-active").attr("aria-selected", !0) }, refresh: function r(e) { if (p.opts.paragraphFormatSelection) { var t = p.selection.blocks(); if (t.length) { var a = t[0], n = "N", i = p.html.defaultTag(); a.tagName.toLowerCase() != i && a != p.el && (n = a.tagName), 0 <= ["LI", "TD", "TH"].indexOf(n) && (n = "N"), e.find(">span").text(p.language.translate(p.opts.paragraphFormat[n])) } else e.find(">span").text(p.language.translate(p.opts.paragraphFormat.N)) } } } }, mt.RegisterCommand("paragraphFormat", { type: "dropdown", displaySelection: function (e) { return e.opts.paragraphFormatSelection }, defaultSelection: function (e) { return e.language.translate(e.opts.paragraphDefaultSelection) }, displaySelectionWidth: 80, html: function () { var e = '<ul class="fr-dropdown-list" role="presentation">', t = this.opts.paragraphFormat; for (var a in t) if (t.hasOwnProperty(a)) { var n = this.shortcuts.get("paragraphFormat." + a); n = n ? '<span class="fr-shortcut">' + n + "</span>" : "", e += '<li role="presentation"><' + ("N" == a ? this.html.defaultTag() || "DIV" : a) + ' style="padding: 0 !important; margin: 0 !important;" role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="paragraphFormat" data-param1="' + a + '" title="' + this.language.translate(t[a]) + '">' + this.language.translate(t[a]) + "</a></" + ("N" == a ? this.html.defaultTag() || "DIV" : a) + "></li>" } return e += "</ul>" }, title: "Paragraph Format", callback: function (e, t) { this.paragraphFormat.apply(t) }, refresh: function (e) { this.paragraphFormat.refresh(e) }, refreshOnShow: function (e, t) { this.paragraphFormat.refreshOnShow(e, t) }, plugin: "paragraphFormat" }), mt.DefineIcon("paragraphFormat", { NAME: "paragraph", SVG_KEY: "paragraphFormat" }), Object.assign(mt.DEFAULTS, { paragraphStyles: { "fr-text-gray": "Gray", "fr-text-bordered": "Bordered", "fr-text-spaced": "Spaced", "fr-text-uppercase": "Uppercase" }, paragraphMultipleStyles: !0 }), mt.PLUGINS.paragraphStyle = function (s) { var l = s.$; return { _init: function e() { }, apply: function c(e, t, a) { void 0 === t && (t = s.opts.paragraphStyles), void 0 === a && (a = s.opts.paragraphMultipleStyles); var n = ""; a || ((n = Object.keys(t)).splice(n.indexOf(e), 1), n = n.join(" ")), s.selection.save(), s.html.wrap(!0, !0, !0, !0), s.selection.restore(); var i = s.selection.blocks(); s.selection.save(); for (var r = l(i[0]).hasClass(e), o = 0; o < i.length; o++)l(i[o]).removeClass(n).toggleClass(e, !r), l(i[o]).hasClass("fr-temp-div") && l(i[o]).removeClass("fr-temp-div"), "" === l(i[o]).attr("class") && l(i[o]).removeAttr("class"); s.html.unwrap(), s.selection.restore() }, refreshOnShow: function i(e, t) { var a = s.selection.blocks(); if (a.length) { var n = l(a[0]); t.find(".fr-command").each(function () { var e = l(this).data("param1"), t = n.hasClass(e); l(this).toggleClass("fr-active", t).attr("aria-selected", t) }) } } } }, mt.RegisterCommand("paragraphStyle", { type: "dropdown", html: function () { var e = '<ul class="fr-dropdown-list" role="presentation">', t = this.opts.paragraphStyles; for (var a in t) t.hasOwnProperty(a) && (e += '<li role="presentation"><a class="fr-command '.concat(a, '" tabIndex="-1" role="option" data-cmd="paragraphStyle" data-param1="').concat(a, '" title="').concat(this.language.translate(t[a]), '">').concat(this.language.translate(t[a]), "</a></li>")); return e += "</ul>" }, title: "Paragraph Style", callback: function (e, t) { this.paragraphStyle.apply(t) }, refreshOnShow: function (e, t) { this.paragraphStyle.refreshOnShow(e, t) }, plugin: "paragraphStyle" }), mt.DefineIcon("paragraphStyle", { NAME: "magic", SVG_KEY: "paragraphStyle" }), Object.assign(mt.DEFAULTS, { html2pdf: window.html2pdf }), mt.PLUGINS.print = function (l) { return { run: function e() { !function s(e) { var t = l.html.get(), a = null; l.shared.print_iframe ? a = l.shared.print_iframe : ((a = document.createElement("iframe")).name = "fr-print", a.style.position = "fixed", a.style.top = "0", a.style.left = "-9999px", a.style.height = "100%", a.style.width = "0", a.style.overflow = "hidden", a.style["z-index"] = "2147483647", a.style.tabIndex = "-1", l.events.on("shared.destroy", function () { a.remove() }), l.shared.print_iframe = a); try { document.body.removeChild(a) } catch (o) { } document.body.appendChild(a); var n = function n() { e(), a.removeEventListener("load", n) }; a.addEventListener("load", n); var i = a.contentWindow; i.document.open(), i.document.write("<!DOCTYPE html><html " + (l.opts.documentReady ? 'style="margin: 0; padding: 0;"' : "") + "><head><title>" + document.title + "</title>"), Array.prototype.forEach.call(document.querySelectorAll("style"), function (e) { e = e.cloneNode(!0), i.document.write(e.outerHTML) }); var r = document.querySelectorAll("link[rel=stylesheet]"); Array.prototype.forEach.call(r, function (e) { var t = document.createElement("link"); t.rel = e.rel, t.href = e.href, t.media = "print", t.type = "text/css", t.media = "all", i.document.write(t.outerHTML) }), i.document.write('</head><body style="height:auto;text-align: ' + ("rtl" == l.opts.direction ? "right" : "left") + "; direction: " + l.opts.direction + "; " + (l.opts.documentReady ? " padding: 2cm; width: 17cm; margin: 0;" : "") + '"><div class="fr-view">'), i.document.write(t), i.document.write("</div></body></html>"), i.document.close() }(function () { setTimeout(function () { l.events.disableBlur(), window.frames["fr-print"].focus(), window.frames["fr-print"].print(), l.$win.get(0).focus(), l.events.disableBlur(), l.events.focus() }, 0) }) }, toPDF: function t() { l.opts.html2pdf && (l.$el.css("text-align", "left"), l.opts.html2pdf().set({ margin: [10, 20], html2canvas: { useCORS: !0 } }).from(l.el).save(), setTimeout(function () { l.$el.css("text-align", "") }, 100)) } } }, mt.DefineIcon("print", { NAME: "print", SVG_KEY: "print" }), mt.RegisterCommand("print", { title: "Print", undo: !1, focus: !1, plugin: "print", callback: function () { this.print.run() } }), mt.DefineIcon("getPDF", { NAME: "file-pdf-o", FA5NAME: "file-pdf", SVG_KEY: "pdfExport" }), mt.RegisterCommand("getPDF", { title: "Download PDF", type: "button", focus: !1, undo: !1, callback: function () { this.print.toPDF() } }), Object.assign(mt.DEFAULTS, { quickInsertButtons: ["image", "video", "embedly", "table", "ul", "ol", "hr"], quickInsertTags: ["p", "div", "h1", "h2", "h3", "h4", "h5", "h6", "pre", "blockquote"], quickInsertEnabled: !0 }), mt.QUICK_INSERT_BUTTONS = {}, mt.DefineIcon("quickInsert", { SVG_KEY: "add", template: "svg" }), mt.RegisterQuickInsertButton = function (e, t) { mt.QUICK_INSERT_BUTTONS[e] = Object.assign({ undo: !0 }, t) }, mt.RegisterQuickInsertButton("image", { icon: "insertImage", requiredPlugin: "image", title: "Insert Image", undo: !1, callback: function () { var e = this, t = e.$; e.shared.$qi_image_input || (e.shared.$qi_image_input = t(document.createElement("input")).attr("accept", "image/" + e.opts.imageAllowedTypes.join(", image/").toLowerCase()).attr("name", "quickInsertImage".concat(this.id)).attr("style", "display: none;").attr("type", "file"), t("body").first().append(e.shared.$qi_image_input), e.events.$on(e.shared.$qi_image_input, "change", function () { var e = t(this).data("inst"); this.files && (e.quickInsert.hide(), e.image.upload(this.files)), t(this).val("") }, !0)), e.$qi_image_input = e.shared.$qi_image_input, e.helpers.isMobile() && e.selection.save(), e.events.disableBlur(), e.$qi_image_input.data("inst", e)[0].click() } }), mt.RegisterQuickInsertButton("video", { icon: "insertVideo", requiredPlugin: "video", title: "Insert Video", undo: !1, callback: function () { var e = prompt(this.language.translate("Paste the URL of the video you want to insert.")); e && this.video.insertByURL(e) } }), mt.RegisterQuickInsertButton("embedly", { icon: "embedly", requiredPlugin: "embedly", title: "Embed URL", undo: !1, callback: function () { var e = prompt(this.language.translate("Paste the URL of any web content you want to insert.")); e && this.embedly.add(e) } }), mt.RegisterQuickInsertButton("table", { icon: "insertTable", requiredPlugin: "table", title: "Insert Table", callback: function () { this.table.insert(2, 2) } }), mt.RegisterQuickInsertButton("ol", { icon: "formatOL", requiredPlugin: "lists", title: "Ordered List", callback: function () { this.lists.format("OL") } }), mt.RegisterQuickInsertButton("ul", { icon: "formatUL", requiredPlugin: "lists", title: "Unordered List", callback: function () { this.lists.format("UL") } }), mt.RegisterQuickInsertButton("hr", { icon: "insertHR", title: "Insert Horizontal Line", callback: function () { this.commands.insertHR() } }), mt.PLUGINS.quickInsert = function (o) { var s, l, c = o.$; function a(e) { var t, a, n; (t = e.offset().top - o.$box.offset().top, a = (o.$iframe && o.$iframe.offset().left || 0) + e.offset().left < s.outerWidth() ? e.offset().left + s.outerWidth() : 0 - s.outerWidth(), o.opts.enter != mt.ENTER_BR) ? n = (s.outerHeight() - e.outerHeight()) / 2 : (c(document.createElement("span")).html(mt.INVISIBLE_SPACE).insertAfter(e), n = (s.outerHeight() - e.next().outerHeight()) / 2, e.next().remove()); if (o.opts.iframe) { var i = o.helpers.getPX(o.$wp.find(".fr-iframe").css("padding-top")); t += o.$iframe.offset().top + i } s.hasClass("fr-on") && 0 <= t && l.css("top", t - n), 0 <= t && t - Math.abs(n) <= o.$box.outerHeight() - e.outerHeight() ? (s.hasClass("fr-hidden") && (s.hasClass("fr-on") && d(), s.removeClass("fr-hidden")), s.css("top", t - n)) : s.hasClass("fr-visible") && (s.addClass("fr-hidden"), f()), s.css("left", a) } function i(e) { s || function t() { o.shared.$quick_insert || (o.shared.$quick_insert = c(document.createElement("div")).attr("class", "fr-quick-insert").html('<a class="fr-floating-btn" role="button" tabIndex="-1" title="'.concat(o.language.translate("Quick Insert"), '">').concat(o.icon.create("quickInsert"), "</a>"))); s = o.shared.$quick_insert, o.tooltip.bind(o.$box, ".fr-quick-insert > a.fr-floating-btn"), o.events.on("destroy", function () { c("body").first().append(s.removeClass("fr-on")), l && (f(), c("body").first().append(l.css("left", -9999).css("top", -9999))) }, !0), o.events.on("shared.destroy", function () { s.html("").removeData().remove(), s = null, l && (l.html("").removeData().remove(), l = null) }, !0), o.events.on("commands.before", r), o.events.on("commands.after", function () { o.popups.areVisible() || n() }), o.events.bindClick(o.$box, ".fr-quick-insert > a", d), o.events.bindClick(o.$box, ".fr-qi-helper > a.fr-btn", function (e) { var t = c(e.currentTarget).data("cmd"); if (!1 === o.events.trigger("quickInsert.commands.before", [t])) return !1; mt.QUICK_INSERT_BUTTONS[t].callback.apply(o, [e.currentTarget]), mt.QUICK_INSERT_BUTTONS[t].undo && o.undo.saveStep(), o.events.trigger("quickInsert.commands.after", [t]), o.quickInsert.hide() }), o.events.$on(o.$wp, "scroll", p), o.events.$on(o.$tb, "transitionend", ".fr-more-toolbar", p) }(), s.hasClass("fr-on") && f(), o.$box.append(s), a(e), s.data("tag", e), s.addClass("fr-visible") } function n() { if (o.core.hasFocus()) { var e = o.selection.element(); if (o.opts.enter == mt.ENTER_BR || o.node.isBlock(e) || (e = o.node.blockParent(e)), o.opts.enter == mt.ENTER_BR && !o.node.isBlock(e)) { var t = o.node.deepestParent(e); t && (e = t) } var a = function a() { return o.opts.enter != mt.ENTER_BR && o.node.isEmpty(e) && 0 <= o.opts.quickInsertTags.indexOf(e.tagName.toLowerCase()) }, n = function n() { return o.opts.enter == mt.ENTER_BR && ("BR" == e.tagName && (!e.previousSibling || "BR" == e.previousSibling.tagName || o.node.isBlock(e.previousSibling)) || o.node.isEmpty(e) && (!e.previousSibling || "BR" == e.previousSibling.tagName || o.node.isBlock(e.previousSibling)) && (!e.nextSibling || "BR" == e.nextSibling.tagName || o.node.isBlock(e.nextSibling))) }; e && (a() || n()) ? s && s.data("tag").is(c(e)) && s.hasClass("fr-on") ? f() : o.selection.isCollapsed() && i(c(e)) : r() } } function r() { s && (s.hasClass("fr-on") && f(), s.removeClass("fr-visible fr-on"), s.css("left", -9999).css("top", -9999)) } function d(e) { if (e && e.preventDefault(), s.hasClass("fr-on") && !s.hasClass("fr-hidden")) f(); else { if (!o.shared.$qi_helper) { for (var t = o.opts.quickInsertButtons, a = '<div class="fr-qi-helper">', n = 0, i = 0; i < t.length; i++) { var r = mt.QUICK_INSERT_BUTTONS[t[i]]; r && (!r.requiredPlugin || mt.PLUGINS[r.requiredPlugin] && 0 <= o.opts.pluginsEnabled.indexOf(r.requiredPlugin)) && (a += '<a class="fr-btn fr-floating-btn" role="button" title="'.concat(o.language.translate(r.title), '" tabIndex="-1" data-cmd="').concat(t[i], '" style="transition-delay: ').concat(.025 * n++, 's;">').concat(o.icon.create(r.icon), "</a>")) } a += "</div>", o.shared.$qi_helper = c(a), o.tooltip.bind(o.shared.$qi_helper, "a.fr-btn"), o.events.$on(o.shared.$qi_helper, "mousedown", function (e) { e.preventDefault() }, !0) } l = o.shared.$qi_helper, o.$box.append(l), setTimeout(function () { l.css("top", parseFloat(s.css("top"))), l.css("left", parseFloat(s.css("left")) + s.outerWidth()), l.find("a").addClass("fr-size-1"), s.addClass("fr-on") }, 10) } } function f() { var a = o.$box.find(".fr-qi-helper"); a.length && function () { for (var t = a.find("a"), e = 0; e < t.length; e++)!function (e) { setTimeout(function () { a.children().eq(t.length - 1 - e).removeClass("fr-size-1") }, 25 * e) }(e); setTimeout(function () { a.css("left", -9999), s && !s.hasClass("fr-hidden") && s.removeClass("fr-on") }, 25 * e) }() } function p() { s.hasClass("fr-visible") && a(s.data("tag")) } return { _init: function e() { if (!o.$wp || !o.opts.quickInsertEnabled) return !1; o.popups.onShow("image.edit", r), o.events.on("mouseup", n), o.helpers.isMobile() && o.events.$on(c(o.o_doc), "selectionchange", n), o.events.on("blur", r), o.events.on("keyup", n), o.events.on("keydown", function () { setTimeout(function () { n() }, 0) }) }, hide: r } }, mt.PLUGINS.quote = function (i) { var r = i.$; function o(e) { for (; e.parentNode && e.parentNode != i.el;)e = e.parentNode; return e } return { apply: function t(e) { i.selection.save(), i.html.wrap(!0, !0, !0, !0), i.selection.restore(), "increase" == e ? function n() { var e, t = i.selection.blocks(); for (e = 0; e < t.length; e++)t[e] = o(t[e]); i.selection.save(); var a = r(document.createElement("blockquote")); for (a.insertBefore(t[0]), e = 0; e < t.length; e++)a.append(t[e]); i.html.unwrap(), i.selection.restore() }() : "decrease" == e && function a() { var e, t = i.selection.blocks(); for (e = 0; e < t.length; e++)"BLOCKQUOTE" != t[e].tagName && (t[e] = r(t[e]).parentsUntil(i.$el, "BLOCKQUOTE").get(0)); for (i.selection.save(), e = 0; e < t.length; e++)t[e] && r(t[e]).replaceWith(t[e].innerHTML); i.html.unwrap(), i.selection.restore() }() } } }, mt.RegisterShortcut(mt.KEYCODE.SINGLE_QUOTE, "quote", "increase", "'"), mt.RegisterShortcut(mt.KEYCODE.SINGLE_QUOTE, "quote", "decrease", "'", !0), mt.RegisterCommand("quote", { title: "Quote", type: "dropdown", html: function () { var e = '<ul class="fr-dropdown-list" role="presentation">', t = { increase: "Increase", decrease: "Decrease" }; for (var a in t) if (t.hasOwnProperty(a)) { var n = this.shortcuts.get("quote.".concat(a)); e += '<li role="presentation"><a class="fr-command fr-active '.concat(a, '" tabIndex="-1" role="option" data-cmd="quote" data-param1="').concat(a, '" title="').concat(t[a], '">').concat(this.language.translate(t[a])).concat(n ? '<span class="fr-shortcut">'.concat(n, "</span>") : "", "</a></li>") } return e += "</ul>" }, callback: function (e, t) { this.quote.apply(t) }, plugin: "quote" }), mt.DefineIcon("quote", { NAME: "quote-left", SVG_KEY: "blockquote" }), Object.assign(mt.DEFAULTS, { saveInterval: 1e4, saveURL: null, saveParams: {}, saveParam: "body", saveMethod: "POST" }), mt.PLUGINS.save = function (s) { var l = s.$, n = null, c = null, t = !1, d = 1, f = 2, a = {}; function p(e, t) { s.events.trigger("save.error", [{ code: e, message: a[e] }, t]) } function i(e) { void 0 === e && (e = s.html.get()); var n = e, t = s.events.trigger("save.before", [e]); if (!1 === t) return !1; if ("string" == typeof t && (e = t), s.opts.saveURL) { var a = {}; for (var i in s.opts.saveParams) if (s.opts.saveParams.hasOwnProperty(i)) { var r = s.opts.saveParams[i]; a[i] = "function" == typeof r ? r.call(this) : r } var o = {}; o[s.opts.saveParam] = e, l(this).ajax({ method: s.opts.saveMethod, url: s.opts.saveURL, data: Object.assign(o, a), crossDomain: s.opts.requestWithCORS, withCredentials: s.opts.requestWithCredentials, headers: s.opts.requestHeaders, done: function (e, t, a) { c = n, s.events.trigger("save.after", [e]) }, fail: function (e) { p(f, e.response || e.responseText) } }) } else p(d) } function r() { clearTimeout(n), n = setTimeout(function () { var e = s.html.get(); (c != e || t) && (t = !1, i(c = e)) }, 0) } return a[d] = "Missing saveURL option.", a[f] = "Something went wrong during save.", { _init: function o() { if (s.opts.letteringClass) for (var e = s.opts.letteringClass, t = s.$el.find(".".concat(e)).length, a = 0; a < t; a++)s.$el.find(".".concat(e))[a].innerHTML = s.$el.find(".".concat(e))[a].innerText.replace(/([\w'-]+|[?.",])/g, "<span class = 'fr-word-select'>$1</span>"); s.opts.saveInterval && (c = s.html.get(), s.events.on("contentChanged", function () { setTimeout(r, s.opts.saveInterval) }), s.events.on("keydown destroy", function () { clearTimeout(n) })) }, save: i, reset: function e() { r(), t = !1 }, force: function u() { t = !0 } } }, mt.DefineIcon("save", { NAME: "floppy-o", FA5NAME: "save" }), mt.RegisterCommand("save", { title: "Save", undo: !1, focus: !1, refreshAfterCallback: !1, callback: function () { this.save.save() }, plugin: "save" }), Object.assign(mt.DEFAULTS, { specialCharactersSets: [{ title: "Latin", "char": "&iexcl;", list: [{ "char": "&iexcl;", desc: "INVERTED EXCLAMATION MARK" }, { "char": "&cent;", desc: "CENT SIGN" }, { "char": "&pound;", desc: "POUND SIGN" }, { "char": "&curren;", desc: "CURRENCY SIGN" }, { "char": "&yen;", desc: "YEN SIGN" }, { "char": "&brvbar;", desc: "BROKEN BAR" }, { "char": "&sect;", desc: "SECTION SIGN" }, { "char": "&uml;", desc: "DIAERESIS" }, { "char": "&copy;", desc: "COPYRIGHT SIGN" }, { "char": "&trade;", desc: "TRADEMARK SIGN" }, { "char": "&ordf;", desc: "FEMININE ORDINAL INDICATOR" }, { "char": "&laquo;", desc: "LEFT-POINTING DOUBLE ANGLE QUOTATION MARK" }, { "char": "&not;", desc: "NOT SIGN" }, { "char": "&reg;", desc: "REGISTERED SIGN" }, { "char": "&macr;", desc: "MACRON" }, { "char": "&deg;", desc: "DEGREE SIGN" }, { "char": "&plusmn;", desc: "PLUS-MINUS SIGN" }, { "char": "&sup2;", desc: "SUPERSCRIPT TWO" }, { "char": "&sup3;", desc: "SUPERSCRIPT THREE" }, { "char": "&acute;", desc: "ACUTE ACCENT" }, { "char": "&micro;", desc: "MICRO SIGN" }, { "char": "&para;", desc: "PILCROW SIGN" }, { "char": "&middot;", desc: "MIDDLE DOT" }, { "char": "&cedil;", desc: "CEDILLA" }, { "char": "&sup1;", desc: "SUPERSCRIPT ONE" }, { "char": "&ordm;", desc: "MASCULINE ORDINAL INDICATOR" }, { "char": "&raquo;", desc: "RIGHT-POINTING DOUBLE ANGLE QUOTATION MARK" }, { "char": "&frac14;", desc: "VULGAR FRACTION ONE QUARTER" }, { "char": "&frac12;", desc: "VULGAR FRACTION ONE HALF" }, { "char": "&frac34;", desc: "VULGAR FRACTION THREE QUARTERS" }, { "char": "&iquest;", desc: "INVERTED QUESTION MARK" }, { "char": "&Agrave;", desc: "LATIN CAPITAL LETTER A WITH GRAVE" }, { "char": "&Aacute;", desc: "LATIN CAPITAL LETTER A WITH ACUTE" }, { "char": "&Acirc;", desc: "LATIN CAPITAL LETTER A WITH CIRCUMFLEX" }, { "char": "&Atilde;", desc: "LATIN CAPITAL LETTER A WITH TILDE" }, { "char": "&Auml;", desc: "LATIN CAPITAL LETTER A WITH DIAERESIS " }, { "char": "&Aring;", desc: "LATIN CAPITAL LETTER A WITH RING ABOVE" }, { "char": "&AElig;", desc: "LATIN CAPITAL LETTER AE" }, { "char": "&Ccedil;", desc: "LATIN CAPITAL LETTER C WITH CEDILLA" }, { "char": "&Egrave;", desc: "LATIN CAPITAL LETTER E WITH GRAVE" }, { "char": "&Eacute;", desc: "LATIN CAPITAL LETTER E WITH ACUTE" }, { "char": "&Ecirc;", desc: "LATIN CAPITAL LETTER E WITH CIRCUMFLEX" }, { "char": "&Euml;", desc: "LATIN CAPITAL LETTER E WITH DIAERESIS" }, { "char": "&Igrave;", desc: "LATIN CAPITAL LETTER I WITH GRAVE" }, { "char": "&Iacute;", desc: "LATIN CAPITAL LETTER I WITH ACUTE" }, { "char": "&Icirc;", desc: "LATIN CAPITAL LETTER I WITH CIRCUMFLEX" }, { "char": "&Iuml;", desc: "LATIN CAPITAL LETTER I WITH DIAERESIS" }, { "char": "&ETH;", desc: "LATIN CAPITAL LETTER ETH" }, { "char": "&Ntilde;", desc: "LATIN CAPITAL LETTER N WITH TILDE" }, { "char": "&Ograve;", desc: "LATIN CAPITAL LETTER O WITH GRAVE" }, { "char": "&Oacute;", desc: "LATIN CAPITAL LETTER O WITH ACUTE" }, { "char": "&Ocirc;", desc: "LATIN CAPITAL LETTER O WITH CIRCUMFLEX" }, { "char": "&Otilde;", desc: "LATIN CAPITAL LETTER O WITH TILDE" }, { "char": "&Ouml;", desc: "LATIN CAPITAL LETTER O WITH DIAERESIS" }, { "char": "&times;", desc: "MULTIPLICATION SIGN" }, { "char": "&Oslash;", desc: "LATIN CAPITAL LETTER O WITH STROKE" }, { "char": "&Ugrave;", desc: "LATIN CAPITAL LETTER U WITH GRAVE" }, { "char": "&Uacute;", desc: "LATIN CAPITAL LETTER U WITH ACUTE" }, { "char": "&Ucirc;", desc: "LATIN CAPITAL LETTER U WITH CIRCUMFLEX" }, { "char": "&Uuml;", desc: "LATIN CAPITAL LETTER U WITH DIAERESIS" }, { "char": "&Yacute;", desc: "LATIN CAPITAL LETTER Y WITH ACUTE" }, { "char": "&THORN;", desc: "LATIN CAPITAL LETTER THORN" }, { "char": "&szlig;", desc: "LATIN SMALL LETTER SHARP S" }, { "char": "&agrave;", desc: "LATIN SMALL LETTER A WITH GRAVE" }, { "char": "&aacute;", desc: "LATIN SMALL LETTER A WITH ACUTE " }, { "char": "&acirc;", desc: "LATIN SMALL LETTER A WITH CIRCUMFLEX" }, { "char": "&atilde;", desc: "LATIN SMALL LETTER A WITH TILDE" }, { "char": "&auml;", desc: "LATIN SMALL LETTER A WITH DIAERESIS" }, { "char": "&aring;", desc: "LATIN SMALL LETTER A WITH RING ABOVE" }, { "char": "&aelig;", desc: "LATIN SMALL LETTER AE" }, { "char": "&ccedil;", desc: "LATIN SMALL LETTER C WITH CEDILLA" }, { "char": "&egrave;", desc: "LATIN SMALL LETTER E WITH GRAVE" }, { "char": "&eacute;", desc: "LATIN SMALL LETTER E WITH ACUTE" }, { "char": "&ecirc;", desc: "LATIN SMALL LETTER E WITH CIRCUMFLEX" }, { "char": "&euml;", desc: "LATIN SMALL LETTER E WITH DIAERESIS" }, { "char": "&igrave;", desc: "LATIN SMALL LETTER I WITH GRAVE" }, { "char": "&iacute;", desc: "LATIN SMALL LETTER I WITH ACUTE" }, { "char": "&icirc;", desc: "LATIN SMALL LETTER I WITH CIRCUMFLEX" }, { "char": "&iuml;", desc: "LATIN SMALL LETTER I WITH DIAERESIS" }, { "char": "&eth;", desc: "LATIN SMALL LETTER ETH" }, { "char": "&ntilde;", desc: "LATIN SMALL LETTER N WITH TILDE" }, { "char": "&ograve;", desc: "LATIN SMALL LETTER O WITH GRAVE" }, { "char": "&oacute;", desc: "LATIN SMALL LETTER O WITH ACUTE" }, { "char": "&ocirc;", desc: "LATIN SMALL LETTER O WITH CIRCUMFLEX" }, { "char": "&otilde;", desc: "LATIN SMALL LETTER O WITH TILDE" }, { "char": "&ouml;", desc: "LATIN SMALL LETTER O WITH DIAERESIS" }, { "char": "&divide;", desc: "DIVISION SIGN" }, { "char": "&oslash;", desc: "LATIN SMALL LETTER O WITH STROKE" }, { "char": "&ugrave;", desc: "LATIN SMALL LETTER U WITH GRAVE" }, { "char": "&uacute;", desc: "LATIN SMALL LETTER U WITH ACUTE" }, { "char": "&ucirc;", desc: "LATIN SMALL LETTER U WITH CIRCUMFLEX" }, { "char": "&uuml;", desc: "LATIN SMALL LETTER U WITH DIAERESIS" }, { "char": "&yacute;", desc: "LATIN SMALL LETTER Y WITH ACUTE" }, { "char": "&thorn;", desc: "LATIN SMALL LETTER THORN" }, { "char": "&yuml;", desc: "LATIN SMALL LETTER Y WITH DIAERESIS" }] }, { title: "Greek", "char": "&Alpha;", list: [{ "char": "&Alpha;", desc: "GREEK CAPITAL LETTER ALPHA" }, { "char": "&Beta;", desc: "GREEK CAPITAL LETTER BETA" }, { "char": "&Gamma;", desc: "GREEK CAPITAL LETTER GAMMA" }, { "char": "&Delta;", desc: "GREEK CAPITAL LETTER DELTA" }, { "char": "&Epsilon;", desc: "GREEK CAPITAL LETTER EPSILON" }, { "char": "&Zeta;", desc: "GREEK CAPITAL LETTER ZETA" }, { "char": "&Eta;", desc: "GREEK CAPITAL LETTER ETA" }, { "char": "&Theta;", desc: "GREEK CAPITAL LETTER THETA" }, { "char": "&Iota;", desc: "GREEK CAPITAL LETTER IOTA" }, { "char": "&Kappa;", desc: "GREEK CAPITAL LETTER KAPPA" }, { "char": "&Lambda;", desc: "GREEK CAPITAL LETTER LAMBDA" }, { "char": "&Mu;", desc: "GREEK CAPITAL LETTER MU" }, { "char": "&Nu;", desc: "GREEK CAPITAL LETTER NU" }, { "char": "&Xi;", desc: "GREEK CAPITAL LETTER XI" }, { "char": "&Omicron;", desc: "GREEK CAPITAL LETTER OMICRON" }, { "char": "&Pi;", desc: "GREEK CAPITAL LETTER PI" }, { "char": "&Rho;", desc: "GREEK CAPITAL LETTER RHO" }, { "char": "&Sigma;", desc: "GREEK CAPITAL LETTER SIGMA" }, { "char": "&Tau;", desc: "GREEK CAPITAL LETTER TAU" }, { "char": "&Upsilon;", desc: "GREEK CAPITAL LETTER UPSILON" }, { "char": "&Phi;", desc: "GREEK CAPITAL LETTER PHI" }, { "char": "&Chi;", desc: "GREEK CAPITAL LETTER CHI" }, { "char": "&Psi;", desc: "GREEK CAPITAL LETTER PSI" }, { "char": "&Omega;", desc: "GREEK CAPITAL LETTER OMEGA" }, { "char": "&alpha;", desc: "GREEK SMALL LETTER ALPHA" }, { "char": "&beta;", desc: "GREEK SMALL LETTER BETA" }, { "char": "&gamma;", desc: "GREEK SMALL LETTER GAMMA" }, { "char": "&delta;", desc: "GREEK SMALL LETTER DELTA" }, { "char": "&epsilon;", desc: "GREEK SMALL LETTER EPSILON" }, { "char": "&zeta;", desc: "GREEK SMALL LETTER ZETA" }, { "char": "&eta;", desc: "GREEK SMALL LETTER ETA" }, { "char": "&theta;", desc: "GREEK SMALL LETTER THETA" }, { "char": "&iota;", desc: "GREEK SMALL LETTER IOTA" }, { "char": "&kappa;", desc: "GREEK SMALL LETTER KAPPA" }, { "char": "&lambda;", desc: "GREEK SMALL LETTER LAMBDA" }, { "char": "&mu;", desc: "GREEK SMALL LETTER MU" }, { "char": "&nu;", desc: "GREEK SMALL LETTER NU" }, { "char": "&xi;", desc: "GREEK SMALL LETTER XI" }, { "char": "&omicron;", desc: "GREEK SMALL LETTER OMICRON" }, { "char": "&pi;", desc: "GREEK SMALL LETTER PI" }, { "char": "&rho;", desc: "GREEK SMALL LETTER RHO" }, { "char": "&sigmaf;", desc: "GREEK SMALL LETTER FINAL SIGMA" }, { "char": "&sigma;", desc: "GREEK SMALL LETTER SIGMA" }, { "char": "&tau;", desc: "GREEK SMALL LETTER TAU" }, { "char": "&upsilon;", desc: "GREEK SMALL LETTER UPSILON" }, { "char": "&phi;", desc: "GREEK SMALL LETTER PHI" }, { "char": "&chi;", desc: "GREEK SMALL LETTER CHI" }, { "char": "&psi;", desc: "GREEK SMALL LETTER PSI" }, { "char": "&omega;", desc: "GREEK SMALL LETTER OMEGA" }, { "char": "&thetasym;", desc: "GREEK THETA SYMBOL" }, { "char": "&upsih;", desc: "GREEK UPSILON WITH HOOK SYMBOL" }, { "char": "&straightphi;", desc: "GREEK PHI SYMBOL" }, { "char": "&piv;", desc: "GREEK PI SYMBOL" }, { "char": "&Gammad;", desc: "GREEK LETTER DIGAMMA" }, { "char": "&gammad;", desc: "GREEK SMALL LETTER DIGAMMA" }, { "char": "&varkappa;", desc: "GREEK KAPPA SYMBOL" }, { "char": "&varrho;", desc: "GREEK RHO SYMBOL" }, { "char": "&straightepsilon;", desc: "GREEK LUNATE EPSILON SYMBOL" }, { "char": "&backepsilon;", desc: "GREEK REVERSED LUNATE EPSILON SYMBOL" }] }, { title: "Cyrillic", "char": "&#x400", list: [{ "char": "&#x400", desc: "CYRILLIC CAPITAL LETTER IE WITH GRAVE" }, { "char": "&#x401", desc: "CYRILLIC CAPITAL LETTER IO" }, { "char": "&#x402", desc: "CYRILLIC CAPITAL LETTER DJE" }, { "char": "&#x403", desc: "CYRILLIC CAPITAL LETTER GJE" }, { "char": "&#x404", desc: "CYRILLIC CAPITAL LETTER UKRAINIAN IE" }, { "char": "&#x405", desc: "CYRILLIC CAPITAL LETTER DZE" }, { "char": "&#x406", desc: "CYRILLIC CAPITAL LETTER BYELORUSSIAN-UKRAINIAN I" }, { "char": "&#x407", desc: "CYRILLIC CAPITAL LETTER YI" }, { "char": "&#x408", desc: "CYRILLIC CAPITAL LETTER JE" }, { "char": "&#x409", desc: "CYRILLIC CAPITAL LETTER LJE" }, { "char": "&#x40A", desc: "CYRILLIC CAPITAL LETTER NJE" }, { "char": "&#x40B", desc: "CYRILLIC CAPITAL LETTER TSHE" }, { "char": "&#x40C", desc: "CYRILLIC CAPITAL LETTER KJE" }, { "char": "&#x40D", desc: "CYRILLIC CAPITAL LETTER I WITH GRAVE" }, { "char": "&#x40E", desc: "CYRILLIC CAPITAL LETTER SHORT U" }, { "char": "&#x40F", desc: "CYRILLIC CAPITAL LETTER DZHE" }, { "char": "&#x410", desc: "CYRILLIC CAPITAL LETTER A" }, { "char": "&#x411", desc: "CYRILLIC CAPITAL LETTER BE" }, { "char": "&#x412", desc: "CYRILLIC CAPITAL LETTER VE" }, { "char": "&#x413", desc: "CYRILLIC CAPITAL LETTER GHE" }, { "char": "&#x414", desc: "CYRILLIC CAPITAL LETTER DE" }, { "char": "&#x415", desc: "CYRILLIC CAPITAL LETTER IE" }, { "char": "&#x416", desc: "CYRILLIC CAPITAL LETTER ZHE" }, { "char": "&#x417", desc: "CYRILLIC CAPITAL LETTER ZE" }, { "char": "&#x418", desc: "CYRILLIC CAPITAL LETTER I" }, { "char": "&#x419", desc: "CYRILLIC CAPITAL LETTER SHORT I" }, { "char": "&#x41A", desc: "CYRILLIC CAPITAL LETTER KA" }, { "char": "&#x41B", desc: "CYRILLIC CAPITAL LETTER EL" }, { "char": "&#x41C", desc: "CYRILLIC CAPITAL LETTER EM" }, { "char": "&#x41D", desc: "CYRILLIC CAPITAL LETTER EN" }, { "char": "&#x41E", desc: "CYRILLIC CAPITAL LETTER O" }, { "char": "&#x41F", desc: "CYRILLIC CAPITAL LETTER PE" }, { "char": "&#x420", desc: "CYRILLIC CAPITAL LETTER ER" }, { "char": "&#x421", desc: "CYRILLIC CAPITAL LETTER ES" }, { "char": "&#x422", desc: "CYRILLIC CAPITAL LETTER TE" }, { "char": "&#x423", desc: "CYRILLIC CAPITAL LETTER U" }, { "char": "&#x424", desc: "CYRILLIC CAPITAL LETTER EF" }, { "char": "&#x425", desc: "CYRILLIC CAPITAL LETTER HA" }, { "char": "&#x426", desc: "CYRILLIC CAPITAL LETTER TSE" }, { "char": "&#x427", desc: "CYRILLIC CAPITAL LETTER CHE" }, { "char": "&#x428", desc: "CYRILLIC CAPITAL LETTER SHA" }, { "char": "&#x429", desc: "CYRILLIC CAPITAL LETTER SHCHA" }, { "char": "&#x42A", desc: "CYRILLIC CAPITAL LETTER HARD SIGN" }, { "char": "&#x42B", desc: "CYRILLIC CAPITAL LETTER YERU" }, { "char": "&#x42C", desc: "CYRILLIC CAPITAL LETTER SOFT SIGN" }, { "char": "&#x42D", desc: "CYRILLIC CAPITAL LETTER E" }, { "char": "&#x42E", desc: "CYRILLIC CAPITAL LETTER YU" }, { "char": "&#x42F", desc: "CYRILLIC CAPITAL LETTER YA" }, { "char": "&#x430", desc: "CYRILLIC SMALL LETTER A" }, { "char": "&#x431", desc: "CYRILLIC SMALL LETTER BE" }, { "char": "&#x432", desc: "CYRILLIC SMALL LETTER VE" }, { "char": "&#x433", desc: "CYRILLIC SMALL LETTER GHE" }, { "char": "&#x434", desc: "CYRILLIC SMALL LETTER DE" }, { "char": "&#x435", desc: "CYRILLIC SMALL LETTER IE" }, { "char": "&#x436", desc: "CYRILLIC SMALL LETTER ZHE" }, { "char": "&#x437", desc: "CYRILLIC SMALL LETTER ZE" }, { "char": "&#x438", desc: "CYRILLIC SMALL LETTER I" }, { "char": "&#x439", desc: "CYRILLIC SMALL LETTER SHORT I" }, { "char": "&#x43A", desc: "CYRILLIC SMALL LETTER KA" }, { "char": "&#x43B", desc: "CYRILLIC SMALL LETTER EL" }, { "char": "&#x43C", desc: "CYRILLIC SMALL LETTER EM" }, { "char": "&#x43D", desc: "CYRILLIC SMALL LETTER EN" }, { "char": "&#x43E", desc: "CYRILLIC SMALL LETTER O" }, { "char": "&#x43F", desc: "CYRILLIC SMALL LETTER PE" }, { "char": "&#x440", desc: "CYRILLIC SMALL LETTER ER" }, { "char": "&#x441", desc: "CYRILLIC SMALL LETTER ES" }, { "char": "&#x442", desc: "CYRILLIC SMALL LETTER TE" }, { "char": "&#x443", desc: "CYRILLIC SMALL LETTER U" }, { "char": "&#x444", desc: "CYRILLIC SMALL LETTER EF" }, { "char": "&#x445", desc: "CYRILLIC SMALL LETTER HA" }, { "char": "&#x446", desc: "CYRILLIC SMALL LETTER TSE" }, { "char": "&#x447", desc: "CYRILLIC SMALL LETTER CHE" }, { "char": "&#x448", desc: "CYRILLIC SMALL LETTER SHA" }, { "char": "&#x449", desc: "CYRILLIC SMALL LETTER SHCHA" }, { "char": "&#x44A", desc: "CYRILLIC SMALL LETTER HARD SIGN" }, { "char": "&#x44B", desc: "CYRILLIC SMALL LETTER YERU" }, { "char": "&#x44C", desc: "CYRILLIC SMALL LETTER SOFT SIGN" }, { "char": "&#x44D", desc: "CYRILLIC SMALL LETTER E" }, { "char": "&#x44E", desc: "CYRILLIC SMALL LETTER YU" }, { "char": "&#x44F", desc: "CYRILLIC SMALL LETTER YA" }, { "char": "&#x450", desc: "CYRILLIC SMALL LETTER IE WITH GRAVE" }, { "char": "&#x451", desc: "CYRILLIC SMALL LETTER IO" }, { "char": "&#x452", desc: "CYRILLIC SMALL LETTER DJE" }, { "char": "&#x453", desc: "CYRILLIC SMALL LETTER GJE" }, { "char": "&#x454", desc: "CYRILLIC SMALL LETTER UKRAINIAN IE" }, { "char": "&#x455", desc: "CYRILLIC SMALL LETTER DZE" }, { "char": "&#x456", desc: "CYRILLIC SMALL LETTER BYELORUSSIAN-UKRAINIAN I" }, { "char": "&#x457", desc: "CYRILLIC SMALL LETTER YI" }, { "char": "&#x458", desc: "CYRILLIC SMALL LETTER JE" }, { "char": "&#x459", desc: "CYRILLIC SMALL LETTER LJE" }, { "char": "&#x45A", desc: "CYRILLIC SMALL LETTER NJE" }, { "char": "&#x45B", desc: "CYRILLIC SMALL LETTER TSHE" }, { "char": "&#x45C", desc: "CYRILLIC SMALL LETTER KJE" }, { "char": "&#x45D", desc: "CYRILLIC SMALL LETTER I WITH GRAVE" }, { "char": "&#x45E", desc: "CYRILLIC SMALL LETTER SHORT U" }, { "char": "&#x45F", desc: "CYRILLIC SMALL LETTER DZHE" }] }, { title: "Punctuation", "char": "&ndash;", list: [{ "char": "&ndash;", desc: "EN DASH" }, { "char": "&mdash;", desc: "EM DASH" }, { "char": "&lsquo;", desc: "LEFT SINGLE QUOTATION MARK" }, { "char": "&rsquo;", desc: "RIGHT SINGLE QUOTATION MARK" }, { "char": "&sbquo;", desc: "SINGLE LOW-9 QUOTATION MARK" }, { "char": "&ldquo;", desc: "LEFT DOUBLE QUOTATION MARK" }, { "char": "&rdquo;", desc: "RIGHT DOUBLE QUOTATION MARK" }, { "char": "&bdquo;", desc: "DOUBLE LOW-9 QUOTATION MARK" }, { "char": "&dagger;", desc: "DAGGER" }, { "char": "&Dagger;", desc: "DOUBLE DAGGER" }, { "char": "&bull;", desc: "BULLET" }, { "char": "&hellip;", desc: "HORIZONTAL ELLIPSIS" }, { "char": "&permil;", desc: "PER MILLE SIGN" }, { "char": "&prime;", desc: "PRIME" }, { "char": "&Prime;", desc: "DOUBLE PRIME" }, { "char": "&lsaquo;", desc: "SINGLE LEFT-POINTING ANGLE QUOTATION MARK" }, { "char": "&rsaquo;", desc: "SINGLE RIGHT-POINTING ANGLE QUOTATION MARK" }, { "char": "&oline;", desc: "OVERLINE" }, { "char": "&frasl;", desc: "FRACTION SLASH" }] }, { title: "Currency", "char": "&#x20A0", list: [{ "char": "&#x20A0", desc: "EURO-CURRENCY SIGN" }, { "char": "&#x20A1", desc: "COLON SIGN" }, { "char": "&#x20A2", desc: "CRUZEIRO SIGN" }, { "char": "&#x20A3", desc: "FRENCH FRANC SIGN" }, { "char": "&#x20A4", desc: "LIRA SIGN" }, { "char": "&#x20A5", desc: "MILL SIGN" }, { "char": "&#x20A6", desc: "NAIRA SIGN" }, { "char": "&#x20A7", desc: "PESETA SIGN" }, { "char": "&#x20A8", desc: "RUPEE SIGN" }, { "char": "&#x20A9", desc: "WON SIGN" }, { "char": "&#x20AA", desc: "NEW SHEQEL SIGN" }, { "char": "&#x20AB", desc: "DONG SIGN" }, { "char": "&#x20AC", desc: "EURO SIGN" }, { "char": "&#x20AD", desc: "KIP SIGN" }, { "char": "&#x20AE", desc: "TUGRIK SIGN" }, { "char": "&#x20AF", desc: "DRACHMA SIGN" }, { "char": "&#x20B0", desc: "GERMAN PENNY SYMBOL" }, { "char": "&#x20B1", desc: "PESO SIGN" }, { "char": "&#x20B2", desc: "GUARANI SIGN" }, { "char": "&#x20B3", desc: "AUSTRAL SIGN" }, { "char": "&#x20B4", desc: "HRYVNIA SIGN" }, { "char": "&#x20B5", desc: "CEDI SIGN" }, { "char": "&#x20B6", desc: "LIVRE TOURNOIS SIGN" }, { "char": "&#x20B7", desc: "SPESMILO SIGN" }, { "char": "&#x20B8", desc: "TENGE SIGN" }, { "char": "&#x20B9", desc: "INDIAN RUPEE SIGN" }] }, { title: "Arrows", "char": "&#x2190", list: [{ "char": "&#x2190", desc: "LEFTWARDS ARROW" }, { "char": "&#x2191", desc: "UPWARDS ARROW" }, { "char": "&#x2192", desc: "RIGHTWARDS ARROW" }, { "char": "&#x2193", desc: "DOWNWARDS ARROW" }, { "char": "&#x2194", desc: "LEFT RIGHT ARROW" }, { "char": "&#x2195", desc: "UP DOWN ARROW" }, { "char": "&#x2196", desc: "NORTH WEST ARROW" }, { "char": "&#x2197", desc: "NORTH EAST ARROW" }, { "char": "&#x2198", desc: "SOUTH EAST ARROW" }, { "char": "&#x2199", desc: "SOUTH WEST ARROW" }, { "char": "&#x219A", desc: "LEFTWARDS ARROW WITH STROKE" }, { "char": "&#x219B", desc: "RIGHTWARDS ARROW WITH STROKE" }, { "char": "&#x219C", desc: "LEFTWARDS WAVE ARROW" }, { "char": "&#x219D", desc: "RIGHTWARDS WAVE ARROW" }, { "char": "&#x219E", desc: "LEFTWARDS TWO HEADED ARROW" }, { "char": "&#x219F", desc: "UPWARDS TWO HEADED ARROW" }, { "char": "&#x21A0", desc: "RIGHTWARDS TWO HEADED ARROW" }, { "char": "&#x21A1", desc: "DOWNWARDS TWO HEADED ARROW" }, { "char": "&#x21A2", desc: "LEFTWARDS ARROW WITH TAIL" }, { "char": "&#x21A3", desc: "RIGHTWARDS ARROW WITH TAIL" }, { "char": "&#x21A4", desc: "LEFTWARDS ARROW FROM BAR" }, { "char": "&#x21A5", desc: "UPWARDS ARROW FROM BAR" }, { "char": "&#x21A6", desc: "RIGHTWARDS ARROW FROM BAR" }, { "char": "&#x21A7", desc: "DOWNWARDS ARROW FROM BAR" }, { "char": "&#x21A8", desc: "UP DOWN ARROW WITH BASE" }, { "char": "&#x21A9", desc: "LEFTWARDS ARROW WITH HOOK" }, { "char": "&#x21AA", desc: "RIGHTWARDS ARROW WITH HOOK" }, { "char": "&#x21AB", desc: "LEFTWARDS ARROW WITH LOOP" }, { "char": "&#x21AC", desc: "RIGHTWARDS ARROW WITH LOOP" }, { "char": "&#x21AD", desc: "LEFT RIGHT WAVE ARROW" }, { "char": "&#x21AE", desc: "LEFT RIGHT ARROW WITH STROKE" }, { "char": "&#x21AF", desc: "DOWNWARDS ZIGZAG ARROW" }, { "char": "&#x21B0", desc: "UPWARDS ARROW WITH TIP LEFTWARDS" }, { "char": "&#x21B1", desc: "UPWARDS ARROW WITH TIP RIGHTWARDS" }, { "char": "&#x21B2", desc: "DOWNWARDS ARROW WITH TIP LEFTWARDS" }, { "char": "&#x21B3", desc: "DOWNWARDS ARROW WITH TIP RIGHTWARDS" }, { "char": "&#x21B4", desc: "RIGHTWARDS ARROW WITH CORNER DOWNWARDS" }, { "char": "&#x21B5", desc: "DOWNWARDS ARROW WITH CORNER LEFTWARDS" }, { "char": "&#x21B6", desc: "ANTICLOCKWISE TOP SEMICIRCLE ARROW" }, { "char": "&#x21B7", desc: "CLOCKWISE TOP SEMICIRCLE ARROW" }, { "char": "&#x21B8", desc: "NORTH WEST ARROW TO LONG BAR" }, { "char": "&#x21B9", desc: "LEFTWARDS ARROW TO BAR OVER RIGHTWARDS ARROW TO BAR" }, { "char": "&#x21BA", desc: "ANTICLOCKWISE OPEN CIRCLE ARROW" }, { "char": "&#x21BB", desc: "CLOCKWISE OPEN CIRCLE ARROW" }, { "char": "&#x21BC", desc: "LEFTWARDS HARPOON WITH BARB UPWARDS" }, { "char": "&#x21BD", desc: "LEFTWARDS HARPOON WITH BARB DOWNWARDS" }, { "char": "&#x21BE", desc: "UPWARDS HARPOON WITH BARB RIGHTWARDS" }, { "char": "&#x21BF", desc: "UPWARDS HARPOON WITH BARB LEFTWARDS" }, { "char": "&#x21C0", desc: "RIGHTWARDS HARPOON WITH BARB UPWARDS" }, { "char": "&#x21C1", desc: "RIGHTWARDS HARPOON WITH BARB DOWNWARDS" }, { "char": "&#x21C2", desc: "DOWNWARDS HARPOON WITH BARB RIGHTWARDS" }, { "char": "&#x21C3", desc: "DOWNWARDS HARPOON WITH BARB LEFTWARDS" }, { "char": "&#x21C4", desc: "RIGHTWARDS ARROW OVER LEFTWARDS ARROW" }, { "char": "&#x21C5", desc: "UPWARDS ARROW LEFTWARDS OF DOWNWARDS ARROW" }, { "char": "&#x21C6", desc: "LEFTWARDS ARROW OVER RIGHTWARDS ARROW" }, { "char": "&#x21C7", desc: "LEFTWARDS PAIRED ARROWS" }, { "char": "&#x21C8", desc: "UPWARDS PAIRED ARROWS" }, { "char": "&#x21C9", desc: "RIGHTWARDS PAIRED ARROWS" }, { "char": "&#x21CA", desc: "DOWNWARDS PAIRED ARROWS" }, { "char": "&#x21CB", desc: "LEFTWARDS HARPOON OVER RIGHTWARDS HARPOON" }, { "char": "&#x21CC", desc: "RIGHTWARDS HARPOON OVER LEFTWARDS HARPOON" }, { "char": "&#x21CD", desc: "LEFTWARDS DOUBLE ARROW WITH STROKE" }, { "char": "&#x21CE", desc: "LEFT RIGHT DOUBLE ARROW WITH STROKE" }, { "char": "&#x21CF", desc: "RIGHTWARDS DOUBLE ARROW WITH STROKE" }, { "char": "&#x21D0", desc: "LEFTWARDS DOUBLE ARROW" }, { "char": "&#x21D1", desc: "UPWARDS DOUBLE ARROW" }, { "char": "&#x21D2", desc: "RIGHTWARDS DOUBLE ARROW" }, { "char": "&#x21D3", desc: "DOWNWARDS DOUBLE ARROW" }, { "char": "&#x21D4", desc: "LEFT RIGHT DOUBLE ARROW" }, { "char": "&#x21D5", desc: "UP DOWN DOUBLE ARROW" }, { "char": "&#x21D6", desc: "NORTH WEST DOUBLE ARROW" }, { "char": "&#x21D7", desc: "NORTH EAST DOUBLE ARROW" }, { "char": "&#x21D8", desc: "SOUTH EAST DOUBLE ARROW" }, { "char": "&#x21D9", desc: "SOUTH WEST DOUBLE ARROW" }, { "char": "&#x21DA", desc: "LEFTWARDS TRIPLE ARROW" }, { "char": "&#x21DB", desc: "RIGHTWARDS TRIPLE ARROW" }, { "char": "&#x21DC", desc: "LEFTWARDS SQUIGGLE ARROW" }, { "char": "&#x21DD", desc: "RIGHTWARDS SQUIGGLE ARROW" }, { "char": "&#x21DE", desc: "UPWARDS ARROW WITH DOUBLE STROKE" }, { "char": "&#x21DF", desc: "DOWNWARDS ARROW WITH DOUBLE STROKE" }, { "char": "&#x21E0", desc: "LEFTWARDS DASHED ARROW" }, { "char": "&#x21E1", desc: "UPWARDS DASHED ARROW" }, { "char": "&#x21E2", desc: "RIGHTWARDS DASHED ARROW" }, { "char": "&#x21E3", desc: "DOWNWARDS DASHED ARROW" }, { "char": "&#x21E4", desc: "LEFTWARDS ARROW TO BAR" }, { "char": "&#x21E5", desc: "RIGHTWARDS ARROW TO BAR" }, { "char": "&#x21E6", desc: "LEFTWARDS WHITE ARROW" }, { "char": "&#x21E7", desc: "UPWARDS WHITE ARROW" }, { "char": "&#x21E8", desc: "RIGHTWARDS WHITE ARROW" }, { "char": "&#x21E9", desc: "DOWNWARDS WHITE ARROW" }, { "char": "&#x21EA", desc: "UPWARDS WHITE ARROW FROM BAR" }, { "char": "&#x21EB", desc: "UPWARDS WHITE ARROW ON PEDESTAL" }, { "char": "&#x21EC", desc: "UPWARDS WHITE ARROW ON PEDESTAL WITH HORIZONTAL BAR" }, { "char": "&#x21ED", desc: "UPWARDS WHITE ARROW ON PEDESTAL WITH VERTICAL BAR" }, { "char": "&#x21EE", desc: "UPWARDS WHITE DOUBLE ARROW" }, { "char": "&#x21EF", desc: "UPWARDS WHITE DOUBLE ARROW ON PEDESTAL" }, { "char": "&#x21F0", desc: "RIGHTWARDS WHITE ARROW FROM WALL" }, { "char": "&#x21F1", desc: "NORTH WEST ARROW TO CORNER" }, { "char": "&#x21F2", desc: "SOUTH EAST ARROW TO CORNER" }, { "char": "&#x21F3", desc: "UP DOWN WHITE ARROW" }, { "char": "&#x21F4", desc: "RIGHT ARROW WITH SMALL CIRCLE" }, { "char": "&#x21F5", desc: "DOWNWARDS ARROW LEFTWARDS OF UPWARDS ARROW" }, { "char": "&#x21F6", desc: "THREE RIGHTWARDS ARROWS" }, { "char": "&#x21F7", desc: "LEFTWARDS ARROW WITH VERTICAL STROKE" }, { "char": "&#x21F8", desc: "RIGHTWARDS ARROW WITH VERTICAL STROKE" }, { "char": "&#x21F9", desc: "LEFT RIGHT ARROW WITH VERTICAL STROKE" }, { "char": "&#x21FA", desc: "LEFTWARDS ARROW WITH DOUBLE VERTICAL STROKE" }, { "char": "&#x21FB", desc: "RIGHTWARDS ARROW WITH DOUBLE VERTICAL STROKE" }, { "char": "&#x21FC", desc: "LEFT RIGHT ARROW WITH DOUBLE VERTICAL STROKE" }, { "char": "&#x21FD", desc: "LEFTWARDS OPEN-HEADED ARROW" }, { "char": "&#x21FE", desc: "RIGHTWARDS OPEN-HEADED ARROW" }, { "char": "&#x21FF", desc: "LEFT RIGHT OPEN-HEADED ARROW" }] }, { title: "Math", "char": "&forall;", list: [{ "char": "&forall;", desc: "FOR ALL" }, { "char": "&part;", desc: "PARTIAL DIFFERENTIAL" }, { "char": "&exist;", desc: "THERE EXISTS" }, { "char": "&empty;", desc: "EMPTY SET" }, { "char": "&nabla;", desc: "NABLA" }, { "char": "&isin;", desc: "ELEMENT OF" }, { "char": "&notin;", desc: "NOT AN ELEMENT OF" }, { "char": "&ni;", desc: "CONTAINS AS MEMBER" }, { "char": "&prod;", desc: "N-ARY PRODUCT" }, { "char": "&sum;", desc: "N-ARY SUMMATION" }, { "char": "&minus;", desc: "MINUS SIGN" }, { "char": "&lowast;", desc: "ASTERISK OPERATOR" }, { "char": "&radic;", desc: "SQUARE ROOT" }, { "char": "&prop;", desc: "PROPORTIONAL TO" }, { "char": "&infin;", desc: "INFINITY" }, { "char": "&ang;", desc: "ANGLE" }, { "char": "&and;", desc: "LOGICAL AND" }, { "char": "&or;", desc: "LOGICAL OR" }, { "char": "&cap;", desc: "INTERSECTION" }, { "char": "&cup;", desc: "UNION" }, { "char": "&int;", desc: "INTEGRAL" }, { "char": "&there4;", desc: "THEREFORE" }, { "char": "&sim;", desc: "TILDE OPERATOR" }, { "char": "&cong;", desc: "APPROXIMATELY EQUAL TO" }, { "char": "&asymp;", desc: "ALMOST EQUAL TO" }, { "char": "&ne;", desc: "NOT EQUAL TO" }, { "char": "&equiv;", desc: "IDENTICAL TO" }, { "char": "&le;", desc: "LESS-THAN OR EQUAL TO" }, { "char": "&ge;", desc: "GREATER-THAN OR EQUAL TO" }, { "char": "&sub;", desc: "SUBSET OF" }, { "char": "&sup;", desc: "SUPERSET OF" }, { "char": "&nsub;", desc: "NOT A SUBSET OF" }, { "char": "&sube;", desc: "SUBSET OF OR EQUAL TO" }, { "char": "&supe;", desc: "SUPERSET OF OR EQUAL TO" }, { "char": "&oplus;", desc: "CIRCLED PLUS" }, { "char": "&otimes;", desc: "CIRCLED TIMES" }, { "char": "&perp;", desc: "UP TACK" }] }, { title: "Misc", "char": "&spades;", list: [{ "char": "&spades;", desc: "BLACK SPADE SUIT" }, { "char": "&clubs;", desc: "BLACK CLUB SUIT" }, { "char": "&hearts;", desc: "BLACK HEART SUIT" }, { "char": "&diams;", desc: "BLACK DIAMOND SUIT" }, { "char": "&#x2669", desc: "QUARTER NOTE" }, { "char": "&#x266A", desc: "EIGHTH NOTE" }, { "char": "&#x266B", desc: "BEAMED EIGHTH NOTES" }, { "char": "&#x266C", desc: "BEAMED SIXTEENTH NOTES" }, { "char": "&#x266D", desc: "MUSIC FLAT SIGN" }, { "char": "&#x266E", desc: "MUSIC NATURAL SIGN" }, { "char": "&#x2600", desc: "BLACK SUN WITH RAYS" }, { "char": "&#x2601", desc: "CLOUD" }, { "char": "&#x2602", desc: "UMBRELLA" }, { "char": "&#x2603", desc: "SNOWMAN" }, { "char": "&#x2615", desc: "HOT BEVERAGE" }, { "char": "&#x2618", desc: "SHAMROCK" }, { "char": "&#x262F", desc: "YIN YANG" }, { "char": "&#x2714", desc: "HEAVY CHECK MARK" }, { "char": "&#x2716", desc: "HEAVY MULTIPLICATION X" }, { "char": "&#x2744", desc: "SNOWFLAKE" }, { "char": "&#x275B", desc: "HEAVY SINGLE TURNED COMMA QUOTATION MARK ORNAMENT" }, { "char": "&#x275C", desc: "HEAVY SINGLE COMMA QUOTATION MARK ORNAMENT" }, { "char": "&#x275D", desc: "HEAVY DOUBLE TURNED COMMA QUOTATION MARK ORNAMENT" }, { "char": "&#x275E", desc: "HEAVY DOUBLE COMMA QUOTATION MARK ORNAMENT" }, { "char": "&#x2764", desc: "HEAVY BLACK HEART" }] }], specialCharButtons: ["specialCharBack", "|"] }), Object.assign(mt.POPUP_TEMPLATES, { specialCharacters: "[_BUTTONS_][_CUSTOM_LAYER_]" }), mt.PLUGINS.specialCharacters = function (h) { var m = h.$, a = h.opts.specialCharactersSets[0], i = h.opts.specialCharactersSets, o = ""; function s() { return '\n        <div class="fr-buttons fr-tabs fr-tabs-scroll">\n          '.concat(function t(e, a) { var n = ""; return e.forEach(function (e) { var t = { elementClass: e.title === a.title ? "fr-active fr-active-tab" : "", title: e.title, dataParam1: e.title, desc: e["char"] }; n += '<button class="fr-command fr-btn fr-special-character-category '.concat(t.elementClass, '" title="').concat(t.title, '" data-cmd="setSpecialCharacterCategory" data-param1="').concat(t.dataParam1, '"><span>').concat(t.desc, "</span></button>") }), n }(i, a), '\n        </div>\n        <div class="fr-icon-container fr-sc-container">\n          ').concat(function n(e) { var a = ""; return e.list.forEach(function (e) { var t = { dataParam1: e["char"], title: e.desc, splCharValue: e["char"] }; a += '<span class="fr-command fr-special-character fr-icon" role="button" \n      data-cmd="insertSpecialCharacter" data-param1="'.concat(t.dataParam1, '" \n      title="').concat(t.title, '">').concat(t.splCharValue, "</span>") }), a }(a), "\n        </div>") } return { setSpecialCharacterCategory: function n(t) { a = i.filter(function (e) { return e.title === t })[0], function e() { h.popups.get("specialCharacters").html(o + s()) }() }, showSpecialCharsPopup: function l() { var e = h.popups.get("specialCharacters"); if (e || (e = function r() { h.opts.toolbarInline && 0 < h.opts.specialCharButtons.length && (o = '<div class="fr-buttons fr-tabs">'.concat(h.button.buildList(h.opts.specialCharButtons), "</div>")); var e = { buttons: o, custom_layer: s() }, t = h.popups.create("specialCharacters", e); return function a(g) { h.events.on("popup.tab", function (e) { var t = m(e.currentTarget); if (!h.popups.isVisible("specialCharacters") || !t.is("span, a")) return !0; var a, n, i, r = e.which; if (mt.KEYCODE.TAB == r) { if (t.is("span.fr-icon") && e.shiftKey || t.is("a") && !e.shiftKey) { var o = g.find(".fr-buttons"); a = !h.accessibility.focusToolbar(o, !!e.shiftKey) } if (!1 !== a) { var s = g.find("span.fr-icon:focus").first().concat(g.findVisible(" span.fr-icon").first().concat(g.find("a"))); t.is("span.fr-icon") && (s = s.not("span.fr-icon:not(:focus)")), n = s.index(t), n = e.shiftKey ? ((n - 1) % s.length + s.length) % s.length : (n + 1) % s.length, i = s.get(n), h.events.disableBlur(), i.focus(), a = !1 } } else if (mt.KEYCODE.ARROW_UP == r || mt.KEYCODE.ARROW_DOWN == r || mt.KEYCODE.ARROW_LEFT == r || mt.KEYCODE.ARROW_RIGHT == r) { if (t.is("span.fr-icon")) { var l = t.parent().find("span.fr-icon"); n = l.index(t); var c = Math.floor(l.length / 11), d = n % 11, f = Math.floor(n / 11), p = 11 * f + d, u = 11 * c; mt.KEYCODE.ARROW_UP == r ? p = ((p - 11) % u + u) % u : mt.KEYCODE.ARROW_DOWN == r ? p = (p + 11) % u : mt.KEYCODE.ARROW_LEFT == r ? p = ((p - 1) % u + u) % u : mt.KEYCODE.ARROW_RIGHT == r && (p = (p + 1) % u), i = m(l.get(p)), h.events.disableBlur(), i.focus(), a = !1 } } else mt.KEYCODE.ENTER == r && (t.is("a") ? t[0].click() : h.button.exec(t), a = !1); return !1 === a && (e.preventDefault(), e.stopPropagation()), a }, !0) }(t), t }()), !e.hasClass("fr-active")) { h.popups.refresh("specialCharacters"), h.popups.setContainer("specialCharacters", h.$tb); var t = h.$tb.find('.fr-command[data-cmd="specialCharacters"]'), a = h.button.getPosition(t), n = a.left, i = a.top; h.popups.show("specialCharacters", n, i, outerHeight) } }, back: function e() { h.popups.hide("specialCharacters"), h.toolbar.showInline() } } }, mt.DefineIcon("specialCharacters", { NAME: "dollar-sign", SVG_KEY: "symbols" }), mt.RegisterCommand("specialCharacters", { title: "Special Characters", icon: "specialCharacters", undo: !1, focus: !1, popup: !0, refreshAfterCallback: !1, plugin: "specialCharacters", showOnMobile: !0, callback: function () { this.popups.isVisible("specialCharacters") ? (this.$el.find(".fr-marker") && (this.events.disableBlur(), this.selection.restore()), this.popups.hide("specialCharacters")) : this.specialCharacters.showSpecialCharsPopup() } }), mt.RegisterCommand("insertSpecialCharacter", { callback: function (e, t) { this.undo.saveStep(), this.html.insert(t), this.undo.saveStep(), this.popups.hide("specialCharacters") } }), mt.RegisterCommand("setSpecialCharacterCategory", { undo: !1, focus: !1, callback: function (e, t) { this.specialCharacters.setSpecialCharacterCategory(t) } }), mt.DefineIcon("specialCharBack", { NAME: "arrow-left", SVG_KEY: "back" }), mt.RegisterCommand("specialCharBack", { title: "Back", undo: !1, focus: !1, back: !0, refreshAfterCallback: !1, callback: function () { this.specialCharacters.back() } }), Object.assign(mt.POPUP_TEMPLATES, { "table.insert": "[_BUTTONS_][_ROWS_COLUMNS_]", "table.edit": "[_BUTTONS_]", "table.colors": "[_BUTTONS_][_COLORS_][_CUSTOM_COLOR_]" }), Object.assign(mt.DEFAULTS, { tableInsertMaxSize: 10, tableEditButtons: ["tableHeader", "tableRemove", "tableRows", "tableColumns", "tableStyle", "-", "tableCells", "tableCellBackground", "tableCellVerticalAlign", "tableCellHorizontalAlign", "tableCellStyle"], tableInsertButtons: ["tableBack", "|"], tableResizer: !0, tableDefaultWidth: "100%", tableResizerOffset: 5, tableResizingLimit: 30, tableColorsButtons: ["tableBack", "|"], tableColors: ["#61BD6D", "#1ABC9C", "#54ACD2", "#2C82C9", "#9365B8", "#475577", "#CCCCCC", "#41A85F", "#00A885", "#3D8EB9", "#2969B0", "#553982", "#28324E", "#000000", "#F7DA64", "#FBA026", "#EB6B56", "#E25041", "#A38F84", "#EFEFEF", "#FFFFFF", "#FAC51C", "#F37934", "#D14841", "#B8312F", "#7C706B", "#D1D5D8", "REMOVE"], tableColorsStep: 7, tableCellStyles: { "fr-highlighted": "Highlighted", "fr-thick": "Thick" }, tableStyles: { "fr-dashed-borders": "Dashed Borders", "fr-alternate-rows": "Alternate Rows" }, tableCellMultipleStyles: !0, tableMultipleStyles: !0, tableInsertHelper: !0, tableInsertHelperOffset: 15 }), mt.PLUGINS.table = function (T) { var R, c, i, r, n, o, y, w = T.$; function u() { var e = S(); if (e) { var t = T.popups.get("table.edit"); if (t || (t = p()), t) { T.popups.setContainer("table.edit", T.$sc); var a = O(e), n = a.left + (a.right - a.left) / 2, i = a.bottom; T.popups.show("table.edit", n, i, a.bottom - a.top, !0), T.edit.isDisabled() && (1 < Z().length && T.toolbar.disable(), T.$el.removeClass("fr-no-selection"), T.edit.on(), T.button.bulkRefresh(), T.selection.setAtEnd(T.$el.find(".fr-selected-cell").last().get(0)), T.selection.restore()) } } } function s() { var e = S(); if (e) { var t = T.popups.get("table.colors"); t || (t = function o() { var e = ""; 0 < T.opts.tableColorsButtons.length && (e = '<div class="fr-buttons fr-tabs">'.concat(T.button.buildList(T.opts.tableColorsButtons), "</div>")); var t = ""; T.opts.colorsHEXInput && (t = '<div class="fr-color-hex-layer fr-table-colors-hex-layer fr-active fr-layer" id="fr-table-colors-hex-layer-'.concat(T.id, '"><div class="fr-input-line"><input maxlength="7" id="fr-table-colors-hex-layer-text-').concat(T.id, '" type="text" placeholder="').concat(T.language.translate("HEX Color"), '" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="tableCellBackgroundCustomColor" tabIndex="2" role="button">').concat(T.language.translate("OK"), "</button></div></div>")); var a = { buttons: e, colors: function i() { for (var e = '<div class="fr-color-set fr-table-colors">', t = 0; t < T.opts.tableColors.length; t++)0 !== t && t % T.opts.tableColorsStep == 0 && (e += "<br>"), "REMOVE" != T.opts.tableColors[t] ? e += '<span class="fr-command" style="background: '.concat(T.opts.tableColors[t], ';" tabIndex="-1" role="button" data-cmd="tableCellBackgroundColor" data-param1="').concat(T.opts.tableColors[t], '"><span class="fr-sr-only">').concat(T.language.translate("Color"), " ").concat(T.opts.tableColors[t], "&nbsp;&nbsp;&nbsp;</span></span>") : e += '<span class="fr-command" data-cmd="tableCellBackgroundColor" tabIndex="-1" role="button" data-param1="REMOVE" title="'.concat(T.language.translate("Clear Formatting"), '">').concat(T.icon.create("tableColorRemove"), '<span class="fr-sr-only">').concat(T.language.translate("Clear Formatting"), "</span></span>"); return e += "</div>" }(), custom_color: t }, n = T.popups.create("table.colors", a); return T.events.$on(T.$wp, "scroll.table-colors", function () { T.popups.isVisible("table.colors") && s() }), function r(g) { T.events.on("popup.tab", function (e) { var t = w(e.currentTarget); if (!T.popups.isVisible("table.colors") || !t.is("span")) return !0; var a = e.which, n = !0; if (mt.KEYCODE.TAB == a) { var i = g.find(".fr-buttons"); n = !T.accessibility.focusToolbar(i, !!e.shiftKey) } else if (mt.KEYCODE.ARROW_UP == a || mt.KEYCODE.ARROW_DOWN == a || mt.KEYCODE.ARROW_LEFT == a || mt.KEYCODE.ARROW_RIGHT == a) { var r = t.parent().find("span.fr-command"), o = r.index(t), s = T.opts.colorsStep, l = Math.floor(r.length / s), c = o % s, d = Math.floor(o / s), f = d * s + c, p = l * s; mt.KEYCODE.ARROW_UP == a ? f = ((f - s) % p + p) % p : mt.KEYCODE.ARROW_DOWN == a ? f = (f + s) % p : mt.KEYCODE.ARROW_LEFT == a ? f = ((f - 1) % p + p) % p : mt.KEYCODE.ARROW_RIGHT == a && (f = (f + 1) % p); var u = w(r.get(f)); T.events.disableBlur(), u.focus(), n = !1 } else mt.KEYCODE.ENTER == a && (T.button.exec(t), n = !1); return !1 === n && (e.preventDefault(), e.stopPropagation()), n }, !0) }(n), n }()), T.popups.setContainer("table.colors", T.$sc); var a = O(e), n = (a.left + a.right) / 2, i = a.bottom; !function r() { var e = T.popups.get("table.colors"), t = T.$el.find(".fr-selected-cell").first(), a = T.helpers.RGBToHex(t.css("background-color")), n = e.find(".fr-table-colors-hex-layer input"); e.find(".fr-selected-color").removeClass("fr-selected-color fr-active-item"), e.find('span[data-param1="'.concat(a, '"]')).addClass("fr-selected-color fr-active-item"), n.val(a).trigger("change") }(), T.popups.show("table.colors", n, i, a.bottom - a.top, !0) } } function l() { 0 === Z().length && T.toolbar.enable() } function d(e) { if (e) return T.popups.onHide("table.insert", function () { T.popups.get("table.insert").find('.fr-table-size .fr-select-table-size > span[data-row="1"][data-col="1"]').trigger("mouseover") }), !0; var t = ""; 0 < T.opts.tableInsertButtons.length && (t = '<div class="fr-buttons fr-tabs">'.concat(T.button.buildList(T.opts.tableInsertButtons), "</div>")); var a = { buttons: t, rows_columns: function r() { for (var e = '<div class="fr-table-size"><div class="fr-table-size-info">1 &times; 1</div><div class="fr-select-table-size">', t = 1; t <= T.opts.tableInsertMaxSize; t++) { for (var a = 1; a <= T.opts.tableInsertMaxSize; a++) { var n = "inline-block"; 2 < t && !T.helpers.isMobile() && (n = "none"); var i = "fr-table-cell "; 1 == t && 1 == a && (i += " hover"), e += '<span class="fr-command '.concat(i, '" tabIndex="-1" data-cmd="tableInsert" data-row="').concat(t, '" data-col="').concat(a, '" data-param1="').concat(t, '" data-param2="').concat(a, '" style="display: ').concat(n, ';" role="button"><span></span><span class="fr-sr-only">').concat(t, " &times; ").concat(a, "&nbsp;&nbsp;&nbsp;</span></span>") } e += '<div class="new-line"></div>' } return e += "</div></div>" }() }, n = T.popups.create("table.insert", a); return T.events.$on(n, "mouseover", ".fr-table-size .fr-select-table-size .fr-table-cell", function (e) { f(w(e.currentTarget)) }, !0), function i(e) { T.events.$on(e, "focus", "[tabIndex]", function (e) { var t = w(e.currentTarget); f(t) }), T.events.on("popup.tab", function (e) { var t = w(e.currentTarget); if (!T.popups.isVisible("table.insert") || !t.is("span, a")) return !0; var a, n = e.which; if (mt.KEYCODE.ARROW_UP == n || mt.KEYCODE.ARROW_DOWN == n || mt.KEYCODE.ARROW_LEFT == n || mt.KEYCODE.ARROW_RIGHT == n) { if (t.is("span.fr-table-cell")) { var i = t.parent().find("span.fr-table-cell"), r = i.index(t), o = T.opts.tableInsertMaxSize, s = r % o, l = Math.floor(r / o); mt.KEYCODE.ARROW_UP == n ? l = Math.max(0, l - 1) : mt.KEYCODE.ARROW_DOWN == n ? l = Math.min(T.opts.tableInsertMaxSize - 1, l + 1) : mt.KEYCODE.ARROW_LEFT == n ? s = Math.max(0, s - 1) : mt.KEYCODE.ARROW_RIGHT == n && (s = Math.min(T.opts.tableInsertMaxSize - 1, s + 1)); var c = l * o + s, d = w(i.get(c)); f(d), T.events.disableBlur(), d.focus(), a = !1 } } else mt.KEYCODE.ENTER == n && (T.button.exec(t), a = !1); return !1 === a && (e.preventDefault(), e.stopPropagation()), a }, !0) }(n), n } function f(e) { var t = e.data("row"); null !== t && (t = parseInt(t)); var a = e.data("col"); null !== a && (a = parseInt(a)); var n = e.parent(); n.siblings(".fr-table-size-info").html("".concat(t, " &times; ").concat(a)), n.find("> span").removeClass("hover fr-active-item"); for (var i = 1; i <= T.opts.tableInsertMaxSize; i++)for (var r = 0; r <= T.opts.tableInsertMaxSize; r++) { var o = n.find('> span[data-row="'.concat(i, '"][data-col="').concat(r, '"]')); i <= t && r <= a ? o.addClass("hover") : i <= t + 1 || i <= 2 && !T.helpers.isMobile() ? o.css("display", "inline-block") : 2 < i && !T.helpers.isMobile() && o.css("display", "none") } e.addClass("fr-active-item") } function p(e) { if (e) return T.popups.onHide("table.edit", l), !0; if (0 < T.opts.tableEditButtons.length) { var t = { buttons: '<div class="fr-buttons">'.concat(T.button.buildList(T.opts.tableEditButtons), "</div>") }, a = T.popups.create("table.edit", t); return T.events.$on(T.$wp, "scroll.table-edit", function () { T.popups.isVisible("table.edit") && u() }), a } return !1 } function g() { if (0 < Z().length) { var e = J(); T.selection.setBefore(e.get(0)) || T.selection.setAfter(e.get(0)), T.selection.restore(), T.popups.hide("table.edit"), e.remove(), T.toolbar.enable() } } function h(e) { var t = J(); if (0 < t.length) { if (0 < T.$el.find("th.fr-selected-cell").length && "above" == e) return; var a, n, i, r = S(), o = x(r); if (null == o) return; n = "above" == e ? o.min_i : o.max_i; var s = "<tr>"; for (a = 0; a < r[n].length; a++) { if ("below" == e && n < r.length - 1 && r[n][a] == r[n + 1][a] || "above" == e && 0 < n && r[n][a] == r[n - 1][a]) { if (0 === a || 0 < a && r[n][a] != r[n][a - 1]) { var l = w(r[n][a]); l.attr("rowspan", parseInt(l.attr("rowspan"), 10) + 1) } } else s += '<td style="' + w(r[n][a]).attr("style") + '" ><br></td>' } s += "</tr>", i = 0 < T.$el.find("th.fr-selected-cell").length && "below" == e ? w(t.find("tbody").not(t.find("> table tbody"))) : w(t.find("tr").not(t.find("> table tr")).get(n)), "below" == e ? "TBODY" == i.attr("tagName") ? i.prepend(s) : i[0].parentNode && i[0].insertAdjacentHTML("afterend", s) : "above" == e && (i.before(s), T.popups.isVisible("table.edit") && u()) } } function m(e, t, a) { var n, i, r, o, s, l = 0, c = S(a); if (e < (t = Math.min(t, c[0].length - 1))) for (i = e; i <= t; i++)if (!(e < i && c[0][i] == c[0][i - 1]) && 1 < (o = Math.min(parseInt(c[0][i].getAttribute("colspan"), 10) || 1, t - e + 1)) && c[0][i] == c[0][i + 1]) for (l = o - 1, n = 1; n < c.length; n++)if (c[n][i] != c[n - 1][i]) { for (r = i; r < i + o; r++)if (1 < (s = parseInt(c[n][r].getAttribute("colspan"), 10) || 1) && c[n][r] == c[n][r + 1]) r += l = Math.min(l, s - 1); else if (!(l = Math.max(0, l - 1))) break; if (!l) break } l && b(c, l, "colspan", 0, c.length - 1, e, t) } function v(e, t, a) { var n, i, r, o, s, l = 0, c = S(a); if (e < (t = Math.min(t, c.length - 1))) for (n = e; n <= t; n++)if (!(e < n && c[n][0] == c[n - 1][0]) && 1 < (o = Math.min(parseInt(c[n][0].getAttribute("rowspan"), 10) || 1, t - e + 1)) && c[n][0] == c[n + 1][0]) for (l = o - 1, i = 1; i < c[0].length; i++)if (c[n][i] != c[n][i - 1]) { for (r = n; r < n + o; r++)if (1 < (s = parseInt(c[r][i].getAttribute("rowspan"), 10) || 1) && c[r][i] == c[r + 1][i]) r += l = Math.min(l, s - 1); else if (!(l = Math.max(0, l - 1))) break; if (!l) break } l && b(c, l, "rowspan", e, t, 0, c[0].length - 1) } function b(e, t, a, n, i, r, o) { var s, l, c; for (s = n; s <= i; s++)for (l = r; l <= o; l++)n < s && e[s][l] == e[s - 1][l] || r < l && e[s][l] == e[s][l - 1] || 1 < (c = parseInt(e[s][l].getAttribute(a), 10) || 1) && (1 < c - t ? e[s][l].setAttribute(a, c - t) : e[s][l].removeAttribute(a)) } function E(e, t, a, n, i) { v(e, t, i), m(a, n, i) } function t(e) { var t = T.$el.find(".fr-selected-cell"); "REMOVE" != e ? t.css("background-color", T.helpers.HEXtoRGB(e)) : t.css("background-color", ""), u() } function S(e) { var c = []; return null == (e = e || null) && 0 < Z().length && (e = J()), e && e.findVisible("tr").not(e.find("> table tr")).each(function (s, e) { var t = w(e), l = 0; t.find("> th, > td").each(function (e, t) { for (var a = w(t), n = parseInt(a.attr("colspan"), 10) || 1, i = parseInt(a.attr("rowspan"), 10) || 1, r = s; r < s + i; r++)for (var o = l; o < l + n; o++)c[r] || (c[r] = []), c[r][o] ? l++ : c[r][o] = t; l += n }) }), c } function L(e, t) { for (var a = 0; a < t.length; a++)for (var n = 0; n < t[a].length; n++)if (t[a][n] == e) return { row: a, col: n } } function _(e, t, a) { for (var n = e + 1, i = t + 1; n < a.length;) { if (a[n][t] != a[e][t]) { n--; break } n++ } for (n == a.length && n--; i < a[e].length;) { if (a[e][i] != a[e][t]) { i--; break } i++ } return i == a[e].length && i--, { row: n, col: i } } function A() { T.el.querySelector(".fr-cell-fixed") && T.el.querySelector(".fr-cell-fixed").classList.remove("fr-cell-fixed"), T.el.querySelector(".fr-cell-handler") && T.el.querySelector(".fr-cell-handler").classList.remove("fr-cell-handler") } function C() { var e = T.$el.find(".fr-selected-cell"); 0 < e.length && e.each(function () { var e = w(this); e.removeClass("fr-selected-cell"), "" === e.attr("class") && e.removeAttr("class") }), A() } function I() { T.events.disableBlur(), T.selection.clear(), T.$el.addClass("fr-no-selection"), T.$el.blur(), T.events.enableBlur() } function x(e) { var t = T.$el.find(".fr-selected-cell"); if (0 < t.length) { var a, n = e.length, i = 0, r = e[0].length, o = 0; for (a = 0; a < t.length; a++) { var s = L(t[a], e), l = _(s.row, s.col, e); n = Math.min(s.row, n), i = Math.max(l.row, i), r = Math.min(s.col, r), o = Math.max(l.col, o) } return { min_i: n, max_i: i, min_j: r, max_j: o } } return null } function O(e) { var t = x(e); if (null != t) { var a = w(e[t.min_i][t.min_j]), n = w(e[t.min_i][t.max_j]), i = w(e[t.max_i][t.min_j]); return { left: a.length && a.offset().left, right: n.length && n.offset().left + n.outerWidth(), top: a.length && a.offset().top, bottom: i.length && i.offset().top + i.outerHeight() } } } function k(e, t) { if (w(e).is(t)) C(), w(e).addClass("fr-selected-cell"); else { I(), T.edit.off(); var a = S(), n = L(e, a), i = L(t, a), r = function u(e, t, a, n, i) { var r, o, s, l, c = e, d = t, f = a, p = n; for (r = c; r <= d; r++)(1 < (parseInt(w(i[r][f]).attr("rowspan"), 10) || 1) || 1 < (parseInt(w(i[r][f]).attr("colspan"), 10) || 1)) && (l = _((s = L(i[r][f], i)).row, s.col, i), c = Math.min(s.row, c), d = Math.max(l.row, d), f = Math.min(s.col, f), p = Math.max(l.col, p)), (1 < (parseInt(w(i[r][p]).attr("rowspan"), 10) || 1) || 1 < (parseInt(w(i[r][p]).attr("colspan"), 10) || 1)) && (l = _((s = L(i[r][p], i)).row, s.col, i), c = Math.min(s.row, c), d = Math.max(l.row, d), f = Math.min(s.col, f), p = Math.max(l.col, p)); for (o = f; o <= p; o++)(1 < (parseInt(w(i[c][o]).attr("rowspan"), 10) || 1) || 1 < (parseInt(w(i[c][o]).attr("colspan"), 10) || 1)) && (l = _((s = L(i[c][o], i)).row, s.col, i), c = Math.min(s.row, c), d = Math.max(l.row, d), f = Math.min(s.col, f), p = Math.max(l.col, p)), (1 < (parseInt(w(i[d][o]).attr("rowspan"), 10) || 1) || 1 < (parseInt(w(i[d][o]).attr("colspan"), 10) || 1)) && (l = _((s = L(i[d][o], i)).row, s.col, i), c = Math.min(s.row, c), d = Math.max(l.row, d), f = Math.min(s.col, f), p = Math.max(l.col, p)); return c == e && d == t && f == a && p == n ? { min_i: e, max_i: t, min_j: a, max_j: n } : u(c, d, f, p, i) }(Math.min(n.row, i.row), Math.max(n.row, i.row), Math.min(n.col, i.col), Math.max(n.col, i.col), a); C(), e.classList.add("fr-cell-fixed"), t.classList.add("fr-cell-handler"); for (var o = r.min_i; o <= r.max_i; o++)for (var s = r.min_j; s <= r.max_j; s++)w(a[o][s]).addClass("fr-selected-cell") } } function F(e) { var t = null, a = w(e.target); return "TD" == e.target.tagName || "TH" == e.target.tagName ? t = e.target : 0 < a.closest("th", a.closest("thead")[0]).length ? t = a.closest("th", a.closest("thead")[0]).get(0) : 0 < a.closest("td", a.closest("tr")[0]).length && (t = a.closest("td", a.closest("tr")[0]).get(0)), -1 === T.$el.html.toString().search(t) ? null : t } function D() { C(), T.popups.hide("table.edit") } function e(e) { var t = F(e); if ("false" == w(t).parents("[contenteditable]").not(".fr-element").not(".fr-img-caption").not("body").first().attr("contenteditable")) return !0; if (0 < Z().length && !t && D(), !T.edit.isDisabled() || T.popups.isVisible("table.edit")) if (1 != e.which || 1 == e.which && T.helpers.isMac() && e.ctrlKey) (3 == e.which || 1 == e.which && T.helpers.isMac() && e.ctrlKey) && t && D(); else if (r = !0, t) { 0 < Z().length && !e.shiftKey && D(), e.stopPropagation(), T.events.trigger("image.hideResizer"), T.events.trigger("video.hideResizer"), i = !0; var a = t.tagName.toLowerCase(); e.shiftKey && 0 < T.$el.find("".concat(a, ".fr-selected-cell")).length ? w(T.$el.find("".concat(a, ".fr-selected-cell")).closest("table")).is(w(t).closest("table")) ? k(n, t) : I() : ((T.keys.ctrlKey(e) || e.shiftKey) && (1 < Z().length || 0 === w(t).find(T.selection.element()).length && !w(t).is(T.selection.element())) && I(), n = t, 0 < T.opts.tableEditButtons.length && k(n, n)) } } function a(e) { if (!T.edit.isDisabled() && T.popups.areVisible()) return !0; if (i || T.$tb.is(e.target) || T.$tb.is(w(e.target).closest(".fr-toolbar")) || (0 < Z().length && T.toolbar.enable(), C()), !(1 != e.which || 1 == e.which && T.helpers.isMac() && e.ctrlKey)) { if (r = !1, i) i = !1, F(e) || 1 != Z().length ? 0 < Z().length && (T.selection.isCollapsed() ? u() : (C(), T.edit.on())) : C(); if (y) { y = !1, R.removeClass("fr-moving"), T.$el.removeClass("fr-no-selection"), T.edit.on(); var t = parseFloat(R.css("left")) + T.opts.tableResizerOffset + T.$wp.offset().left; T.opts.iframe && (t -= T.$iframe.offset().left), R.data("release-position", t), R.removeData("max-left"), R.removeData("max-right"), function A() { var e = R.data("origin"), t = R.data("release-position"); if (e !== t) { var a = R.data("first"), n = R.data("second"), i = R.data("table"), r = i.outerWidth(); if (T.undo.canDo() || T.undo.saveStep(), null != a && null != n) { var o, s, l, c = S(i), d = [], f = [], p = [], u = []; for (o = 0; o < c.length; o++)s = w(c[o][a]), l = w(c[o][n]), d[o] = s.outerWidth(), p[o] = l.outerWidth(), f[o] = d[o] / r * 100, u[o] = p[o] / r * 100; for (o = 0; o < c.length; o++)if (s = w(c[o][a]), l = w(c[o][n]), c[o][a] != c[o][n]) { var g = (f[o] * (d[o] + t - e) / d[o]).toFixed(4); s.css("width", g + "%"), l.css("width", (f[o] + u[o] - g).toFixed(4) + "%") } } else { var h, m = i.parent(), v = r / m.width() * 100, b = (parseInt(i.css("margin-left"), 10) || 0) / m.width() * 100, E = (parseInt(i.css("margin-right"), 10) || 0) / m.width() * 100; "rtl" == T.opts.direction && 0 === n || "rtl" != T.opts.direction && 0 !== n ? (h = (r + t - e) / r * v, i.css("margin-right", "calc(100% - ".concat(Math.round(h).toFixed(4), "% - ").concat(Math.round(b).toFixed(4), "%)"))) : ("rtl" == T.opts.direction && 0 !== n || "rtl" != T.opts.direction && 0 === n) && (h = (r - t + e) / r * v, i.css("margin-left", "calc(100% - ".concat(Math.round(h).toFixed(4), "% - ").concat(Math.round(E).toFixed(4), "%)"))), i.css("width", "".concat(Math.round(h).toFixed(4), "%")) } T.selection.restore(), T.undo.saveStep(), T.events.trigger("table.resized", [i.get(0)]) } R.removeData("origin"), R.removeData("release-position"), R.removeData("first"), R.removeData("second"), R.removeData("table") }(), U() } } } function M(e) { if (T.events.$on(w("input"), "click", ee), !0 === i && 0 < T.opts.tableEditButtons.length) { if (w(e.currentTarget).closest("table").is(J())) { if ("TD" == e.currentTarget.tagName && 0 === T.$el.find("th.fr-selected-cell").length) return void k(n, e.currentTarget); if ("TH" == e.currentTarget.tagName && 0 === T.$el.find("td.fr-selected-cell").length) return void k(n, e.currentTarget) } I() } } function N(e, t, a, n) { for (var i, r = t; r != T.el && "TD" != r.tagName && "TH" != r.tagName && ("up" == n ? i = r.previousElementSibling : "down" == n && (i = r.nextElementSibling), !i);)r = r.parentNode; "TD" == r.tagName || "TH" == r.tagName ? function o(e, t) { for (var a = e; a && "TABLE" != a.tagName && a.parentNode != T.el;)a = a.parentNode; if (a && "TABLE" == a.tagName) { var n = S(w(a)); "up" == t ? B(L(e, n), a, n) : "down" == t && P(L(e, n), a, n) } }(r, n) : i && ("up" == n && T.selection.setAtEnd(i), "down" == n && T.selection.setAtStart(i)) } function B(e, t, a) { 0 < e.row ? T.selection.setAtEnd(a[e.row - 1][e.col]) : N(0, t, 0, "up") } function P(e, t, a) { var n = parseInt(a[e.row][e.col].getAttribute("rowspan"), 10) || 1; e.row < a.length - n ? T.selection.setAtStart(a[e.row + n][e.col]) : N(0, t, 0, "down") } function U() { R && (R.find("div").css("opacity", 0), R.css("top", 0), R.css("left", 0), R.css("height", 0), R.find("div").css("height", 0), R.hide()) } function $() { c && c.removeClass("fr-visible").css("left", "-9999px") } function W(e, t) { var a = w(t), n = a.closest("table"), i = n.parent(); if (t && "TD" != t.tagName && "TH" != t.tagName && (0 < a.closest("td").length ? t = a.closest("td") : 0 < a.closest("th").length && (t = a.closest("th"))), !t || "TD" != t.tagName && "TH" != t.tagName) R && a.get(0) != R.get(0) && a.parent().get(0) != R.get(0) && T.core.sameInstance(R) && U(); else { if (a = w(t), 0 === T.$el.find(a).length) return !1; var r = a.offset().left - 1, o = r + a.outerWidth(); if (Math.abs(e.pageX - r) <= T.opts.tableResizerOffset || Math.abs(o - e.pageX) <= T.opts.tableResizerOffset) { var s, l, c, d, f, p = S(n), u = L(t, p), g = _(u.row, u.col, p), h = n.offset().top, m = n.outerHeight() - 1; "rtl" != T.opts.direction ? e.pageX - r <= T.opts.tableResizerOffset ? (c = r, 0 < u.col ? (d = r - z(u.col - 1, p) + T.opts.tableResizingLimit, f = r + z(u.col, p) - T.opts.tableResizingLimit, s = u.col - 1, l = u.col) : (s = null, l = 0, d = n.offset().left - 1 - parseInt(n.css("margin-left"), 10), f = n.offset().left - 1 + n.width() - p[0].length * T.opts.tableResizingLimit)) : o - e.pageX <= T.opts.tableResizerOffset && (c = o, g.col < p[g.row].length && p[g.row][g.col + 1] ? (d = o - z(g.col, p) + T.opts.tableResizingLimit, f = o + z(g.col + 1, p) - T.opts.tableResizingLimit, s = g.col, l = g.col + 1) : (s = g.col, l = null, d = n.offset().left - 1 + p[0].length * T.opts.tableResizingLimit, f = i.offset().left - 1 + i.width() + parseFloat(i.css("padding-left")))) : o - e.pageX <= T.opts.tableResizerOffset ? (c = o, 0 < u.col ? (d = o - z(u.col, p) + T.opts.tableResizingLimit, f = o + z(u.col - 1, p) - T.opts.tableResizingLimit, s = u.col, l = u.col - 1) : (s = null, l = 0, d = n.offset().left + p[0].length * T.opts.tableResizingLimit, f = i.offset().left - 1 + i.width() + parseFloat(i.css("padding-left")))) : e.pageX - r <= T.opts.tableResizerOffset && (c = r, g.col < p[g.row].length && p[g.row][g.col + 1] ? (d = r - z(g.col + 1, p) + T.opts.tableResizingLimit, f = r + z(g.col, p) - T.opts.tableResizingLimit, s = g.col + 1, l = g.col) : (s = g.col, l = null, d = i.offset().left + parseFloat(i.css("padding-left")), f = n.offset().left - 1 + n.width() - p[0].length * T.opts.tableResizingLimit)), R || function C() { T.shared.$table_resizer || (T.shared.$table_resizer = w(document.createElement("div")).attr("class", "fr-table-resizer").html("<div></div>")), R = T.shared.$table_resizer, T.events.$on(R, "mousedown", function (e) { return !T.core.sameInstance(R) || (0 < Z().length && D(), 1 == e.which ? (T.selection.save(), y = !0, R.addClass("fr-moving"), I(), T.edit.off(), R.find("div").css("opacity", 1), !1) : void 0) }), T.events.$on(R, "mousemove", function (e) { if (!T.core.sameInstance(R)) return !0; y && (T.opts.iframe && (e.pageX -= T.$iframe.offset().left), j(e)) }), T.events.on("shared.destroy", function () { R.html("").removeData().remove(), R = null }, !0), T.events.on("destroy", function () { T.$el.find(".fr-selected-cell").removeClass("fr-selected-cell"), w("body").first().append(R.hide()) }, !0) }(), R.data("table", n), R.data("first", s), R.data("second", l), R.data("instance", T), T.$wp.append(R); var v = c - T.win.pageXOffset - T.opts.tableResizerOffset - T.$wp.offset().left, b = h - T.$wp.offset().top + T.$wp.scrollTop(); if (T.opts.iframe) { var E = T.helpers.getPX(T.$wp.find(".fr-iframe").css("padding-top")), A = T.helpers.getPX(T.$wp.find(".fr-iframe").css("padding-left")); v += T.$iframe.offset().left + A, b += T.$iframe.offset().top + E, d += T.$iframe.offset().left, f += T.$iframe.offset().left } R.data("max-left", d), R.data("max-right", f), R.data("origin", c - T.win.pageXOffset), R.css("top", b), R.css("left", v), R.css("height", m), R.find("div").css("height", m), R.css("padding-left", T.opts.tableResizerOffset), R.css("padding-right", T.opts.tableResizerOffset), R.show() } else T.core.sameInstance(R) && U() } } function K(e, t) { if (T.$box.find(".fr-line-breaker").isVisible()) return !1; c || X(), T.$box.append(c), c.data("instance", T); var a, n = w(t).find("tr").first(), i = e.pageX, r = 0, o = 0; if (T.opts.iframe) { var s = T.helpers.getPX(T.$wp.find(".fr-iframe").css("padding-top")), l = T.helpers.getPX(T.$wp.find(".fr-iframe").css("padding-left")); r += T.$iframe.offset().left - T.helpers.scrollLeft() + l, o += T.$iframe.offset().top - T.helpers.scrollTop() + s } n.find("th, td").each(function () { var e = w(this); return e.offset().left <= i && i < e.offset().left + e.outerWidth() / 2 ? (a = parseInt(c.find("a").css("width"), 10), c.css("top", o + e.offset().top - T.$box.offset().top - a - 5), c.css("left", r + e.offset().left - T.$box.offset().left - a / 2), c.data("selected-cell", e), c.data("position", "before"), c.addClass("fr-visible"), !1) : e.offset().left + e.outerWidth() / 2 <= i && i < e.offset().left + e.outerWidth() ? (a = parseInt(c.find("a").css("width"), 10), c.css("top", o + e.offset().top - T.$box.offset().top - a - 5), c.css("left", r + e.offset().left - T.$box.offset().left + e.outerWidth() - a / 2), c.data("selected-cell", e), c.data("position", "after"), c.addClass("fr-visible"), !1) : void 0 }) } function H(e, t) { if (T.$box.find(".fr-line-breaker").isVisible()) return !1; c || X(), T.$box.append(c), c.data("instance", T); var a, n = w(t), i = e.pageY, r = 0, o = 0; if (T.opts.iframe) { var s = T.helpers.getPX(T.$wp.find(".fr-iframe").css("padding-top")), l = T.helpers.getPX(T.$wp.find(".fr-iframe").css("padding-left")); r += T.$iframe.offset().left - T.helpers.scrollLeft() + l, o += T.$iframe.offset().top - T.helpers.scrollTop() + s } n.find("tr").each(function () { var e = w(this); return e.offset().top <= i && i < e.offset().top + e.outerHeight() / 2 ? (a = parseInt(c.find("a").css("width"), 10), c.css("top", o + e.offset().top - T.$box.offset().top - a / 2), c.css("left", r + e.offset().left - T.$box.offset().left - a - 5), c.data("selected-cell", e.find("td").first()), c.data("position", "above"), c.addClass("fr-visible"), !1) : e.offset().top + e.outerHeight() / 2 <= i && i < e.offset().top + e.outerHeight() ? (a = parseInt(c.find("a").css("width"), 10), c.css("top", o + e.offset().top - T.$box.offset().top + e.outerHeight() - a / 2), c.css("left", r + e.offset().left - T.$box.offset().left - a - 5), c.data("selected-cell", e.find("td").first()), c.data("position", "below"), c.addClass("fr-visible"), !1) : void 0 }) } function G(e) { o = null; var t = T.doc.elementFromPoint(e.pageX - T.win.pageXOffset, e.pageY - T.win.pageYOffset); T.opts.tableResizer && (!T.popups.areVisible() || T.popups.areVisible() && T.popups.isVisible("table.edit")) && W(e, t), !T.opts.tableInsertHelper || T.popups.areVisible() || T.$tb.hasClass("fr-inline") && T.$tb.isVisible() || function r(e, t) { if (0 === Z().length) { var a, n, i; if (t && ("HTML" == t.tagName || "BODY" == t.tagName || T.node.isElement(t))) for (a = 1; a <= T.opts.tableInsertHelperOffset; a++) { if (n = T.doc.elementFromPoint(e.pageX - T.win.pageXOffset, e.pageY - T.win.pageYOffset + a), w(n).hasClass("fr-tooltip")) return !0; if (n && ("TH" == n.tagName || "TD" == n.tagName || "TABLE" == n.tagName) && (w(n).parents(".fr-wrapper").length || T.opts.iframe) && "false" != w(n).closest("table").attr("contenteditable")) return K(e, w(n).closest("table")), !0; if (i = T.doc.elementFromPoint(e.pageX - T.win.pageXOffset + a, e.pageY - T.win.pageYOffset), w(i).hasClass("fr-tooltip")) return !0; if (i && ("TH" == i.tagName || "TD" == i.tagName || "TABLE" == i.tagName) && (w(i).parents(".fr-wrapper").length || T.opts.iframe) && "false" != w(i).closest("table").attr("contenteditable")) return H(e, w(i).closest("table")), !0 } T.core.sameInstance(c) && $() } }(e, t) } function Y() { if (y) { var e = R.data("table").offset().top - T.win.pageYOffset; if (T.opts.iframe) { var t = T.helpers.getPX(T.$wp.find(".fr-iframe").css("padding-top")); e += T.$iframe.offset().top - T.helpers.scrollTop() + t } R.css("top", e) } } function z(e, t) { var a, n = w(t[0][e]).outerWidth(); for (a = 1; a < t.length; a++)n = Math.min(n, w(t[a][e]).outerWidth()); return n } function V(e, t, a) { var n, i = 0; for (n = e; n <= t; n++)i += z(n, a); return i } function j(e) { if (1 < Z().length && r && I(), !1 === r && !1 === i && !1 === y) o && clearTimeout(o), T.edit.isDisabled() && !T.popups.isVisible("table.edit") || (o = setTimeout(G, 30, e)); else if (y) { var t = e.pageX - T.win.pageXOffset; T.opts.iframe && (t += T.$iframe.offset().left); var a = R.data("max-left"), n = R.data("max-right"); a <= t && t <= n ? R.css("left", t - T.opts.tableResizerOffset - T.$wp.offset().left) : t < a && parseFloat(R.css("left"), 10) > a - T.opts.tableResizerOffset ? R.css("left", a - T.opts.tableResizerOffset - T.$wp.offset().left) : n < t && parseFloat(R.css("left"), 10) < n - T.opts.tableResizerOffset && R.css("left", n - T.opts.tableResizerOffset - T.$wp.offset().left) } else r && $() } function q(e) { T.node.isEmpty(e.get(0)) ? e.prepend(mt.MARKERS) : e.prepend(mt.START_MARKER).append(mt.END_MARKER) } function X() { T.shared.$ti_helper || (T.shared.$ti_helper = w(document.createElement("div")).attr("class", "fr-insert-helper").html('<a class="fr-floating-btn" role="button" tabIndex="-1" title="'.concat(T.language.translate("Insert"), '"><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z"/></svg></a>')), T.events.bindClick(T.shared.$ti_helper, "a", function () { var e = c.data("selected-cell"), t = c.data("position"), a = c.data("instance") || T; "before" == t ? (T.undo.saveStep(), e.addClass("fr-selected-cell"), a.table.insertColumn(t), e.removeClass("fr-selected-cell"), T.undo.saveStep()) : "after" == t ? (T.undo.saveStep(), e.addClass("fr-selected-cell"), a.table.insertColumn(t), e.removeClass("fr-selected-cell"), T.undo.saveStep()) : "above" == t ? (T.undo.saveStep(), e.addClass("fr-selected-cell"), a.table.insertRow(t), e.removeClass("fr-selected-cell"), T.undo.saveStep()) : "below" == t && (T.undo.saveStep(), e.addClass("fr-selected-cell"), a.table.insertRow(t), e.removeClass("fr-selected-cell"), T.undo.saveStep()), $() }), T.events.on("shared.destroy", function () { T.shared.$ti_helper.html("").removeData().remove(), T.shared.$ti_helper = null }, !0), T.events.$on(T.shared.$ti_helper, "mousemove", function (e) { e.stopPropagation() }, !0), T.events.$on(w(T.o_win), "scroll", function () { $() }, !0), T.events.$on(T.$wp, "scroll", function () { $() }, !0)), c = T.shared.$ti_helper, T.events.on("destroy", function () { c = null }), T.tooltip.bind(T.$box, ".fr-insert-helper > a.fr-floating-btn") } function Q() { n = null, clearTimeout(o) } function Z() { return T.el.querySelectorAll(".fr-selected-cell") } function J() { var e = Z(); if (e.length) { for (var t = e[0]; t && "TABLE" != t.tagName && t.parentNode != T.el;)t = t.parentNode; return t && "TABLE" == t.tagName ? w(t) : w([]) } return w([]) } function ee(e) { i = !1 } return { _init: function te() { if (!T.$wp) return !1; if (!T.helpers.isMobile()) { y = i = r = !1, T.events.$on(T.$el, "mousedown", e), T.popups.onShow("image.edit", function () { C(), i = r = !1 }), T.popups.onShow("link.edit", function () { C(), i = r = !1 }), T.events.on("commands.mousedown", function (e) { 0 < e.parents(".fr-toolbar").length && C() }), T.events.$on(T.$el, "mouseover", "th, td", M), T.events.$on(T.$win, "mouseup", a), T.opts.iframe && T.events.$on(w(T.o_win), "mouseup", a), T.events.$on(T.$win, "mousemove", j), T.events.$on(w(T.o_win), "scroll", Y), T.events.on("contentChanged", function () { 0 < Z().length && (u(), T.$el.find("img").on("load.selected-cells", function () { w(this).off("load.selected-cells"), 0 < Z().length && u() })) }), T.events.$on(w(T.o_win), "resize", function () { C() }), T.events.on("toolbar.esc", function () { if (0 < Z().length) return T.events.disableBlur(), T.events.focus(), !1 }, !0), T.events.$on(w(T.o_win), "keydown", function () { r && i && (i = r = !1, T.$el.removeClass("fr-no-selection"), T.edit.on(), T.selection.setAtEnd(T.$el.find(".fr-selected-cell").last().get(0)), T.selection.restore(), C()) }), T.events.$on(T.$el, "keydown", function (e) { e.shiftKey ? !1 === function o(e) { var t = Z(); if (null != t && 0 < t.length) { var a, n = S(), i = e.which, r = L(1 == t.length ? a = t[0] : (a = T.el.querySelector(".fr-cell-fixed"), T.el.querySelector(".fr-cell-handler")), n); if (mt.KEYCODE.ARROW_RIGHT == i) { if (r.col < n[0].length - 1) return k(a, n[r.row][r.col + 1]), !1 } else if (mt.KEYCODE.ARROW_DOWN == i) { if (r.row < n.length - 1) return k(a, n[r.row + 1][r.col]), !1 } else if (mt.KEYCODE.ARROW_LEFT == i) { if (0 < r.col) return k(a, n[r.row][r.col - 1]), !1 } else if (mt.KEYCODE.ARROW_UP == i && 0 < r.row) return k(a, n[r.row - 1][r.col]), !1 } }(e) && setTimeout(function () { u() }, 0) : function s(e) { var t = e.which, a = T.selection.blocks(); if (a.length && ("TD" == (a = a[0]).tagName || "TH" == a.tagName)) { for (var n = a; n && "TABLE" != n.tagName && n.parentNode != T.el;)n = n.parentNode; if (n && "TABLE" == n.tagName && (mt.KEYCODE.ARROW_LEFT == t || mt.KEYCODE.ARROW_UP == t || mt.KEYCODE.ARROW_RIGHT == t || mt.KEYCODE.ARROW_DOWN == t) && (0 < Z().length && D(), T.browser.webkit && (mt.KEYCODE.ARROW_UP == t || mt.KEYCODE.ARROW_DOWN == t))) { var i = T.selection.ranges(0).startContainer; if (i.nodeType == Node.TEXT_NODE && (mt.KEYCODE.ARROW_UP == t && (i.previousSibling && "BR" !== i.previousSibling.tagName || i.previousSibling && "BR" === i.previousSibling.tagName && i.previousSibling.previousSibling) || mt.KEYCODE.ARROW_DOWN == t && (i.nextSibling && "BR" !== i.nextSibling.tagName || i.nextSibling && "BR" === i.nextSibling.tagName && i.nextSibling.nextSibling))) return; e.preventDefault(), e.stopPropagation(); var r = S(w(n)), o = L(a, r); return mt.KEYCODE.ARROW_UP == t ? B(o, n, r) : mt.KEYCODE.ARROW_DOWN == t && P(o, n, r), T.selection.restore(), !1 } } }(e) }), T.events.on("keydown", function (e) { if (!1 === function n(e) { if (e.which == mt.KEYCODE.TAB) { var t; if (0 < Z().length) t = T.$el.find(".fr-selected-cell").last(); else { var a = T.selection.element(); "TD" == a.tagName || "TH" == a.tagName ? t = w(a) : a != T.el && (0 < w(a).parentsUntil(T.$el, "td").length ? t = w(a).parents("td").first() : 0 < w(a).parentsUntil(T.$el, "th").length && (t = w(a).parents("th").first())) } if (t) return e.preventDefault(), !!(0 === T.selection.get().focusOffset && 0 < w(T.selection.element()).parentsUntil(T.$el, "ol, ul").length && (0 < w(T.selection.element()).closest("li").prev().length || w(T.selection.element()).is("li") && 0 < w(T.selection.element()).prev().length)) || (D(), e.shiftKey ? 0 < t.prev().length ? q(t.prev()) : 0 < t.closest("tr").length && 0 < t.closest("tr").prev().length ? q(t.closest("tr").prev().find("td").last()) : 0 < t.closest("tbody").length && 0 < t.closest("table").find("thead tr").length && q(t.closest("table").find("thead tr th").last()) : 0 < t.next().length ? q(t.next()) : 0 < t.closest("tr").length && 0 < t.closest("tr").next().length ? q(t.closest("tr").next().find("td").first()) : 0 < t.closest("thead").length && 0 < t.closest("table").find("tbody tr").length ? q(t.closest("table").find("tbody tr td").first()) : (t.addClass("fr-selected-cell"), h("below"), C(), q(t.closest("tr").next().find("td").first())), T.selection.restore(), !1) } }(e)) return !1; var t = Z(); if (0 < t.length) { if (0 < t.length && T.keys.ctrlKey(e) && e.which == mt.KEYCODE.A) return C(), T.popups.isVisible("table.edit") && T.popups.hide("table.edit"), t = [], !0; if (e.which == mt.KEYCODE.ESC && T.popups.isVisible("table.edit")) return C(), T.popups.hide("table.edit"), e.preventDefault(), e.stopPropagation(), e.stopImmediatePropagation(), !(t = []); if (1 < t.length && (e.which == mt.KEYCODE.BACKSPACE || e.which == mt.KEYCODE.DELETE)) { T.undo.saveStep(); for (var a = 0; a < t.length; a++)w(t[a]).html("<br>"), a == t.length - 1 && w(t[a]).prepend(mt.MARKERS); return T.selection.restore(), T.undo.saveStep(), !(t = []) } if (1 < t.length && e.which != mt.KEYCODE.F10 && !T.keys.isBrowserAction(e)) return e.preventDefault(), !(t = []) } else if (!(t = []) === function i(e) { if (e.altKey && e.which == mt.KEYCODE.SPACE) { var t, a = T.selection.element(); if ("TD" == a.tagName || "TH" == a.tagName ? t = a : 0 < w(a).closest("td").length ? t = w(a).closest("td").get(0) : 0 < w(a).closest("th").length && (t = w(a).closest("th").get(0)), t) return e.preventDefault(), k(t, t), u(), !1 } }(e)) return !1 }, !0); var t = []; T.events.on("html.beforeGet", function () { t = Z(); for (var e = 0; e < t.length; e++)t[e].className = (t[e].className || "").replace(/fr-selected-cell/g, "") }), T.events.on("html.afterGet", function () { for (var e = 0; e < t.length; e++)t[e].className = (t[e].className ? t[e].className.trim() + " " : "") + "fr-selected-cell"; t = [] }), d(!0), p(!0) } T.events.on("destroy", Q) }, insert: function ae(e, t) { var a, n, i = "<table " + (T.opts.tableDefaultWidth ? 'style="width: ' + T.opts.tableDefaultWidth + ';" ' : "") + 'class="fr-inserted-table"><tbody>', r = 100 / t; for (a = 0; a < e; a++) { for (i += "<tr>", n = 0; n < t; n++)i += "<td" + (T.opts.tableDefaultWidth ? ' style="width: ' + r.toFixed(4) + '%;"' : "") + ">", 0 === a && 0 === n && (i += mt.MARKERS), i += "<br></td>"; i += "</tr>" } i += "</tbody></table>", T.html.insert(i), T.selection.restore(); var o = T.$el.find(".fr-inserted-table"); o.removeClass("fr-inserted-table"), T.events.trigger("table.inserted", [o.get(0)]) }, remove: g, insertRow: h, deleteRow: function ne() { var e = J(); if (0 < e.length) { var t, a, n, i = S(), r = x(i); if (null == r) return; if (0 === r.min_i && r.max_i == i.length - 1) g(); else { for (t = r.max_i; t >= r.min_i; t--) { for (n = w(e.find("tr").not(e.find("> table tr")).get(t)), a = 0; a < i[t].length; a++)if (0 === a || i[t][a] != i[t][a - 1]) { var o = w(i[t][a]); if (1 < parseInt(o.attr("rowspan"), 10)) { var s = parseInt(o.attr("rowspan"), 10) - 1; 1 == s ? o.removeAttr("rowspan") : o.attr("rowspan", s) } if (t < i.length - 1 && i[t][a] == i[t + 1][a] && (0 === t || i[t][a] != i[t - 1][a])) { for (var l = i[t][a], c = a; 0 < c && i[t][c] == i[t][c - 1];)c--; 0 === c ? w(e.find("tr").not(e.find("> table tr")).get(t + 1)).prepend(l) : w(i[t + 1][c - 1])[0].parentNode && w(i[t + 1][c - 1])[0].insertAdjacentElement("afterend", l) } } var d = n.parent(); n.remove(), 0 === d.find("tr").length && d.remove(), i = S(e) } E(0, i.length - 1, 0, i[0].length - 1, e), 0 < r.min_i ? T.selection.setAtEnd(i[r.min_i - 1][0]) : T.selection.setAtEnd(i[0][0]), T.selection.restore(), T.popups.hide("table.edit") } } }, insertColumn: function ie(l) { var e = J(); if (0 < e.length) { var c, d = S(), t = x(d); c = "before" == l ? t.min_j : t.max_j; var a, f = 100 / d[0].length, p = 100 / (d[0].length + 1); e.find("th, td").each(function () { (a = w(this)).data("old-width", a.outerWidth() / e.outerWidth() * 100) }), e.find("tr").not(e.find("> table tr")).each(function (e) { for (var t, a = w(this), n = 0, i = 0; n - 1 < c;) { if (!(t = a.find("> th, > td").get(i))) { t = null; break } t == d[e][n] ? (n += parseInt(w(t).attr("colspan"), 10) || 1, i++) : (n += parseInt(w(d[e][n]).attr("colspan"), 10) || 1, "after" == l && (t = 0 === i ? -1 : a.find("> th, > td").get(i - 1))) } var r, o = w(t); if ("after" == l && c < n - 1 || "before" == l && 0 < c && d[e][c] == d[e][c - 1]) { if (0 === e || 0 < e && d[e][c] != d[e - 1][c]) { var s = parseInt(o.attr("colspan"), 10) + 1; o.attr("colspan", s), o.css("width", (o.data("old-width") * p / f + p).toFixed(4) + "%"), o.removeData("old-width") } } else r = 0 < a.find("th").length ? '<th style="width: '.concat(p.toFixed(4), '%;"><br></th>') : '<td style="width: '.concat(p.toFixed(4), '%;"><br></td>'), -1 == t ? a.prepend(r) : null == t ? a.append(r) : "before" == l ? o.before(r) : "after" == l && o[0].parentNode && o[0].insertAdjacentHTML("afterend", r) }), e.find("th, td").each(function () { (a = w(this)).data("old-width") && (a.css("width", (a.data("old-width") * p / f).toFixed(4) + "%"), a.removeData("old-width")) }), T.popups.isVisible("table.edit") && u() } }, deleteColumn: function re() { var e = J(); if (0 < e.length) { var t, a, n, i = S(), r = x(i); if (null == r) return; if (0 === r.min_j && r.max_j == i[0].length - 1) g(); else { var o = 0; for (t = 0; t < i.length; t++)for (a = 0; a < i[0].length; a++)(n = w(i[t][a])).hasClass("fr-selected-cell") || (n.data("old-width", n.outerWidth() / e.outerWidth() * 100), (a < r.min_j || a > r.max_j) && (o += n.outerWidth() / e.outerWidth() * 100)); for (o /= i.length, a = r.max_j; a >= r.min_j; a--)for (t = 0; t < i.length; t++)if (0 === t || i[t][a] != i[t - 1][a]) if (n = w(i[t][a]), 1 < (parseInt(n.attr("colspan"), 10) || 1)) { var s = parseInt(n.attr("colspan"), 10) - 1; 1 == s ? n.removeAttr("colspan") : n.attr("colspan", s), n.css("width", (100 * (n.data("old-width") - z(a, i)) / o).toFixed(4) + "%"), n.removeData("old-width") } else { var l = w(n.parent().get(0)); n.remove(), 0 === l.find("> th, > td").length && (0 === l.prev().length || 0 === l.next().length || l.prev().find("> th[rowspan], > td[rowspan]").length < l.prev().find("> th, > td").length) && l.remove() } E(0, i.length - 1, 0, i[0].length - 1, e), 0 < r.min_j ? T.selection.setAtEnd(i[r.min_i][r.min_j - 1]) : T.selection.setAtEnd(i[r.min_i][0]), T.selection.restore(), T.popups.hide("table.edit"), e.find("th, td").each(function () { (n = w(this)).data("old-width") && (n.css("width", (100 * n.data("old-width") / o).toFixed(4) + "%"), n.removeData("old-width")) }) } } }, mergeCells: function oe() { if (1 < Z().length && (0 === T.$el.find("th.fr-selected-cell").length || 0 === T.$el.find("td.fr-selected-cell").length)) { A(); var e, t, a = x(S()); if (null == a) return; var n = T.$el.find(".fr-selected-cell"), i = w(n[0]), r = i.parent().find(".fr-selected-cell"), o = i.closest("table"), s = i.html(), l = 0; for (e = 0; e < r.length; e++)l += w(r[e]).outerWidth(); for (i.css("width", Math.min(100, l / o.outerWidth() * 100).toFixed(4) + "%"), a.min_j < a.max_j && i.attr("colspan", a.max_j - a.min_j + 1), a.min_i < a.max_i && i.attr("rowspan", a.max_i - a.min_i + 1), e = 1; e < n.length; e++)"<br>" != (t = w(n[e])).html() && "" !== t.html() && (s += "<br>".concat(t.html())), t.remove(); i.html(s), T.selection.setAtEnd(i.get(0)), T.selection.restore(), T.toolbar.enable(), v(a.min_i, a.max_i, o); var c = o.find("tr:empty"); for (e = c.length - 1; 0 <= e; e--)w(c[e]).remove(); m(a.min_j, a.max_j, o), u() } }, splitCellVertically: function se() { if (1 == Z().length) { var e = T.$el.find(".fr-selected-cell"), t = parseInt(e.attr("colspan"), 10) || 1, a = e.parent().outerWidth(), n = e.outerWidth(), i = e.clone().html("<br>"), r = S(), o = L(e.get(0), r); if (1 < t) { var s = Math.ceil(t / 2); n = V(o.col, o.col + s - 1, r) / a * 100; var l = V(o.col + s, o.col + t - 1, r) / a * 100; 1 < s ? e.attr("colspan", s) : e.removeAttr("colspan"), 1 < t - s ? i.attr("colspan", t - s) : i.removeAttr("colspan"), e.css("width", n.toFixed(4) + "%"), i.css("width", l.toFixed(4) + "%") } else { var c; for (c = 0; c < r.length; c++)if (0 === c || r[c][o.col] != r[c - 1][o.col]) { var d = w(r[c][o.col]); if (!d.is(e)) { var f = (parseInt(d.attr("colspan"), 10) || 1) + 1; d.attr("colspan", f) } } n = n / a * 100 / 2, e.css("width", "".concat(n.toFixed(4), "%")), i.css("width", "".concat(n.toFixed(4), "%")) } e[0].parentNode && e[0].insertAdjacentElement("afterend", i[0]), C(), T.popups.hide("table.edit") } }, splitCellHorizontally: function le() { if (1 == Z().length) { var e = T.$el.find(".fr-selected-cell"), t = e.parent(), a = e.closest("table"), n = parseInt(e.attr("rowspan"), 10), i = S(), r = L(e.get(0), i), o = e.clone().html("<br>"); if (1 < n) { var s = Math.ceil(n / 2); 1 < s ? e.attr("rowspan", s) : e.removeAttr("rowspan"), 1 < n - s ? o.attr("rowspan", n - s) : o.removeAttr("rowspan"); for (var l = r.row + s, c = 0 === r.col ? r.col : r.col - 1; 0 <= c && (i[l][c] == i[l][c - 1] || 0 < l && i[l][c] == i[l - 1][c]);)c--; -1 == c ? w(a.find("tr").not(a.find("> table tr")).get(l)).prepend(o) : w(i[l][c])[0].parentNode && w(i[l][c])[0].insertAdjacentElement("afterend", o[0]) } else { var d, f = w(document.createElement("tr")).append(o); for (d = 0; d < i[0].length; d++)if (0 === d || i[r.row][d] != i[r.row][d - 1]) { var p = w(i[r.row][d]); p.is(e) || p.attr("rowspan", (parseInt(p.attr("rowspan"), 10) || 1) + 1) } t[0].parentNode && t[0].insertAdjacentElement("afterend", f[0]) } C(), T.popups.hide("table.edit") } }, addHeader: function ce() { var e = J(); if (0 < e.length && 0 === e.find("th").length) { var t, a = "<thead><tr>", n = 0; for (e.find("tr").first().find("> td").each(function () { var e = w(this); n += parseInt(e.attr("colspan"), 10) || 1 }), t = 0; t < n; t++)a += "<th><br></th>"; a += "</tr></thead>", e.prepend(a), u() } }, removeHeader: function de() { var e = J(), t = e.find("thead"); if (0 < t.length) if (0 === e.find("tbody tr").length) g(); else if (t.remove(), 0 < Z().length) u(); else { T.popups.hide("table.edit"); var a = e.find("tbody tr").first().find("td").first().get(0); a && (T.selection.setAtEnd(a), T.selection.restore()) } }, setBackground: t, showInsertPopup: function fe() { var e = T.$tb.find('.fr-command[data-cmd="insertTable"]'), t = T.popups.get("table.insert"); if (t || (t = d()), !t.hasClass("fr-active")) { T.popups.refresh("table.insert"), T.popups.setContainer("table.insert", T.$tb); var a = T.button.getPosition(e), n = a.left, i = a.top; T.popups.show("table.insert", n, i, e.outerHeight()) } }, showEditPopup: u, showColorsPopup: s, back: function pe() { 0 < Z().length ? u() : (T.popups.hide("table.insert"), T.toolbar.showInline()) }, verticalAlign: function ue(e) { T.$el.find(".fr-selected-cell").css("vertical-align", e) }, horizontalAlign: function ge(e) { T.$el.find(".fr-selected-cell").css("text-align", e) }, applyStyle: function he(e, t, a, n) { if (0 < t.length) { if (!a) { var i = Object.keys(n); i.splice(i.indexOf(e), 1), t.removeClass(i.join(" ")) } t.toggleClass(e) } }, selectedTable: J, selectedCells: Z, customColor: function me() { var e = T.popups.get("table.colors").find(".fr-table-colors-hex-layer input"); e.length && t(e.val()) }, selectCells: k } }, mt.DefineIcon("insertTable", { NAME: "table", SVG_KEY: "insertTable" }), mt.RegisterCommand("insertTable", { title: "Insert Table", undo: !1, focus: !0, refreshOnCallback: !1, popup: !0, callback: function () { this.popups.isVisible("table.insert") ? (this.$el.find(".fr-marker").length && (this.events.disableBlur(), this.selection.restore()), this.popups.hide("table.insert")) : this.table.showInsertPopup() }, plugin: "table" }), mt.RegisterCommand("tableInsert", { callback: function (e, t, a) { this.table.insert(t, a), this.popups.hide("table.insert") } }), mt.DefineIcon("tableHeader", { NAME: "header", FA5NAME: "heading", SVG_KEY: "tableHeader" }), mt.RegisterCommand("tableHeader", { title: "Table Header", focus: !1, toggle: !0, callback: function () { this.popups.get("table.edit").find('.fr-command[data-cmd="tableHeader"]').hasClass("fr-active") ? this.table.removeHeader() : this.table.addHeader() }, refresh: function (e) { var t = this.table.selectedTable(); 0 < t.length && (0 === t.find("th").length ? e.removeClass("fr-active").attr("aria-pressed", !1) : e.addClass("fr-active").attr("aria-pressed", !0)) } }), mt.DefineIcon("tableRows", { NAME: "bars", SVG_KEY: "row" }), mt.RegisterCommand("tableRows", { type: "dropdown", focus: !1, title: "Row", options: { above: "Insert row above", below: "Insert row below", "delete": "Delete row" }, html: function () { var e = '<ul class="fr-dropdown-list" role="presentation">', t = mt.COMMANDS.tableRows.options; for (var a in t) t.hasOwnProperty(a) && (e += '<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableRows" data-param1="' + a + '" title="' + this.language.translate(t[a]) + '">' + this.language.translate(t[a]) + "</a></li>"); return e += "</ul>" }, callback: function (e, t) { "above" == t || "below" == t ? this.table.insertRow(t) : this.table.deleteRow() } }), mt.DefineIcon("tableColumns", { NAME: "bars fa-rotate-90", SVG_KEY: "columns" }), mt.RegisterCommand("tableColumns", { type: "dropdown", focus: !1, title: "Column", options: { before: "Insert column before", after: "Insert column after", "delete": "Delete column" }, html: function () { var e = '<ul class="fr-dropdown-list" role="presentation">', t = mt.COMMANDS.tableColumns.options; for (var a in t) t.hasOwnProperty(a) && (e += '<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableColumns" data-param1="'.concat(a, '" title="').concat(this.language.translate(t[a]), '">').concat(this.language.translate(t[a]), "</a></li>")); return e += "</ul>" }, callback: function (e, t) { "before" == t || "after" == t ? this.table.insertColumn(t) : this.table.deleteColumn() } }), mt.DefineIcon("tableCells", { NAME: "square-o", FA5NAME: "square", SVG_KEY: "cellOptions" }), mt.RegisterCommand("tableCells", { type: "dropdown", focus: !1, title: "Cell", options: { merge: "Merge cells", "vertical-split": "Vertical split", "horizontal-split": "Horizontal split" }, html: function () { var e = '<ul class="fr-dropdown-list" role="presentation">', t = mt.COMMANDS.tableCells.options; for (var a in t) t.hasOwnProperty(a) && (e += '<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCells" data-param1="'.concat(a, '" title="').concat(this.language.translate(t[a]), '">').concat(this.language.translate(t[a]), "</a></li>")); return e += "</ul>" }, callback: function (e, t) { "merge" == t ? this.table.mergeCells() : "vertical-split" == t ? this.table.splitCellVertically() : this.table.splitCellHorizontally() }, refreshOnShow: function (e, t) { 1 < this.$el.find(".fr-selected-cell").length ? (t.find('a[data-param1="vertical-split"]').addClass("fr-disabled").attr("aria-disabled", !0), t.find('a[data-param1="horizontal-split"]').addClass("fr-disabled").attr("aria-disabled", !0), t.find('a[data-param1="merge"]').removeClass("fr-disabled").attr("aria-disabled", !1)) : (t.find('a[data-param1="merge"]').addClass("fr-disabled").attr("aria-disabled", !0), t.find('a[data-param1="vertical-split"]').removeClass("fr-disabled").attr("aria-disabled", !1), t.find('a[data-param1="horizontal-split"]').removeClass("fr-disabled").attr("aria-disabled", !1)) } }), mt.DefineIcon("tableRemove", { NAME: "trash", SVG_KEY: "removeTable" }), mt.RegisterCommand("tableRemove", { title: "Remove Table", focus: !1, callback: function () { this.table.remove() } }), mt.DefineIcon("tableStyle", { NAME: "paint-brush", SVG_KEY: "tableStyle" }), mt.RegisterCommand("tableStyle", { title: "Table Style", type: "dropdown", focus: !1, html: function () { var e = '<ul class="fr-dropdown-list" role="presentation">', t = this.opts.tableStyles; for (var a in t) t.hasOwnProperty(a) && (e += '<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableStyle" data-param1="'.concat(a, '" title="').concat(this.language.translate(t[a]), '">').concat(this.language.translate(t[a]), "</a></li>")); return e += "</ul>" }, callback: function (e, t) { this.table.applyStyle(t, this.$el.find(".fr-selected-cell").closest("table"), this.opts.tableMultipleStyles, this.opts.tableStyles) }, refreshOnShow: function (e, t) { var a = this.$, n = this.$el.find(".fr-selected-cell").closest("table"); n && t.find(".fr-command").each(function () { var e = a(this).data("param1"), t = n.hasClass(e); a(this).toggleClass("fr-active", t).attr("aria-selected", t) }) } }), mt.DefineIcon("tableCellBackground", { NAME: "tint", SVG_KEY: "cellBackground" }), mt.RegisterCommand("tableCellBackground", { title: "Cell Background", focus: !1, popup: !0, callback: function () { this.table.showColorsPopup() } }), mt.RegisterCommand("tableCellBackgroundColor", { undo: !0, focus: !1, callback: function (e, t) { this.table.setBackground(t) } }), mt.DefineIcon("tableBack", { NAME: "arrow-left", SVG_KEY: "back" }), mt.RegisterCommand("tableBack", { title: "Back", undo: !1, focus: !1, back: !0, callback: function () { this.table.back() }, refresh: function (e) { 0 !== this.table.selectedCells().length || this.opts.toolbarInline ? (e.removeClass("fr-hidden"), e.next(".fr-separator").removeClass("fr-hidden")) : (e.addClass("fr-hidden"), e.next(".fr-separator").addClass("fr-hidden")) } }), mt.DefineIcon("tableCellVerticalAlign", { NAME: "arrows-v", FA5NAME: "arrows-alt-v", SVG_KEY: "verticalAlignMiddle" }), mt.RegisterCommand("tableCellVerticalAlign", { type: "dropdown", focus: !1, title: "Vertical Align", options: { Top: "Align Top", Middle: "Align Middle", Bottom: "Align Bottom" }, html: function () { var e = '<ul class="fr-dropdown-list" role="presentation">', t = mt.COMMANDS.tableCellVerticalAlign.options; for (var a in t) t.hasOwnProperty(a) && (e += '<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCellVerticalAlign" data-param1="'.concat(a.toLowerCase(), '" title="').concat(this.language.translate(t[a]), '">').concat(this.language.translate(a), "</a></li>")); return e += "</ul>" }, callback: function (e, t) { this.table.verticalAlign(t) }, refreshOnShow: function (e, t) { t.find('.fr-command[data-param1="' + this.$el.find(".fr-selected-cell").css("vertical-align") + '"]').addClass("fr-active").attr("aria-selected", !0) } }), mt.DefineIcon("tableCellHorizontalAlign", { NAME: "align-left", SVG_KEY: "alignLeft" }), mt.DefineIcon("align-left", { NAME: "align-left", SVG_KEY: "alignLeft" }), mt.DefineIcon("align-right", { NAME: "align-right", SVG_KEY: "alignRight" }), mt.DefineIcon("align-center", { NAME: "align-center", SVG_KEY: "alignCenter" }), mt.DefineIcon("align-justify", { NAME: "align-justify", SVG_KEY: "alignJustify" }), mt.RegisterCommand("tableCellHorizontalAlign", { type: "dropdown", focus: !1, title: "Horizontal Align", options: { left: "Align Left", center: "Align Center", right: "Align Right", justify: "Align Justify" }, html: function () { var e = '<ul class="fr-dropdown-list" role="presentation">', t = mt.COMMANDS.tableCellHorizontalAlign.options; for (var a in t) t.hasOwnProperty(a) && (e += '<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="tableCellHorizontalAlign" data-param1="'.concat(a, '" title="').concat(this.language.translate(t[a]), '">').concat(this.icon.create("align-".concat(a)), '<span class="fr-sr-only">').concat(this.language.translate(t[a]), "</span></a></li>")); return e += "</ul>" }, callback: function (e, t) { this.table.horizontalAlign(t) }, refresh: function (e) { var t = this.table.selectedCells(), a = this.$; t.length && e.find("> *").first().replaceWith(this.icon.create("align-".concat(this.helpers.getAlignment(a(t[0]))))) }, refreshOnShow: function (e, t) { t.find('.fr-command[data-param1="' + this.helpers.getAlignment(this.$el.find(".fr-selected-cell").first()) + '"]').addClass("fr-active").attr("aria-selected", !0) } }), mt.DefineIcon("tableCellStyle", { NAME: "magic", SVG_KEY: "cellStyle" }), mt.RegisterCommand("tableCellStyle", { title: "Cell Style", type: "dropdown", focus: !1, html: function () { var e = '<ul class="fr-dropdown-list" role="presentation">', t = this.opts.tableCellStyles; for (var a in t) t.hasOwnProperty(a) && (e += '<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCellStyle" data-param1="'.concat(a, '" title="').concat(this.language.translate(t[a]), '">').concat(this.language.translate(t[a]), "</a></li>")); return e += "</ul>" }, callback: function (e, t) { this.table.applyStyle(t, this.$el.find(".fr-selected-cell"), this.opts.tableCellMultipleStyles, this.opts.tableCellStyles) }, refreshOnShow: function (e, t) { var a = this.$, n = this.$el.find(".fr-selected-cell").first(); n && t.find(".fr-command").each(function () { var e = a(this).data("param1"), t = n.hasClass(e); a(this).toggleClass("fr-active", t).attr("aria-selected", t) }) } }), mt.RegisterCommand("tableCellBackgroundCustomColor", { title: "OK", undo: !0, callback: function () { this.table.customColor() } }), mt.DefineIcon("tableColorRemove", { NAME: "eraser", SVG_KEY: "remove" }), mt.URLRegEx = "(^| |\\u00A0)(".concat(mt.LinkRegEx, "|([a-z0-9+-_.]{1,}@[a-z0-9+-_.]{1,}\\.[a-z0-9+-_]{1,}))$"), mt.PLUGINS.url = function (r) { var o = r.$, s = null; function t(e, t, a) { for (var n = ""; a.length && "." == a[a.length - 1];)n += ".", a = a.substring(0, a.length - 1); var i = a; if (r.opts.linkConvertEmailAddress) r.helpers.isEmail(i) && !/^mailto:.*/i.test(i) && (i = "mailto:".concat(i)); else if (r.helpers.isEmail(i)) return t + a; return /^((http|https|ftp|ftps|mailto|tel|sms|notes|data)\:)/i.test(i) || (i = "//".concat(i)), (t || "") + "<a".concat(r.opts.linkAlwaysBlank ? ' target="_blank"' : "").concat(s ? ' rel="'.concat(s, '"') : "", ' data-fr-linked="true" href="').concat(i, '">').concat(a.replace(/&amp;/g, "&").replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;"), "</a>").concat(n) } var l = function l() { return new RegExp(mt.URLRegEx, "gi") }; function c(e) { return r.opts.linkAlwaysNoFollow && (s = "nofollow"), r.opts.linkAlwaysBlank && (r.opts.linkNoOpener && (s ? s += " noopener" : s = "noopener"), r.opts.linkNoReferrer && (s ? s += " noreferrer" : s = "noreferrer")), e.replace(l(), t) } function d(e) { var t = e.split(" "); return t[t.length - 1] } function a() { var e = r.selection.ranges(0), t = e.startContainer; if (!t || t.nodeType !== Node.TEXT_NODE || e.startOffset !== (t.textContent || "").length) return !1; if (function i(e) { return !!e && ("A" === e.tagName || !(!e.parentNode || e.parentNode == r.el) && i(e.parentNode)) }(t)) return !1; if (l().test(d(t.textContent))) { o(t).before(c(t.textContent)); var a = o(t.parentNode).find("a[data-fr-linked]"); a.removeAttr("data-fr-linked"), t.parentNode.removeChild(t), r.events.trigger("url.linked", [a.get(0)]) } else if (t.textContent.split(" ").length <= 2 && t.previousSibling && "A" === t.previousSibling.tagName) { var n = t.previousSibling.innerText + t.textContent; l().test(d(n)) && (o(t.previousSibling).replaceWith(c(n)), t.parentNode.removeChild(t)) } } return { _init: function e() { r.events.on("keypress", function (e) { !r.selection.isCollapsed() || "." != e.key && ")" != e.key && "(" != e.key || a() }, !0), r.events.on("keydown", function (e) { var t = e.which; !r.selection.isCollapsed() || t != mt.KEYCODE.ENTER && t != mt.KEYCODE.SPACE || a() }, !0), r.events.on("paste.beforeCleanup", function (e) { if (r.helpers.isURL(e)) { var t = null; return r.opts.linkAlwaysBlank && (r.opts.linkNoOpener && (t ? t += " noopener" : t = "noopener"), r.opts.linkNoReferrer && (t ? t += " noreferrer" : t = "noreferrer")), "<a".concat(r.opts.linkAlwaysBlank ? ' target="_blank"' : "").concat(t ? ' rel="'.concat(t, '"') : "", ' href="').concat(e, '" >').concat(e, "</a>") } }) } } }, Object.assign(mt.POPUP_TEMPLATES, { "video.insert": "[_BUTTONS_][_BY_URL_LAYER_][_EMBED_LAYER_][_UPLOAD_LAYER_][_PROGRESS_BAR_]", "video.edit": "[_BUTTONS_]", "video.size": "[_BUTTONS_][_SIZE_LAYER_]" }), Object.assign(mt.DEFAULTS, { videoAllowedTypes: ["mp4", "webm", "ogg", "mp3", "mpeg", "url"], videoAllowedProviders: [".*"], videoDefaultAlign: "center", videoDefaultDisplay: "block", videoDefaultWidth: 600, videoEditButtons: ["videoReplace", "videoRemove", "videoDisplay", "videoAlign", "videoSize", "autoplay"], videoInsertButtons: ["videoBack", "|", "videoByURL", "videoEmbed", "videoUpload"], videoMaxSize: 52428800, videoMove: !0, videoResize: !0, videoResponsive: !1, videoSizeButtons: ["videoBack", "|"], videoSplitHTML: !1, videoTextNear: !0, videoUpload: !0, videoUploadMethod: "POST", videoUploadParam: "file", videoUploadParams: {}, videoUploadToS3: !1, videoUploadURL: null }), mt.VIDEO_PROVIDERS = [{ test_regex: /^.*((youtu.be)|(youtube.com))\/((v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))?\??v?=?([^#\&\?]*).*/, url_regex: /(?:https?:\/\/)?(?:www\.)?(?:m\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=|embed\/)?([0-9a-zA-Z_\-]+)(.+)?/g, url_text: "https://www.youtube.com/embed/$1?$2", html: '<iframe width="640" height="360" src="{url}&wmode=opaque" frameborder="0" allowfullscreen></iframe>', provider: "youtube" }, { test_regex: /^.*(?:vimeo.com)\/(?:channels(\/\w+\/)?|groups\/*\/videos\/\u200b\d+\/|video\/|)(\d+)(?:$|\/|\?)/, url_regex: /(?:https?:\/\/)?(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:[a-zA-Z0-9_\-]+)?(\/[a-zA-Z0-9_\-]+)?/i, url_text: "https://player.vimeo.com/video/$1", html: '<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>', provider: "vimeo" }, { test_regex: /^.+(dailymotion.com|dai.ly)\/(video|hub)?\/?([^_]+)[^#]*(#video=([^_&]+))?/, url_regex: /(?:https?:\/\/)?(?:www\.)?(?:dailymotion\.com|dai\.ly)\/(?:video|hub)?\/?(.+)/g, url_text: "https://www.dailymotion.com/embed/video/$1", html: '<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>', provider: "dailymotion" }, { test_regex: /^.+(screen.yahoo.com)\/[^_&]+/, url_regex: "", url_text: "", html: '<iframe width="640" height="360" src="{url}?format=embed" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>', provider: "yahoo" }, { test_regex: /^.+(rutube.ru)\/[^_&]+/, url_regex: /(?:https?:\/\/)?(?:www\.)?(?:rutube\.ru)\/(?:video)?\/?(.+)/g, url_text: "https://rutube.ru/play/embed/$1", html: '<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>', provider: "rutube" }, { test_regex: /^(?:.+)vidyard.com\/(?:watch)?\/?([^.&/]+)\/?(?:[^_.&]+)?/, url_regex: /^(?:.+)vidyard.com\/(?:watch)?\/?([^.&/]+)\/?(?:[^_.&]+)?/g, url_text: "https://play.vidyard.com/$1", html: '<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>', provider: "vidyard" }], mt.VIDEO_EMBED_REGEX = /^\W*((<iframe(.|\n)*>(\s|\n)*<\/iframe>)|(<embed(.|\n)*>))\W*$/i, mt.PLUGINS.video = function (u) { var s, d, f, p, n, a, g = u.$, l = "https://i.froala.com/upload", h = 2, m = 3, v = 4, c = 5, b = 6, i = {}; function E() { var e = u.popups.get("video.insert"); e.find(".fr-video-by-url-layer input").val("").trigger("change"); var t = e.find(".fr-video-embed-layer textarea"); t.val("").trigger("change"), (t = e.find(".fr-video-upload-layer input")).val("").trigger("change") } function r() { var e = u.popups.get("video.edit"); if (e || (e = function o() { var e = ""; if (0 < u.opts.videoEditButtons.length) { u.opts.videoResponsive && (-1 < u.opts.videoEditButtons.indexOf("videoSize") && u.opts.videoEditButtons.splice(u.opts.videoEditButtons.indexOf("videoSize"), 1), -1 < u.opts.videoEditButtons.indexOf("videoDisplay") && u.opts.videoEditButtons.splice(u.opts.videoEditButtons.indexOf("videoDisplay"), 1), -1 < u.opts.videoEditButtons.indexOf("videoAlign") && u.opts.videoEditButtons.splice(u.opts.videoEditButtons.indexOf("videoAlign"), 1)); var t = { buttons: e += '<div class="fr-buttons"> \n      '.concat(u.button.buildList(u.opts.videoEditButtons), " \n      </div>") }, a = u.popups.create("video.edit", t); return u.events.$on(u.$wp, "scroll.video-edit", function () { p && u.popups.isVisible("video.edit") && (u.events.disableBlur(), L(p)) }), a } return !1 }()), e) { u.popups.setContainer("video.edit", u.$sc), u.popups.refresh("video.edit"); var t = p.find("iframe, embed, ".concat(p.find("iframe, embed, audio").get(0) ? "audio" : "video")), a = t.offset().left + t.outerWidth() / 2, n = t.offset().top + t.outerHeight(), i = t.get(0).src ? t.get(0).src : null, r = !(!(i = (i = i.split("."))[i.length - 1]).includes("pdf") && !i.includes("txt")); t.hasClass("fr-file") || r || p.find("audio").get(0) ? (document.getElementById("autoplay-".concat(u.id)) && (document.getElementById("autoplay-".concat(u.id)).style.display = "none"), document.getElementById("videoReplace-".concat(u.id)) && (document.getElementById("videoReplace-".concat(u.id)).style.display = "none")) : (document.getElementById("autoplay-".concat(u.id)).style.display = "", document.getElementById("videoReplace-".concat(u.id)).style.display = ""), u.popups.show("video.edit", a, n, t.outerHeight(), !0) } } function o(e) { if (e) return u.popups.onRefresh("video.insert", E), u.popups.onHide("video.insert", X), !0; var t = ""; u.opts.videoUpload || -1 === u.opts.videoInsertButtons.indexOf("videoUpload") || u.opts.videoInsertButtons.splice(u.opts.videoInsertButtons.indexOf("videoUpload"), 1); var a = u.button.buildList(u.opts.videoInsertButtons); "" !== a && (t = '<div class="fr-buttons">' + a + "</div>"); var n, i = "", r = u.opts.videoInsertButtons.indexOf("videoUpload"), o = u.opts.videoInsertButtons.indexOf("videoByURL"), s = u.opts.videoInsertButtons.indexOf("videoEmbed"); if (0 <= o) { n = " fr-active", (r < o && 0 <= r || s < o && 0 <= s) && (n = ""); i = '<div class="fr-video-by-url-layer fr-layer'.concat(n, '" id="fr-video-by-url-layer-').concat(u.id, '"><div class="fr-input-line"><input id="fr-video-by-url-layer-text-').concat(u.id, '" type="text" placeholder="').concat(u.language.translate("Paste in a video URL"), '" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><span style=\'float:left\'><div class="fr-checkbox-line fr-autoplay-margin"><span class="fr-checkbox"> <input id=\'videoPluginAutoplay\' data-checked="_blank" type="checkbox"> <span>').concat('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z" fill="#FFF"></path></svg>', '</span></span> <label id="fr-label-target-').concat(u.id, '">Autoplay</label></div> </span><button type="button" class="fr-command fr-submit" data-cmd="videoInsertByURL" tabIndex="2" role="button">').concat(u.language.translate("Insert"), "</button></div></div>") } var l = ""; 0 <= s && (n = " fr-active", (r < s && 0 <= r || o < s && 0 <= o) && (n = ""), l = '<div class="fr-video-embed-layer fr-layer'.concat(n, '" id="fr-video-embed-layer-').concat(u.id, '"><div class="fr-input-line"><textarea id="fr-video-embed-layer-text').concat(u.id, '" type="text" placeholder="').concat(u.language.translate("Embedded Code"), '" tabIndex="1" aria-required="true" rows="5"></textarea></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoInsertEmbed" tabIndex="2" role="button">').concat(u.language.translate("Insert"), "</button></div></div>")); var c = ""; 0 <= r && (n = " fr-active", (s < r && 0 <= s || o < r && 0 <= o) && (n = ""), c = '<div class="fr-video-upload-layer fr-layer'.concat(n, '" id="fr-video-upload-layer-').concat(u.id, '"><strong>').concat(u.language.translate("Drop video"), "</strong><br>(").concat(u.language.translate("or click"), ')<div class="fr-form"><input type="file" accept="video/').concat(u.opts.videoAllowedTypes.join(", video/").toLowerCase(), '" tabIndex="-1" aria-labelledby="fr-video-upload-layer-').concat(u.id, '" role="button"></div></div>')); var d = { buttons: t, by_url_layer: i, embed_layer: l, upload_layer: c, progress_bar: '<div class="fr-video-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="videoDismissError" tabIndex="2" role="button">OK</button></div></div>' }, f = u.popups.create("video.insert", d); return function p(n) { u.events.$on(n, "dragover dragenter", ".fr-video-upload-layer", function () { return g(this).addClass("fr-drop"), !1 }, !0), u.events.$on(n, "dragleave dragend", ".fr-video-upload-layer", function () { return g(this).removeClass("fr-drop"), !1 }, !0), u.events.$on(n, "drop", ".fr-video-upload-layer", function (e) { e.preventDefault(), e.stopPropagation(), g(this).removeClass("fr-drop"); var t = e.originalEvent.dataTransfer; if (t && t.files) { var a = n.data("instance") || u; a.events.disableBlur(), a.video.upload(t.files), a.events.enableBlur() } }, !0), u.helpers.isIOS() && u.events.$on(n, "touchstart", '.fr-video-upload-layer input[type="file"]', function () { g(this).trigger("click") }, !0); u.events.$on(n, "change", '.fr-video-upload-layer input[type="file"]', function () { if (this.files) { var e = n.data("instance") || u; e.events.disableBlur(), n.find("input:focus").blur(), e.events.enableBlur(), e.video.upload(this.files) } g(this).val("") }, !0) }(f), f } function A(e) { u.events.focus(!0), u.selection.restore(); var t = !1; p && (q(), t = !0), u.html.insert('<span contenteditable="false" draggable="true" class="fr-jiv fr-video fr-deletable">'.concat(e, "</span>"), !1, u.opts.videoSplitHTML), u.popups.hide("video.insert"); var a = u.$el.find(".fr-jiv"); a.removeClass("fr-jiv"), a.toggleClass("fr-rv", u.opts.videoResponsive), Q(a, u.opts.videoDefaultDisplay, u.opts.videoDefaultAlign), a.toggleClass("fr-draggable", u.opts.videoMove), u.events.trigger(t ? "video.replaced" : "video.inserted", [a]) } function C() { var e = g(this); u.popups.hide("video.insert"), e.removeClass("fr-uploading"), e.parent().next().is("br") && e.parent().next().remove(), L(e.parent()), u.events.trigger("video.loaded", [e.parent()]) } function T(s, e, c, d, f) { u.edit.off(), w("Loading video"), e && (s = u.helpers.sanitizeURL(s)); var p = function p() { var e, t; if (d) { u.undo.canDo() || d.find("video").hasClass("fr-uploading") || u.undo.saveStep(); var a = d.find("video").data("fr-old-src"), n = d.data("fr-replaced"); d.data("fr-replaced", !1), u.$wp ? ((e = d.clone(!0)).find("video").removeData("fr-old-src").removeClass("fr-uploading"), e.find("video").off("canplay"), a && d.find("video").attr("src", a), d.replaceWith(e)) : e = d; for (var i = e.find("video").get(0).attributes, r = 0; r < i.length; r++) { var o = i[r]; 0 === o.nodeName.indexOf("data-") && e.find("video").removeAttr(o.nodeName) } if (void 0 !== c) for (t in c) c.hasOwnProperty(t) && "link" != t && e.find("video").attr("data-".concat(t), c[t]); e.find("video").on("canplay", C), e.find("video").attr("src", s), u.edit.on(), B(), u.undo.saveStep(), u.$el.blur(), u.events.trigger(n ? "video.replaced" : "video.inserted", [e, f]) } else e = function l(e, t, a) { var n, i = ""; if (t && void 0 !== t) for (n in t) t.hasOwnProperty(n) && "link" != n && (i += " data-".concat(n, '="').concat(t[n], '"')); var r = u.opts.videoDefaultWidth; r && "auto" != r && (r = "".concat(r, "px")); var o = g(document.createElement("span")).attr("contenteditable", "false").attr("draggable", "true").attr("class", "fr-video fr-dv" + u.opts.videoDefaultDisplay[0] + ("center" != u.opts.videoDefaultAlign ? " fr-fv" + u.opts.videoDefaultAlign[0] : "")).html('<video src="' + e + '" ' + i + (r ? ' style="width: ' + r + ';" ' : "") + " controls>" + u.language.translate("Your browser does not support HTML5 video.") + "</video>"); o.toggleClass("fr-draggable", u.opts.videoMove), u.edit.on(), u.events.focus(!0), u.selection.restore(), u.undo.saveStep(), u.opts.videoSplitHTML ? u.markers.split() : u.markers.insert(); u.html.wrap(); var s = u.$el.find(".fr-marker"); u.node.isLastSibling(s) && s.parent().hasClass("fr-deletable") && s.insertAfter(s.parent()); s.replaceWith(o), u.selection.clear(), o.find("video").get(0).readyState > o.find("video").get(0).HAVE_FUTURE_DATA || u.helpers.isIOS() ? a.call(o.find("video").get(0)) : o.find("video").on("canplaythrough load", a); return o }(s, c, C), B(), u.undo.saveStep(), u.events.trigger("video.inserted", [e, f]) }; R("Loading video"), p() } function R(e) { var t = u.popups.get("video.insert"); if (t || (t = o()), t.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"), t.find(".fr-video-progress-bar-layer").addClass("fr-active"), t.find(".fr-buttons").hide(), p) { var a = p.find("iframe, embed, ".concat(p.find("iframe, embed, audio").get(0) ? "audio" : "video")); u.popups.setContainer("video.insert", u.$sc); var n = a.offset().left, i = a.offset().top + a.height(); u.popups.show("video.insert", n, i, a.outerHeight()) } void 0 === e && w(u.language.translate("Uploading"), 0) } function y(e) { var t = u.popups.get("video.insert"); if (t && (t.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"), t.find(".fr-video-progress-bar-layer").removeClass("fr-active"), t.find(".fr-buttons").show(), e || u.$el.find("video.fr-error").length)) { if (u.events.focus(), u.$el.find("video.fr-error").length && (u.$el.find("video.fr-error").parent().remove(), u.undo.saveStep(), u.undo.run(), u.undo.dropRedo()), !u.$wp && p) { var a = p; U(!0), u.selection.setAfter(a.find("video").get(0)), u.selection.restore() } u.popups.hide("video.insert") } } function w(e, t) { var a = u.popups.get("video.insert"); if (a) { var n = a.find(".fr-video-progress-bar-layer"); n.find("h3").text(e + (t ? " ".concat(t, "%") : "")), n.removeClass("fr-error"), t ? (n.find("div").removeClass("fr-indeterminate"), n.find("div > span").css("width", "".concat(t, "%"))) : n.find("div").addClass("fr-indeterminate") } } function S(e) { R(); var t = u.popups.get("video.insert").find(".fr-video-progress-bar-layer"); t.addClass("fr-error"); var a = t.find("h3"); a.text(e), u.events.disableBlur(), a.focus() } function L(e) { t.call(e.get(0)) } function _(e) { w("Loading video"); var t = this.status, a = this.response, n = this.responseXML, i = this.responseText; try { if (u.opts.videoUploadToS3) if (201 == t) { var r = function s(e) { try { var t = g(e).find("Location").text(), a = g(e).find("Key").text(); return !1 === u.events.trigger("video.uploadedToS3", [t, a, e], !0) ? (u.edit.on(), !1) : t } catch (n) { return G(v, e), !1 } }(n); r && T(r, !1, [], e, a || n) } else G(v, a || n); else if (200 <= t && t < 300) { var o = function l(e) { try { if (!1 === u.events.trigger("video.uploaded", [e], !0)) return u.edit.on(), !1; var t = JSON.parse(e); return t.link ? t : (G(h, e), !1) } catch (a) { return G(v, e), !1 } }(i); o && T(o.link, !1, o, e, a || i) } else G(m, a || i) } catch (c) { G(v, a || i) } } function I() { G(v, this.response || this.responseText || this.responseXML) } function x(e) { if (e.lengthComputable) { var t = e.loaded / e.total * 100 | 0; w(u.language.translate("Uploading"), t) } } function O() { u.edit.on(), y(!0) } function k(e) { if (!u.core.sameInstance(f)) return !0; e.preventDefault(), e.stopPropagation(); var t = e.pageX || (e.originalEvent.touches ? e.originalEvent.touches[0].pageX : null), a = e.pageY || (e.originalEvent.touches ? e.originalEvent.touches[0].pageY : null); if (!t || !a) return !1; if ("mousedown" == e.type) { var n = u.$oel.get(0).ownerDocument, i = n.defaultView || n.parentWindow, r = !1; try { r = i.location != i.parent.location && !(i.$ && i.$.FE) } catch (o) { } r && i.frameElement && (t += u.helpers.getPX(g(i.frameElement).offset().left) + i.frameElement.clientLeft, a = e.clientY + u.helpers.getPX(g(i.frameElement).offset().top) + i.frameElement.clientTop) } u.undo.canDo() || u.undo.saveStep(), (d = g(this)).data("start-x", t), d.data("start-y", a), s.show(), u.popups.hideAll(), W() } function F(e) { if (!u.core.sameInstance(f)) return !0; if (d) { e.preventDefault(); var t = e.pageX || (e.originalEvent.touches ? e.originalEvent.touches[0].pageX : null), a = e.pageY || (e.originalEvent.touches ? e.originalEvent.touches[0].pageY : null); if (!t || !a) return !1; var n = d.data("start-x"), i = d.data("start-y"); d.data("start-x", t), d.data("start-y", a); var r = t - n, o = a - i, s = p.find("iframe, embed, ".concat(p.find("iframe, embed, audio").get(0) ? "audio" : "video")), l = s.width(), c = s.height(); (d.hasClass("fr-hnw") || d.hasClass("fr-hsw")) && (r = 0 - r), (d.hasClass("fr-hnw") || d.hasClass("fr-hne")) && (o = 0 - o), s.css("width", l + r), s.css("height", c + o), s.removeAttr("width"), s.removeAttr("height"), P() } } function D(e) { if (!u.core.sameInstance(f)) return !0; d && p && (e && e.stopPropagation(), d = null, s.hide(), P(), r(), u.undo.saveStep()) } function M(e) { return '<div class="fr-handler fr-h'.concat(e, '"></div>') } function N(e, t, a, n) { return e.pageX = t, e.pageY = t, k.call(this, e), e.pageX = e.pageX + a * Math.floor(Math.pow(1.1, n)), e.pageY = e.pageY + a * Math.floor(Math.pow(1.1, n)), F.call(this, e), D.call(this, e), ++n } function B() { var e, t = Array.prototype.slice.call(u.el.querySelectorAll("video, .fr-video > *")), a = []; for (e = 0; e < t.length; e++)a.push(t[e].getAttribute("src")), g(t[e]).toggleClass("fr-draggable", u.opts.videoMove), "" === t[e].getAttribute("class") && t[e].removeAttribute("class"), "" === t[e].getAttribute("style") && t[e].removeAttribute("style"); if (n) for (e = 0; e < n.length; e++)a.indexOf(n[e].getAttribute("src")) < 0 && u.events.trigger("video.removed", [g(n[e])]); n = t } function P() { f || function o() { var e; if (u.shared.$video_resizer ? (f = u.shared.$video_resizer, s = u.shared.$vid_overlay, u.events.on("destroy", function () { g("body").first().append(f.removeClass("fr-active")) }, !0)) : (u.shared.$video_resizer = g(document.createElement("div")).attr("class", "fr-video-resizer"), f = u.shared.$video_resizer, u.events.$on(f, "mousedown", function (e) { e.stopPropagation() }, !0), u.opts.videoResize && (f.append(M("nw") + M("ne") + M("sw") + M("se")), u.shared.$vid_overlay = g(document.createElement("div")).attr("class", "fr-video-overlay"), s = u.shared.$vid_overlay, e = f.get(0).ownerDocument, g(e).find("body").first().append(s))), u.events.on("shared.destroy", function () { f.html("").removeData().remove(), f = null, u.opts.videoResize && (s.remove(), s = null) }, !0), u.helpers.isMobile() || u.events.$on(g(u.o_win), "resize.video", function () { U(!0) }), u.opts.videoResize) { e = f.get(0).ownerDocument, u.events.$on(f, u._mousedown, ".fr-handler", k), u.events.$on(g(e), u._mousemove, F), u.events.$on(g(e.defaultView || e.parentWindow), u._mouseup, D), u.events.$on(s, "mouseleave", D); var n = 1, i = null, r = 0; u.events.on("keydown", function (e) { if (p) { var t = -1 != navigator.userAgent.indexOf("Mac OS X") ? e.metaKey : e.ctrlKey, a = e.which; (a !== i || 200 < e.timeStamp - r) && (n = 1), (a == mt.KEYCODE.EQUALS || u.browser.mozilla && a == mt.KEYCODE.FF_EQUALS) && t && !e.altKey ? n = N.call(this, e, 1, 1, n) : (a == mt.KEYCODE.HYPHEN || u.browser.mozilla && a == mt.KEYCODE.FF_HYPHEN) && t && !e.altKey && (n = N.call(this, e, 2, -1, n)), i = a, r = e.timeStamp } }), u.events.on("keyup", function () { n = 1 }) } }(), (u.$wp || u.$sc).append(f), f.data("instance", u); var e = p.find("iframe, embed, ".concat(p.find("iframe, embed, audio").get(0) ? "audio" : "video")), t = 0, a = 0; u.opts.iframe && (a = u.helpers.getPX(u.$wp.find(".fr-iframe").css("padding-top")), t = u.helpers.getPX(u.$wp.find(".fr-iframe").css("padding-left"))), f.css("top", (u.opts.iframe ? e.offset().top + a - 1 : e.offset().top - u.$wp.offset().top - 1) + u.$wp.scrollTop()).css("left", (u.opts.iframe ? e.offset().left + t - 1 : e.offset().left - u.$wp.offset().left - 1) + u.$wp.scrollLeft()).css("width", e.get(0).getBoundingClientRect().width).css("height", e.get(0).getBoundingClientRect().height).addClass("fr-active") } function t(e) { if (e && "touchend" == e.type && a) return !0; if (e && u.edit.isDisabled()) return e.stopPropagation(), e.preventDefault(), !1; if (u.edit.isDisabled()) return !1; for (var t = 0; t < mt.INSTANCES.length; t++)mt.INSTANCES[t] != u && mt.INSTANCES[t].events.trigger("video.hideResizer"); u.toolbar.disable(), u.helpers.isMobile() && (u.events.disableBlur(), u.$el.blur(), u.events.enableBlur()), u.$el.find(".fr-video.fr-active").removeClass("fr-active"), (p = g(this)).addClass("fr-active"), u.opts.iframe && u.size.syncIframe(), ee(), P(), r(), u.selection.clear(), u.button.bulkRefresh(), u.events.trigger("image.hideResizer") } function U(e) { p && (function t() { return u.shared.vid_exit_flag }() || !0 === e) && (f.removeClass("fr-active"), u.toolbar.enable(), p.removeClass("fr-active"), p = null, W()) } function $() { u.shared.vid_exit_flag = !0 } function W() { u.shared.vid_exit_flag = !1 } function K(e) { var t = e.originalEvent.dataTransfer; if (t && t.files && t.files.length) { var a = t.files[0]; if (a && a.type && -1 !== a.type.indexOf("video")) { if (!u.opts.videoUpload) return e.preventDefault(), e.stopPropagation(), !1; u.markers.remove(), u.markers.insertAtPoint(e.originalEvent), u.$el.find(".fr-marker").replaceWith(mt.MARKERS), u.popups.hideAll(); var n = u.popups.get("video.insert"); return n || (n = o()), u.popups.setContainer("video.insert", u.$sc), u.popups.show("video.insert", e.originalEvent.pageX, e.originalEvent.pageY), R(), 0 <= u.opts.videoAllowedTypes.indexOf(a.type.replace(/video\//g, "")) ? H(t.files) : G(b), e.preventDefault(), e.stopPropagation(), !1 } } } function H(e) { if (void 0 !== e && 0 < e.length) { if (!1 === u.events.trigger("video.beforeUpload", [e])) return !1; var t, a = e[0]; if ((null === u.opts.videoUploadURL || u.opts.videoUploadURL == l) && !u.opts.videoUploadToS3) return function s(n) { p && p.find("iframe") && p.find("iframe").length && q(); var i = new FileReader; i.onload = function () { i.result; for (var e = atob(i.result.split(",")[1]), t = [], a = 0; a < e.length; a++)t.push(e.charCodeAt(a)); T(window.URL.createObjectURL(new Blob([new Uint8Array(t)], { type: n.type })), !1, null, p) }, R(), i.readAsDataURL(n) }(a), !1; if (a.size > u.opts.videoMaxSize) return G(c), !1; if (u.opts.videoAllowedTypes.indexOf(a.type.replace(/video\//g, "")) < 0) return G(b), !1; if (u.drag_support.formdata && (t = u.drag_support.formdata ? new FormData : null), t) { var n; if (!1 !== u.opts.videoUploadToS3) for (n in t.append("key", u.opts.videoUploadToS3.keyStart + (new Date).getTime() + "-" + (a.name || "untitled")), t.append("success_action_status", "201"), t.append("X-Requested-With", "xhr"), t.append("Content-Type", a.type), u.opts.videoUploadToS3.params) u.opts.videoUploadToS3.params.hasOwnProperty(n) && t.append(n, u.opts.videoUploadToS3.params[n]); for (n in u.opts.videoUploadParams) u.opts.videoUploadParams.hasOwnProperty(n) && t.append(n, u.opts.videoUploadParams[n]); t.append(u.opts.videoUploadParam, a); var i = u.opts.videoUploadURL; u.opts.videoUploadToS3 && (i = u.opts.videoUploadToS3.uploadURL ? u.opts.videoUploadToS3.uploadURL : "https://".concat(u.opts.videoUploadToS3.region, ".amazonaws.com/").concat(u.opts.videoUploadToS3.bucket)); var r = u.core.getXHR(i, u.opts.videoUploadMethod); r.onload = function () { _.call(r, p) }, r.onerror = I, r.upload.onprogress = x, r.onabort = O, R(), u.events.disableBlur(), u.edit.off(), u.events.enableBlur(); var o = u.popups.get("video.insert"); o && g(o.off("abortUpload")).on("abortUpload", function () { 4 != r.readyState && r.abort() }), r.send(t) } } } function G(e, t) { u.edit.on(), p && p.find("video").addClass("fr-error"), S(u.language.translate("Something went wrong. Please try again.")), u.events.trigger("video.error", [{ code: e, message: i[e] }, t]) } function Y() { if (p) { var e = u.popups.get("video.size"), t = p.find("iframe, embed, ".concat(p.find("iframe, embed, audio").get(0) ? "audio" : "video")); e.find('input[name="width"]').val(t.get(0).style.width || t.attr("width")).trigger("change"), e.find('input[name="height"]').val(t.get(0).style.height || t.attr("height")).trigger("change") } } function z(e) { if (e) return u.popups.onRefresh("video.size", Y), !0; var t = { buttons: '<div class="fr-buttons fr-tabs">'.concat(u.button.buildList(u.opts.videoSizeButtons), "</div>"), size_layer: '<div class="fr-video-size-layer fr-layer fr-active" id="fr-video-size-layer-'.concat(u.id, '"><div class="fr-video-group"><div class="fr-input-line"><input id="fr-video-size-layer-width-').concat(u.id, '" type="text" name="width" placeholder="').concat(u.language.translate("Width"), '" tabIndex="1"></div><div class="fr-input-line"><input id="fr-video-size-layer-height-').concat(u.id, '" type="text" name="height" placeholder="').concat(u.language.translate("Height"), '" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoSetSize" tabIndex="2" role="button">').concat(u.language.translate("Update"), "</button></div></div>") }, a = u.popups.create("video.size", t); return u.events.$on(u.$wp, "scroll", function () { p && u.popups.isVisible("video.size") && (u.events.disableBlur(), L(p)) }), a } function V(e) { if (void 0 === e && (e = p), e) { if (e.hasClass("fr-fvl")) return "left"; if (e.hasClass("fr-fvr")) return "right"; if (e.hasClass("fr-dvb") || e.hasClass("fr-dvi")) return "center"; if ("block" == e.css("display")) { if ("left" == e.css("text-algin")) return "left"; if ("right" == e.css("text-align")) return "right" } else { if ("left" == e.css("float")) return "left"; if ("right" == e.css("float")) return "right" } } return "center" } function j(e) { void 0 === e && (e = p); var t = e.css("float"); return e.css("float", "none"), "block" == e.css("display") ? (e.css("float", ""), e.css("float") != t && e.css("float", t), "block") : (e.css("float", ""), e.css("float") != t && e.css("float", t), "inline") } function q() { if (p && !1 !== u.events.trigger("video.beforeRemove", [p])) { var e = p; u.popups.hideAll(), U(!0), u.selection.setBefore(e.get(0)) || u.selection.setAfter(e.get(0)), e.remove(), u.selection.restore(), u.html.fillEmptyBlocks() } } function X() { y() } function Q(e, t, a) { !u.opts.htmlUntouched && u.opts.useClasses ? (e.removeClass("fr-fvl fr-fvr fr-dvb fr-dvi"), e.addClass("fr-fv".concat(a[0], " fr-dv").concat(t[0]))) : "inline" == t ? (e.css({ display: "inline-block" }), "center" == a ? e.css({ "float": "none" }) : "left" == a ? e.css({ "float": "left" }) : e.css({ "float": "right" })) : (e.css({ display: "block", clear: "both" }), "left" == a ? e.css({ textAlign: "left" }) : "right" == a ? e.css({ textAlign: "right" }) : e.css({ textAlign: "center" })) } function Z() { var e = u.$el.find("video").filter(function () { return 0 === g(this).parents("span.fr-video").length }); if (0 != e.length) { e.wrap(g(document.createElement("span")).attr("class", "fr-video fr-deletable").attr("contenteditable", "false")), u.$el.find("embed, iframe").filter(function () { if (u.browser.safari && this.getAttribute("src") && this.setAttribute("src", this.src), 0 < g(this).parents("span.fr-video").length) return !1; for (var e = g(this).attr("src"), t = 0; t < mt.VIDEO_PROVIDERS.length; t++) { var a = mt.VIDEO_PROVIDERS[t]; if (a.test_regex.test(e) && new RegExp(u.opts.videoAllowedProviders.join("|")).test(a.provider)) return !0 } return !1 }).map(function () { return 0 === g(this).parents("object").length ? this : g(this).parents("object").get(0) }).wrap(g(document.createElement("span")).attr("class", "fr-video").attr("contenteditable", "false")); for (var t, a, n, i, r = u.$el.find("span.fr-video, video"), o = 0; o < r.length; o++) { var s = g(r[o]); !u.opts.htmlUntouched && u.opts.useClasses ? ((i = s).hasClass("fr-dvi") || i.hasClass("fr-dvb") || (i.addClass("fr-fv".concat(V(i)[0])), i.addClass("fr-dv".concat(j(i)[0]))), u.opts.videoTextNear || s.removeClass("fr-dvi").addClass("fr-dvb")) : u.opts.htmlUntouched || u.opts.useClasses || (void 0, a = (t = s).hasClass("fr-dvb") ? "block" : t.hasClass("fr-dvi") ? "inline" : null, n = t.hasClass("fr-fvl") ? "left" : t.hasClass("fr-fvr") ? "right" : V(t), Q(t, a, n), t.removeClass("fr-dvb fr-dvi fr-fvr fr-fvl")) } r.toggleClass("fr-draggable", u.opts.videoMove) } } function J(e) { document.getElementById("autoplay-1").style.cssText = "background:".concat(e) } function ee() { if (p) { u.selection.clear(); var e = u.doc.createRange(); e.selectNode(p.get(0)), u.selection.get().addRange(e) } } return i[1] = "Video cannot be loaded from the passed link.", i[h] = "No link in upload response.", i[m] = "Error during file upload.", i[v] = "Parsing response failed.", i[c] = "File is too large.", i[b] = "Video file type is invalid.", i[7] = "Files can be uploaded only to same domain in IE 8 and IE 9.", u.shared.vid_exit_flag = !1, { _init: function te() { u.opts.videoResponsive && (u.opts.videoResize = !1), function e() { u.events.on("drop", K, !0), u.events.on("mousedown window.mousedown", $), u.events.on("window.touchmove", W), u.events.on("mouseup window.mouseup", U), u.events.on("commands.mousedown", function (e) { 0 < e.parents(".fr-toolbar").length && U() }), u.events.on("video.hideResizer commands.undo commands.redo element.dropped", function () { U(!0) }) }(), u.helpers.isMobile() && (u.events.$on(u.$el, "touchstart", "span.fr-video", function () { a = !1 }), u.events.$on(u.$el, "touchmove", function () { a = !0 })), u.events.on("html.set", Z), Z(), u.events.$on(u.$el, "mousedown", "span.fr-video", function (e) { e.stopPropagation(), (u.browser.msie || u.browser.edge) && (e.target.innerText || (e.target.dragDrop(), t.call(this, e))) }), u.events.$on(u.$el, "click touchend", "span.fr-video", function (e) { if (e.target.innerText.length || "false" == g(this).parents("[contenteditable]").not(".fr-element").not(".fr-img-caption").not("body").first().attr("contenteditable")) return !0; t.call(this, e) }), u.events.on("keydown", function (e) { var t = e.which; return !p || t != mt.KEYCODE.BACKSPACE && t != mt.KEYCODE.DELETE ? p && t == mt.KEYCODE.ESC ? (U(!0), e.preventDefault(), !1) : p && t != mt.KEYCODE.F10 && !u.keys.isBrowserAction(e) ? (e.preventDefault(), !1) : void 0 : (e.preventDefault(), q(), u.undo.saveStep(), !1) }, !0), u.events.on("toolbar.esc", function () { if (p) return u.events.disableBlur(), u.events.focus(), !1 }, !0), u.events.on("toolbar.focusEditor", function () { if (p) return !1 }, !0), u.events.on("keydown", function () { u.$el.find("span.fr-video:empty").remove() }), u.$wp && (B(), u.events.on("contentChanged", B)), o(!0), z(!0) }, showInsertPopup: function ae() { var e = u.$tb.find('.fr-command[data-cmd="insertVideo"]'), t = u.popups.get("video.insert"); if (t || (t = o()), y(), !t.hasClass("fr-active")) if (u.popups.refresh("video.insert"), u.popups.setContainer("video.insert", u.$tb), e.isVisible()) { var a = u.button.getPosition(e), n = a.left, i = a.top; u.popups.show("video.insert", n, i, e.outerHeight()) } else u.position.forSelection(t), u.popups.show("video.insert") }, showLayer: function ne(e) { var t, a, n = u.popups.get("video.insert"); if (!p && !u.opts.toolbarInline) { var i = u.$tb.find('.fr-command[data-cmd="insertVideo"]'); t = i.offset().left, a = i.offset().top + (u.opts.toolbarBottom ? 10 : i.outerHeight() - 10) } u.opts.toolbarInline && (a = n.offset().top - u.helpers.getPX(n.css("margin-top")), n.hasClass("fr-above") && (a += n.outerHeight())), n.find(".fr-layer").removeClass("fr-active"), n.find(".fr-".concat(e, "-layer")).addClass("fr-active"), u.popups.show("video.insert", t, a, 0), u.accessibility.focusPopup(n) }, refreshByURLButton: function ie(e) { var t = u.popups.get("video.insert"); t && t.find(".fr-video-by-url-layer").hasClass("fr-active") && e.addClass("fr-active").attr("aria-pressed", !0) }, refreshEmbedButton: function re(e) { var t = u.popups.get("video.insert"); t && t.find(".fr-video-embed-layer").hasClass("fr-active") && e.addClass("fr-active").attr("aria-pressed", !0) }, refreshUploadButton: function oe(e) { var t = u.popups.get("video.insert"); t && t.find(".fr-video-upload-layer").hasClass("fr-active") && e.addClass("fr-active").attr("aria-pressed", !0) }, upload: H, insertByURL: function se(e) { var t = !!document.getElementById("videoPluginAutoplay") && document.getElementById("videoPluginAutoplay").checked; void 0 === e && (e = (u.popups.get("video.insert").find('.fr-video-by-url-layer input[type="text"]').val() || "").trim()); var a = null; if (/^http/.test(e) || (e = "https://".concat(e)), u.helpers.isURL(e)) for (var n = 0; n < mt.VIDEO_PROVIDERS.length; n++) { var i = mt.VIDEO_PROVIDERS[n], r = "autoplay=1"; if (i.html.includes("autoplay=1") && document.getElementById("videoPluginAutoplay").checked) i.html = i.html, document.getElementById("videoPluginAutoplay").checked = !1; else if (t) { var o = i.html.indexOf("{url}") + 5; i.html = [i.html.slice(0, o), r, i.html.slice(o)].join(""), t = !1, document.getElementById("videoPluginAutoplay").checked = !1 } else (i = mt.VIDEO_PROVIDERS[n]).html = i.html.replace(r, ""); if (i.test_regex.test(e) && new RegExp(u.opts.videoAllowedProviders.join("|")).test(i.provider)) { a = e.replace(i.url_regex, i.url_text), a = i.html.replace(/\{url\}/, a); break } } a ? A(a) : (S(u.language.translate("Something went wrong. Please try again.")), u.events.trigger("video.linkError", [e])) }, insertEmbed: function le(e) { void 0 === e && (e = u.popups.get("video.insert").find(".fr-video-embed-layer textarea").val() || ""), 0 !== e.length && mt.VIDEO_EMBED_REGEX.test(e) ? A(e) : (S(u.language.translate("Something went wrong. Please try again.")), u.events.trigger("video.codeError", [e])) }, insert: A, align: function ce(e) { p.removeClass("fr-fvr fr-fvl"), !u.opts.htmlUntouched && u.opts.useClasses ? "left" == e ? p.addClass("fr-fvl") : "right" == e && p.addClass("fr-fvr") : Q(p, j(), e), ee(), P(), r(), u.selection.clear() }, refreshAlign: function de(e) { if (!p) return !1; e.find(">*").first().replaceWith(u.icon.create("video-align-".concat(V()))) }, refreshAlignOnShow: function fe(e, t) { p && t.find('.fr-command[data-param1="'.concat(V(), '"]')).addClass("fr-active").attr("aria-selected", !0) }, display: function pe(e) { p.removeClass("fr-dvi fr-dvb"), !u.opts.htmlUntouched && u.opts.useClasses ? "inline" == e ? p.addClass("fr-dvi") : "block" == e && p.addClass("fr-dvb") : Q(p, e, V()), ee(), P(), r(), u.selection.clear() }, refreshDisplayOnShow: function ue(e, t) { p && t.find('.fr-command[data-param1="'.concat(j(), '"]')).addClass("fr-active").attr("aria-selected", !0) }, remove: q, hideProgressBar: y, showSizePopup: function ge() { var e = u.popups.get("video.size"); e || (e = z()), y(), u.popups.refresh("video.size"), u.popups.setContainer("video.size", u.$sc); var t = p.find("iframe, embed, ".concat(p.find("iframe, embed, audio").get(0) ? "audio" : "video")), a = t.offset().left + t.outerWidth() / 2, n = t.offset().top + t.height(); u.popups.show("video.size", a, n, t.height(), !0) }, replace: function he() { var e = u.popups.get("video.insert"); e || (e = o()), u.popups.isVisible("video.insert") || (y(), u.popups.refresh("video.insert"), u.popups.setContainer("video.insert", u.$sc)); var t = p.offset().left + p.outerWidth() / 2, a = p.offset().top + p.height(); u.popups.show("video.insert", t, a, p.outerHeight(), !0) }, back: function e() { p ? (u.events.disableBlur(), p[0].click()) : (u.events.disableBlur(), u.selection.restore(), u.events.enableBlur(), u.popups.hide("video.insert"), u.toolbar.showInline()) }, setSize: function me(e, t) { if (p) { var a = u.popups.get("video.size"), n = p.find("iframe, embed, ".concat(p.find("iframe, embed, audio").get(0) ? "audio" : "video")); n.css("width", e || a.find('input[name="width"]').val()), n.css("height", t || a.find('input[name="height"]').val()), n.get(0).style.width && n.removeAttr("width"), n.get(0).style.height && n.removeAttr("height"), a.find("input:focus").blur(), setTimeout(function () { p.trigger("click") }, u.helpers.isAndroid() ? 50 : 0) } }, get: function ve() { return p }, showProgressBar: R, _editVideo: L, setAutoplay: function be() { var e; if (p.find("iframe, embed, audio").get(0)) (e = p.find("iframe, embed, audio")).get(0).src.includes("autoplay=1") ? (J("#FFFFFF"), e.get(0).src = e.get(0).src.replace("autoplay=1", "")) : (J("#D6D6D6"), e.get(0).src = e.get(0).src + "&autoplay=1"); else if ((e = p.find("iframe, embed, video")).get(0).outerHTML.includes("autoplay")) J("#FFFFFF"), e.get(0).outerHTML = e.get(0).outerHTML.replace("autoplay", ""); else { J("#D6D6D6"); var t = e.get(0).outerHTML.indexOf("class") - 1; e.get(0).outerHTML = [e.get(0).outerHTML.slice(0, t), "autoplay", e.get(0).outerHTML.slice(t)].join("") } } } }, mt.RegisterCommand("insertVideo", { title: "Insert Video", undo: !1, focus: !0, refreshAfterCallback: !1, popup: !0, callback: function () { this.popups.isVisible("video.insert") ? (this.$el.find(".fr-marker").length && (this.events.disableBlur(), this.selection.restore()), this.popups.hide("video.insert")) : this.video.showInsertPopup() }, plugin: "video" }), mt.DefineIcon("insertVideo", { NAME: "video-camera", FA5NAME: "camera", SVG_KEY: "insertVideo" }), mt.DefineIcon("videoByURL", { NAME: "link", SVG_KEY: "insertLink" }), mt.RegisterCommand("videoByURL", { title: "By URL", undo: !1, focus: !1, toggle: !0, callback: function () { this.video.showLayer("video-by-url") }, refresh: function (e) { this.video.refreshByURLButton(e) } }), mt.DefineIcon("videoEmbed", { NAME: "code", SVG_KEY: "codeView" }), mt.RegisterCommand("videoEmbed", { title: "Embedded Code", undo: !1, focus: !1, toggle: !0, callback: function () { this.video.showLayer("video-embed") }, refresh: function (e) { this.video.refreshEmbedButton(e) } }), mt.DefineIcon("videoUpload", { NAME: "upload", SVG_KEY: "upload" }), mt.RegisterCommand("videoUpload", { title: "Upload Video", undo: !1, focus: !1, toggle: !0, callback: function () { this.video.showLayer("video-upload") }, refresh: function (e) { this.video.refreshUploadButton(e) } }), mt.RegisterCommand("videoInsertByURL", { undo: !0, focus: !0, callback: function () { this.video.insertByURL() } }), mt.RegisterCommand("videoInsertEmbed", { undo: !0, focus: !0, callback: function () { this.video.insertEmbed() } }), mt.DefineIcon("videoDisplay", { NAME: "star", SVG_KEY: "star" }), mt.RegisterCommand("videoDisplay", { title: "Display", type: "dropdown", options: { inline: "Inline", block: "Break Text" }, callback: function (e, t) { this.video.display(t) }, refresh: function (e) { this.opts.videoTextNear || e.addClass("fr-hidden") }, refreshOnShow: function (e, t) { this.video.refreshDisplayOnShow(e, t) } }), mt.DefineIcon("video-align", { NAME: "align-left", SVG_KEY: "align Left" }), mt.DefineIcon("video-align-left", { NAME: "align-left", SVG_KEY: "alignLeft" }), mt.DefineIcon("video-align-right", { NAME: "align-right", SVG_KEY: "alignRight" }), mt.DefineIcon("video-align-center", { NAME: "align-justify", SVG_KEY: "alignJustify" }), mt.DefineIcon("videoAlign", { NAME: "align-center", SVG_KEY: "alignCenter" }), mt.RegisterCommand("videoAlign", { type: "dropdown", title: "Align", options: { left: "Align Left", center: "None", right: "Align Right" }, html: function () { var e = '<ul class="fr-dropdown-list" role="presentation">', t = mt.COMMANDS.videoAlign.options; for (var a in t) t.hasOwnProperty(a) && (e += '<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="videoAlign" data-param1="'.concat(a, '" title="').concat(this.language.translate(t[a]), '">').concat(this.icon.create("video-align-".concat(a)), '<span class="fr-sr-only">').concat(this.language.translate(t[a]), "</span></a></li>")); return e += "</ul>" }, callback: function (e, t) { this.video.align(t) }, refresh: function (e) { this.video.refreshAlign(e) }, refreshOnShow: function (e, t) { this.video.refreshAlignOnShow(e, t) } }), mt.DefineIcon("videoReplace", { NAME: "exchange", FA5NAME: "exchange-alt", SVG_KEY: "replaceImage" }), mt.RegisterCommand("videoReplace", { title: "Replace", undo: !1, focus: !1, popup: !0, refreshAfterCallback: !1, callback: function () { this.video.replace() } }), mt.DefineIcon("videoRemove", { NAME: "trash", SVG_KEY: "remove" }), mt.RegisterCommand("videoRemove", { title: "Remove", callback: function () { this.video.remove() } }), mt.DefineIcon("autoplay", { NAME: "autoplay", SVG_KEY: "autoplay" }), mt.RegisterCommand("autoplay", { undo: !1, focus: !1, popup: !0, title: "Autoplay", callback: function () { this.video.setAutoplay() } }), mt.DefineIcon("videoSize", { NAME: "arrows-alt", SVG_KEY: "imageSize" }), mt.RegisterCommand("videoSize", { undo: !1, focus: !1, popup: !0, title: "Change Size", callback: function () { this.video.showSizePopup() } }), mt.DefineIcon("videoBack", { NAME: "arrow-left", SVG_KEY: "back" }), mt.RegisterCommand("videoBack", { title: "Back", undo: !1, focus: !1, back: !0, callback: function () { this.video.back() }, refresh: function (e) { this.video.get() || this.opts.toolbarInline ? (e.removeClass("fr-hidden"), e.next(".fr-separator").removeClass("fr-hidden")) : (e.addClass("fr-hidden"), e.next(".fr-separator").addClass("fr-hidden")) } }), mt.RegisterCommand("videoDismissError", { title: "OK", undo: !1, callback: function () { this.video.hideProgressBar(!0) } }), mt.RegisterCommand("videoSetSize", { undo: !0, focus: !1, title: "Update", refreshAfterCallback: !1, callback: function () { this.video.setSize() } }), Object.assign(mt.DEFAULTS, { wordDeniedTags: [], wordDeniedAttrs: [], wordAllowedStyleProps: ["font-family", "font-size", "background", "color", "width", "text-align", "vertical-align", "background-color", "padding", "margin", "height", "margin-top", "margin-left", "margin-right", "margin-bottom", "text-decoration", "font-weight", "font-style", "text-indent", "border", "border-.*", "line-height", "list-style-type"], wordPasteModal: !0, wordPasteKeepFormatting: !0 }), mt.PLUGINS.wordPaste = function (C) { var o, i, c = C.$, s = "word_paste", p = {}; function t(e) { var t = C.opts.wordAllowedStyleProps; e || (C.opts.wordAllowedStyleProps = []), 0 === i.indexOf("<colgroup>") && (i = "<table>" + i + "</table>"), i = r(i = i.replace(/<span[\n\r ]*style='mso-spacerun:yes'>([\r\n\u00a0 ]*)<\/span>/g, function (e, t) { for (var a = "", n = 0; n++ < t.length;)a += "&nbsp;"; return a }), C.paste.getRtfClipboard()); var a = C.doc.createElement("DIV"); a.innerHTML = i, C.html.cleanBlankSpaces(a), i = a.innerHTML, i = (i = C.paste.cleanEmptyTagsAndDivs(i)).replace(/\u200b/g, ""), function n() { C.modals.hide(s) }(), C.paste.clean(i, !0, !0), C.opts.wordAllowedStyleProps = t } function T(e) { e.parentNode && e.parentNode.removeChild(e) } function u(e, t) { if (t(e)) for (var a = e.firstChild; a;) { var n = a, i = a.previousSibling; a = a.nextSibling, u(n, t), n.previousSibling || n.nextSibling || n.parentNode || !a || i === a.previousSibling || !a.parentNode ? n.previousSibling || n.nextSibling || n.parentNode || !a || a.previousSibling || a.nextSibling || a.parentNode || (i ? a = i.nextSibling ? i.nextSibling.nextSibling : null : e.firstChild && (a = e.firstChild.nextSibling)) : a = i ? i.nextSibling : e.firstChild } } function x(e) { if (!e.getAttribute("style") || !/mso-list:[\s]*l/gi.test(e.getAttribute("style").replace(/\n/gi, ""))) return !1; try { if (!e.querySelector('[style="mso-list:Ignore"]')) return !!(e.outerHTML && 0 <= e.outerHTML.indexOf("\x3c!--[if !supportLists]--\x3e")) } catch (t) { return !1 } return !0 } function O(e) { return e.getAttribute("style").replace(/\n/gi, "").replace(/.*level([0-9]+?).*/gi, "$1") } function k(e, n) { var t = e.cloneNode(!0); if (-1 !== ["H1", "H2", "H3", "H4", "H5", "H6"].indexOf(e.tagName)) { var a = document.createElement(e.tagName.toLowerCase()); a.setAttribute("style", e.getAttribute("style")), a.innerHTML = t.innerHTML, t.innerHTML = a.outerHTML } u(t, function (e) { if (e.nodeType == Node.COMMENT_NODE && (C.browser.msie || C.browser.safari || C.browser.edge)) try { if ("[if !supportLists]" === e.data) { for (e = e.nextSibling; e && e.nodeType !== Node.COMMENT_NODE;) { var t = e.nextSibling; e.parentNode.removeChild(e), e = t } e && e.nodeType == Node.COMMENT_NODE && e.parentNode.removeChild(e) } } catch (a) { } return e.nodeType === Node.ELEMENT_NODE && ("mso-list:\nIgnore" === e.getAttribute("style") && e.setAttribute("style", "mso-list:Ignore"), "mso-list:Ignore" === e.getAttribute("style") && e.parentNode.removeChild(e), e.setAttribute("style", function i(e) { var a = "", n = e.getAttribute("style"); n && ["line-height", "font-family", "font-size", "color", "background"].forEach(function (e) { var t = n.match(new RegExp(e + ":.*(;|)")); t && (a += t[0] + ";") }); return a }(e)), m(e, n)), !0 }); var i = t.innerHTML; return i = i.replace(/<!--[\s\S]*?-->/gi, "") } function E(e, t) { for (var a = document.createElement(t), n = 0; n < e.attributes.length; n++) { var i = e.attributes[n].name; a.setAttribute(i, e.getAttribute(i)) } return a.innerHTML = e.innerHTML, e.parentNode.replaceChild(a, e), a } function R(e) { var t = e.getAttribute("align"); t && (e.style["text-align"] = t, e.removeAttribute("align")) } function y(e) { return e.replace(/\n|\r|\n\r|&quot;/g, "") } function w(e, t, a) { if (t) { var n = e.getAttribute("style"); n && ";" !== n.slice(-1) && (n += ";"), t && ";" !== t.slice(-1) && (t += ";"), t = t.replace(/\n/gi, ""); var i = null; i = a ? (n || "") + t : t + (n || ""), e.setAttribute("style", i) } } var g = null; function d(e, t, a) { for (var n = e.split(a), i = 1; i < n.length; i++) { var r = n[i]; if (1 < (r = r.split("shplid")).length) { r = r[1]; for (var o = "", s = 0; s < r.length && "\\" !== r[s] && "{" !== r[s] && " " !== r[s] && "\r" !== r[s] && "\n" !== r[s];)o += r[s], s++; var l = r.split("bliptag"); if (l && l.length < 2) continue; var c = null; if (-1 !== l[0].indexOf("pngblip") ? c = "image/png" : -1 !== l[0].indexOf("jpegblip") && (c = "image/jpeg"), !c) continue; var d = l[1].split("}"); if (d && d.length < 2) continue; var f = void 0; if (2 < d.length && -1 !== d[0].indexOf("blipuid")) f = d[1].split(" "); else { if ((f = d[0].split(" ")) && f.length < 2) continue; f.shift() } var p = f.join(""); g[t + o] = { image_hex: p, image_type: c } } } } function h(e, t) { if (t) { var a; if ("IMG" === e.tagName) { var n = e.getAttribute("src"); if (!n || -1 === n.indexOf("file://")) return; if (0 === n.indexOf("file://") && C.helpers.isURL(e.getAttribute("alt"))) return void e.setAttribute("src", e.getAttribute("alt")); (a = p[e.getAttribute("v:shapes")]) || (a = e.getAttribute("v:shapes"), e.parentNode && e.parentNode.parentNode && 0 <= e.parentNode.parentNode.innerHTML.indexOf("msEquation") && (a = null)) } else a = e.parentNode.getAttribute("o:spid"); if (e.removeAttribute("height"), a) { !function s(e) { g = {}, d(e, "i", "\\shppict"), d(e, "s", "\\shp{") }(t); var i = g[a.substring(7)]; if (i) { var r = function l(e) { for (var t = e.match(/[0-9a-f]{2}/gi), a = [], n = 0; n < t.length; n++)a.push(String.fromCharCode(parseInt(t[n], 16))); var i = a.join(""); return btoa(i) }(i.image_hex), o = "data:" + i.image_type + ";base64," + r; "IMG" === e.tagName ? (e.src = o, e.setAttribute("data-fr-image-pasted", !0)) : c(e.parentNode).before('<img data-fr-image-pasted="true" src="' + o + '" style="' + e.parentNode.getAttribute("style") + '">').remove() } } } } function m(e, t) { var a = e.tagName, n = a.toLowerCase(); e.firstElementChild && ("I" === e.firstElementChild.tagName ? E(e.firstElementChild, "em") : "B" === e.firstElementChild.tagName && E(e.firstElementChild, "strong")); if (-1 !== ["SCRIPT", "APPLET", "EMBED", "NOFRAMES", "NOSCRIPT"].indexOf(a)) return T(e), !1; for (var i = ["META", "LINK", "XML", "ST1:", "O:", "W:", "FONT"], r = 0; r < i.length; r++)if (-1 !== a.indexOf(i[r])) return e.innerHTML && (e.outerHTML = e.innerHTML), T(e), !1; if ("TD" !== a) { var o = e.getAttribute("class") || "MsoNormal"; if (t && o) { for (var s = (o = y(o)).split(" "), l = 0; l < s.length; l++) { var c = [], d = "." + s[l]; c.push(d), d = n + d, c.push(d); for (var f = 0; f < c.length; f++)t[c[f]] && w(e, t[c[f]]) } e.removeAttribute("class") } t && t[n] && w(e, t[n]) } if (-1 !== ["P", "H1", "H2", "H3", "H4", "H5", "H6", "PRE"].indexOf(a)) { var p = e.getAttribute("class"); if (p && (t && t[a.toLowerCase() + "." + p] && w(e, t[a.toLowerCase() + "." + p]), -1 !== p.toLowerCase().indexOf("mso"))) { var u = y(p); (u = u.replace(/[0-9a-z-_]*mso[0-9a-z-_]*/gi, "")) ? e.setAttribute("class", u) : e.removeAttribute("class") } var g = e.getAttribute("style"); if (g) { var h = g.match(/text-align:.+?[; "]{1,1}/gi); h && h[h.length - 1].replace(/(text-align:.+?[; "]{1,1})/gi, "$1") } R(e) } if ("TR" === a && function A(e, t) { C.node.clearAttributes(e); for (var a = e.firstElementChild, n = 0, i = !1, r = null; a;) { a.firstElementChild && -1 !== a.firstElementChild.tagName.indexOf("W:") && (a.innerHTML = a.firstElementChild.innerHTML), (r = a.getAttribute("width")) || i || (i = !0), n += parseInt(r, 10), (!a.firstChild || a.firstChild && a.firstChild.data === mt.UNICODE_NBSP) && (a.firstChild && T(a.firstChild), a.innerHTML = "<br>"); for (var o = a.firstElementChild, s = 1 === a.children.length; o;)"P" !== o.tagName || x(o) || s && R(o), o = o.nextElementSibling; if (t) { var l = a.getAttribute("class"); if (l) { var c = (l = y(l)).match(/xl[0-9]+/gi); if (c) { var d = "." + c[0]; t[d] && w(a, t[d]) } } t.td && w(a, t.td) } var f = a.getAttribute("style"); f && (f = y(f)) && ";" !== f.slice(-1) && (f += ";"); var p = a.getAttribute("valign"); if (!p && f) { var u = f.match(/vertical-align:.+?[; "]{1,1}/gi); u && (p = u[u.length - 1].replace(/vertical-align:(.+?)[; "]{1,1}/gi, "$1")) } var g = null; if (f) { var h = f.match(/text-align:.+?[; "]{1,1}/gi); h && (g = h[h.length - 1].replace(/text-align:(.+?)[; "]{1,1}/gi, "$1")), "general" === g && (g = null) } var m = null; if (f) { var v = f.match(/background:.+?[; "]{1,1}/gi); v && (m = v[v.length - 1].replace(/background:(.+?)[; "]{1,1}/gi, "$1")) } var b = a.getAttribute("colspan"), E = a.getAttribute("rowspan"); b && a.setAttribute("colspan", b), E && a.setAttribute("rowspan", E), p && (a.style["vertical-align"] = p), g && (a.style["text-align"] = g), m && (a.style["background-color"] = m), r && a.setAttribute("width", r), a = a.nextElementSibling } for (a = e.firstElementChild; a;)r = a.getAttribute("width"), i ? a.removeAttribute("width") : a.setAttribute("width", 100 * parseInt(r, 10) / n + "%"), a = a.nextElementSibling }(e, t), "A" !== a || e.attributes.getNamedItem("href") || e.attributes.getNamedItem("name") || !e.innerHTML || (e.outerHTML = e.innerHTML), "A" == a && e.getAttribute("href") && e.querySelector("img")) for (var m = e.querySelectorAll("span"), v = 0; v < m.length; v++)m[v].innerText || (m[v].outerHTML = m[v].innerHTML); if ("TD" !== a && "TH" !== a || e.innerHTML || (e.innerHTML = "<br>"), "TABLE" === a && (e.style.width = e.style.width), e.getAttribute("lang") && e.removeAttribute("lang"), e.getAttribute("style") && -1 !== e.getAttribute("style").toLowerCase().indexOf("mso")) { var b = y(e.getAttribute("style")); (b = b.replace(/[0-9a-z-_]*mso[0-9a-z-_]*:.+?(;{1,1}|$)/gi, "")) ? e.setAttribute("style", b) : e.removeAttribute("style") } return !0 } function r(e, t) { 0 <= e.indexOf("<html") && (e = e.replace(/[.\s\S\w\W<>]*(<html[^>]*>[.\s\S\w\W<>]*<\/html>)[.\s\S\w\W<>]*/i, "$1")), function d(e) { for (var t = e.split("v:shape"), a = 1; a < t.length; a++) { var n = t[a], i = n.split(' id="')[1]; if (i && 1 < i.length) { i = i.split('"')[0]; var r = n.split(' o:spid="')[1]; r && 1 < r.length && (r = r.split('"')[0], p[i] = r) } } }(e); var a = (new DOMParser).parseFromString(e, "text/html"), n = a.head, i = a.body, s = function f(e) { var t = {}, a = e.getElementsByTagName("style"); if (a.length) { var n = a[0].innerHTML.match(/[\S ]+\s+{[\s\S]+?}/gi); if (n) for (var i = 0; i < n.length; i++) { var r = n[i], o = r.replace(/([\S ]+\s+){[\s\S]+?}/gi, "$1"), s = r.replace(/[\S ]+\s+{([\s\S]+?)}/gi, "$1"); o = o.replace(/^[\s]|[\s]$/gm, ""), s = s.replace(/^[\s]|[\s]$/gm, ""), o = o.replace(/\n|\r|\n\r/g, ""), s = s.replace(/\n|\r|\n\r/g, ""); for (var l = o.split(", "), c = 0; c < l.length; c++)t[l[c]] = s } } return t }(n); u(i, function (e) { if (e.nodeType === Node.TEXT_NODE && /\n|\u00a0|\r/.test(e.data)) { if (!/\S| /.test(e.data) && !/[\u00a0]+/.test(e.data)) return e.data === mt.UNICODE_NBSP ? (e.data = "\u200b", !0) : 1 === e.data.length && 10 === e.data.charCodeAt(0) ? (e.data = " ", !0) : (T(e), !1); e.data = e.data.replace(/\n|\r/gi, " ") } return !0 }), u(i, function (e) { return e.nodeType !== Node.ELEMENT_NODE || "V:IMAGEDATA" !== e.tagName && "IMG" !== e.tagName || h(e, t), !0 }); for (var r = i.querySelectorAll("ul > ul, ul > ol, ol > ul, ol > ol"), o = r.length - 1; 0 <= o; o--)r[o].previousElementSibling && "LI" === r[o].previousElementSibling.tagName && r[o].previousElementSibling.appendChild(r[o]); u(i, function (e) { if (e.nodeType === Node.TEXT_NODE) return e.data = e.data.replace(/<br>(\n|\r)/gi, "<br>"), !1; if (e.nodeType === Node.ELEMENT_NODE) { if (x(e)) { var t = e.parentNode, a = e.previousSibling, n = function I(e, t, a, n) { var i, r, o = /[0-9a-zA-Z]./gi, s = !1, l = navigator.userAgent.toLowerCase(); -1 != l.indexOf("safari") && (l = -1 < l.indexOf("chrome") ? 1 : "safari"), e.innerHTML.includes("mso-list:\nIgnore") && (e.innerHTML = e.innerHTML.replace(/mso-list:\nIgnore/gi, "mso-list:Ignore")); var c, d, f, p, u = e.querySelector('span[style="mso-list:Ignore"]'); null == u && "safari" == l && (u = e.querySelector('span[lang="PT-BR"]')); var g; u && (s = s || o.test(u.textContent)), null !== u && (g = u.textContent.trim().split(".")[0]), f = 1 == s ? ("1" == (g = u.textContent.trim().split(".")[0]) ? p = "decimal;" : "i" == g ? p = "lower-roman;" : "I" == g ? p = "upper-roman;" : "o" == g ? p = "circle;" : g.match(/^v$/) || (g.match(/^[a-z]$/) || g.match(/^[a-z]\)$/) ? p = "lower-alpha;" : (g.match(/^[A-Z]$/) || g.match(/^[A-Z]\)$/)) && (p = "upper-alpha;")), p = "list-style-type: " + p, "ol") : (null != u && (g = u.textContent.trim().split(".")[0]), "\xa7" == g ? p = "square;" : "\xb7" == g && (p = "disc;"), p = "list-style-type: " + p, "ul"); var h, m = ""; u == undefined || u.textContent == undefined || isNaN(parseInt(u.textContent.trim().split(".")[1], 10)) || (m = ' class="decimal_type" '); var v, b = O(e), E = e.style.marginLeft; if (E.includes("in") ? (v = "in", E = parseFloat(E) - .5) : E.includes("pt") && (v = "px", E = parseFloat(E) - 10), 1 == b) if (h = p ? "<" + f + ' style = "' + p + "; margin-left:" + E + v + ';">' : "<" + f + ' style="margin-left:' + E + v + ';">', "list-style-type: upper-alpha;" == p) { var A = g.charCodeAt(0) - 64; h = p ? "<" + f + m + ' start="' + A + '" style = "' + p + " margin-left:" + E + v + ';">' : "<" + f + ">" } else if ("list-style-type: lower-alpha;" == p) { var C = g.charCodeAt(0) - 96; h = p ? "<" + f + m + ' start="' + C + '" style = "' + p + "margin-left:" + E + v + ';">' : "<" + f + ">" } else h = p ? "<" + f + m + ' style = "' + p + ";margin-left:" + E + v + ';">' : "<" + f + ' style="margin-left:' + E + v + ';">'; else if ("list-style-type: upper-alpha;" == p) { var T = g.charCodeAt(0) - 64; h = p ? "<" + f + m + ' style = "' + p + ' start="' + T + '">' : "<" + f + ">" } else if ("list-style-type: lower-alpha;" == p) { var R = g.charCodeAt(0) - 96; h = p ? "<" + f + m + ' style = "' + p + ' start="' + R + '">' : "<" + f + ">" } else h = p ? "<" + f + m + ' style = "' + p + '">' : "<" + f + ">"; for (var y = !1; e;) { if (!x(e)) { if (e.outerHTML && 0 < e.outerHTML.indexOf("mso-bookmark") && 0 == (e.textContent || "").length) { e = e.nextElementSibling; continue } break } var w = O(e); if ((a = a || w) < w) h += (d = I(e, t, w, e.style.marginLeft)).el.outerHTML, e = d.currentNode; else { if (w < a) break; e.firstElementChild && e.firstElementChild.firstElementChild && e.firstElementChild.firstElementChild.firstChild && (o.lastIndex = 0), r && r.firstElementChild && r.firstElementChild.firstElementChild && r.firstElementChild.firstElementChild.firstChild && (o.lastIndex = 0, i = o.test(r.firstElementChild.firstElementChild.firstChild.data || r.firstElementChild.firstElementChild.firstChild.firstChild && r.firstElementChild.firstElementChild.firstChild.firstChild.data || "")); var S = !1; (!n && !e.style.marginLeft || n && e.style.marginLeft && n === e.style.marginLeft) && (S = !0), n = e.style.marginLeft, S || i === undefined ? (c = k(e, t), e.nextSibling.innerText == undefined || e.nextSibling.innerText == undefined || h.includes('class="decimal_type"') || isNaN(parseInt(e.nextSibling.innerText.trim().split(".")[1], 10)) || (h = h.substring(3, 0) + ' class="decimal_type"' + h.substring(3, h.length)), h += "<li>" + c + "</li>") : (1 == w && (h += "</" + f + ">", y = !0, r = null), h += (d = I(e, t, w, e.style.marginLeft)).el.outerHTML, e = d.currentNode); var L = e && e.nextElementSibling; if (L && (r = L.previousElementSibling), e && !x(e)) { if (e.outerHTML && 0 < e.outerHTML.indexOf("mso-bookmark") && 0 == (e.textContent || "").length) { e = e.nextElementSibling; continue } break } e && e.parentNode && e.parentNode.removeChild(e), e = L } } y || (h += "</" + f + ">"); var _ = document.createElement("div"); return _.innerHTML = h, { el: _, currentNode: e } }(e, s).el, i = null; return (i = a ? a.nextSibling : t.firstChild) ? t.insertBefore(n, i) : t.appendChild(n), !1 } return "FONT" === e.tagName && s["." + e.getAttribute("class")] && (e = E(e, "span")), m(e, s) } if (e.nodeType !== Node.COMMENT_NODE) return !0; if (-1 < e.data.indexOf("[if !supportLineBreakNewLine]")) for (var r = e.nextSibling; r;)(r = e.nextSibling) && T(r), r.data && -1 < r.data.indexOf("[endif]") && (r = null); if (-1 < e.data.indexOf("[if supportFields]") && -1 < e.data.indexOf("FORMCHECKBOX")) { var o = document.createElement("input"); o.type = "checkbox", e.parentNode.insertBefore(o, e.nextSibling) } return T(e), !1 }), u(i, function (e) { if (e.nodeType === Node.ELEMENT_NODE) { var t = e.tagName; if (!e.innerHTML && -1 === ["BR", "IMG", "INPUT"].indexOf(t)) { for (var a = e.parentNode; a && (T(e), !(e = a).innerHTML);)a = e.parentNode; return !1 } !function d(e) { var t = e.getAttribute("style"); if (t) { (t = y(t)) && ";" !== t.slice(-1) && (t += ";"); var a = t.match(/(^|\S+?):.+?;{1,1}/gi); if (a) { for (var n = {}, i = 0; i < a.length; i++) { var r = a[i].split(":"); 2 === r.length && ("text-align" === r[0] && "SPAN" === e.tagName || (n[r[0]] = r[1])) } var o = ""; for (var s in n) if (n.hasOwnProperty(s)) { if ("font-size" === s && "pt;" === n[s].slice(-3)) { var l = null; try { l = parseFloat(n[s].slice(0, -3), 10) } catch (c) { l = null } l && (l = Math.round(1.33 * l), n[s] = l + "px;") } o += s + ":" + n[s] } o && e.setAttribute("style", o) } } }(e) } return !0 }), u(i, function (e) { if (e && "A" === e.nodeName && "" === e.href) { for (var t = document.createDocumentFragment(); e.firstChild;)t.appendChild(e.firstChild); e.parentNode.replaceChild(t, e) } return !0 }); var l = i.outerHTML, c = C.opts.htmlAllowedStyleProps; return C.opts.htmlAllowedStyleProps = C.opts.wordAllowedStyleProps, l = C.clean.html(l, C.opts.wordDeniedTags, C.opts.wordDeniedAttrs, !1), C.opts.htmlAllowedStyleProps = c, l } return { _init: function e() { C.events.on("paste.wordPaste", function (e) { return i = e, C.opts.wordPasteModal ? function r() { if (!o) { var e = '<h4><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 74.95 73.23" style="height: 25px; vertical-align: text-bottom; margin-right: 5px; display: inline-block"><defs><style>.a{fill:#2a5699;}.b{fill:#fff;}</style></defs><path class="a" d="M615.15,827.22h5.09V834c9.11.05,18.21-.09,27.32.05a2.93,2.93,0,0,1,3.29,3.25c.14,16.77,0,33.56.09,50.33-.09,1.72.17,3.63-.83,5.15-1.24.89-2.85.78-4.3.84-8.52,0-17,0-25.56,0v6.81h-5.32c-13-2.37-26-4.54-38.94-6.81q0-29.8,0-59.59c13.05-2.28,26.11-4.5,39.17-6.83Z" transform="translate(-575.97 -827.22)"/><path class="b" d="M620.24,836.59h28.1v54.49h-28.1v-6.81h22.14v-3.41H620.24v-4.26h22.14V873.2H620.24v-4.26h22.14v-3.41H620.24v-4.26h22.14v-3.41H620.24v-4.26h22.14v-3.41H620.24V846h22.14v-3.41H620.24Zm-26.67,15c1.62-.09,3.24-.16,4.85-.25,1.13,5.75,2.29,11.49,3.52,17.21,1-5.91,2-11.8,3.06-17.7,1.7-.06,3.41-.15,5.1-.26-1.92,8.25-3.61,16.57-5.71,24.77-1.42.74-3.55,0-5.24.09-1.13-5.64-2.45-11.24-3.47-16.9-1,5.5-2.29,10.95-3.43,16.42q-2.45-.13-4.92-.3c-1.41-7.49-3.07-14.93-4.39-22.44l4.38-.18c.88,5.42,1.87,10.82,2.64,16.25,1.2-5.57,2.43-11.14,3.62-16.71Z" transform="translate(-575.97 -827.22)"/></svg> ' + C.language.translate("Word Paste Detected") + "</h4>", t = function i() { var e = '<div class="fr-word-paste-modal" style="padding: 20px 20px 10px 20px;">'; return e += '<p style="text-align: left;">' + C.language.translate("The pasted content is coming from a Microsoft Word document. Do you want to keep the format or clean it up?") + "</p>", e += '<div style="text-align: right; margin-top: 50px;"><button class="fr-remove-word fr-command">' + C.language.translate("Clean") + '</button> <button class="fr-keep-word fr-command">' + C.language.translate("Keep") + "</button></div>", e += "</div>" }(), a = C.modals.create(s, e, t), n = a.$body; o = a.$modal, a.$modal.addClass("fr-middle"), C.events.bindClick(n, "button.fr-remove-word", function () { var e = o.data("instance") || C; e.wordPaste.clean() }), C.events.bindClick(n, "button.fr-keep-word", function () { var e = o.data("instance") || C; e.wordPaste.clean(!0) }), C.events.$on(c(C.o_win), "resize", function () { C.modals.resize(s) }) } C.modals.show(s), C.modals.resize(s) }() : t(C.opts.wordPasteKeepFormatting), !1 }) }, clean: t, _wordClean: r } } });